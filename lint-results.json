[
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/.eslint-local-rules.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/.prettierrc.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/.storybook/main.js",
    "messages": [
      {
        "ruleId": null,
        "nodeType": null,
        "fatal": true,
        "severity": 2,
        "message": "Parsing error: \"parserOptions.project\" has been provided for @typescript-eslint/parser.\nThe file was not found in any of the provided project(s): .storybook/main.js"
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 1,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "/** @type { import('@storybook/react-vite').StorybookConfig } */\nconst config = {\n  stories: ['../src/**/*.mdx', '../src/**/*.stories.@(js|jsx|mjs|ts|tsx)'],\n  addons: [\n    '@chromatic-com/storybook',\n    '@storybook/addon-vitest',\n    '@storybook/addon-a11y',\n    '@storybook/addon-docs',\n    '@storybook/addon-onboarding',\n  ],\n  framework: '@storybook/react-vite',\n};\nexport default config;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/.storybook/preview.js",
    "messages": [
      {
        "ruleId": null,
        "nodeType": null,
        "fatal": true,
        "severity": 2,
        "message": "Parsing error: \"parserOptions.project\" has been provided for @typescript-eslint/parser.\nThe file was not found in any of the provided project(s): .storybook/preview.js"
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 1,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import '../src/index.css';\n\n/** @type { import('@storybook/react-vite').Preview } */\nconst preview = {\n  parameters: {\n    controls: {\n      matchers: {\n        color: /(background|color)$/i,\n        date: /Date$/i,\n      },\n    },\n\n    a11y: {\n      // 'todo' - show a11y violations in the test UI only\n      // 'error' - fail CI on a11y violations\n      // 'off' - skip a11y checks entirely\n      test: 'todo',\n    },\n  },\n};\n\nexport default preview;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/.storybook/vitest.setup.js",
    "messages": [
      {
        "ruleId": null,
        "nodeType": null,
        "fatal": true,
        "severity": 2,
        "message": "Parsing error: \"parserOptions.project\" has been provided for @typescript-eslint/parser.\nThe file was not found in any of the provided project(s): .storybook/vitest.setup.js"
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 1,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import * as a11yAddonAnnotations from '@storybook/addon-a11y/preview';\nimport { setProjectAnnotations } from '@storybook/react-vite';\nimport * as projectAnnotations from './preview';\n\n// This is an important step to apply the right configuration when testing your stories.\n// More info at: https://storybook.js.org/docs/api/portable-stories/portable-stories-vitest#setprojectannotations\nsetProjectAnnotations([a11yAddonAnnotations, projectAnnotations]);\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/analyze_tiers.cjs",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-require-imports",
        "severity": 2,
        "message": "A `require()` style import is forbidden.",
        "line": 2,
        "column": 12,
        "nodeType": "CallExpression",
        "messageId": "noRequireImports",
        "endLine": 2,
        "endColumn": 25
      },
      {
        "ruleId": "@typescript-eslint/no-require-imports",
        "severity": 2,
        "message": "A `require()` style import is forbidden.",
        "line": 3,
        "column": 14,
        "nodeType": "CallExpression",
        "messageId": "noRequireImports",
        "endLine": 3,
        "endColumn": 29
      },
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 2,
        "message": "'_getName' is defined but never used.",
        "line": 34,
        "column": 12,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 34,
        "endColumn": 20
      }
    ],
    "suppressedMessages": [],
    "errorCount": 3,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "/* eslint-env node */\nconst fs = require('fs');\nconst path = require('path');\n\nconst logFile = '/tmp/analysis_output.txt';\n// const logFile = path.join(process.cwd(), 'analysis_output.txt');\nconst log = msg => fs.appendFileSync(logFile, msg + '\\n');\n\n// Clear log file\nif (fs.existsSync(logFile)) fs.unlinkSync(logFile);\n\nlog('Starting analysis...');\n\ntry {\n  const streetsPath = path.join(process.cwd(), 'src/data/streets.json');\n  log('Reading file: ' + streetsPath);\n\n  if (!fs.existsSync(streetsPath)) {\n    log('File does not exist!');\n    process.exit(1);\n  }\n\n  const raw = fs.readFileSync(streetsPath, 'utf-8');\n  log('File loaded. Bytes: ' + raw.length);\n\n  const streets = JSON.parse(raw);\n  log('JSON parsed. Items: ' + streets.length);\n\n  // Helper to count points\n  function getPointsCount(street) {\n    return street.geometry.reduce((acc, seg) => acc + seg.length, 0);\n  }\n\n  function _getName(street) {\n    return street.name;\n  }\n\n  // Group by tier\n  const tiers = {};\n  streets.forEach(s => {\n    if (!tiers[s.tier]) tiers[s.tier] = [];\n    tiers[s.tier].push(s);\n  });\n\n  log('Tier Counts:');\n  Object.keys(tiers).forEach(t => log(`Tier ${t}: ${tiers[t].length}`));\n\n  log('\\nRandom Examples per Tier:');\n  Object.keys(tiers).forEach(t => {\n    const samples = tiers[t].slice(0, 3).map(s => `${s.name} (${s.geometry.length} segments)`);\n    log(`Tier ${t}: ${samples.join(', ')}`);\n  });\n\n  const famous = [\n    'La Rambla',\n    'Rambla de Catalunya',\n    \"Portal de l'Ã€ngel\",\n    'Carrer de Petritxol',\n    'Gran Via de les Corts Catalanes',\n    'Passeig de GrÃ cia',\n    'Avinguda Diagonal',\n  ];\n\n  log('\\nChecking specific famous streets:');\n  famous.forEach(name => {\n    const s = streets.find(st => st.name === name || st.name.includes(name));\n    if (s) {\n      log(`${s.name}: Tier ${s.tier}, Total Points: ${getPointsCount(s)}`);\n    } else {\n      log(`${name}: NOT FOUND`);\n    }\n  });\n} catch (e) {\n  log('Error: ' + e.message);\n}\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/commitlint.config.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/e2e/game.spec.ts",
    "messages": [
      {
        "ruleId": null,
        "nodeType": null,
        "fatal": true,
        "severity": 2,
        "message": "Parsing error: \"parserOptions.project\" has been provided for @typescript-eslint/parser.\nThe file was not found in any of the provided project(s): e2e/game.spec.ts"
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 1,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { test, expect } from '@playwright/test';\n\ntest.describe('Game Flow', () => {\n    // Skipping actual e2e/network logic since we don't know if backend is reachable in test env\n    // Testing basic landing page render\n    test('landing page loads', async ({ page }) => {\n        await page.goto('/');\n\n        // Expect title or some text\n        await expect(page).toHaveTitle(/Girify/i);\n\n        // Check for \"Play\" button (either text or role)\n        // Adjust selector based on actual rendering\n        const playButton = page.locator('button', { hasText: /Play/i });\n        if (await playButton.count() > 0) {\n            await expect(playButton).toBeVisible();\n        }\n    });\n});\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/eslint.config.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/playwright.config.ts",
    "messages": [
      {
        "ruleId": null,
        "nodeType": null,
        "fatal": true,
        "severity": 2,
        "message": "Parsing error: \"parserOptions.project\" has been provided for @typescript-eslint/parser.\nThe file was not found in any of the provided project(s): playwright.config.ts"
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 1,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { defineConfig, devices } from '@playwright/test';\n\nexport default defineConfig({\n    testDir: './e2e',\n    fullyParallel: true,\n    forbidOnly: !!process.env.CI,\n    retries: process.env.CI ? 2 : 0,\n    workers: process.env.CI ? 1 : undefined,\n    reporter: 'html',\n    use: {\n        baseURL: 'http://localhost:5173',\n        trace: 'on-first-retry',\n    },\n    projects: [\n        {\n            name: 'chromium',\n            use: { ...devices['Desktop Chrome'] },\n        },\n        // {\n        //   name: 'Mobile Chrome',\n        //   use: { ...devices['Pixel 5'] },\n        // },\n    ],\n    webServer: {\n        command: 'npm run dev',\n        url: 'http://localhost:5173',\n        reuseExistingServer: !process.env.CI,\n        timeout: 120 * 1000,\n    },\n});\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/postcss.config.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/scripts/dedupStreets.js",
    "messages": [
      {
        "ruleId": null,
        "nodeType": null,
        "fatal": true,
        "severity": 2,
        "message": "Parsing error: \"parserOptions.project\" has been provided for @typescript-eslint/parser.\nThe file was not found in any of the provided project(s): scripts/dedupStreets.js"
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 1,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import fs from 'fs';\nimport path from 'path';\nimport { fileURLToPath } from 'url';\nimport { bboxPolygon, multiLineString, booleanDisjoint } from '@turf/turf';\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n\nconst streetsPath = path.join(__dirname, '../src/data/streets.json');\nconst rawStreets = JSON.parse(fs.readFileSync(streetsPath, 'utf8'));\n\nconsole.log(`Original count: ${rawStreets.length}`);\n\n// Barcelona Bounds (approx)\n// SW: 41.32, 2.05\n// NE: 41.47, 2.23\nconst EXTENT = [2.05, 41.32, 2.23, 41.47]; // minX, minY, maxX, maxY\nconst bboxPoly = bboxPolygon(EXTENT);\n\nconst streetMap = new Map();\n\nrawStreets.forEach(street => {\n  // Normalize name\n  let name = street.name.trim();\n  // Remove parentheticals like (central), (lateral)\n  name = name.replace(/\\s*\\(.*?\\)\\s*/g, '').trim();\n  // Normalization quirks?\n  // name = name.replace('Av.', 'Avinguda'); // Optional logic if needed\n\n  if (!streetMap.has(name)) {\n    streetMap.set(name, {\n      id: street.id, // Keep first ID\n      name: name,\n      tier: street.tier,\n      geometry: [],\n    });\n  }\n\n  const entry = streetMap.get(name);\n  // Add all line segments\n  street.geometry.forEach(line => {\n    entry.geometry.push(line);\n  });\n  // Keep lowest tier (1 is best/most important)\n  if (street.tier < entry.tier) {\n    entry.tier = street.tier;\n  }\n});\n\nconst mergedStreets = [];\n\nfor (const street of streetMap.values()) {\n  let isInside = false;\n\n  // Check bounding box overlap\n  try {\n    const coords = street.geometry.map(line => line.map(p => [p[1], p[0]])); // Swap lat/lng to lng/lat\n    const multiLine = multiLineString(coords);\n\n    if (!booleanDisjoint(multiLine, bboxPoly)) {\n      // It intersects or is inside\n      isInside = true;\n    }\n  } catch (e) {\n    console.warn(`Error checking bounds for ${street.name}:`, e.message);\n    if (street.tier <= 2) isInside = true;\n  }\n\n  if (isInside) {\n    mergedStreets.push(street);\n  }\n}\n\nconsole.log(`Merged and Filtered count: ${mergedStreets.length}`);\n\n// Write back\nfs.writeFileSync(streetsPath, JSON.stringify(mergedStreets, null, 2));\nconsole.log('Done.');\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/scripts/export_streets_csv.js",
    "messages": [
      {
        "ruleId": null,
        "nodeType": null,
        "fatal": true,
        "severity": 2,
        "message": "Parsing error: \"parserOptions.project\" has been provided for @typescript-eslint/parser.\nThe file was not found in any of the provided project(s): scripts/export_streets_csv.js"
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 1,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import fs from 'fs';\nimport path from 'path';\n\nconst streetsPath = path.join(process.cwd(), 'src', 'data', 'streets.json');\nconst outputPath = path.join(process.cwd(), 'streets.csv');\n\ntry {\n  const data = fs.readFileSync(streetsPath, 'utf8');\n  const streets = JSON.parse(data);\n\n  // CSV Header\n  let csvContent = 'Tier,Name,Segments\\n';\n\n  // Sort by Tier, then Name\n  streets.sort((a, b) => {\n    if (a.tier !== b.tier) return a.tier - b.tier;\n    return a.name.localeCompare(b.name);\n  });\n\n  streets.forEach(street => {\n    // Escape quotes in names if necessary, though unlikely for street names usually\n    const safeName = street.name.includes(',') ? `\"${street.name}\"` : street.name;\n    csvContent += `${street.tier},${safeName},${street.geometry.length}\\n`;\n  });\n\n  fs.writeFileSync(outputPath, csvContent);\n  console.log(`Exported ${streets.length} streets to ${outputPath}`);\n} catch (err) {\n  console.error('Error exporting CSV:', err);\n}\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/scripts/fetchStreets.js",
    "messages": [
      {
        "ruleId": null,
        "nodeType": null,
        "fatal": true,
        "severity": 2,
        "message": "Parsing error: \"parserOptions.project\" has been provided for @typescript-eslint/parser.\nThe file was not found in any of the provided project(s): scripts/fetchStreets.js"
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 1,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "/* eslint-env node */\n\nimport fs from 'fs';\nimport path from 'path';\n\n// using a different mirror that might be less loaded\nconst OVERPASS_URL = 'https://overpass.kumi.systems/api/interpreter';\n// const OVERPASS_URL = 'https://overpass-api.de/api/interpreter';\n\n// Query for Barcelona streets\n// Focusing on named residential, tertiary, secondary, primary, trunk\n// STRICTLY within Barcelona city limits (admin_level=8)\n// Query for Barcelona streets\n// Focusing on named residential, tertiary, secondary, primary, trunk\n// STRICTLY within Barcelona city limits (admin_level=8)\nconst query = `\n    [out:json][timeout:180];\n    relation(347950);\n    map_to_area->.searchArea;\n    (\n      way[\"highway\"~\"^(primary|trunk|secondary|tertiary|residential|living_street|pedestrian)$\"][\"name\"](area.searchArea);\n    );\n    out geom;\n`;\n\nconst BOUNDARY_QUERY = `\n    [out:json][timeout:180];\n    relation(347950);\n    out geom;\n`;\n\nconst TIER_MAPPING = {\n  trunk: 1,\n  primary: 1,\n  secondary: 2,\n  tertiary: 3,\n  residential: 4,\n  living_street: 4,\n  pedestrian: 4,\n};\n\nasync function fetchStreets() {\n  console.log('Fetching Barcelona streets from Overpass API...');\n\n  let data = null;\n\n  try {\n    const response = await fetch(OVERPASS_URL, {\n      method: 'POST',\n      body: `data=${encodeURIComponent(query)}`,\n    });\n\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n\n    data = await response.json();\n    console.log(`Received ${data.elements.length} street segments.`);\n\n    // Process data if successful\n    const streetsMap = new Map();\n\n    data.elements.forEach(element => {\n      if (!element.tags || !element.tags.name) return;\n\n      let name = element.tags.name.trim();\n      // Normalize: remove parentheticals like (central), (lateral) to deduplicate\n      name = name.replace(/\\s*\\(.*?\\)\\s*/g, '').trim();\n\n      const type = element.tags.highway;\n      // Initial tier from mapping\n      const tier = TIER_MAPPING[type] || 4;\n\n      // Normalize coordinate to [lat, lon] and round to 5 decimals (~1m precision)\n      const geometry = element.geometry.map(p => [\n        Number(p.lat.toFixed(5)),\n        Number(p.lon.toFixed(5)),\n      ]);\n\n      if (!streetsMap.has(name)) {\n        streetsMap.set(name, {\n          name: name,\n          tier: tier,\n          type: type, // Store initial type, though it might differ per segment\n          segments: [],\n        });\n      } else {\n        // If street already exists, check if this segment implies a better (lower) tier\n        const entry = streetsMap.get(name);\n        if (tier < entry.tier) {\n          entry.tier = tier;\n          entry.type = type; // Update type to the more important one\n        }\n      }\n\n      streetsMap.get(name).segments.push(geometry);\n    });\n\n    const streetsRaw = Array.from(streetsMap.values());\n\n    // Recalculate tiers based on full street data (total length)\n    streetsRaw.forEach(street => {\n      const totalPoints = street.segments.reduce((acc, seg) => acc + seg.length, 0);\n\n      // Promote major pedestrian streets\n      if (street.type === 'pedestrian' || street.type === 'living_street') {\n        if (totalPoints > 150) {\n          street.tier = 1; // Major pedestrian hubs (e.g. La Rambla)\n        } else if (totalPoints > 50) {\n          street.tier = 2; // Significant pedestrian streets\n        }\n        // Else remains Tier 4\n      }\n\n      // Optional: Demote very short primary/secondary segments if they are likely noise?\n      // For now, let's stick to promoting pedestrian streets.\n    });\n\n    const streets = streetsRaw.filter(() => {\n      // Keep all streets for now, maybe filter very tiny ones if needed later\n      return true;\n    });\n\n    streets.sort((a, b) => {\n      if (a.tier !== b.tier) return a.tier - b.tier;\n      return b.segments.length - a.segments.length; // Secondary sort by size\n    });\n\n    const finalStreets = [];\n    for (let t = 1; t <= 4; t++) {\n      const tierStreets = streets.filter(s => s.tier === t);\n      console.log(`Tier ${t} count: ${tierStreets.length}`);\n      finalStreets.push(...tierStreets);\n    }\n\n    const simplifiedStreets = finalStreets.map((s, index) => ({\n      id: String(index + 1),\n      name: s.name,\n      tier: s.tier,\n      geometry: s.segments,\n    }));\n\n    const outputPath = path.join(process.cwd(), 'src', 'data', 'streets.json');\n    fs.writeFileSync(outputPath, JSON.stringify(simplifiedStreets, null, 2));\n    console.log(`Saved ${simplifiedStreets.length} streets to ${outputPath}`);\n  } catch (error) {\n    console.error('Error fetching/processing streets:', error);\n  }\n\n  // --- Fetch Boundary ---\n  console.log('Fetching Barcelona boundary...');\n  try {\n    const boundaryResponse = await fetch(OVERPASS_URL, {\n      method: 'POST',\n      body: `data=${encodeURIComponent(BOUNDARY_QUERY)}`,\n    });\n\n    if (!boundaryResponse.ok) {\n      console.error('Failed to fetch boundary, status:', boundaryResponse.status);\n    } else {\n      const text = await boundaryResponse.text();\n      try {\n        const boundaryData = JSON.parse(text);\n        const boundaryRel = boundaryData.elements.find(e => e.type === 'relation');\n\n        let boundaryCoords = [];\n        if (boundaryRel && boundaryRel.members) {\n          boundaryCoords = boundaryRel.members\n            .filter(m => m.role === 'outer' && m.geometry)\n            .map(m => m.geometry.map(p => [p.lat, p.lon]));\n        }\n\n        if (boundaryCoords.length > 0) {\n          const boundaryPath = path.join(process.cwd(), 'src', 'data', 'boundary.json');\n          fs.writeFileSync(boundaryPath, JSON.stringify(boundaryCoords, null, 2));\n          console.log(`Saved boundary to ${boundaryPath}`);\n        } else {\n          console.log('No partial boundary geometry found (might need full relation download).');\n        }\n      } catch (e) {\n        console.error('Failed to parse boundary JSON', e);\n      }\n    }\n  } catch (e) {\n    console.error('Boundary fetch error:', e);\n  }\n  // --- End Boundary Fetch ---\n}\n\nfetchStreets();\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/scripts/generateQuizPlan.js",
    "messages": [
      {
        "ruleId": null,
        "nodeType": null,
        "fatal": true,
        "severity": 2,
        "message": "Parsing error: \"parserOptions.project\" has been provided for @typescript-eslint/parser.\nThe file was not found in any of the provided project(s): scripts/generateQuizPlan.js"
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 1,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "/* eslint-env node */\n/**\n * Quiz Plan Generator\n * Generates a 100-day quiz schedule following all rules:\n * 1. Tier frequency: T1 appears more often (shorter cooldown)\n * 2. Answer exclusion: No street as correct answer on adjacent days\n * 3. Same-type distractors: All options share street prefix\n * 4. Tier-down mixing: Correct can use lower-tier distractors only\n * 5. Daily distribution: 2 T1 + 5 T2/T3 + 3 T4 = 10 questions\n * 6. Geographic coverage: Streets spread across city\n */\n\nimport fs from 'fs';\nimport path from 'path';\n\n// --- Configuration ---\nconst DAYS_TO_GENERATE = 100;\nconst START_DATE = new Date('2026-01-09');\nconst QUESTIONS_PER_DAY = 10;\n\n// Tier distribution per day\nconst TIER_DISTRIBUTION = {\n  tier1: 2,\n  tier23: 5, // Combined T2 + T3\n  tier4: 3,\n};\n\n// Cooldown periods (days before a street can be correct answer again)\nconst COOLDOWNS = {\n  1: 3, // Tier 1: 3 days\n  2: 5, // Tier 2: 5 days\n  3: 7, // Tier 3: 7 days\n  4: 10, // Tier 4: 10 days\n};\n\n// --- Load Streets ---\nconst streetsPath = path.join(process.cwd(), 'src', 'data', 'streets.json');\nconst streets = JSON.parse(fs.readFileSync(streetsPath, 'utf8'));\n\nconsole.log(`Loaded ${streets.length} streets`);\n\n// --- Helper Functions ---\n\n/**\n * Get street type prefix (e.g., \"Carrer\", \"Avinguda\")\n */\nfunction getStreetPrefix(name) {\n  if (!name) return '';\n  const match = name.match(\n    /^(Carrer|Avinguda|PlaÃ§a|Passeig|Passatge|Ronda|Via|CamÃ­|Jardins|Parc|Rambla|Travessera|Carretera|TÃºnel|Pont|Moll)(\\s+d(e|els|es|el|')|(?=\\s))?/i\n  );\n  return match ? match[1].toLowerCase() : 'other';\n}\n\n/**\n * Get centroid of street geometry for geographic distribution\n */\nfunction getStreetCentroid(street) {\n  let sumLat = 0,\n    sumLon = 0,\n    count = 0;\n  for (const segment of street.geometry) {\n    for (const point of segment) {\n      sumLat += point[0];\n      sumLon += point[1];\n      count++;\n    }\n  }\n  return count > 0 ? { lat: sumLat / count, lon: sumLon / count } : { lat: 0, lon: 0 };\n}\n\n/**\n * Seeded random number generator\n */\nfunction seededRandom(seed) {\n  const x = Math.sin(seed++) * 10000;\n  return x - Math.floor(x);\n}\n\n/**\n * Shuffle array with seed\n */\nfunction seededShuffle(array, seed) {\n  const shuffled = [...array];\n  let currentSeed = seed;\n  for (let i = shuffled.length - 1; i > 0; i--) {\n    const j = Math.floor(seededRandom(currentSeed) * (i + 1));\n    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];\n    currentSeed++;\n  }\n  return shuffled;\n}\n\n/**\n * Check geographic spread - divide city into grid and check coverage\n */\nfunction checkGeographicCoverage(selectedStreets) {\n  // Barcelona bounds approximately\n  const GRID_SIZE = 3; // 3x3 grid\n  const MIN_LAT = 41.32,\n    MAX_LAT = 41.47;\n  const MIN_LON = 2.05,\n    MAX_LON = 2.23;\n\n  const grid = Array(GRID_SIZE)\n    .fill(null)\n    .map(() => Array(GRID_SIZE).fill(0));\n\n  for (const street of selectedStreets) {\n    const centroid = getStreetCentroid(street);\n    const gridX = Math.min(\n      GRID_SIZE - 1,\n      Math.floor(((centroid.lon - MIN_LON) / (MAX_LON - MIN_LON)) * GRID_SIZE)\n    );\n    const gridY = Math.min(\n      GRID_SIZE - 1,\n      Math.floor(((centroid.lat - MIN_LAT) / (MAX_LAT - MIN_LAT)) * GRID_SIZE)\n    );\n    if (gridX >= 0 && gridY >= 0) {\n      grid[gridY][gridX]++;\n    }\n  }\n\n  // Count non-empty cells\n  let coverage = 0;\n  for (const row of grid) {\n    for (const cell of row) {\n      if (cell > 0) coverage++;\n    }\n  }\n\n  return coverage >= 4; // At least 4 of 9 grid cells covered\n}\n\n/**\n * Select distractors for a question following rules\n */\nfunction selectDistractors(street, allStreets, usedAnswerIds, dayOffset, seed) {\n  const targetPrefix = getStreetPrefix(street.name);\n  const targetTier = street.tier;\n\n  // Filter candidates:\n  // 1. Not the correct answer\n  // 2. Same street type prefix\n  // 3. Same tier or LOWER tier (tier-down mixing)\n  // 4. Not used as answer on adjacent days (dayOffset -1, 0, +1)\n  let candidates = allStreets.filter(s => {\n    if (s.id === street.id) return false;\n    if (getStreetPrefix(s.name) !== targetPrefix) return false;\n    if (s.tier < targetTier) return false; // Only same or lower tier (higher number = lower importance)\n\n    // Check if used as answer on adjacent days\n    for (let d = dayOffset - 1; d <= dayOffset + 1; d++) {\n      if (usedAnswerIds[d] && usedAnswerIds[d].has(s.id)) {\n        return false;\n      }\n    }\n    return true;\n  });\n\n  // Fallback: if not enough same-type candidates, relax prefix constraint\n  if (candidates.length < 3) {\n    candidates = allStreets.filter(s => {\n      if (s.id === street.id) return false;\n      if (s.tier < targetTier) return false;\n      for (let d = dayOffset - 1; d <= dayOffset + 1; d++) {\n        if (usedAnswerIds[d] && usedAnswerIds[d].has(s.id)) return false;\n      }\n      return true;\n    });\n  }\n\n  const shuffled = seededShuffle(candidates, seed);\n  return shuffled.slice(0, 3);\n}\n\n// --- Main Generation Logic ---\n\n// Track when each street was last used as correct answer\nconst lastUsedDay = {}; // streetId -> day number\n\n// Track which street IDs are answers on each day (for adjacent-day exclusion)\nconst dayAnswerIds = {}; // dayOffset -> Set of street IDs\n\n// Group streets by tier\nconst streetsByTier = {\n  1: streets.filter(s => s.tier === 1),\n  2: streets.filter(s => s.tier === 2),\n  3: streets.filter(s => s.tier === 3),\n  4: streets.filter(s => s.tier === 4),\n};\n\nconsole.log(\n  `Streets by tier: T1=${streetsByTier[1].length}, T2=${streetsByTier[2].length}, T3=${streetsByTier[3].length}, T4=${streetsByTier[4].length}`\n);\n\nconst quizzes = [];\n\nfor (let day = 0; day < DAYS_TO_GENERATE; day++) {\n  const date = new Date(START_DATE);\n  date.setDate(date.getDate() + day);\n  const dateStr = date.toISOString().split('T')[0];\n\n  const seed = parseInt(dateStr.replace(/-/g, ''));\n  let seedOffset = 0;\n\n  dayAnswerIds[day] = new Set();\n\n  /**\n   * Select streets for a tier, respecting cooldown\n   */\n  function selectFromTier(tierStreets, count, tierNum) {\n    const available = tierStreets.filter(s => {\n      const lastDay = lastUsedDay[s.id];\n      if (lastDay === undefined) return true;\n      return day - lastDay >= COOLDOWNS[tierNum];\n    });\n\n    // Shuffle and pick\n    const shuffled = seededShuffle(available, seed + seedOffset);\n    seedOffset += 100;\n\n    return shuffled.slice(0, count);\n  }\n\n  // Select correct answers for each tier category\n  const tier1Selected = selectFromTier(streetsByTier[1], TIER_DISTRIBUTION.tier1, 1);\n\n  // Combine T2 and T3 for selection\n  const tier23Pool = [...streetsByTier[2], ...streetsByTier[3]];\n  const tier23Selected = selectFromTier(tier23Pool, TIER_DISTRIBUTION.tier23, 2); // Use T2 cooldown\n\n  const tier4Selected = selectFromTier(streetsByTier[4], TIER_DISTRIBUTION.tier4, 4);\n\n  const selectedStreets = [...tier1Selected, ...tier23Selected, ...tier4Selected];\n\n  // Fallback if not enough streets\n  if (selectedStreets.length < QUESTIONS_PER_DAY) {\n    console.warn(\n      `Day ${day} (${dateStr}): Only ${selectedStreets.length} streets available, filling with any available`\n    );\n    const needed = QUESTIONS_PER_DAY - selectedStreets.length;\n    const usedIds = new Set(selectedStreets.map(s => s.id));\n    const fallback = streets.filter(s => !usedIds.has(s.id));\n    const shuffledFallback = seededShuffle(fallback, seed + 500);\n    selectedStreets.push(...shuffledFallback.slice(0, needed));\n  }\n\n  // Check geographic coverage\n  if (!checkGeographicCoverage(selectedStreets) && day % 10 === 0) {\n    console.log(`Day ${day}: Limited geographic coverage (may be expected)`);\n  }\n\n  // Update tracking\n  for (const street of selectedStreets) {\n    lastUsedDay[street.id] = day;\n    dayAnswerIds[day].add(street.id);\n  }\n\n  // Generate questions with distractors\n  const questions = [];\n  for (let q = 0; q < selectedStreets.length; q++) {\n    const correct = selectedStreets[q];\n    const distractors = selectDistractors(correct, streets, dayAnswerIds, day, seed + q * 10);\n\n    questions.push({\n      correctId: correct.id,\n      distractorIds: distractors.map(d => d.id),\n    });\n  }\n\n  // Shuffle question order\n  const shuffledQuestions = seededShuffle(questions, seed + 999);\n\n  quizzes.push({\n    date: dateStr,\n    questions: shuffledQuestions,\n  });\n\n  if (day % 10 === 0) {\n    console.log(`Generated day ${day + 1}/${DAYS_TO_GENERATE}: ${dateStr}`);\n  }\n}\n\n// --- Output ---\nconst output = {\n  startDate: START_DATE.toISOString().split('T')[0],\n  generatedAt: new Date().toISOString(),\n  totalDays: DAYS_TO_GENERATE,\n  quizzes,\n};\n\nconst outputPath = path.join(process.cwd(), 'src', 'data', 'quizPlan.json');\nfs.writeFileSync(outputPath, JSON.stringify(output, null, 2));\nconsole.log(`\\nSaved quiz plan to ${outputPath}`);\nconsole.log(`Total quizzes: ${quizzes.length}`);\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/scripts/harmonizeDatabase.js",
    "messages": [
      {
        "ruleId": null,
        "nodeType": null,
        "fatal": true,
        "severity": 2,
        "message": "Parsing error: \"parserOptions.project\" has been provided for @typescript-eslint/parser.\nThe file was not found in any of the provided project(s): scripts/harmonizeDatabase.js"
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 1,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { initializeApp, cert } from 'firebase-admin/app';\nimport { getFirestore } from 'firebase-admin/firestore';\nimport { readFile } from 'fs/promises';\nimport { fileURLToPath } from 'url';\nimport path from 'path';\n\nconst __dirname = path.dirname(fileURLToPath(import.meta.url));\n\n/**\n * Harmonize Database Script\n *\n * Usage: node scripts/harmonizeDatabase.js <path-to-service-account.json>\n */\n\nconst run = async () => {\n  const args = process.argv.slice(2);\n  if (args.length < 1) {\n    console.error('Please provide path to service account json');\n    console.error('Usage: node scripts/harmonizeDatabase.js ./service-account.json');\n    process.exit(1);\n  }\n\n  const serviceAccountPath = path.resolve(process.cwd(), args[0]);\n\n  try {\n    const serviceAccount = JSON.parse(await readFile(serviceAccountPath, 'utf8'));\n\n    initializeApp({\n      credential: cert(serviceAccount),\n    });\n\n    const db = getFirestore();\n    console.log('ðŸ”¥ Firebase Admin Initialized');\n\n    // Shared Cache\n    const userEmailCache = new Map();\n\n    await harmonizeFriendships(db, userEmailCache);\n    await harmonizeScores(db, userEmailCache);\n    await harmonizeReferrals(db, userEmailCache);\n    await harmonizeHighscores(db, userEmailCache);\n    await harmonizeUserStats(db);\n\n    console.log('âœ… Harmonization Complete');\n  } catch (error) {\n    console.error('Error:', error);\n    process.exit(1);\n  }\n};\n\n// --- Helpers ---\n\nasync function getEmailForUser(db, cache, username) {\n  if (!username) return null;\n  const userId = username.toLowerCase();\n\n  if (cache.has(userId)) {\n    const cached = cache.get(userId);\n    return cached === 'NOT_FOUND' ? null : cached;\n  }\n\n  const usersRef = db.collection('users');\n  let email = null;\n\n  // Try exact ID match\n  let userSnap = await usersRef.doc(userId).get();\n  if (!userSnap.exists) {\n    // Try without @ if current has it, or with @ if current doesn't\n    const altId = userId.startsWith('@') ? userId.slice(1) : `@${userId}`;\n    userSnap = await usersRef.doc(altId).get();\n  }\n\n  if (userSnap.exists) {\n    email = userSnap.data().email;\n  }\n\n  cache.set(userId, email || 'NOT_FOUND');\n  return email;\n}\n\n// --- Transformations ---\n\nasync function harmonizeFriendships(db, emailCache) {\n  console.log('\\n--- 1. Harmonizing Friendships ---');\n  const friendshipsRef = db.collection('friendships');\n  const snapshot = await friendshipsRef.get();\n\n  console.log(`Found ${snapshot.size} friendship documents.`);\n\n  let batchSize = 0;\n  let currentBatch = db.batch();\n\n  const commitBatch = async () => {\n    if (batchSize > 0) {\n      await currentBatch.commit();\n      currentBatch = db.batch();\n      batchSize = 0;\n    }\n  };\n\n  const existingDocs = new Map();\n  snapshot.docs.forEach(d => existingDocs.set(d.id, d));\n  const pairsProcessed = new Set();\n\n  let processedCount = 0;\n\n  for (const doc of snapshot.docs) {\n    const data = doc.data();\n    if (!data.user1 || !data.user2) continue;\n\n    // Normalize users for key\n    const users = [data.user1, data.user2].sort();\n    const compositeKey = `${users[0]}_${users[1]}`;\n\n    // Check if duplicate for this session\n    if (pairsProcessed.has(compositeKey)) {\n      // If we already processed this pair, implies we found/created the canonical one.\n      // If current doc is NOT the canonical key, delete it as duplicate.\n      if (doc.id !== compositeKey) {\n        currentBatch.delete(doc.ref);\n        batchSize++;\n        console.log(`[DELETE] Duplicate/Legacy ${doc.id}`);\n      }\n      continue;\n    }\n    pairsProcessed.add(compositeKey);\n\n    // Backfill emails\n    const email1 = await getEmailForUser(db, emailCache, data.user1);\n    const email2 = await getEmailForUser(db, emailCache, data.user2);\n\n    // Prepare Updates for CANONICAL version\n    // Even if we are deleting this doc, we want to migrate its data + updates to canonical.\n    const updates = {};\n    if (!data.participants) updates.participants = users;\n    if (!data.user1Email && email1) updates.user1Email = email1;\n    if (!data.user2Email && email2) updates.user2Email = email2;\n\n    const targetDoc = existingDocs.get(compositeKey);\n\n    if (targetDoc) {\n      // Canonical doc exists in DB.\n      if (doc.id === compositeKey) {\n        // We are currently processing the canonical one. Update it.\n        if (Object.keys(updates).length > 0) {\n          currentBatch.update(doc.ref, updates);\n          batchSize++;\n          // console.log(`[UPDATE] Canonical ${doc.id}`);\n        }\n      } else {\n        // We are processing a legacy doc, but canonical exists.\n        // Delete legacy. Ensure canonical is updated?\n        // The loop will eventually hit the canonical doc (or already has).\n        // If we hit canonical later, we update then.\n        // If we hit canonical earlier, we updated then.\n        // BUT: The legacy doc might have newer data? Unlikely for this schema.\n        // Assume duplicate data is identical or canonical is source of truth.\n        currentBatch.delete(doc.ref);\n        batchSize++;\n        console.log(`[DELETE] Legacy ${doc.id} (Canonical exists)`);\n      }\n    } else {\n      // Canonical doc DOES NOT exist in DB.\n      // Migrate THIS doc to be the canonical one.\n      const newRef = friendshipsRef.doc(compositeKey);\n      currentBatch.set(newRef, {\n        ...data,\n        ...updates,\n        updatedAt: new Date(), // Force update timestamp\n      });\n      currentBatch.delete(doc.ref);\n      batchSize += 2;\n      console.log(`[MIGRATE] ${doc.id} -> ${compositeKey}`);\n\n      // Add to existingDocs conceptually so next loop doesn't recreate?\n      // pairsProcessed handles loop logic.\n    }\n\n    if (batchSize >= 400) await commitBatch();\n    processedCount++;\n  }\n\n  await commitBatch();\n  console.log('Friendships harmonized.');\n}\n\nasync function harmonizeScores(db, emailCache) {\n  console.log('\\n--- 2. Harmonizing Scores (Backfill Email) ---');\n  const scoresRef = db.collection('scores');\n  const snapshot = await scoresRef.get();\n  console.log(`Found ${snapshot.size} score documents.`);\n\n  let batchSize = 0;\n  let currentBatch = db.batch();\n  let updatedCount = 0;\n\n  const commitBatch = async () => {\n    if (batchSize > 0) {\n      await currentBatch.commit();\n      currentBatch = db.batch();\n      batchSize = 0;\n    }\n  };\n\n  for (const doc of snapshot.docs) {\n    const data = doc.data();\n    if (data.email) continue;\n\n    const username = data.username;\n    if (!username) continue;\n\n    const email = await getEmailForUser(db, emailCache, username);\n\n    if (email) {\n      currentBatch.update(doc.ref, { email: email });\n      batchSize++;\n      updatedCount++;\n      if (batchSize >= 400) await commitBatch();\n    }\n  }\n\n  await commitBatch();\n  console.log(`Updated ${updatedCount} scores with emails.`);\n}\n\nasync function harmonizeReferrals(db, emailCache) {\n  console.log('\\n--- 3. Harmonizing Referrals (Backfill Email) ---');\n  const refCollection = db.collection('referrals');\n  const snapshot = await refCollection.get();\n  console.log(`Found ${snapshot.size} referral documents.`);\n\n  let batchSize = 0;\n  let currentBatch = db.batch();\n  let updatedCount = 0;\n  const commitBatch = async () => {\n    if (batchSize > 0) {\n      await currentBatch.commit();\n      currentBatch = db.batch();\n      batchSize = 0;\n    }\n  };\n\n  for (const doc of snapshot.docs) {\n    const data = doc.data();\n    const u1 = data.referrer;\n    const u2 = data.referred;\n\n    const email1 = await getEmailForUser(db, emailCache, u1);\n    const email2 = await getEmailForUser(db, emailCache, u2);\n\n    const updates = {};\n    if (!data.referrerEmail && email1) updates.referrerEmail = email1;\n    if (!data.referredEmail && email2) updates.referredEmail = email2;\n\n    if (Object.keys(updates).length > 0) {\n      currentBatch.update(doc.ref, updates);\n      batchSize++;\n      updatedCount++;\n      if (batchSize >= 400) await commitBatch();\n    }\n  }\n  await commitBatch();\n  console.log(`Updated ${updatedCount} referrals.`);\n}\n\nasync function harmonizeHighscores(db, emailCache) {\n  console.log('\\n--- 4. Harmonizing Highscores (Backfill Email) ---');\n  const highscoresRef = db.collection('highscores');\n  const snapshot = await highscoresRef.get();\n  console.log(`Found ${snapshot.size} highscore documents.`);\n\n  let batchSize = 0;\n  let currentBatch = db.batch();\n  let updatedCount = 0;\n  const commitBatch = async () => {\n    if (batchSize > 0) {\n      await currentBatch.commit();\n      currentBatch = db.batch();\n      batchSize = 0;\n    }\n  };\n\n  for (const doc of snapshot.docs) {\n    const data = doc.data();\n    if (data.email) continue;\n\n    // Highscore ID is usually the username (sanitized)\n    const username = data.username || doc.id;\n\n    const email = await getEmailForUser(db, emailCache, username);\n\n    if (email) {\n      currentBatch.update(doc.ref, { email: email });\n      batchSize++;\n      updatedCount++;\n      if (batchSize >= 400) await commitBatch();\n    }\n  }\n  await commitBatch();\n  console.log(`Updated ${updatedCount} highscores.`);\n}\n\nasync function harmonizeUserStats(db) {\n  console.log('\\n--- 5. Harmonizing User Stats ---');\n  const usersRef = db.collection('users');\n  const snapshot = await usersRef.get();\n\n  let batchSize = 0;\n  let currentBatch = db.batch();\n  let fixCount = 0;\n\n  const commitBatch = async () => {\n    if (batchSize > 0) {\n      await currentBatch.commit();\n      currentBatch = db.batch();\n      batchSize = 0;\n    }\n  };\n\n  for (const doc of snapshot.docs) {\n    const data = doc.data();\n    const updates = {};\n\n    // Rule: Streak cannot be higher than gamesPlayed\n    const gamesPlayed = data.gamesPlayed || 0;\n    const streak = data.streak || 0;\n\n    if (streak > gamesPlayed) {\n      updates.streak = gamesPlayed;\n      console.log(`[Fix] ${doc.id}: streak ${streak} -> ${gamesPlayed}`);\n    }\n\n    if (Object.keys(updates).length > 0) {\n      currentBatch.update(doc.ref, updates);\n      batchSize++;\n      fixCount++;\n\n      if (batchSize >= 400) await commitBatch();\n    }\n  }\n\n  await commitBatch();\n  console.log(`Fixed stats for ${fixCount} users.`);\n}\n\nrun();\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/scripts/migrateCosmetics.js",
    "messages": [
      {
        "ruleId": null,
        "nodeType": null,
        "fatal": true,
        "severity": 2,
        "message": "Parsing error: \"parserOptions.project\" has been provided for @typescript-eslint/parser.\nThe file was not found in any of the provided project(s): scripts/migrateCosmetics.js"
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 1,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { initializeApp, cert } from 'firebase-admin/app';\nimport { getFirestore } from 'firebase-admin/firestore';\nimport { readFile } from 'fs/promises';\nimport { fileURLToPath } from 'url';\nimport path from 'path';\n\n// Construct __dirname in ES module\nconst __dirname = path.dirname(fileURLToPath(import.meta.url));\n\n/**\n * Cosmetics Migration Script\n *\n * Usage: node scripts/migrateCosmetics.js <path-to-service-account.json>\n */\nconst run = async () => {\n  const args = process.argv.slice(2);\n  if (args.length < 1) {\n    console.error('Please provide path to service account json');\n    console.error('Usage: node scripts/migrateCosmetics.js ./service-account.json');\n    process.exit(1);\n  }\n\n  const serviceAccountPath = path.resolve(process.cwd(), args[0]);\n\n  try {\n    const serviceAccount = JSON.parse(await readFile(serviceAccountPath, 'utf8'));\n\n    initializeApp({\n      credential: cert(serviceAccount),\n    });\n\n    const db = getFirestore();\n    console.log('ðŸ”¥ Firebase Admin Initialized');\n\n    // Load cosmetics.json\n    const cosmeticsPath = path.resolve(process.cwd(), 'src/data/cosmetics.json');\n    const cosmetics = JSON.parse(await readFile(cosmeticsPath, 'utf8'));\n\n    const shopItemsRef = db.collection('shop_items');\n\n    // Flatten and upload\n    let batch = db.batch();\n    let count = 0;\n    let uploaded = 0;\n\n    const commitBatch = async () => {\n      if (count > 0) {\n        await batch.commit();\n        batch = db.batch();\n        count = 0;\n      }\n    };\n\n    // Helper to process items\n    const processItems = (items, type) => {\n      items.forEach(item => {\n        const docRef = shopItemsRef.doc(item.id);\n\n        // Ensure type is set\n        const data = {\n          ...item,\n          type: type,\n        };\n\n        batch.set(docRef, data, { merge: true });\n        count++;\n        uploaded++;\n\n        if (count >= 400) {\n          // Cannot await inside forEach with this logic easily, but synchronous batch Add is fine.\n          // We can commit periodically. However, since this is small data,\n          // we can just let count go up. Wait... Firebase batch limit is 500.\n          // Let's execute immediately if we hit limit.\n          // Note: using async inside forEach is tricky. Let's use for...of loop in main function.\n        }\n      });\n    };\n\n    const allItems = [];\n    if (cosmetics.avatarFrames) {\n      cosmetics.avatarFrames.forEach(i => allItems.push({ ...i, type: 'frame' }));\n    }\n    if (cosmetics.titles) {\n      cosmetics.titles.forEach(i => allItems.push({ ...i, type: 'title' }));\n    }\n    if (cosmetics.special) {\n      cosmetics.special.forEach(i => allItems.push({ ...i, type: 'special' }));\n    }\n\n    console.log(`Found ${allItems.length} items to migrate.`);\n\n    for (const item of allItems) {\n      const docRef = shopItemsRef.doc(item.id);\n      batch.set(docRef, item, { merge: true });\n      count++;\n      uploaded++;\n\n      if (count >= 400) {\n        await commitBatch();\n        console.log(`Committed batch of 400...`);\n      }\n    }\n\n    if (count > 0) {\n      await commitBatch();\n    }\n\n    console.log(`âœ… Migration Complete. Uploaded ${uploaded} items.`);\n  } catch (error) {\n    console.error('Error:', error);\n    process.exit(1);\n  }\n};\n\nrun();\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/scripts/migrateUserFields.js",
    "messages": [
      {
        "ruleId": null,
        "nodeType": null,
        "fatal": true,
        "severity": 2,
        "message": "Parsing error: \"parserOptions.project\" has been provided for @typescript-eslint/parser.\nThe file was not found in any of the provided project(s): scripts/migrateUserFields.js"
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 1,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { initializeApp, cert } from 'firebase-admin/app';\nimport { getFirestore } from 'firebase-admin/firestore';\nimport { readFile } from 'fs/promises';\nimport { fileURLToPath } from 'url';\nimport path from 'path';\n\nconst __dirname = path.dirname(fileURLToPath(import.meta.url));\n\n/**\n * Migrate User Fields Script\n *\n * Usage: node scripts/migrateUserFields.js <path-to-service-account.json>\n */\n\nconst run = async () => {\n  const args = process.argv.slice(2);\n  if (args.length < 1) {\n    console.error('Please provide path to service account json');\n    console.error('Usage: node scripts/migrateUserFields.js ./service-account.json');\n    process.exit(1);\n  }\n\n  const serviceAccountPath = path.resolve(process.cwd(), args[0]);\n\n  try {\n    const serviceAccount = JSON.parse(await readFile(serviceAccountPath, 'utf8'));\n\n    initializeApp({\n      credential: cert(serviceAccount),\n    });\n\n    const db = getFirestore();\n    console.log('ðŸ”¥ Firebase Admin Initialized');\n\n    await migrateUsers(db);\n\n    console.log('âœ… Migration Complete');\n  } catch (error) {\n    console.error('Error:', error);\n    process.exit(1);\n  }\n};\n\nasync function migrateUsers(db) {\n  console.log('\\n--- Migrating Users ---');\n  const usersRef = db.collection('users');\n  const snapshot = await usersRef.get();\n\n  console.log(`Found ${snapshot.size} user documents.`);\n\n  let batchSize = 0;\n  let currentBatch = db.batch();\n  let updatedCount = 0;\n\n  const commitBatch = async () => {\n    if (batchSize > 0) {\n      await currentBatch.commit();\n      currentBatch = db.batch();\n      batchSize = 0;\n    }\n  };\n\n  for (const doc of snapshot.docs) {\n    const data = doc.data();\n    const updates = {};\n\n    // 1. Ensure 'streak' exists\n    if (typeof data.streak === 'undefined') {\n      updates.streak = 0;\n    }\n\n    // 2. Ensure 'realName' exists\n    if (typeof data.realName === 'undefined') {\n      // Logic: If they have a displayName that isn't their username, use it.\n      // Otherwise empty string.\n      // Note: Usually displayName in auth matches username or email, so safer to default to empty\n      // and let them fill it in via UI.\n      updates.realName = '';\n    }\n\n    // 3. Ensure 'giuros' exists (new currency)\n    if (typeof data.giuros === 'undefined') {\n      updates.giuros = 100; // Give some starter cash to legacy users!\n    }\n\n    // 4. Ensure 'inventory' exists\n    if (typeof data.inventory === 'undefined') {\n      updates.inventory = [];\n    }\n\n    // 5. Ensure 'equippedCosmetics' exists\n    if (typeof data.equippedCosmetics === 'undefined') {\n      updates.equippedCosmetics = {\n        titleId: 'title_explorer',\n        frameId: 'frame_default',\n        avatarId: 'avatar_guiri',\n      };\n    }\n\n    if (Object.keys(updates).length > 0) {\n      currentBatch.update(doc.ref, updates);\n      batchSize++;\n      updatedCount++;\n      // console.log(`[Update] ${doc.id}: ${JSON.stringify(updates)}`);\n\n      if (batchSize >= 400) await commitBatch();\n    }\n  }\n\n  await commitBatch();\n  console.log(`Updated ${updatedCount} users with missing fields.`);\n}\n\nrun();\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/scripts/populateMockNews.js",
    "messages": [
      {
        "ruleId": null,
        "nodeType": null,
        "fatal": true,
        "severity": 2,
        "message": "Parsing error: \"parserOptions.project\" has been provided for @typescript-eslint/parser.\nThe file was not found in any of the provided project(s): scripts/populateMockNews.js"
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 1,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "// Scripts to populate Firestore with mock news\n// Run with: node scripts/populateMockNews.js\n\nimport { initializeApp } from 'firebase/app';\nimport { getFirestore, collection, addDoc, Timestamp } from 'firebase/firestore';\n// Load env vars via shell or environment\n// const __dirname = path.dirname(fileURLToPath(import.meta.url));\n\n// Helper to check for required env vars - hardcode if needed for script or assume .env works\n// For this script, we'll try to use the same logic as the app if possible, or just hardcode\n// values if the user has them in .env.local which dotenv should load.\n\nconst firebaseConfig = {\n  apiKey: process.env.VITE_FIREBASE_API_KEY,\n  authDomain: process.env.VITE_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.VITE_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.VITE_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.VITE_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.VITE_FIREBASE_APP_ID,\n};\n\nif (!firebaseConfig.apiKey) {\n  console.error('âŒ Missing Firebase Config in environment variables.');\n  console.log('Ensure .env.local exists in root with VITE_FIREBASE_* keys.');\n  process.exit(1);\n}\n\nconst app = initializeApp(firebaseConfig);\nconst db = getFirestore(app);\n\nconst NEWS_COLLECTION = 'announcements';\n\nconst MOCK_NEWS = [\n  {\n    title: 'Welcome to Girify! ðŸ¦’',\n    body: `We are thrilled to launch <strong>Girify</strong>, your daily Barcelona street challenge!\n    <br/><br/>\n    Explore the city, guess the streets, and climb the leaderboard.\n    Don't forget to invite your friends to earn extra <strong>Giuros</strong>!`,\n    publishDate: Timestamp.now(), // Today\n    expiryDate: Timestamp.fromDate(new Date(Date.now() + 30 * 24 * 60 * 60 * 1000)), // +30 days\n    isActive: true,\n    targetAudience: 'all',\n  },\n  {\n    title: 'New Feature: Friends & Feed',\n    body: `Connect with your friends! You can now search for users, add them as friends, and see their activity in your feed.\n    <br/>\n    Compete for the best daily score and show off your badges!`,\n    publishDate: Timestamp.fromDate(new Date(Date.now() - 2 * 24 * 60 * 60 * 1000)), // 2 days ago\n    expiryDate: Timestamp.fromDate(new Date(Date.now() + 30 * 24 * 60 * 60 * 1000)),\n    isActive: true,\n    targetAudience: 'all',\n  },\n  {\n    title: 'Shop Update: Balcony Grandma Badge ðŸ‘µ',\n    body: `A new badge has landed in the shop!\n    <br/><br/>\n    <strong>The Balcony Grandma</strong> sees all. Equip it to show you are a true local observer.\n    Check it out in the cosmetics store now.`,\n    publishDate: Timestamp.fromDate(new Date(Date.now() - 5 * 24 * 60 * 60 * 1000)), // 5 days ago\n    expiryDate: Timestamp.fromDate(new Date(Date.now() + 10 * 24 * 60 * 60 * 1000)),\n    isActive: true,\n    targetAudience: 'all',\n  },\n];\n\nasync function populate() {\n  console.log('ðŸš€ Populating mock news...');\n  try {\n    for (const news of MOCK_NEWS) {\n      await addDoc(collection(db, NEWS_COLLECTION), news);\n      console.log(`âœ… Added: ${news.title}`);\n    }\n    console.log('ðŸŽ‰ Done!');\n  } catch (error) {\n    console.error('âŒ Error adding news:', error);\n  }\n  process.exit(0);\n}\n\npopulate();\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/scripts/publishNews.js",
    "messages": [
      {
        "ruleId": null,
        "nodeType": null,
        "fatal": true,
        "severity": 2,
        "message": "Parsing error: \"parserOptions.project\" has been provided for @typescript-eslint/parser.\nThe file was not found in any of the provided project(s): scripts/publishNews.js"
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 1,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { initializeApp, cert } from 'firebase-admin/app';\nimport { getFirestore } from 'firebase-admin/firestore';\nimport { readFile } from 'fs/promises';\nimport { fileURLToPath } from 'url';\nimport path from 'path';\nimport readline from 'readline';\n\nconst __dirname = path.dirname(fileURLToPath(import.meta.url));\n\n/**\n * Publish News Script\n *\n * Usage: node scripts/publishNews.js <service-account.json>\n */\n\nconst run = async () => {\n  const args = process.argv.slice(2);\n  if (args.length < 1) {\n    console.error('Usage: node scripts/publishNews.js ./service-account.json');\n    process.exit(1);\n  }\n\n  const serviceAccountPath = path.resolve(process.cwd(), args[0]);\n\n  try {\n    const serviceAccount = JSON.parse(await readFile(serviceAccountPath, 'utf8'));\n\n    initializeApp({\n      credential: cert(serviceAccount),\n    });\n\n    const db = getFirestore();\n    console.log('ðŸ”¥ Firebase Admin Initialized');\n\n    const rl = readline.createInterface({\n      input: process.stdin,\n      output: process.stdout,\n    });\n\n    const question = query => new Promise(resolve => rl.question(query, resolve));\n\n    console.log('\\n--- Publish New Announcement ---\\n');\n\n    const title = await question('Title (e.g. \"Update v0.2.0\"): ');\n    const body = await question('Body (use \\\\n for newlines): ');\n    const priority = (await question('Priority (normal/high/urgent) [normal]: ')) || 'normal';\n    const confirm = await question(`\\nPublish \"${title}\"? (y/N): `);\n\n    if (confirm.toLowerCase() === 'y') {\n      const collection = db.collection('announcements');\n\n      const now = new Date();\n      // Default expiry 7 days from now\n      const expiry = new Date();\n      expiry.setDate(expiry.getDate() + 7);\n\n      await collection.add({\n        title,\n        body: body.replace(/\\\\n/g, '\\n'),\n        priority,\n        targetAudience: 'all',\n        publishDate: now,\n        expiryDate: expiry,\n        isActive: true,\n        createdAt: now,\n      });\n\n      console.log('âœ… Announcement published!');\n    } else {\n      console.log('Cancelled.');\n    }\n\n    rl.close();\n  } catch (error) {\n    console.error('Error:', error);\n    process.exit(1);\n  }\n};\n\nrun();\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/scripts/reconcileFriendships.js",
    "messages": [
      {
        "ruleId": null,
        "nodeType": null,
        "fatal": true,
        "severity": 2,
        "message": "Parsing error: \"parserOptions.project\" has been provided for @typescript-eslint/parser.\nThe file was not found in any of the provided project(s): scripts/reconcileFriendships.js"
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 1,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { initializeApp, cert } from 'firebase-admin/app';\nimport { getFirestore } from 'firebase-admin/firestore';\nimport { createRequire } from 'module';\n\nconst require = createRequire(import.meta.url);\nconst serviceAccount = require('../service-account.json');\n\ninitializeApp({\n  credential: cert(serviceAccount),\n});\n\nconst db = getFirestore();\nconst USERS_COLLECTION = 'users';\n\nconst sanitize = name => name.toLowerCase().replace(/\\//g, '_');\n\nconst reconcileFriendships = async () => {\n  console.log('Starting Friendship Reconciliation...');\n\n  const usersSnap = await db.collection(USERS_COLLECTION).get();\n  let totalFixed = 0;\n  let totalDeleted = 0;\n\n  for (const userDoc of usersSnap.docs) {\n    const username = userDoc.id;\n    const cleanUsername = sanitize(username);\n    const friendsRef = userDoc.ref.collection('friends');\n    const friendsSnap = await friendsRef.get();\n\n    if (friendsSnap.empty) continue;\n\n    const seenFriends = new Map(); // cleanName -> docId\n    const batch = db.batch();\n    let batchCount = 0;\n\n    for (const friendDoc of friendsSnap.docs) {\n      const friendData = friendDoc.data();\n      const rawFriendName = friendData.username || friendDoc.id;\n      const cleanFriendName = sanitize(rawFriendName);\n\n      // 1. Remove Self-Friendship\n      if (cleanFriendName === cleanUsername) {\n        console.log(`[${username}] Removing self-friendship: ${friendDoc.id}`);\n        batch.delete(friendDoc.ref);\n        batchCount++;\n        totalDeleted++;\n        continue;\n      }\n\n      // 2. Remove Duplicates\n      if (seenFriends.has(cleanFriendName)) {\n        console.log(\n          `[${username}] Removing duplicate friend: ${cleanFriendName} (Doc: ${friendDoc.id})`\n        );\n        batch.delete(friendDoc.ref);\n        batchCount++;\n        totalDeleted++;\n      } else {\n        seenFriends.set(cleanFriendName, friendDoc.id);\n\n        // Optional: Ensure Doc ID matches sanitized name (Migration)\n        // If Doc ID involves upper case or weird chars, we could migrate it,\n        // but deleting strict duplicates is the priority.\n      }\n    }\n\n    if (batchCount > 0) {\n      await batch.commit();\n      totalFixed++;\n    }\n  }\n\n  console.log(`Reconciliation Complete.`);\n  console.log(`Users fixed: ${totalFixed}`);\n  console.log(`Friendship entries deleted: ${totalDeleted}`);\n};\n\nreconcileFriendships().catch(console.error);\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/scripts/updateRobertoName.js",
    "messages": [
      {
        "ruleId": null,
        "nodeType": null,
        "fatal": true,
        "severity": 2,
        "message": "Parsing error: \"parserOptions.project\" has been provided for @typescript-eslint/parser.\nThe file was not found in any of the provided project(s): scripts/updateRobertoName.js"
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 1,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { initializeApp, cert } from 'firebase-admin/app';\nimport { getFirestore } from 'firebase-admin/firestore';\nimport { readFile } from 'fs/promises';\nimport { fileURLToPath } from 'url';\nimport path from 'path';\n\nconst __dirname = path.dirname(fileURLToPath(import.meta.url));\n\n/**\n * Update Roberto Name Script\n *\n * Sets realName = 'Roberto' for users containing 'roberto' in their ID or email.\n */\n\nconst run = async () => {\n  const args = process.argv.slice(2);\n  if (args.length < 1) {\n    console.error('Usage: node scripts/updateRobertoName.js ./service-account.json');\n    process.exit(1);\n  }\n\n  const serviceAccountPath = path.resolve(process.cwd(), args[0]);\n\n  try {\n    const serviceAccount = JSON.parse(await readFile(serviceAccountPath, 'utf8'));\n\n    initializeApp({\n      credential: cert(serviceAccount),\n    });\n\n    const db = getFirestore();\n    console.log('ðŸ”¥ Firebase Admin Initialized');\n\n    await updateNames(db);\n\n    console.log('âœ… Update Complete');\n  } catch (error) {\n    console.error('Error:', error);\n    process.exit(1);\n  }\n};\n\nasync function updateNames(db) {\n  const usersRef = db.collection('users');\n  const snapshot = await usersRef.get(); // Get ALL users first, safer for small DB\n\n  console.log(`Scanning ${snapshot?.size || 0} users...`); // Handle potential undefined snapshot\n  if (!snapshot) return;\n\n  const batch = db.batch();\n  let count = 0;\n\n  for (const doc of snapshot.docs) {\n    const data = doc.data();\n    const id = doc.id.toLowerCase();\n    const email = (data.email || '').toLowerCase();\n\n    // Check if it's a \"Roberto\" user\n    if (id.includes('roberto') || email.includes('roberto')) {\n      batch.update(doc.ref, { realName: 'Roberto' });\n      count++;\n      console.log(`[UPDATE] Setting realName='Roberto' for user: ${doc.id}`);\n    }\n  }\n\n  if (count > 0) {\n    await batch.commit();\n    console.log(`Updated ${count} users.`);\n  } else {\n    console.log('No matching users found.');\n  }\n}\n\nrun();\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/App.jsx",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/AppRoutes.jsx",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 2,
        "message": "'LandingPage' is defined but never used. Allowed unused vars must match /^_/u.",
        "line": 20,
        "column": 8,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 20,
        "endColumn": 19,
        "suggestions": [
          {
            "messageId": "removeUnusedImportDeclaration",
            "data": { "varName": "LandingPage" },
            "fix": { "range": [979, 1030], "text": "" },
            "desc": "Remove unused import declaration."
          }
        ]
      },
      {
        "ruleId": "max-lines-per-function",
        "severity": 1,
        "message": "Arrow function has too many lines (208). Maximum allowed is 150.",
        "line": 42,
        "column": 19,
        "nodeType": "ArrowFunctionExpression",
        "messageId": "exceed",
        "endLine": 277,
        "endColumn": 2
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 0,
    "warningCount": 1,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import React from 'react';\nimport { Routes, Route, useLocation, useNavigate } from 'react-router-dom';\nimport { AnimatePresence } from 'framer-motion';\n\nimport TopBar from './components/TopBar';\nimport LeaderboardScreen from './components/LeaderboardScreen';\nimport SettingsScreen from './components/SettingsScreen';\nimport AboutScreen from './components/AboutScreen';\nimport ProfileScreen from './components/ProfileScreen';\nimport FriendsScreen from './components/FriendsScreen';\nimport PublicProfileScreen from './components/PublicProfileScreen';\nimport GameScreen from './components/GameScreen';\nimport ShopScreen from './components/ShopScreen';\nimport FeedbackScreen from './components/FeedbackScreen';\nimport AdminRoute from './components/AdminRoute';\nimport AdminPanel from './components/AdminPanel';\nimport StreetsFetcher from './components/StreetsFetcher';\nimport NewsScreen from './components/NewsScreen';\nimport AnnouncementModal from './components/AnnouncementModal';\nimport LandingPage from './components/LandingPage';\n\nimport { useTheme } from './context/ThemeContext';\nimport { useStreets } from './hooks/useStreets';\nimport { useAchievements } from './hooks/useAchievements';\nimport { useAnnouncements } from './hooks/useAnnouncements';\nimport { useAuth } from './hooks/useAuth';\nimport { useGameState } from './hooks/useGameState';\nimport { hasPlayedToday, getTodaySeed } from './utils/dailyChallenge';\nimport { saveScore } from './utils/leaderboard';\nimport { hasDailyReferral } from './utils/social';\nimport { auth } from './firebase';\nimport { storage } from './utils/storage';\nimport { STORAGE_KEYS } from './config/constants';\n\nimport PrivacyPolicy from './components/PrivacyPolicy';\nimport TermsOfService from './components/TermsOfService';\nimport VerifyEmailScreen from './components/VerifyEmailScreen';\nimport AchievementModal from './components/AchievementModal';\nimport { useConfirm } from './hooks/useConfirm';\nimport { ConfirmDialog } from './components/ConfirmDialog';\n\nconst AppRoutes = () => {\n  const { theme, t, deviceMode } = useTheme();\n  const location = useLocation();\n  const navigate = useNavigate();\n  // Street data hook\n  const { validStreets, getHintStreets } = useStreets();\n\n  // Confirmation Hook\n  const { confirm, confirmConfig, handleClose } = useConfirm();\n\n  // Game Logic Hook\n  const {\n    state,\n    dispatch,\n    currentStreet,\n    setupGame,\n    handleSelectAnswer,\n    handleNext,\n    handleRegister,\n    processAnswer,\n  } = useGameState(validStreets, getHintStreets);\n\n  // Announcement hook\n  const { pendingAnnouncement, dismissAnnouncement, checkAnnouncements } = useAnnouncements(\n    state.username\n  );\n\n  // Achievement hook\n  const { newlyUnlockedBadge, dismissAchievement } = useAchievements(\n    state.username,\n    state.gameState,\n    location.pathname\n  );\n\n  // Auth hook\n  const { emailVerified, handleLogout: performLogout } = useAuth(\n    dispatch,\n    state.gameState,\n    checkAnnouncements\n  );\n  const handleLogout = () => performLogout(navigate);\n\n  const handleOpenPage = async page => {\n    // Check if user is in the middle of a game\n    if (state.gameState === 'playing' && state.currentQuestionIndex < state.quizStreets.length) {\n      const confirmed = await confirm(\n        t('exitGameWarning') ||\n          'Exit game? Your current score will be saved. You can play again anytime!',\n        'Exit Game',\n        true\n      );\n      if (!confirmed) {return;} // Don't navigate if user cancels\n\n      // User confirmed - save current progress before exiting\n      try {\n        const history = storage.get(STORAGE_KEYS.HISTORY, []);\n        const avgTime = state.quizResults.length\n          ? (\n              state.quizResults.reduce((acc, curr) => acc + (curr.time || 0), 0) /\n              state.quizResults.length\n            ).toFixed(1)\n          : 0;\n\n        const partialRecord = {\n          date: getTodaySeed(),\n          score: state.score,\n          avgTime: avgTime,\n          timestamp: Date.now(),\n          username: state.username,\n          incomplete: true, // Mark as incomplete\n        };\n        history.push(partialRecord);\n        storage.set(STORAGE_KEYS.HISTORY, history);\n\n        if (state.username) {\n          hasDailyReferral(state.username).then(isBonus => {\n            saveScore(state.username, state.score, partialRecord.avgTime, {\n              isBonus,\n              correctAnswers: state.correct,\n              questionCount: state.questionIndex + 1,\n              email: auth.currentUser?.email,\n            });\n          });\n        }\n      } catch (e) {\n        console.error('[Game] Error saving partial progress:', e);\n      }\n\n      // Reset game state to intro so game can be restarted\n      dispatch({ type: 'SET_GAME_STATE', payload: 'summary' });\n    }\n\n    // If null/undefined, go home. Else go to page.\n    navigate(page ? `/${page}` : '/');\n  };\n\n  return (\n    <div\n      className={`fixed inset-0 w-full h-full flex flex-col overflow-hidden transition-colors duration-500\n            bg-slate-50 ${theme === 'dark' ? 'text-white' : 'text-slate-900'}\n        `}\n    >\n      <TopBar\n        onOpenPage={handleOpenPage}\n        username={state.username}\n        onTriggerLogin={(mode = 'signin') => {\n          dispatch({ type: 'SET_REGISTER_MODE', payload: mode });\n          dispatch({ type: 'SET_GAME_STATE', payload: 'register' });\n          navigate('/');\n        }}\n        onLogout={handleLogout}\n      />\n\n      {/* Announcement Modal */}\n      <AnimatePresence>\n        {pendingAnnouncement && (\n          <AnnouncementModal announcement={pendingAnnouncement} onDismiss={dismissAnnouncement} />\n        )}\n      </AnimatePresence>\n\n      {/* Achievement Modal */}\n      <AnimatePresence>\n        {newlyUnlockedBadge && (\n          <AchievementModal achievement={newlyUnlockedBadge} onDismiss={dismissAchievement} />\n        )}\n      </AnimatePresence>\n\n      <AnimatePresence mode=\"wait\">\n        <Routes location={location} key={location.pathname}>\n          <Route path=\"/privacy\" element={<PrivacyPolicy />} />\n          <Route path=\"/terms\" element={<TermsOfService />} />\n          <Route\n            path=\"/\"\n            element={\n              state.username && !emailVerified ? (\n                <VerifyEmailScreen theme={theme} />\n              ) : (\n                <GameScreen\n                  state={state}\n                  dispatch={dispatch}\n                  theme={theme}\n                  deviceMode={deviceMode}\n                  t={t}\n                  currentStreet={currentStreet}\n                  handleSelectAnswer={handleSelectAnswer}\n                  handleNext={handleNext}\n                  processAnswer={processAnswer}\n                  setupGame={setupGame}\n                  handleRegister={handleRegister}\n                  hasPlayedToday={hasPlayedToday}\n                />\n              )\n            }\n          />\n          <Route\n            path=\"/leaderboard\"\n            element={\n              <LeaderboardScreen\n                onClose={() => handleOpenPage(null)}\n                currentUser={state.username}\n              />\n            }\n          />\n          <Route\n            path=\"/settings\"\n            element={\n              <SettingsScreen\n                onClose={() => handleOpenPage(null)}\n                onLogout={handleLogout}\n                autoAdvance={state.autoAdvance}\n                setAutoAdvance={val => dispatch({ type: 'SET_AUTO_ADVANCE', payload: val })}\n                username={state.username}\n              />\n            }\n          />\n          <Route path=\"/about\" element={<AboutScreen onClose={() => handleOpenPage(null)} />} />\n          <Route\n            path=\"/profile\"\n            element={\n              <ProfileScreen onClose={() => handleOpenPage(null)} username={state.username} />\n            }\n          />\n          <Route\n            path=\"/user/:username\"\n            element={<PublicProfileScreen currentUser={state.username} />}\n          />\n          <Route\n            path=\"/friends\"\n            element={\n              <FriendsScreen onClose={() => handleOpenPage(null)} username={state.username} />\n            }\n          />\n          <Route path=\"/shop\" element={<ShopScreen username={state.username} />} />\n          <Route\n            path=\"/news\"\n            element={<NewsScreen onClose={() => handleOpenPage(null)} username={state.username} />}\n          />\n          <Route\n            path=\"/feedback\"\n            element={\n              <FeedbackScreen\n                username={state.username}\n                onClose={() => {\n                  storage.set(STORAGE_KEYS.LAST_FEEDBACK, Date.now().toString());\n                  handleOpenPage(null);\n                }}\n              />\n            }\n          />\n\n          {/* Admin Route */}\n          <Route element={<AdminRoute />}>\n            <Route path=\"/admin\" element={<AdminPanel />} />\n            <Route path=\"/fetch-streets\" element={<StreetsFetcher />} />\n          </Route>\n        </Routes>\n      </AnimatePresence>\n\n      {/* Global Copyright Footer */}\n      <div className=\"absolute bottom-1 left-0 right-0 text-center pointer-events-none opacity-40 mix-blend-difference pb-4\">\n        <p className=\"text-[10px] font-medium text-slate-500 dark:text-slate-400\">\n          Â© 2025 Girify. All rights reserved.\n        </p>\n      </div>\n\n      <ConfirmDialog\n        isOpen={!!confirmConfig}\n        title={confirmConfig?.title}\n        message={confirmConfig?.message}\n        isDangerous={confirmConfig?.isDangerous}\n        onConfirm={() => handleClose(true)}\n        onCancel={() => handleClose(false)}\n      />\n    </div>\n  );\n};\n\nexport default AppRoutes;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/AboutScreen.jsx",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 2,
        "message": "'AnimatePresence' is defined but never used. Allowed unused vars must match /^_/u.",
        "line": 4,
        "column": 10,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 4,
        "endColumn": 25,
        "suggestions": [
          {
            "messageId": "removeUnusedVar",
            "data": { "varName": "AnimatePresence" },
            "fix": { "range": [85, 101], "text": "" },
            "desc": "Remove unused variable \"AnimatePresence\"."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 2,
        "message": "'motion' is defined but never used. Allowed unused vars must match /^_/u.",
        "line": 4,
        "column": 27,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 4,
        "endColumn": 33,
        "suggestions": [
          {
            "messageId": "removeUnusedImportDeclaration",
            "data": { "varName": "motion" },
            "fix": { "range": [76, 132], "text": "" },
            "desc": "Remove unused import declaration."
          }
        ]
      }
    ],
    "suppressedMessages": [],
    "errorCount": 2,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import React from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nimport { AnimatePresence, motion } from 'framer-motion';\nimport { useTheme } from '../context/ThemeContext';\nimport TopBar from './TopBar';\nimport PropTypes from 'prop-types';\n\nconst AboutScreen = ({ onClose: _onClose }) => {\n  const { theme, t } = useTheme();\n  const navigate = useNavigate();\n\n  return (\n    <div\n      className={`fixed inset-0 w-full h-full flex flex-col overflow-hidden transition-colors duration-500\n           ${theme === 'dark' ? 'bg-slate-900 text-white' : 'bg-slate-50 text-slate-900'}\n      `}\n    >\n      <TopBar onOpenPage={page => navigate(page ? `/${page}` : '/')} />\n\n      <div className=\"flex-1 overflow-y-auto w-full px-4 py-6 pt-16\">\n        <div className=\"max-w-2xl mx-auto\">\n          {/* Header */}\n          <div className=\"flex items-center justify-between mb-8 relative\">\n            <button\n              onClick={() => navigate(-1)}\n              className=\"flex items-center gap-2 text-sm font-bold opacity-60 hover:opacity-100 transition-opacity z-10\"\n            >\n              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d=\"M15 19l-7-7 7-7\"\n                />\n              </svg>\n              {t('back')}\n            </button>\n\n            <h2 className=\"text-xl font-black tracking-tight absolute left-1/2 transform -translate-x-1/2\">\n              {t('aboutGirify')}\n            </h2>\n          </div>\n\n          {/* Content */}\n          <div className=\"space-y-6 text-sm leading-relaxed opacity-90 px-2 pb-24\">\n            <p className=\"text-base font-medium\">{t('aboutDescription')}</p>\n\n            <h3 className=\"font-bold text-lg mt-8 text-sky-500\">Tech Stack</h3>\n            <div className=\"grid grid-cols-2 gap-3\">\n              <div className=\"p-3 bg-slate-100 dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700\">\n                <div className=\"font-bold mb-1\">React 18</div>\n                <div className=\"text-xs opacity-60\">Vite, Hooks, Context</div>\n              </div>\n              <div className=\"p-3 bg-slate-100 dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700\">\n                <div className=\"font-bold mb-1\">Firebase</div>\n                <div className=\"text-xs opacity-60\">Auth, Firestore, Hosting</div>\n              </div>\n              <div className=\"p-3 bg-slate-100 dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700\">\n                <div className=\"font-bold mb-1\">TailwindCSS</div>\n                <div className=\"text-xs opacity-60\">Utility-first styling</div>\n              </div>\n              <div className=\"p-3 bg-slate-100 dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700\">\n                <div className=\"font-bold mb-1\">Leaflet</div>\n                <div className=\"text-xs opacity-60\">Interactive Maps</div>\n              </div>\n            </div>\n\n            <h3 className=\"font-bold text-lg mt-8 text-sky-500\">About the Author</h3>\n            <div className=\"p-4 rounded-xl bg-slate-100 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 flex gap-4 items-start\">\n              <div className=\"w-12 h-12 rounded-full bg-indigo-500 flex items-center justify-center text-xl shrink-0\">\n                ðŸ‘¨â€ðŸ’»\n              </div>\n              <div>\n                <p className=\"mb-2\">\n                  Built with love (and too much caffeine) by a local developer who got tired of\n                  getting lost in Eixample.\n                </p>\n                <p className=\"text-xs opacity-60\">Anonymous Developer</p>\n              </div>\n            </div>\n\n            <h3 className=\"font-bold text-lg mt-6 text-sky-500\">{t('howToPlay')}</h3>\n            <ul className=\"space-y-3\">\n              <li className=\"flex items-start gap-3\">\n                <span className=\"mt-1 w-1.5 h-1.5 rounded-full bg-slate-400 shrink-0\" />\n                <span>{t('aboutPoint1')}</span>\n              </li>\n              <li className=\"flex items-start gap-3\">\n                <span className=\"mt-1 w-1.5 h-1.5 rounded-full bg-slate-400 shrink-0\" />\n                <span>{t('aboutPoint2')}</span>\n              </li>\n              <li className=\"flex items-start gap-3\">\n                <span className=\"mt-1 w-1.5 h-1.5 rounded-full bg-slate-400 shrink-0\" />\n                <span>{t('aboutPoint3')}</span>\n              </li>\n            </ul>\n\n            <div className=\"pt-10 text-center opacity-40 text-xs font-mono\">\n              <p>{t('rightsReserved')}</p>\n              <div className=\"flex justify-center gap-4 mt-2\">\n                <a href=\"/privacy\" className=\"hover:underline\">\n                  Privacy\n                </a>\n                <span>â€¢</span>\n                <a href=\"/terms\" className=\"hover:underline\">\n                  Terms\n                </a>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nAboutScreen.propTypes = {\n  onClose: PropTypes.func.isRequired,\n};\n\nexport default AboutScreen;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/AchievementModal.jsx",
    "messages": [
      {
        "ruleId": "react/no-unescaped-entities",
        "severity": 2,
        "message": "`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.",
        "line": 65,
        "column": 69,
        "nodeType": "JSXText",
        "messageId": "unescapedEntityAlts",
        "suggestions": [
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&quot;" },
            "fix": { "range": [2659, 2660], "text": "&quot;" },
            "desc": "Replace with `&quot;`."
          },
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&ldquo;" },
            "fix": { "range": [2659, 2660], "text": "&ldquo;" },
            "desc": "Replace with `&ldquo;`."
          },
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&#34;" },
            "fix": { "range": [2659, 2660], "text": "&#34;" },
            "desc": "Replace with `&#34;`."
          },
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&rdquo;" },
            "fix": { "range": [2659, 2660], "text": "&rdquo;" },
            "desc": "Replace with `&rdquo;`."
          }
        ]
      },
      {
        "ruleId": "react/no-unescaped-entities",
        "severity": 2,
        "message": "`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.",
        "line": 65,
        "column": 95,
        "nodeType": "JSXText",
        "messageId": "unescapedEntityAlts",
        "suggestions": [
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&quot;" },
            "fix": { "range": [2685, 2686], "text": "&quot;" },
            "desc": "Replace with `&quot;`."
          },
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&ldquo;" },
            "fix": { "range": [2685, 2686], "text": "&ldquo;" },
            "desc": "Replace with `&ldquo;`."
          },
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&#34;" },
            "fix": { "range": [2685, 2686], "text": "&#34;" },
            "desc": "Replace with `&#34;`."
          },
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&rdquo;" },
            "fix": { "range": [2685, 2686], "text": "&rdquo;" },
            "desc": "Replace with `&rdquo;`."
          }
        ]
      }
    ],
    "suppressedMessages": [],
    "errorCount": 2,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import React from 'react';\n\nimport { motion } from 'framer-motion';\nimport { useTheme } from '../context/ThemeContext';\nimport PropTypes from 'prop-types';\n\nconst AchievementModal = ({ achievement, onDismiss }) => {\n  const { theme, t } = useTheme();\n\n  if (!achievement) {return null;}\n\n  return (\n    <div className=\"fixed inset-0 z-[9000] flex items-center justify-center p-4\">\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n        onClick={onDismiss}\n        className=\"absolute inset-0 bg-black/60 backdrop-blur-md\"\n      />\n      <motion.div\n        initial={{ scale: 0.5, opacity: 0, rotate: -10 }}\n        animate={{ scale: 1, opacity: 1, rotate: 0 }}\n        exit={{ scale: 0.8, opacity: 0 }}\n        transition={{ type: 'spring', damping: 15 }}\n        className={`relative z-10 w-full max-w-sm p-8 rounded-3xl shadow-2xl text-center overflow-hidden\n                  ${theme === 'dark' ? 'bg-slate-900 text-white' : 'bg-white text-slate-900'}\n                  border-4 border-yellow-500\n              `}\n      >\n        {/* Confetti / Rays Effect Background */}\n        <div className=\"absolute inset-0 z-0 opacity-10 animate-spin-slow\">\n          <svg viewBox=\"0 0 100 100\" className=\"w-full h-full text-yellow-500 fill-current\">\n            <path d=\"M50 0 L60 40 L100 50 L60 60 L50 100 L40 60 L0 50 L40 40 Z\" />\n          </svg>\n        </div>\n\n        <div className=\"relative z-10\">\n          <h3 className=\"text-xs font-black text-yellow-500/80 uppercase tracking-widest mb-1\">\n            {t('new') || 'NEW'}\n          </h3>\n          <h3 className=\"text-lg font-black text-yellow-500 uppercase tracking-wider mb-4\">\n            {t('achievementUnlocked') || 'Achievement Unlocked!'}\n          </h3>\n\n          <div className=\"mb-6 flex justify-center\">\n            {achievement.image ? (\n              <div className=\"relative\">\n                <div className=\"absolute inset-0 bg-yellow-500 blur-2xl opacity-30 rounded-full\" />\n                <img\n                  src={achievement.image}\n                  alt={achievement.name}\n                  className=\"w-32 h-32 object-contain relative z-10 drop-shadow-2xl hover:scale-110 transition-transform duration-500\"\n                />\n              </div>\n            ) : (\n              <span className=\"text-8xl filter drop-shadow-2xl animate-bounce-slow inline-block\">\n                {achievement.emoji}\n              </span>\n            )}\n          </div>\n\n          <h2 className=\"text-2xl font-black mb-2 leading-tight\">{achievement.name}</h2>\n\n          <p className=\"text-lg font-medium opacity-80 mb-6 italic\">\"{achievement.description}\"</p>\n\n          {achievement.flavorText && (\n            <div className=\"bg-yellow-500/10 p-3 rounded-xl mb-6\">\n              <p className=\"text-xs font-bold text-yellow-600 dark:text-yellow-400 uppercase tracking-wide\">\n                {achievement.flavorText}\n              </p>\n            </div>\n          )}\n\n          <button\n            onClick={onDismiss}\n            className=\"w-full py-4 bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-400 hover:to-orange-400 text-white rounded-xl font-black text-lg shadow-lg shadow-yellow-500/30 transform hover:scale-[1.02] transition-all\"\n          >\n            {t('okay') || 'Okay'}\n          </button>\n        </div>\n      </motion.div>\n    </div>\n  );\n};\n\nAchievementModal.propTypes = {\n  achievement: PropTypes.shape({\n    id: PropTypes.string,\n    name: PropTypes.string,\n    description: PropTypes.string,\n    image: PropTypes.string,\n    emoji: PropTypes.string,\n    flavorText: PropTypes.string,\n  }),\n  onDismiss: PropTypes.func.isRequired,\n};\n\nexport default AchievementModal;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/AdminGiuros.tsx",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 23,
        "column": 44,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 23,
        "endColumn": 47,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [569, 572], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [569, 572], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      },
      {
        "ruleId": "max-lines-per-function",
        "severity": 1,
        "message": "Arrow function has too many lines (216). Maximum allowed is 150.",
        "line": 26,
        "column": 49,
        "nodeType": "ArrowFunctionExpression",
        "messageId": "exceed",
        "endLine": 266,
        "endColumn": 2
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 5.",
        "line": 51,
        "column": 91,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 51,
        "endColumn": 92
      },
      {
        "ruleId": "no-restricted-globals",
        "severity": 2,
        "message": "Unexpected use of 'prompt'.",
        "line": 63,
        "column": 22,
        "nodeType": "Identifier",
        "messageId": "defaultMessage",
        "endLine": 63,
        "endColumn": 28
      },
      {
        "ruleId": "no-restricted-globals",
        "severity": 2,
        "message": "Unexpected use of 'alert'.",
        "line": 88,
        "column": 7,
        "nodeType": "Identifier",
        "messageId": "defaultMessage",
        "endLine": 88,
        "endColumn": 12
      },
      {
        "ruleId": "no-restricted-globals",
        "severity": 2,
        "message": "Unexpected use of 'alert'.",
        "line": 91,
        "column": 7,
        "nodeType": "Identifier",
        "messageId": "defaultMessage",
        "endLine": 91,
        "endColumn": 12
      },
      {
        "ruleId": "no-nested-ternary",
        "severity": 1,
        "message": "Do not nest ternary expressions.",
        "line": 249,
        "column": 53,
        "nodeType": "ConditionalExpression",
        "messageId": "noNestedTernary",
        "endLine": 249,
        "endColumn": 154
      },
      {
        "ruleId": "no-nested-ternary",
        "severity": 1,
        "message": "Do not nest ternary expressions.",
        "line": 249,
        "column": 83,
        "nodeType": "ConditionalExpression",
        "messageId": "noNestedTernary",
        "endLine": 249,
        "endColumn": 154
      }
    ],
    "suppressedMessages": [
      {
        "ruleId": "no-alert",
        "severity": 2,
        "message": "Unexpected prompt.",
        "line": 63,
        "column": 22,
        "nodeType": "CallExpression",
        "messageId": "unexpected",
        "endLine": 63,
        "endColumn": 87,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-alert",
        "severity": 2,
        "message": "Unexpected alert.",
        "line": 88,
        "column": 7,
        "nodeType": "CallExpression",
        "messageId": "unexpected",
        "endLine": 88,
        "endColumn": 56,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-alert",
        "severity": 2,
        "message": "Unexpected alert.",
        "line": 91,
        "column": 7,
        "nodeType": "CallExpression",
        "messageId": "unexpected",
        "endLine": 91,
        "endColumn": 68,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      }
    ],
    "errorCount": 3,
    "fatalErrorCount": 0,
    "warningCount": 5,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import React, { useMemo, useState, useEffect } from 'react';\n// @ts-ignore\nimport { getPayoutConfig, updatePayoutConfig, PayoutConfig } from '../utils/configService';\nimport { UserProfile } from '../types/user';\n\ninterface ShopItem {\n  id: string;\n  name: string;\n  type: string;\n  cost: number;\n  emoji?: string;\n  prefix?: string;\n  flavorText?: string;\n  description?: string;\n  cssClass?: string;\n  image?: string;\n}\n\ninterface AdminGiurosProps {\n  users: UserProfile[];\n  shopItems: { all: ShopItem[] };\n  theme: string;\n  onUpdateShopItem?: (id: string, updates: any) => Promise<void>;\n}\n\nconst AdminGiuros: React.FC<AdminGiurosProps> = ({\n  users = [],\n  shopItems = { all: [] },\n  theme,\n  onUpdateShopItem,\n}) => {\n  // Payout config state\n  const [payouts, setPayouts] = useState<PayoutConfig | null>(null);\n  const [editingPayouts, setEditingPayouts] = useState<Partial<PayoutConfig>>({});\n  const [savingPayouts, setSavingPayouts] = useState<boolean>(false);\n\n  // Fetch payout config on mount\n  useEffect(() => {\n    getPayoutConfig().then((config: PayoutConfig) => {\n      setPayouts(config);\n      setEditingPayouts(config);\n    });\n  }, []);\n\n  // Calculate Economy Stats\n  const stats = useMemo(() => {\n    const totalCirculation = users.reduce((acc, u) => acc + (u.giuros || 0), 0);\n    const avgBalance = users.length > 0 ? Math.round(totalCirculation / users.length) : 0;\n\n    // Sort users by wealth\n    const richest = [...users].sort((a, b) => (b.giuros || 0) - (a.giuros || 0)).slice(0, 5);\n\n    return {\n      totalCirculation,\n      avgBalance,\n      richest,\n    };\n  }, [users]);\n\n  // Helper to edit price\n  const handleEditPrice = async (item: ShopItem) => {\n    // eslint-disable-next-line no-alert\n    const newPrice = prompt(`Enter new price for ${item.name}:`, item.cost.toString());\n    if (newPrice !== null && !isNaN(parseInt(newPrice, 10))) {\n      if (onUpdateShopItem) {\n        await onUpdateShopItem(item.id, { cost: parseInt(newPrice, 10) });\n      }\n    }\n  };\n\n  // Handle payout value change\n  const handlePayoutChange = (key: string, value: string) => {\n    const numValue = parseInt(value, 10);\n    if (!isNaN(numValue) && numValue >= 0) {\n      setEditingPayouts((prev: Partial<PayoutConfig>) => ({ ...prev, [key]: numValue }));\n    }\n  };\n\n  // Save payout changes\n  const handleSavePayouts = async () => {\n    setSavingPayouts(true);\n    const result = await updatePayoutConfig(editingPayouts);\n    setSavingPayouts(false);\n\n    if (result.success) {\n      setPayouts(editingPayouts as PayoutConfig);\n      // eslint-disable-next-line no-alert\n      alert('Payout configuration saved successfully!');\n    } else {\n      // eslint-disable-next-line no-alert\n      alert(`Failed to save: ${  result.error || 'Unknown error'}`);\n    }\n  };\n\n  // Check if payouts have changed\n  const payoutsChanged = payouts && JSON.stringify(payouts) !== JSON.stringify(editingPayouts);\n\n  return (\n    <div className=\"space-y-8 animate-fadeIn\">\n      <h2 className=\"text-3xl font-black\">Giuros Economics</h2>\n\n      {/* High-Level Metrics */}\n      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n        <MetricCard\n          title=\"Total Circulation\"\n          value={`${stats.totalCirculation.toLocaleString()} ðŸª™`}\n          color=\"text-yellow-500\"\n          theme={theme}\n        />\n        <MetricCard\n          title=\"Avg User Balance\"\n          value={`${stats.avgBalance.toLocaleString()} ðŸª™`}\n          color=\"text-sky-500\"\n          theme={theme}\n        />\n        <MetricCard\n          title=\"Starting Amount\"\n          value={payouts?.STARTING_GIUROS ?? '...'}\n          color=\"text-slate-500\"\n          theme={theme}\n        />\n        <MetricCard\n          title=\"Active Items\"\n          value={shopItems.all?.length || 0}\n          color=\"text-purple-500\"\n          theme={theme}\n        />\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Income Sources (Editable) */}\n        <div\n          className={`p-6 rounded-2xl border ${theme === 'dark' ? 'bg-slate-800 border-slate-700' : 'bg-white border-slate-200'}`}\n        >\n          <h3 className=\"text-xl font-bold mb-4 flex items-center gap-2\">\n            <span>ðŸ“ˆ</span> Income Sources (Rewards)\n          </h3>\n          {payouts ? (\n            <div className=\"space-y-3\">\n              <EditableSourceRow\n                label=\"Starting Giuros\"\n                value={editingPayouts.STARTING_GIUROS || 0}\n                onChange={v => handlePayoutChange('STARTING_GIUROS', v)}\n                theme={theme}\n              />\n              <EditableSourceRow\n                label=\"Daily Login\"\n                value={editingPayouts.DAILY_LOGIN_BONUS || 0}\n                onChange={v => handlePayoutChange('DAILY_LOGIN_BONUS', v)}\n                theme={theme}\n              />\n              <EditableSourceRow\n                label=\"Daily Challenge\"\n                value={editingPayouts.DAILY_CHALLENGE_BONUS || 0}\n                onChange={v => handlePayoutChange('DAILY_CHALLENGE_BONUS', v)}\n                theme={theme}\n              />\n              <EditableSourceRow\n                label=\"Week Streak Bonus\"\n                value={editingPayouts.STREAK_WEEK_BONUS || 0}\n                onChange={v => handlePayoutChange('STREAK_WEEK_BONUS', v)}\n                theme={theme}\n              />\n              <EditableSourceRow\n                label=\"Referral Bonus\"\n                value={editingPayouts.REFERRAL_BONUS || 0}\n                onChange={v => handlePayoutChange('REFERRAL_BONUS', v)}\n                theme={theme}\n              />\n              <EditableSourceRow\n                label=\"Perfect Score\"\n                value={editingPayouts.PERFECT_SCORE_BONUS || 0}\n                onChange={v => handlePayoutChange('PERFECT_SCORE_BONUS', v)}\n                theme={theme}\n              />\n              <SourceRow label=\"Feedback Approval\" value=\"Variable (set per feedback)\" isVariable />\n            </div>\n          ) : (\n            <p className=\"text-center opacity-50\">Loading configuration...</p>\n          )}\n          {payoutsChanged && (\n            <button\n              onClick={handleSavePayouts}\n              disabled={savingPayouts}\n              className=\"mt-4 w-full py-3 bg-emerald-500 hover:bg-emerald-600 disabled:bg-emerald-300 text-white rounded-xl font-bold shadow-lg transition-colors\"\n            >\n              {savingPayouts ? 'Saving...' : 'Save Payout Changes'}\n            </button>\n          )}\n        </div>\n\n        {/* Sinks (Shop Prices) */}\n        <div\n          className={`p-6 rounded-2xl border ${theme === 'dark' ? 'bg-slate-800 border-slate-700' : 'bg-white border-slate-200'}`}\n        >\n          <h3 className=\"text-xl font-bold mb-4 flex items-center gap-2\">\n            <span>ðŸ“‰</span> Sinks (Shop Prices)\n          </h3>\n          <div className=\"space-y-3 max-h-64 overflow-y-auto pr-2\">\n            {shopItems.all\n              ?.sort((a, b) => a.cost - b.cost)\n              .map(item => (\n                <div\n                  key={item.id}\n                  className=\"flex justify-between items-center bg-slate-100 dark:bg-slate-700/50 p-2 rounded-lg group\"\n                >\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"text-xl\">{item.emoji || 'ðŸ“¦'}</span>\n                    <div className=\"flex flex-col\">\n                      <span className=\"font-bold text-sm\">{item.name}</span>\n                      <span className=\"text-[10px] opacity-60 uppercase\">{item.type}</span>\n                    </div>\n                  </div>\n                  <button\n                    onClick={() => handleEditPrice(item)}\n                    className=\"flex items-center gap-2 px-2 py-1 rounded hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors\"\n                    title=\"Click to edit price\"\n                  >\n                    <span className=\"font-mono font-bold text-red-400\">-{item.cost}</span>\n                    <span className=\"opacity-0 group-hover:opacity-100 text-xs\">âœï¸</span>\n                  </button>\n                </div>\n              ))}\n            {(!shopItems.all || shopItems.all.length === 0) && (\n              <p className=\"opacity-50 text-center text-sm\">No shop items found.</p>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* Richest Users */}\n      <div\n        className={`p-6 rounded-2xl border ${theme === 'dark' ? 'bg-slate-800 border-slate-700' : 'bg-white border-slate-200'}`}\n      >\n        <h3 className=\"text-xl font-bold mb-4\">ðŸ‘‘ Richest Users (Top 5)</h3>\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full text-left\">\n            <thead>\n              <tr className=\"border-b border-slate-200 dark:border-slate-700 text-xs uppercase opacity-50\">\n                <th className=\"pb-2\">User</th>\n                <th className=\"pb-2 text-right\">Balance</th>\n              </tr>\n            </thead>\n            <tbody className=\"divide-y divide-slate-100 dark:divide-slate-800\">\n              {stats.richest.map((user: UserProfile, i: number) => (\n                <tr key={user.uid || user.username}>\n                  <td className=\"py-3 font-medium\">\n                    <span\n                      className={`mr-2 font-black ${i === 0 ? 'text-yellow-500' : i === 1 ? 'text-slate-400' : i === 2 ? 'text-orange-700' : 'opacity-50'}`}\n                    >\n                      #{i + 1}\n                    </span>\n                    {user.username}\n                  </td>\n                  <td className=\"py-3 text-right font-mono font-bold text-yellow-500\">\n                    {user.giuros} ðŸª™\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n};\n\ninterface MetricCardProps {\n  title: string;\n  value: string | number;\n  color?: string;\n  theme: string;\n}\n\nconst MetricCard: React.FC<MetricCardProps> = ({ title, value, color, theme }) => (\n  <div\n    className={`p-6 rounded-2xl shadow-sm border ${\n      theme === 'dark' ? 'bg-slate-800 border-slate-700' : 'bg-white border-slate-200'\n    }`}\n  >\n    <h3 className=\"text-sm font-bold opacity-60 uppercase mb-2\">{title}</h3>\n    <p className={`text-3xl font-black ${color}`}>{value}</p>\n  </div>\n);\n\ninterface SourceRowProps {\n  label: string;\n  value: string | number;\n  isVariable?: boolean;\n}\n\nconst SourceRow: React.FC<SourceRowProps> = ({ label, value, isVariable }) => (\n  <div className=\"flex justify-between items-center p-2 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors\">\n    <span className=\"font-medium text-sm text-slate-700 dark:text-slate-300\">{label}</span>\n    <span className={`font-mono font-bold ${isVariable ? 'text-blue-500' : 'text-emerald-500'}`}>\n      {value}\n    </span>\n  </div>\n);\n\ninterface EditableSourceRowProps {\n  label: string;\n  value: number;\n  onChange: (val: string) => void;\n  theme: string;\n}\n\nconst EditableSourceRow: React.FC<EditableSourceRowProps> = ({ label, value, onChange, theme }) => (\n  <div className=\"flex justify-between items-center p-2 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors\">\n    <span className=\"font-medium text-sm text-slate-700 dark:text-slate-300\">{label}</span>\n    <div className=\"flex items-center gap-1\">\n      <span className=\"text-emerald-500 font-bold\">+</span>\n      <input\n        type=\"number\"\n        value={value}\n        onChange={e => onChange(e.target.value)}\n        className={`w-20 p-1 rounded text-right font-mono font-bold ${\n          theme === 'dark'\n            ? 'bg-slate-700 text-emerald-400 border-slate-600'\n            : 'bg-slate-100 text-emerald-600 border-slate-200'\n        } border`}\n        min=\"0\"\n      />\n    </div>\n  </div>\n);\n\nexport default AdminGiuros;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/AdminPanel.tsx",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 2,
        "message": "'createAnnouncement' is defined but never used. Allowed unused vars must match /^_/u.",
        "line": 7,
        "column": 31,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 7,
        "endColumn": 49,
        "suggestions": [
          {
            "messageId": "removeUnusedVar",
            "data": { "varName": "createAnnouncement" },
            "fix": { "range": [270, 290], "text": "" },
            "desc": "Remove unused variable \"createAnnouncement\"."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 2,
        "message": "'deleteAnnouncement' is defined but never used. Allowed unused vars must match /^_/u.",
        "line": 7,
        "column": 51,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 7,
        "endColumn": 69,
        "suggestions": [
          {
            "messageId": "removeUnusedVar",
            "data": { "varName": "deleteAnnouncement" },
            "fix": { "range": [290, 310], "text": "" },
            "desc": "Remove unused variable \"deleteAnnouncement\"."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 2,
        "message": "'createShopItem' is defined but never used. Allowed unused vars must match /^_/u.",
        "line": 9,
        "column": 24,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 9,
        "endColumn": 38,
        "suggestions": [
          {
            "messageId": "removeUnusedVar",
            "data": { "varName": "createShopItem" },
            "fix": { "range": [370, 386], "text": "" },
            "desc": "Remove unused variable \"createShopItem\"."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 2,
        "message": "'deleteShopItem' is defined but never used. Allowed unused vars must match /^_/u.",
        "line": 9,
        "column": 40,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 9,
        "endColumn": 54,
        "suggestions": [
          {
            "messageId": "removeUnusedVar",
            "data": { "varName": "deleteShopItem" },
            "fix": { "range": [386, 402], "text": "" },
            "desc": "Remove unused variable \"deleteShopItem\"."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 2,
        "message": "'updateShopItem' is defined but never used. Allowed unused vars must match /^_/u.",
        "line": 9,
        "column": 56,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 9,
        "endColumn": 70,
        "suggestions": [
          {
            "messageId": "removeUnusedVar",
            "data": { "varName": "updateShopItem" },
            "fix": { "range": [402, 418], "text": "" },
            "desc": "Remove unused variable \"updateShopItem\"."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 2,
        "message": "'ACHIEVEMENT_BADGES' is defined but never used. Allowed unused vars must match /^_/u.",
        "line": 19,
        "column": 10,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 19,
        "endColumn": 28,
        "suggestions": [
          {
            "messageId": "removeUnusedImportDeclaration",
            "data": { "varName": "ACHIEVEMENT_BADGES" },
            "fix": { "range": [784, 842], "text": "" },
            "desc": "Remove unused import declaration."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 58,
        "column": 14,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 58,
        "endColumn": 17,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [1759, 1762], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [1759, 1762], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      },
      {
        "ruleId": "max-lines-per-function",
        "severity": 1,
        "message": "Arrow function has too many lines (367). Maximum allowed is 150.",
        "line": 62,
        "column": 30,
        "nodeType": "ArrowFunctionExpression",
        "messageId": "exceed",
        "endLine": 478,
        "endColumn": 2
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 100.",
        "line": 78,
        "column": 19,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 78,
        "endColumn": 22
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 138,
        "column": 17,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 138,
        "endColumn": 20,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [4368, 4371], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [4368, 4371], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 186,
        "column": 17,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 186,
        "endColumn": 20,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [6358, 6361], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [6358, 6361], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1000.",
        "line": 249,
        "column": 59,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 249,
        "endColumn": 63
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 7.",
        "line": 251,
        "column": 61,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 251,
        "endColumn": 62
      }
    ],
    "suppressedMessages": [],
    "errorCount": 6,
    "fatalErrorCount": 0,
    "warningCount": 7,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import React, { useState, useEffect, useCallback } from 'react';\n// @ts-ignore\nimport { useTheme } from '../context/ThemeContext';\n// @ts-ignore\nimport { getAllUsers, getFeedbackList, updateUserAsAdmin } from '../utils/social';\n// @ts-ignore\nimport { getAllAnnouncements, createAnnouncement, deleteAnnouncement } from '../utils/news';\n// @ts-ignore\nimport { getShopItems, createShopItem, deleteShopItem, updateShopItem } from '../utils/shop';\nimport AdminGiuros from './AdminGiuros';\n// @ts-ignore\nimport { useNotification } from '../hooks/useNotification';\nimport { useConfirm } from '../hooks/useConfirm';\nimport { ConfirmDialog } from './ConfirmDialog';\nimport { logger } from '../utils/logger';\n// @ts-ignore\nimport { motion, AnimatePresence } from 'framer-motion';\n// @ts-ignore\nimport { ACHIEVEMENT_BADGES } from '../data/achievements';\nimport { UserProfile } from '../types/user';\n\ninterface MetricCardProps {\n  title: string;\n  value: string | number;\n  color: string;\n}\n\nconst MetricCard: React.FC<MetricCardProps> = ({ title, value, color }) => {\n  const { theme } = useTheme();\n  return (\n    <div\n      className={`p-6 rounded-2xl shadow-sm border ${theme === 'dark' ? 'bg-slate-800 border-slate-700' : 'bg-white border-slate-200'}`}\n    >\n      <h3 className=\"text-sm font-bold opacity-60 uppercase mb-2\">{title}</h3>\n      <p className={`text-3xl font-black ${color}`}>{value}</p>\n    </div>\n  );\n};\n\ninterface ShopItem {\n  id: string;\n  name: string;\n  type: string;\n  cost: number;\n  emoji?: string;\n  prefix?: string;\n  flavorText?: string;\n  description?: string;\n  cssClass?: string;\n  image?: string;\n}\n\ninterface FeedbackItem {\n  id: string;\n  text: string;\n  username: string;\n  status: 'pending' | 'approved' | 'rejected';\n  createdAt: any;\n  reward?: number;\n}\n\nconst AdminPanel: React.FC = () => {\n  const { theme } = useTheme();\n  const [activeTab, setActiveTab] = useState<string>('dashboard');\n  const [users, setUsers] = useState<UserProfile[]>([]);\n  const [feedback, setFeedback] = useState<FeedbackItem[]>([]);\n  const [loading, setLoading] = useState<boolean>(false);\n  const [editingUser, setEditingUser] = useState<UserProfile | null>(null);\n  const [migrationStatus, setMigrationStatus] = useState<string | null>(null);\n  const { notify } = useNotification();\n  const { confirm, confirmConfig, handleClose } = useConfirm();\n\n  const [shopItems, setShopItems] = useState<{ all: ShopItem[] }>({ all: [] });\n\n  const fetchData = useCallback(async () => {\n    setLoading(true);\n    const [u, f, , shop] = await Promise.all([\n      getAllUsers(100) as unknown as Promise<UserProfile[]>,\n      getFeedbackList() as unknown as Promise<FeedbackItem[]>,\n      getAllAnnouncements(),\n      getShopItems(true) as unknown as Promise<{ all: ShopItem[] }>,\n    ]);\n    setUsers(u);\n    setFeedback(f);\n    setShopItems(shop);\n    setLoading(false);\n  }, []);\n\n  const handleMigration = async () => {\n    if (\n      !(await confirm(\n        'WARNING: This will migrate ALL users to lowercase usernames. This is destructive. Are you sure?',\n        'Start Migration',\n        true\n      ))\n    )\n      {return;}\n\n    setMigrationStatus('Starting migration...');\n    try {\n      const { collection, getDocs, doc, writeBatch } = await import('firebase/firestore');\n      // @ts-ignore\n      const { db } = await import('../firebase');\n\n      const usersRef = collection(db, 'users');\n      const snapshot = await getDocs(usersRef);\n      let migrated = 0;\n      let count = 0;\n      let batch = writeBatch(db);\n      const batchSize = 200;\n\n      for (const userDoc of snapshot.docs) {\n        const oldId = userDoc.id;\n        const newId = oldId.toLowerCase();\n\n        if (oldId !== newId) {\n          const oldData = userDoc.data();\n          const targetRef = doc(db, 'users', newId);\n          // Overwrite with lowercase ID, keeping data\n          batch.set(targetRef, { ...oldData, username: newId, originalId: oldId }, { merge: true });\n          batch.delete(userDoc.ref);\n\n          migrated++;\n          count++;\n        }\n\n        if (count >= batchSize) {\n          await batch.commit();\n          batch = writeBatch(db);\n          count = 0;\n        }\n      }\n\n      if (count > 0) {await batch.commit();}\n\n      setMigrationStatus(`Migration complete. Migrated ${migrated} users.`);\n      fetchData(); // Refresh list\n    } catch (e: any) {\n      logger.error(e);\n      setMigrationStatus(`Error: ${e.message}`);\n    }\n  };\n\n  // Initial Fetch\n  useEffect(() => {\n    fetchData();\n  }, [fetchData]);\n\n  const handleUpdateUser = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!editingUser) {return;}\n\n    // Convert numeric fields\n    const updates = {\n      ...editingUser,\n      giuros: Number(editingUser.giuros),\n      gamesPlayed: Number(editingUser.gamesPlayed),\n      bestScore: Number(editingUser.bestScore),\n      purchasedCosmetics: editingUser.purchasedCosmetics || [],\n    };\n\n    // Check if username changed (requires migration)\n    if (editingUser.username !== editingUser.uid && editingUser.uid) {\n      // Assuming uid is the doc ID or similar logic\n      // NOTE: AdminPanel logic assumed username === id mostly in previous code.\n      // If logic was `editingUser.username !== editingUser.id` (from previous file), we need to check properties.\n      // UserProfile has username and uid. We should check if they differ if that implies change.\n      // Reverting to previous logic pattern: if edited username differs from original ID.\n      // Need to track original ID? editingUser comes from `users` state.\n      // Let's assume `editingUser.username` is the potentially EDITED one.\n      // But wait, `setEditingUser` updates `editingUser`. We don't have original unless we store it.\n      // Actually `handleUpdateUser` logic in original file used `editingUser.id` vs `editingUser.username`.\n      // `UserProfile` type in `user.ts` has `uid` not `id`. Firebase docs have `id`.\n      // I should use `uid` or cast to `any` if valid.\n    }\n\n    // Simplification for TS refactor:\n    // We'll treat updates via standard admin functions.\n    // If we need migration logic, we'd need to know formatting.\n    // For now, let's use straightforward update.\n\n    try {\n      await updateUserAsAdmin(editingUser.username, updates);\n      setEditingUser(null);\n      fetchData();\n    } catch (e: any) {\n      logger.error(e);\n      notify(`Update failed: ${e.message}`, 'error');\n    }\n  };\n\n  return (\n    <div\n      className={`fixed inset-0 pt-16 flex ${theme === 'dark' ? 'bg-slate-900 text-white' : 'bg-slate-50 text-slate-900'}`}\n    >\n      {/* Sidebar */}\n      <div\n        className={`w-48 shrink-0 p-4 border-r flex flex-col ${theme === 'dark' ? 'border-slate-800 bg-slate-900' : 'border-slate-200 bg-white'}`}\n      >\n        <h1 className=\"text-xl font-black mb-6 text-sky-500\">Girify Admin</h1>\n        <nav className=\"flex flex-col gap-1\">\n          {['dashboard', 'users', 'shop', 'feedback', 'announcements', 'analytics', 'giuros'].map(\n            tab => (\n              <button\n                key={tab}\n                onClick={() => setActiveTab(tab)}\n                className={`text-left px-3 py-2 rounded-lg font-bold text-sm transition-all ${\n                  activeTab === tab\n                    ? 'bg-sky-500 text-white shadow-lg shadow-sky-500/20'\n                    : 'hover:bg-slate-100 dark:hover:bg-slate-800 opacity-60 hover:opacity-100'\n                }`}\n              >\n                {tab.charAt(0).toUpperCase() + tab.slice(1)}\n              </button>\n            )\n          )}\n        </nav>\n      </div>\n\n      {/* Main Content - h-full + overflow-y-scroll ensures scrolling */}\n      <div className=\"flex-1 h-full overflow-y-scroll p-6\">\n        {loading ? (\n          <div className=\"flex items-center justify-center h-full\">\n            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-sky-500\" />\n          </div>\n        ) : (\n          <div className=\"w-full pb-16\">\n            {/* GIUROS ECONOMICS */}\n            {activeTab === 'giuros' && (\n              <AdminGiuros users={users} shopItems={shopItems} theme={theme} />\n            )}\n\n            {/* DASHBOARD */}\n            {activeTab === 'dashboard' && (\n              <div className=\"space-y-8\">\n                <h2 className=\"text-3xl font-black\">Overview</h2>\n                <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4\">\n                  <MetricCard title=\"Total Users\" value={users.length} color=\"text-sky-500\" />\n                  <MetricCard\n                    title=\"New This Week\"\n                    value={\n                      users.filter(u => {\n                        if (!u.joinedAt) {return false;}\n                        // @ts-ignore\n                        const joined = u.joinedAt.toDate\n                          ? // @ts-ignore\n                            u.joinedAt.toDate()\n                          : // @ts-ignore\n                            new Date(u.joinedAt.seconds * 1000);\n                        const weekAgo = new Date();\n                        weekAgo.setDate(weekAgo.getDate() - 7);\n                        return joined > weekAgo;\n                      }).length\n                    }\n                    color=\"text-emerald-500\"\n                  />\n                  <MetricCard\n                    title=\"Total Games\"\n                    value={users.reduce((acc, u) => acc + (u.gamesPlayed || 0), 0)}\n                    color=\"text-purple-500\"\n                  />\n                  <MetricCard\n                    title=\"Avg Best Score\"\n                    value={\n                      users.length > 0\n                        ? Math.round(\n                            users.reduce((acc, u) => acc + (u.bestScore || 0), 0) / users.length\n                          )\n                        : 0\n                    }\n                    color=\"text-amber-500\"\n                  />\n                  <MetricCard\n                    title=\"Total Giuros\"\n                    value={users.reduce((acc, u) => acc + (u.giuros || 0), 0).toLocaleString()}\n                    color=\"text-yellow-500\"\n                  />\n                  <MetricCard title=\"Feedback\" value={feedback.length} color=\"text-rose-500\" />\n                </div>\n\n                {/* Data Tools */}\n                <div className=\"p-6 rounded-2xl bg-white dark:bg-slate-800 shadow-sm border border-slate-100 dark:border-slate-700\">\n                  <h3 className=\"text-xl font-bold mb-4\">Data Tools</h3>\n                  <div className=\"space-y-4\">\n                    {/* Simplified Data Tools Section for brevity in this conversion */}\n                    <div className=\"flex items-center gap-4\">\n                      <button\n                        onClick={handleMigration}\n                        className=\"px-6 py-3 rounded-xl bg-rose-500 hover:bg-rose-600 text-white font-bold transition-all shadow-lg shadow-rose-500/20\"\n                      >\n                        âš ï¸ Fix Usernames (Lowercase Migration)\n                      </button>\n                      {migrationStatus && (\n                        <span className=\"font-mono text-sm opacity-70 bg-slate-100 dark:bg-slate-900 px-3 py-1 rounded\">\n                          {migrationStatus}\n                        </span>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {/* USERS */}\n            {activeTab === 'users' && (\n              <div className=\"space-y-6\">\n                <div className=\"flex justify-between items-center\">\n                  <h2 className=\"text-3xl font-black\">User Management</h2>\n                  <button\n                    onClick={fetchData}\n                    className=\"px-4 py-2 bg-slate-200 dark:bg-slate-800 rounded-lg text-sm font-bold\"\n                  >\n                    Refresh\n                  </button>\n                </div>\n\n                <div\n                  className={`rounded-2xl overflow-hidden border ${theme === 'dark' ? 'border-slate-700' : 'border-slate-200'}`}\n                >\n                  <table className=\"w-full text-left\">\n                    <thead className={theme === 'dark' ? 'bg-slate-800' : 'bg-slate-100'}>\n                      <tr>\n                        <th className=\"p-4 text-xs uppercase opacity-50\">User</th>\n                        <th className=\"p-4 text-xs uppercase opacity-50\">Email</th>\n                        <th className=\"p-4 text-xs uppercase opacity-50\">Stats</th>\n                        <th className=\"p-4 text-xs uppercase opacity-50\">Giuros</th>\n                        <th className=\"p-4 text-xs uppercase opacity-50\">Actions</th>\n                      </tr>\n                    </thead>\n                    <tbody className=\"divide-y divide-slate-200 dark:divide-slate-700\">\n                      {users.map(user => (\n                        <tr\n                          key={user.uid || user.username}\n                          className={\n                            theme === 'dark' ? 'hover:bg-slate-800/50' : 'hover:bg-slate-50'\n                          }\n                        >\n                          <td className=\"p-4\">\n                            <div className=\"font-bold\">{user.username}</div>\n                            <div className=\"text-xs opacity-50\">{user.realName}</div>\n                          </td>\n                          <td className=\"p-4 text-sm font-mono opacity-70\">\n                            {user.email || 'No email'}\n                          </td>\n                          <td className=\"p-4 text-sm\">\n                            <div>Games: {user.gamesPlayed || 0}</div>\n                            <div>Best: {user.bestScore || 0}</div>\n                            <div className=\"text-orange-500 font-bold\">\n                              Streak: {user.streak || 0}\n                            </div>\n                            <div className=\"opacity-70 text-xs mt-1\">\n                              Total: {(user.totalScore || 0).toLocaleString()}\n                            </div>\n                          </td>\n                          <td className=\"p-4 font-mono font-bold text-yellow-500\">\n                            {user.giuros || 0} ðŸª™\n                          </td>\n                          <td className=\"p-4 flex gap-2\">\n                            <button\n                              onClick={() => setEditingUser(user)}\n                              className=\"px-3 py-1 bg-sky-500/10 text-sky-500 rounded-lg text-xs font-bold hover:bg-sky-500 hover:text-white transition-colors\"\n                            >\n                              Edit\n                            </button>\n                          </td>\n                        </tr>\n                      ))}\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n            )}\n\n            {/* SHOP */}\n            {activeTab === 'shop' && <div>Shop Management (Placeholder for now)</div>}\n\n            {/* FEEDBACK */}\n            {activeTab === 'feedback' && <div>Feedback Management (Placeholder for now)</div>}\n          </div>\n        )}\n      </div>\n\n      {/* EDIT MODAL */}\n      <AnimatePresence>\n        {editingUser && (\n          <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm\">\n            <motion.div\n              initial={{ opacity: 0, scale: 0.9 }}\n              animate={{ opacity: 1, scale: 1 }}\n              exit={{ opacity: 0, scale: 0.9 }}\n              className={`w-full max-w-lg p-6 rounded-3xl shadow-2xl ${theme === 'dark' ? 'bg-slate-800' : 'bg-white'}`}\n            >\n              <h3 className=\"text-2xl font-black mb-6\">Edit User</h3>\n              <form onSubmit={handleUpdateUser} className=\"space-y-4\">\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <label\n                      htmlFor=\"edit-username\"\n                      className=\"text-xs uppercase font-bold opacity-50 block mb-1\"\n                    >\n                      Username\n                    </label>\n                    <input\n                      id=\"edit-username\"\n                      value={editingUser.username}\n                      onChange={e =>\n                        setEditingUser({ ...editingUser, username: e.target.value.toLowerCase() })\n                      }\n                      className=\"w-full p-3 rounded-xl bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 font-bold\"\n                    />\n                  </div>\n                  <div>\n                    <label\n                      htmlFor=\"edit-email\"\n                      className=\"text-xs uppercase font-bold opacity-50 block mb-1\"\n                    >\n                      Email\n                    </label>\n                    <input\n                      id=\"edit-email\"\n                      disabled\n                      value={editingUser.email || ''}\n                      className=\"w-full p-3 rounded-xl bg-slate-100 dark:bg-slate-900 opacity-50 cursor-not-allowed font-mono\"\n                    />\n                  </div>\n                </div>\n\n                <div>\n                  <label\n                    htmlFor=\"edit-giuros\"\n                    className=\"text-xs uppercase font-bold opacity-50 block mb-1\"\n                  >\n                    Giuros Balance\n                  </label>\n                  <input\n                    id=\"edit-giuros\"\n                    type=\"number\"\n                    value={editingUser.giuros}\n                    onChange={e =>\n                      setEditingUser({ ...editingUser, giuros: Number(e.target.value) })\n                    }\n                    className=\"w-full p-3 rounded-xl bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 font-mono\"\n                  />\n                </div>\n\n                <div className=\"flex gap-3 pt-4\">\n                  <button\n                    type=\"button\"\n                    onClick={() => setEditingUser(null)}\n                    className=\"flex-1 py-3 font-bold opacity-60 hover:opacity-100\"\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    type=\"submit\"\n                    className=\"flex-1 py-3 bg-sky-500 hover:bg-sky-600 text-white rounded-xl font-bold shadow-lg\"\n                  >\n                    Save Changes\n                  </button>\n                </div>\n              </form>\n            </motion.div>\n          </div>\n        )}\n\n        {/* Confirmation Dialog */}\n        <ConfirmDialog\n          isOpen={!!confirmConfig}\n          title={confirmConfig?.title || ''}\n          message={confirmConfig?.message || ''}\n          isDangerous={confirmConfig?.isDangerous}\n          onConfirm={() => handleClose(true)}\n          onCancel={() => handleClose(false)}\n        />\n      </AnimatePresence>\n    </div>\n  );\n};\n\nexport default AdminPanel;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/AdminRoute.jsx",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/AnnouncementModal.jsx",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 2,
        "message": "'AnimatePresence' is defined but never used. Allowed unused vars must match /^_/u.",
        "line": 2,
        "column": 18,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 2,
        "endColumn": 33,
        "suggestions": [
          {
            "messageId": "removeUnusedVar",
            "data": { "varName": "AnimatePresence" },
            "fix": { "range": [42, 59], "text": "" },
            "desc": "Remove unused variable \"AnimatePresence\"."
          }
        ]
      },
      {
        "ruleId": "react/no-danger",
        "severity": 1,
        "message": "Dangerous property 'dangerouslySetInnerHTML' found",
        "line": 54,
        "column": 11,
        "nodeType": "JSXAttribute",
        "messageId": "dangerousProp",
        "endLine": 54,
        "endColumn": 91
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 0,
    "warningCount": 1,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import React from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { useTheme } from '../context/ThemeContext';\nimport PropTypes from 'prop-types';\n\n/**\n * AnnouncementModal - Shows unread announcement before game starts\n */\nconst AnnouncementModal = ({ announcement, onDismiss }) => {\n  const { theme, t } = useTheme();\n\n  if (!announcement) {return null;}\n\n  const formatDate = timestamp => {\n    if (!timestamp) {return '';}\n    const date = timestamp.toDate ? timestamp.toDate() : new Date(timestamp);\n    return date.toLocaleDateString(undefined, {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n    });\n  };\n\n  return (\n    <div className=\"fixed inset-0 z-[9999] flex items-center justify-center p-4\">\n      {/* Backdrop */}\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n        className=\"absolute inset-0 bg-black/60 backdrop-blur-sm\"\n        onClick={onDismiss}\n      />\n\n      {/* Modal */}\n      <motion.div\n        initial={{ opacity: 0, scale: 0.9, y: 20 }}\n        animate={{ opacity: 1, scale: 1, y: 0 }}\n        exit={{ opacity: 0, scale: 0.9, y: 20 }}\n        className={`relative z-10 w-full max-w-md p-6 rounded-3xl shadow-2xl ${\n          theme === 'dark' ? 'bg-slate-800 text-white' : 'bg-white text-slate-900'\n        }`}\n      >\n        {/* Header */}\n        <div className=\"text-center mb-6\">\n          <div className=\"text-4xl mb-3\">ðŸ“°</div>\n          <h2 className=\"text-2xl font-black mb-1\">{announcement.title}</h2>\n          <p className=\"text-xs opacity-50\">{formatDate(announcement.publishDate)}</p>\n        </div>\n\n        {/* Body */}\n        <div\n          className=\"mb-6 opacity-80 leading-relaxed text-sm max-h-60 overflow-y-auto\"\n          dangerouslySetInnerHTML={{ __html: announcement.body.replace(/\\n/g, '<br />') }}\n        />\n\n        {/* Action */}\n        <button\n          onClick={onDismiss}\n          className=\"w-full py-4 bg-sky-500 hover:bg-sky-600 text-white rounded-2xl font-bold text-lg shadow-lg shadow-sky-500/20 active:scale-95 transition-all\"\n        >\n          {t('gotIt') || 'Got it!'}\n        </button>\n      </motion.div>\n    </div>\n  );\n};\n\nAnnouncementModal.propTypes = {\n  announcement: PropTypes.shape({\n    id: PropTypes.string,\n    title: PropTypes.string,\n    body: PropTypes.string,\n    publishDate: PropTypes.object,\n  }),\n  onDismiss: PropTypes.func.isRequired,\n};\n\nexport default AnnouncementModal;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/ConfirmDialog.jsx",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 2,
        "message": "'AnimatePresence' is defined but never used. Allowed unused vars must match /^_/u.",
        "line": 1,
        "column": 18,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 1,
        "endColumn": 33,
        "suggestions": [
          {
            "messageId": "removeUnusedVar",
            "data": { "varName": "AnimatePresence" },
            "fix": { "range": [15, 32], "text": "" },
            "desc": "Remove unused variable \"AnimatePresence\"."
          }
        ]
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'isOpen' is missing in props validation",
        "line": 4,
        "column": 3,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 4,
        "endColumn": 9
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'title' is missing in props validation",
        "line": 5,
        "column": 3,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 5,
        "endColumn": 8
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'message' is missing in props validation",
        "line": 6,
        "column": 3,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 6,
        "endColumn": 10
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'onConfirm' is missing in props validation",
        "line": 7,
        "column": 3,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 7,
        "endColumn": 12
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'onCancel' is missing in props validation",
        "line": 8,
        "column": 3,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 8,
        "endColumn": 11
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'isDangerous' is missing in props validation",
        "line": 9,
        "column": 3,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 9,
        "endColumn": 22
      }
    ],
    "suppressedMessages": [],
    "errorCount": 7,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { motion, AnimatePresence } from 'framer-motion';\n\nexport const ConfirmDialog = ({\n  isOpen,\n  title,\n  message,\n  onConfirm,\n  onCancel,\n  isDangerous = false,\n}) => {\n  if (!isOpen) {return null;}\n\n  return (\n    <div className=\"fixed inset-0 z-[9999] flex items-center justify-center p-4\">\n      {/* Backdrop */}\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n        className=\"absolute inset-0 bg-black/60 backdrop-blur-sm\"\n        onClick={onCancel}\n      />\n\n      {/* Dialog */}\n      <motion.div\n        initial={{ scale: 0.9, opacity: 0, y: 20 }}\n        animate={{ scale: 1, opacity: 1, y: 0 }}\n        exit={{ scale: 0.9, opacity: 0, y: 20 }}\n        className=\"relative bg-white dark:bg-slate-900 rounded-3xl p-6 max-w-md w-full shadow-2xl overflow-hidden\"\n      >\n        <h3 className=\"text-xl font-black mb-2 text-slate-900 dark:text-white\">{title}</h3>\n        <p className=\"text-slate-600 dark:text-slate-300 mb-8 leading-relaxed\">{message}</p>\n\n        <div className=\"flex gap-3 justify-end font-bold\">\n          <button\n            onClick={onCancel}\n            className=\"px-5 py-3 rounded-xl bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors\"\n          >\n            Cancel\n          </button>\n          <button\n            onClick={onConfirm}\n            className={`px-5 py-3 rounded-xl text-white shadow-lg transition-transform active:scale-95\n              ${\n                isDangerous\n                  ? 'bg-rose-500 hover:bg-rose-600 shadow-rose-500/30'\n                  : 'bg-emerald-500 hover:bg-emerald-600 shadow-emerald-500/30'\n              }\n            `}\n          >\n            Confirm\n          </button>\n        </div>\n      </motion.div>\n    </div>\n  );\n};\n\n// Hook moved to ../hooks/useConfirm.js\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/ErrorBoundary.jsx",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/FeedbackModal.jsx",
    "messages": [
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 10.",
        "line": 13,
        "column": 35,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 13,
        "endColumn": 37
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 10.",
        "line": 14,
        "column": 35,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 14,
        "endColumn": 37
      },
      {
        "ruleId": "radix",
        "severity": 2,
        "message": "Missing radix parameter.",
        "line": 23,
        "column": 9,
        "nodeType": "CallExpression",
        "messageId": "missingRadix",
        "endLine": 23,
        "endColumn": 32,
        "suggestions": [
          {
            "messageId": "addRadixParameter10",
            "fix": { "range": [838, 838], "text": ", 10" },
            "desc": "Add radix parameter `10` for parsing decimal numbers."
          }
        ]
      },
      {
        "ruleId": "no-restricted-globals",
        "severity": 2,
        "message": "Unexpected use of 'alert'.",
        "line": 25,
        "column": 7,
        "nodeType": "Identifier",
        "messageId": "defaultMessage",
        "endLine": 25,
        "endColumn": 12
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2000.",
        "line": 37,
        "column": 10,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 37,
        "endColumn": 14
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2000.",
        "line": 41,
        "column": 10,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 41,
        "endColumn": 14
      },
      {
        "ruleId": "react/boolean-prop-naming",
        "severity": 1,
        "message": "Prop name `inline` doesnâ€™t match rule `^(is|has|should|can|will|did)[A-Z]([A-Za-z0-9]?)+`",
        "line": 166,
        "column": 3,
        "nodeType": "Property",
        "messageId": "patternMismatch",
        "endLine": 166,
        "endColumn": 25
      }
    ],
    "suppressedMessages": [
      {
        "ruleId": "no-alert",
        "severity": 2,
        "message": "Unexpected alert.",
        "line": 25,
        "column": 7,
        "nodeType": "CallExpression",
        "messageId": "unexpected",
        "endLine": 25,
        "endColumn": 56,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      }
    ],
    "errorCount": 2,
    "fatalErrorCount": 0,
    "warningCount": 5,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import React, { useState } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { useTheme } from '../context/ThemeContext';\nimport { submitFeedback } from '../utils/social';\nimport PropTypes from 'prop-types';\n\nconst FeedbackModal = ({ username, onClose, inline = false }) => {\n  const { theme, t } = useTheme();\n  const [feedback, setFeedback] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [submitted, setSubmitted] = useState(false);\n  const [captcha] = useState(() => ({\n    a: Math.floor(Math.random() * 10) + 1,\n    b: Math.floor(Math.random() * 10) + 1,\n  }));\n  const [captchaAnswer, setCaptchaAnswer] = useState('');\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!feedback.trim()) {return;}\n\n    // Verify Captcha\n    if (parseInt(captchaAnswer) !== captcha.a + captcha.b) {\n      // eslint-disable-next-line no-alert\n      alert('Incorrect math answer. Please try again.');\n      return;\n    }\n\n    setIsSubmitting(true);\n    await submitFeedback(username, feedback);\n    setIsSubmitting(false);\n    setSubmitted(true);\n    // Auto-close after short delay if inline to move to next screen\n    if (inline) {\n      setTimeout(() => {\n        onClose();\n      }, 2000); // Give time to read \"Thank you\"\n    } else {\n      setTimeout(() => {\n        onClose();\n      }, 2000);\n    }\n  };\n\n  const containerClasses = inline\n    ? `w-full max-w-md p-6 rounded-[2.5rem] shadow-xl border ${theme === 'dark' ? 'bg-slate-800 border-slate-700' : 'bg-white border-slate-200'}`\n    : `w-full max-w-md p-6 rounded-3xl shadow-2xl ${\n        theme === 'dark' ? 'bg-slate-800 text-white' : 'bg-white text-slate-900'\n      }`;\n\n  const wrapperClasses = inline\n    ? ''\n    : 'fixed inset-0 z-[9999] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm';\n\n  return (\n    <div className={wrapperClasses}>\n      <motion.div\n        initial={{ opacity: 0, scale: 0.9 }}\n        animate={{ opacity: 1, scale: 1 }}\n        exit={{ opacity: 0, scale: 0.9 }}\n        className={containerClasses}\n      >\n        <AnimatePresence mode=\"wait\">\n          {!submitted ? (\n            <motion.div\n              key=\"form\"\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n            >\n              <div className=\"flex flex-col items-center text-center mb-4\">\n                <h2 className=\"text-xs font-black mb-1 text-sky-500 uppercase tracking-[0.3em]\">\n                  {t('shapeTheFuture') || 'SHAPE THE FUTURE'}\n                </h2>\n                <h3 className=\"text-2xl font-black mb-2 text-slate-800 dark:text-white\">\n                  {t('whatFeaturesTitle') || 'What features do you want?'}\n                </h3>\n                <div className=\"bg-yellow-100 dark:bg-yellow-900/30 px-3 py-1 rounded-full border border-yellow-200 dark:border-yellow-700/50\">\n                  <p className=\"text-xs font-bold text-yellow-700 dark:text-yellow-400 flex items-center gap-1\">\n                    <img src=\"/giuro.png\" className=\"w-4 h-4\" alt=\"G\" />\n                    {t('earnForFeedback') || 'Payout depends on quality'}\n                  </p>\n                </div>\n              </div>\n\n              <form onSubmit={handleSubmit}>\n                <textarea\n                  value={feedback}\n                  onChange={e => setFeedback(e.target.value)}\n                  placeholder={t('feedbackPlaceholderFeatures') || 'I wish the game had...'}\n                  className={`w-full h-32 p-4 rounded-xl resize-none outline-none border focus:ring-2 focus:ring-sky-500 transition-all mb-4 ${\n                    theme === 'dark'\n                      ? 'bg-slate-900 border-slate-700 placeholder-slate-600'\n                      : 'bg-slate-50 border-slate-200 placeholder-slate-400'\n                  }`}\n                />\n\n                {/* Math Captcha */}\n                <div className=\"flex items-center gap-2 mb-4 bg-slate-50 dark:bg-slate-900/50 p-2 rounded-lg border border-slate-200 dark:border-slate-700\">\n                  <div className=\"px-3 py-2 bg-slate-200 dark:bg-slate-700 rounded-md font-bold text-slate-700 dark:text-slate-200 select-none\">\n                    {captcha.a} + {captcha.b} = ?\n                  </div>\n                  <input\n                    type=\"number\"\n                    value={captchaAnswer}\n                    onChange={e => setCaptchaAnswer(e.target.value)}\n                    placeholder=\"?\"\n                    className=\"w-16 p-2 rounded-md border text-center font-bold outline-none focus:ring-2 focus:ring-sky-500 dark:bg-slate-800 dark:border-slate-600 dark:text-white\"\n                  />\n                  <span className=\"text-xs opacity-50 ml-auto\">Prove you are human</span>\n                </div>\n\n                <div className=\"flex gap-3\">\n                  {/* For inline, we just show Submit. The skip/close button is handled by parent or secondary action */}\n                  {!inline && (\n                    <button\n                      type=\"button\"\n                      onClick={onClose}\n                      className={`flex-1 py-3 rounded-xl font-bold text-sm transition-colors ${\n                        theme === 'dark'\n                          ? 'bg-slate-700 hover:bg-slate-600'\n                          : 'bg-slate-100 hover:bg-slate-200'\n                      }`}\n                    >\n                      {t('cancel')}\n                    </button>\n                  )}\n\n                  <button\n                    type=\"submit\"\n                    disabled={isSubmitting || !feedback.trim() || !captchaAnswer}\n                    className={`w-full py-3 rounded-xl font-bold text-sm bg-sky-500 hover:bg-sky-600 text-white shadow-lg shadow-sky-500/20 disabled:opacity-50 disabled:cursor-not-allowed`}\n                  >\n                    {isSubmitting ? 'Sending...' : t('submitFeedback') || 'Submit Feedback'}\n                  </button>\n                </div>\n              </form>\n            </motion.div>\n          ) : (\n            <motion.div\n              key=\"success\"\n              initial={{ opacity: 0, scale: 0.8 }}\n              animate={{ opacity: 1, scale: 1 }}\n              className=\"text-center py-6\"\n            >\n              <div className=\"text-5xl mb-4\">ðŸŽ‰</div>\n              <h3 className=\"text-xl font-bold mb-2\">Thank You!</h3>\n              <p className=\"opacity-70 mb-4 text-sm\">\n                {t('feedbackPending') ||\n                  \"Your feedback is under review. You'll specify your reward soon!\"}\n              </p>\n              <div className=\"text-xs font-bold text-yellow-600 dark:text-yellow-400 bg-yellow-50 dark:bg-yellow-900/20 p-2 rounded-lg inline-block\">\n                Reward pending quality check\n              </div>\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </motion.div>\n    </div>\n  );\n};\n\nFeedbackModal.propTypes = {\n  username: PropTypes.string.isRequired,\n  onClose: PropTypes.func.isRequired,\n  inline: PropTypes.bool,\n};\n\nexport default FeedbackModal;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/FeedbackScreen.jsx",
    "messages": [
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 10.",
        "line": 14,
        "column": 35,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 14,
        "endColumn": 37
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 10.",
        "line": 15,
        "column": 35,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 15,
        "endColumn": 37
      },
      {
        "ruleId": "radix",
        "severity": 2,
        "message": "Missing radix parameter.",
        "line": 24,
        "column": 9,
        "nodeType": "CallExpression",
        "messageId": "missingRadix",
        "endLine": 24,
        "endColumn": 32,
        "suggestions": [
          {
            "messageId": "addRadixParameter10",
            "fix": { "range": [824, 824], "text": ", 10" },
            "desc": "Add radix parameter `10` for parsing decimal numbers."
          }
        ]
      },
      {
        "ruleId": "no-restricted-globals",
        "severity": 2,
        "message": "Unexpected use of 'alert'.",
        "line": 26,
        "column": 7,
        "nodeType": "Identifier",
        "messageId": "defaultMessage",
        "endLine": 26,
        "endColumn": 12
      }
    ],
    "suppressedMessages": [
      {
        "ruleId": "no-alert",
        "severity": 2,
        "message": "Unexpected alert.",
        "line": 26,
        "column": 7,
        "nodeType": "CallExpression",
        "messageId": "unexpected",
        "endLine": 26,
        "endColumn": 56,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      }
    ],
    "errorCount": 2,
    "fatalErrorCount": 0,
    "warningCount": 2,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import React, { useState } from 'react';\n\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { useTheme } from '../context/ThemeContext';\nimport { submitFeedback } from '../utils/social';\nimport PropTypes from 'prop-types';\n\nconst FeedbackScreen = ({ username, onClose }) => {\n  const { theme, t } = useTheme();\n  const [feedback, setFeedback] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [submitted, setSubmitted] = useState(false);\n  const [captcha] = useState(() => ({\n    a: Math.floor(Math.random() * 10) + 1,\n    b: Math.floor(Math.random() * 10) + 1,\n  }));\n  const [captchaAnswer, setCaptchaAnswer] = useState('');\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!feedback.trim()) {return;}\n\n    // Verify Captcha\n    if (parseInt(captchaAnswer) !== captcha.a + captcha.b) {\n      // eslint-disable-next-line no-alert\n      alert('Incorrect math answer. Please try again.');\n      return;\n    }\n\n    setIsSubmitting(true);\n    await submitFeedback(username, feedback);\n    setIsSubmitting(false);\n    setSubmitted(true);\n  };\n\n  return (\n    <div\n      className={`fixed inset-0 z-[8000] flex flex-col pt-16 pb-6 px-4 md:px-8 overflow-hidden pointer-events-auto backdrop-blur-md ${theme === 'dark' ? 'bg-neutral-950 text-white' : 'bg-slate-50 text-slate-900'}`}\n    >\n      {/* Header */}\n      <div className=\"flex items-center justify-between max-w-2xl mx-auto w-full mb-8 shrink-0 relative\">\n        <button\n          onClick={onClose}\n          className=\"flex items-center gap-2 text-sm font-bold opacity-60 hover:opacity-100 transition-opacity z-10\"\n        >\n          <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M15 19l-7-7 7-7\"\n            />\n          </svg>\n          {t('back') || 'Back'}\n        </button>\n\n        <h2 className=\"text-xl font-black tracking-tight absolute left-1/2 transform -translate-x-1/2\">\n          {t('feedback') || 'Feedback'}\n        </h2>\n\n        {/* Empty div for flex spacing */}\n        <div className=\"w-16\" />\n      </div>\n\n      {/* Content */}\n      <div className=\"flex-1 overflow-y-auto max-w-2xl mx-auto w-full pb-8\">\n        <AnimatePresence mode=\"wait\">\n          {!submitted ? (\n            <motion.div\n              key=\"form\"\n              initial={{ opacity: 0, y: 10 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -10 }}\n              className=\"space-y-6\"\n            >\n              <div className=\"text-center mb-8\">\n                <h2 className=\"text-xs font-black mb-1 text-sky-500 uppercase tracking-[0.3em]\">\n                  {t('shapeTheFuture') || 'SHAPE THE FUTURE'}\n                </h2>\n                <h3 className=\"text-2xl font-black mb-3 text-slate-800 dark:text-white\">\n                  {t('whatFeaturesTitle') || 'What features do you want?'}\n                </h3>\n                <div className=\"bg-yellow-100 dark:bg-yellow-900/30 px-4 py-2 rounded-full border border-yellow-200 dark:border-yellow-700/50 inline-flex items-center gap-2 transform hover:scale-105 transition-transform\">\n                  <img src=\"/giuro.png\" className=\"w-5 h-5\" alt=\"G\" />\n                  <p className=\"text-xs font-bold text-yellow-700 dark:text-yellow-400\">\n                    {t('earnForFeedback') || 'Earn Giuros (I personally review every feedback)'}\n                  </p>\n                </div>\n              </div>\n\n              <div\n                className={`p-6 rounded-3xl border shadow-sm ${\n                  theme === 'dark' ? 'bg-slate-900 border-slate-800' : 'bg-white border-slate-200'\n                }`}\n              >\n                <form onSubmit={handleSubmit}>\n                  <textarea\n                    value={feedback}\n                    onChange={e => setFeedback(e.target.value)}\n                    placeholder={t('feedbackPlaceholderFeatures') || 'I wish the game had...'}\n                    className={`w-full h-48 p-4 rounded-xl resize-none outline-none border focus:ring-2 focus:ring-sky-500 transition-all mb-4 text-lg ${\n                      theme === 'dark'\n                        ? 'bg-slate-800 border-slate-700 placeholder-slate-600 text-white'\n                        : 'bg-slate-50 border-slate-200 placeholder-slate-400 text-slate-900'\n                    }`}\n                  />\n\n                  {/* Math Captcha */}\n                  <div className=\"flex items-center gap-2 mb-4 bg-slate-50 dark:bg-slate-800/50 p-3 rounded-xl border border-slate-200 dark:border-slate-700\">\n                    <div className=\"px-4 py-2 bg-slate-200 dark:bg-slate-700 rounded-lg font-bold text-slate-700 dark:text-slate-200 select-none\">\n                      {captcha.a} + {captcha.b} = ?\n                    </div>\n                    <input\n                      type=\"number\"\n                      value={captchaAnswer}\n                      onChange={e => setCaptchaAnswer(e.target.value)}\n                      placeholder=\"?\"\n                      className=\"w-20 p-2 rounded-lg border text-center font-bold outline-none focus:ring-2 focus:ring-sky-500 dark:bg-slate-800 dark:border-slate-600 dark:text-white\"\n                    />\n                    <span className=\"text-xs opacity-50 ml-auto\">Prove you are human</span>\n                  </div>\n\n                  <button\n                    type=\"submit\"\n                    disabled={isSubmitting || !feedback.trim() || !captchaAnswer}\n                    className={`w-full py-4 rounded-xl font-bold text-lg bg-sky-500 hover:bg-sky-600 text-white shadow-lg shadow-sky-500/20 disabled:opacity-50 disabled:cursor-not-allowed transition-all transform active:scale-95`}\n                  >\n                    {isSubmitting ? 'Sending...' : t('submitFeedback') || 'Submit Feedback'}\n                  </button>\n                </form>\n              </div>\n            </motion.div>\n          ) : (\n            <motion.div\n              key=\"success\"\n              initial={{ opacity: 0, scale: 0.9 }}\n              animate={{ opacity: 1, scale: 1 }}\n              className=\"flex flex-col items-center justify-center py-20 text-center\"\n            >\n              <div className=\"text-6xl mb-6 animate-bounce\">ðŸŽ‰</div>\n              <h3 className=\"text-2xl font-black mb-3\">Thank You!</h3>\n              <p className=\"opacity-70 mb-8 max-w-sm mx-auto leading-relaxed\">\n                {t('feedbackPending') ||\n                  \"Your feedback is under review. You'll be notified when approved!\"}\n              </p>\n              <div\n                className={`px-6 py-3 rounded-xl font-bold border ${\n                  theme === 'dark'\n                    ? 'bg-yellow-900/20 text-yellow-400 border-yellow-700/50'\n                    : 'bg-yellow-50 text-yellow-700 border-yellow-200'\n                } flex items-center gap-2`}\n              >\n                <img src=\"/giuro.png\" className=\"w-5 h-5\" alt=\"Giuros\" />\n                <span>Reward Pending</span>\n              </div>\n\n              <button\n                onClick={onClose}\n                className=\"mt-12 px-8 py-3 bg-slate-200 dark:bg-slate-800 hover:bg-slate-300 dark:hover:bg-slate-700 rounded-xl font-bold transition-colors\"\n              >\n                {t('close') || 'Close'}\n              </button>\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </div>\n    </div>\n  );\n};\n\nFeedbackScreen.propTypes = {\n  username: PropTypes.string.isRequired,\n  onClose: PropTypes.func.isRequired,\n};\n\nexport default FeedbackScreen;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/FriendRequests.jsx",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/FriendsScreen.jsx",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 2,
        "message": "'motion' is defined but never used. Allowed unused vars must match /^_/u.",
        "line": 18,
        "column": 10,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 18,
        "endColumn": 16,
        "suggestions": [
          {
            "messageId": "removeUnusedVar",
            "data": { "varName": "motion" },
            "fix": { "range": [450, 457], "text": "" },
            "desc": "Remove unused variable \"motion\"."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 2,
        "message": "'AnimatePresence' is defined but never used. Allowed unused vars must match /^_/u.",
        "line": 18,
        "column": 18,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 18,
        "endColumn": 33,
        "suggestions": [
          {
            "messageId": "removeUnusedImportDeclaration",
            "data": { "varName": "AnimatePresence" },
            "fix": { "range": [441, 497], "text": "" },
            "desc": "Remove unused import declaration."
          }
        ]
      },
      {
        "ruleId": "max-lines-per-function",
        "severity": 1,
        "message": "Arrow function has too many lines (454). Maximum allowed is 150.",
        "line": 43,
        "column": 23,
        "nodeType": "ArrowFunctionExpression",
        "messageId": "exceed",
        "endLine": 535,
        "endColumn": 2
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'onClose' is missing in props validation",
        "line": 43,
        "column": 26,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 43,
        "endColumn": 33
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'username' is missing in props validation",
        "line": 43,
        "column": 35,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 43,
        "endColumn": 43
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 3000.",
        "line": 111,
        "column": 43,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 111,
        "endColumn": 47
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'name' is missing in props validation",
        "line": 268,
        "column": 37,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 268,
        "endColumn": 41
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'children' is missing in props validation",
        "line": 268,
        "column": 43,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 268,
        "endColumn": 51
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1000.",
        "line": 300,
        "column": 65,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 300,
        "endColumn": 69
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1000.",
        "line": 330,
        "column": 65,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 330,
        "endColumn": 69
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1000.",
        "line": 360,
        "column": 65,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 360,
        "endColumn": 69
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1000.",
        "line": 389,
        "column": 63,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 389,
        "endColumn": 67
      },
      {
        "ruleId": "jsx-a11y/click-events-have-key-events",
        "message": "Definition for rule 'jsx-a11y/click-events-have-key-events' was not found.",
        "line": 449,
        "column": 24,
        "endLine": 449,
        "endColumn": 92,
        "severity": 2,
        "nodeType": null
      }
    ],
    "suppressedMessages": [
      {
        "ruleId": "react-hooks/exhaustive-deps",
        "severity": 1,
        "message": "React Hook useEffect has missing dependencies: 'loadFeed', 'loadFriends', and 'loadRequests'. Either include them or remove the dependency array.",
        "line": 67,
        "column": 6,
        "nodeType": "ArrayExpression",
        "endLine": 67,
        "endColumn": 27,
        "suggestions": [
          {
            "desc": "Update the dependencies array to be: [activeTab, loadFeed, loadFriends, loadRequests, username]",
            "fix": {
              "range": [1734, 1755],
              "text": "[activeTab, loadFeed, loadFriends, loadRequests, username]"
            }
          }
        ],
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-alert",
        "severity": 2,
        "message": "Unexpected confirm.",
        "line": 126,
        "column": 10,
        "nodeType": "CallExpression",
        "messageId": "unexpected",
        "endLine": 126,
        "endColumn": 74,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-alert",
        "severity": 2,
        "message": "Unexpected confirm.",
        "line": 134,
        "column": 10,
        "nodeType": "CallExpression",
        "messageId": "unexpected",
        "endLine": 134,
        "endColumn": 73,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      }
    ],
    "errorCount": 7,
    "fatalErrorCount": 0,
    "warningCount": 6,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import React, { useState, useEffect } from 'react';\nimport { useTheme } from '../context/ThemeContext';\nimport {\n  searchUsers,\n  sendFriendRequest,\n  getIncomingRequests,\n  acceptFriendRequest,\n  declineFriendRequest,\n  getFriends,\n  getFriendFeed,\n  removeFriend,\n  blockUser,\n} from '../utils/friends';\nimport { ACTIVITY_TYPES } from '../data/activityTypes';\n// PublicProfileModal removed\nimport { useNavigate } from 'react-router-dom';\n\nimport { motion, AnimatePresence } from 'framer-motion';\n\nconst AVATARS = [\n  'ðŸ¶',\n  'ðŸ±',\n  'ðŸ­',\n  'ðŸ¹',\n  'ðŸ°',\n  'ðŸ¦Š',\n  'ðŸ»',\n  'ðŸ¼',\n  'ðŸ¨',\n  'ðŸ¯',\n  'ðŸ¦',\n  'ðŸ®',\n  'ðŸ·',\n  'ðŸ¸',\n  'ðŸµ',\n  'ðŸ”',\n  'ðŸ§',\n  'ðŸ¦',\n  'ðŸ¦†',\n  'ðŸ¦…',\n];\n\nconst FriendsScreen = ({ onClose, username }) => {\n  const navigate = useNavigate();\n  const { theme, t } = useTheme();\n  const [activeTab, setActiveTab] = useState('feed');\n  const [friends, setFriends] = useState([]);\n  const [requests, setRequests] = useState([]);\n  const [feed, setFeed] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  // Search state\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [searching, setSearching] = useState(false);\n  const [addMessage, setAddMessage] = useState(null);\n  const [successfulRequests, setSuccessfulRequests] = useState(new Set());\n  // selectedUser state removed as we navigate\n  const [activeMenu, setActiveMenu] = useState(null); // username of active menu\n\n  // Load initial data\n  useEffect(() => {\n    if (activeTab === 'friends') {loadFriends();}\n    if (activeTab === 'requests') {loadRequests();}\n    if (activeTab === 'feed') {loadFeed();}\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [activeTab, username]);\n\n  const loadFriends = async () => {\n    setLoading(true);\n    const list = await getFriends(username);\n    setFriends(list);\n    setLoading(false);\n  };\n\n  const loadRequests = async () => {\n    setLoading(true);\n    const list = await getIncomingRequests(username);\n    setRequests(list);\n    setLoading(false);\n  };\n\n  const loadFeed = async () => {\n    setLoading(true);\n    const list = await getFriends(username); // Need friends to get feed\n    const activity = await getFriendFeed(list);\n    setFeed(activity);\n    setLoading(false);\n  };\n\n  const handleSearch = async e => {\n    e.preventDefault();\n    if (!searchQuery) {return;}\n    setSearching(true);\n    const results = await searchUsers(searchQuery);\n    // Filter out myself\n    setSearchResults(results.filter(r => r.username !== username));\n    setSearching(false);\n  };\n\n  const handleSendRequest = async targetUser => {\n    setAddMessage(`Sending request to ${targetUser}...`);\n    const res = await sendFriendRequest(username, targetUser);\n    if (res.success) {\n      setAddMessage(`Request sent to ${targetUser}!`);\n      setSuccessfulRequests(prev => new Set(prev).add(targetUser));\n    } else {\n      setAddMessage(`Error: ${res.error}`);\n    }\n    // Clear message after 3s\n    setTimeout(() => setAddMessage(null), 3000);\n  };\n\n  const handleAccept = async requester => {\n    await acceptFriendRequest(username, requester);\n    loadRequests(); // Reload\n  };\n\n  const handleDecline = async requester => {\n    await declineFriendRequest(username, requester);\n    loadRequests(); // Reload\n  };\n\n  const handleRemoveFriend = async friendName => {\n    // eslint-disable-next-line no-alert\n    if (!window.confirm(`Are you sure you want to remove ${friendName}?`)) {return;}\n    await removeFriend(username, friendName);\n    loadFriends(); // Reload list\n    loadFeed(); // Reload feed as it might change\n  };\n\n  const handleBlockUser = async friendName => {\n    // eslint-disable-next-line no-alert\n    if (!window.confirm(`Are you sure you want to block ${friendName}?`)) {return;}\n    await blockUser(username, friendName);\n    // Also remove from friends if blocked\n    await removeFriend(username, friendName);\n    loadFriends();\n    loadFeed();\n  };\n\n  const tabClass =\n    tab => `flex-1 py-3 text-sm font-bold uppercase tracking-wider transition-colors border-b-2\n    ${\n      activeTab === tab\n        ? 'border-sky-500 text-sky-500'\n        : 'border-transparent text-slate-400 hover:text-slate-600 dark:hover:text-slate-200'\n    }`;\n\n  return (\n    <div\n      className={`fixed inset-0 z-[5000] flex flex-col pt-16 pb-6 px-4 md:px-8 overflow-hidden pointer-events-auto backdrop-blur-md \n        ${theme === 'dark' ? 'bg-neutral-950 text-white' : 'bg-slate-50 text-slate-900'}`}\n    >\n      {/* Header */}\n      <div className=\"flex justify-between items-center max-w-2xl mx-auto w-full mb-6 shrink-0\">\n        <h2 className=\"text-3xl font-black tracking-tight\">Friends</h2>\n        <button\n          onClick={onClose}\n          className=\"p-2 rounded-full hover:bg-black/5 dark:hover:bg-white/10\"\n        >\n          <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M6 18L18 6M6 6l12 12\"\n            />\n          </svg>\n        </button>\n      </div>\n\n      {/* Tabs */}\n      <div className=\"max-w-2xl mx-auto w-full flex mb-6 border-b border-slate-200 dark:border-slate-800 shrink-0\">\n        <button onClick={() => setActiveTab('feed')} className={tabClass('feed')}>\n          Feed\n        </button>\n        <button onClick={() => setActiveTab('friends')} className={tabClass('friends')}>\n          Friends\n        </button>\n        <button onClick={() => setActiveTab('requests')} className={tabClass('requests')}>\n          Requests{' '}\n          {requests.length > 0 && (\n            <span className=\"ml-1 text-xs bg-red-500 text-white px-1.5 py-0.5 rounded-full\">\n              {requests.length}\n            </span>\n          )}\n        </button>\n      </div>\n\n      {/* Content */}\n      <div className=\"flex-1 overflow-y-auto max-w-2xl mx-auto w-full pb-8\">\n        {/* ADD FRIEND FORM (Visible in Friends tab) */}\n        {activeTab === 'friends' && (\n          <div className=\"mb-8 p-4 rounded-xl bg-slate-100 dark:bg-slate-900 border border-slate-200 dark:border-slate-800\">\n            <h3 className=\"font-bold mb-3\">Add Friend</h3>\n            <form onSubmit={handleSearch} className=\"flex gap-2\">\n              <input\n                type=\"text\"\n                value={searchQuery}\n                onChange={e => setSearchQuery(e.target.value)}\n                placeholder=\"Search username...\"\n                className=\"flex-1 px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-black text-sm\"\n              />\n              <button\n                type=\"submit\"\n                disabled={searching}\n                className=\"px-4 py-2 bg-sky-500 text-white font-bold rounded-lg text-sm\"\n              >\n                {searching ? '...' : 'Search'}\n              </button>\n            </form>\n\n            {addMessage && <p className=\"text-sm mt-2 text-emerald-500 font-bold\">{addMessage}</p>}\n\n            {searchResults.length > 0 && (\n              <div className=\"mt-4 space-y-2\">\n                {searchResults.map(u => (\n                  <div\n                    key={u.username}\n                    className=\"flex justify-between items-center p-2 bg-white dark:bg-slate-800 rounded\"\n                  >\n                    <span className=\"font-bold\">{u.username.toLowerCase()}</span>\n                    <button\n                      onClick={() => handleSendRequest(u.username)}\n                      disabled={successfulRequests.has(u.username)}\n                      className={`text-xs px-3 py-1 rounded transition-colors font-bold\n                          ${\n                            successfulRequests.has(u.username)\n                              ? 'bg-emerald-500 text-white cursor-default'\n                              : 'bg-slate-200 dark:bg-slate-700 hover:bg-sky-500 hover:text-white'\n                          }\n                        `}\n                    >\n                      {successfulRequests.has(u.username) ? 'Sent' : 'Add'}\n                    </button>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n\n        {loading && (\n          <div className=\"flex justify-center py-10 opacity-50\">\n            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-sky-500\" />\n          </div>\n        )}\n\n        {!loading && activeTab === 'feed' && (\n          <div className=\"space-y-4\">\n            {feed.length === 0 ? (\n              <div className=\"text-center py-10 opacity-50\">\n                <p>No recent activity from friends.</p>\n                <button\n                  onClick={() => setActiveTab('friends')}\n                  className=\"text-sky-500 font-bold mt-2 hover:underline\"\n                >\n                  Add some friends!\n                </button>\n              </div>\n            ) : (\n              feed.map(item => {\n                const friend = friends.find(f => f.username === item.username);\n                const avatarId = friend?.avatarId ? friend.avatarId - 1 : 0;\n                const avatar = AVATARS[avatarId] || 'ðŸ¼';\n\n                const UserLink = ({ name, children }) => (\n                  <button\n                    onClick={() => navigate(`/user/${encodeURIComponent(name)}`)}\n                    className=\"flex items-center gap-2 hover:opacity-80 transition-opacity text-left group\"\n                  >\n                    <div className=\"w-8 h-8 rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center text-lg border border-slate-300 dark:border-slate-600\">\n                      {avatar}\n                    </div>\n                    <div>{children}</div>\n                  </button>\n                );\n\n                if (item.type === ACTIVITY_TYPES.USERNAME_CHANGED) {\n                  return (\n                    <div\n                      key={item.id}\n                      className=\"p-4 rounded-xl border bg-white dark:bg-slate-900 border-amber-200 dark:border-amber-900/30 shadow-sm\"\n                    >\n                      <div className=\"flex justify-between items-start mb-2\">\n                        <div className=\"flex flex-col\">\n                          <span className=\"font-black text-lg text-amber-500 mb-1\">\n                            <UserLink name={item.username}>\n                              <span>{item.username.toLowerCase()}</span>\n                            </UserLink>\n                          </span>\n                          <span className=\"text-slate-500 text-sm ml-10\">\n                            {t('changedNameTo')}{' '}\n                            <span className=\"font-bold\">{item.oldUsername || '???'}</span>\n                          </span>\n                        </div>\n                        <span className=\"text-xs text-slate-400\">\n                          {item.timestamp?.seconds\n                            ? new Date(item.timestamp.seconds * 1000).toLocaleDateString()\n                            : 'Just now'}\n                        </span>\n                      </div>\n                    </div>\n                  );\n                }\n\n                if (item.type === ACTIVITY_TYPES.BADGE_EARNED) {\n                  return (\n                    <div\n                      key={item.id}\n                      className=\"p-4 rounded-xl border bg-white dark:bg-slate-900 border-purple-200 dark:border-purple-900/30 shadow-sm\"\n                    >\n                      <div className=\"flex justify-between items-start mb-2\">\n                        <UserLink name={item.username}>\n                          <div>\n                            <span className=\"font-black text-lg text-purple-500 block leading-none\">\n                              {item.username.toLowerCase()}\n                            </span>\n                            <span className=\"text-slate-500 text-xs\">{t('badgeEarned')}</span>\n                          </div>\n                        </UserLink>\n                        {item.badge && (\n                          <span className=\"text-2xl\" title={item.badge.name}>\n                            {item.badge.emoji}\n                          </span>\n                        )}\n                        <span className=\"text-xs text-slate-400 absolute top-4 right-4\">\n                          {item.timestamp?.seconds\n                            ? new Date(item.timestamp.seconds * 1000).toLocaleDateString()\n                            : 'Just now'}\n                        </span>\n                      </div>\n                    </div>\n                  );\n                }\n\n                if (item.type === ACTIVITY_TYPES.COSMETIC_PURCHASED) {\n                  return (\n                    <div\n                      key={item.id}\n                      className=\"p-4 rounded-xl border bg-white dark:bg-slate-900 border-cyan-200 dark:border-cyan-900/30 shadow-sm\"\n                    >\n                      <div className=\"flex justify-between items-start mb-2\">\n                        <UserLink name={item.username}>\n                          <div>\n                            <span className=\"font-black text-lg text-cyan-500 block leading-none\">\n                              {item.username.toLowerCase()}\n                            </span>\n                            <span className=\"text-slate-500 text-xs\">\n                              {t('unlockedCosmetic') || 'unlocked'}{' '}\n                              <span className=\"font-bold text-cyan-600\">\n                                {item.itemName?.replace(/_/g, ' ') || 'item'}\n                              </span>\n                            </span>\n                          </div>\n                        </UserLink>\n                        <span className=\"text-xs text-slate-400\">\n                          {item.timestamp?.seconds\n                            ? new Date(item.timestamp.seconds * 1000).toLocaleDateString()\n                            : 'Just now'}\n                        </span>\n                      </div>\n                    </div>\n                  );\n                }\n\n                // Default: Score\n                return (\n                  <div\n                    key={item.id}\n                    className=\"p-4 rounded-xl border bg-white dark:bg-slate-900 border-slate-200 dark:border-slate-800 shadow-sm\"\n                  >\n                    <div className=\"flex justify-between items-start mb-2\">\n                      <div className=\"flex items-center gap-3\">\n                        <UserLink name={item.username}>\n                          <div>\n                            <span className=\"font-black text-lg text-sky-500 block leading-none\">\n                              {item.username.toLowerCase()}\n                            </span>\n                            <span className=\"text-slate-500 text-xs\">\n                              {t('scored')} <strong>{item.score}</strong> {t('points')}\n                            </span>\n                          </div>\n                        </UserLink>\n                      </div>\n                      <span className=\"text-xs text-slate-400 whitespace-nowrap ml-2\">\n                        {item.timestamp?.seconds\n                          ? new Date(item.timestamp.seconds * 1000).toLocaleDateString()\n                          : 'Just now'}\n                      </span>\n                    </div>\n                  </div>\n                );\n              })\n            )}\n          </div>\n        )}\n\n        {!loading && activeTab === 'friends' && (\n          <div className=\"space-y-2\">\n            <h3 className=\"font-bold text-sm text-slate-500 uppercase tracking-widest mb-2\">\n              My Friends ({friends.length})\n            </h3>\n            {friends.map(f => (\n              <div\n                key={f.username}\n                className=\"p-3 rounded-lg border flex justify-between items-center bg-white dark:bg-slate-900 border-slate-200 dark:border-slate-800 transition-colors relative\"\n              >\n                <div className=\"flex items-center gap-3\">\n                  <div\n                    className={`w-10 h-10 rounded-full flex items-center justify-center text-xl bg-gradient-to-br from-sky-400 to-indigo-600 border-2 border-white dark:border-slate-800 shadow-sm`}\n                  >\n                    {AVATARS[f.avatarId ? f.avatarId - 1 : 0] || 'ðŸ¼'}\n                  </div>\n                  <div>\n                    <h4 className=\"font-bold text-sm leading-tight\">{f.username.toLowerCase()}</h4>\n                    {f.badges && f.badges.length > 0 && (\n                      <span className=\"text-xs mr-2\" title=\"Equipped Badge\">\n                        {/* Assuming badges are objects or emojis string */}\n                        {typeof f.badges[0] === 'string' ? f.badges[0] : 'ðŸ…'}\n                      </span>\n                    )}\n                    {f.todayGames > 0 && (\n                      <span className=\"text-[10px] bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 px-1.5 py-0.5 rounded font-bold\">\n                        Played Today\n                      </span>\n                    )}\n                  </div>\n                </div>\n\n                {/* Menu Button */}\n                <div className=\"relative\">\n                  <button\n                    onClick={e => {\n                      e.stopPropagation();\n                      setActiveMenu(activeMenu === f.username ? null : f.username);\n                    }}\n                    className=\"p-2 ml-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors\"\n                  >\n                    <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path d=\"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\" />\n                    </svg>\n                  </button>\n\n                  {/* Dropdown */}\n                  {activeMenu === f.username && (\n                    <>\n                      {/* eslint-disable-next-line jsx-a11y/click-events-have-key-events */}\n                      <div\n                        className=\"fixed inset-0 z-40 cursor-default\"\n                        onClick={e => {\n                          e.stopPropagation();\n                          setActiveMenu(null);\n                        }}\n                      />\n                      <div className=\"absolute right-0 top-full mt-1 w-40 bg-white dark:bg-slate-800 rounded-xl shadow-xl border border-slate-100 dark:border-slate-700 z-50 overflow-hidden py-1\">\n                        <button\n                          onClick={e => {\n                            e.stopPropagation();\n                            navigate(`/user/${encodeURIComponent(f.username)}`);\n                            setActiveMenu(null);\n                          }}\n                          className=\"w-full text-left px-4 py-2.5 text-sm font-bold hover:bg-slate-50 dark:hover:bg-slate-700 flex items-center gap-2\"\n                        >\n                          ðŸ‘¤ Profile\n                        </button>\n                        <button\n                          onClick={e => {\n                            e.stopPropagation();\n                            handleRemoveFriend(f.username);\n                            setActiveMenu(null);\n                          }}\n                          className=\"w-full text-left px-4 py-2.5 text-sm font-bold text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 hover:text-red-500 flex items-center gap-2\"\n                        >\n                          Unfriend\n                        </button>\n                        <button\n                          onClick={e => {\n                            e.stopPropagation();\n                            handleBlockUser(f.username);\n                            setActiveMenu(null);\n                          }}\n                          className=\"w-full text-left px-4 py-2.5 text-sm font-bold text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700 hover:text-slate-600 flex items-center gap-2\"\n                        >\n                          ðŸš« Block\n                        </button>\n                      </div>\n                    </>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n\n        {/* Profile Modal Removed */}\n\n        {!loading && activeTab === 'requests' && (\n          <div className=\"space-y-2\">\n            {requests.length === 0 ? (\n              <p className=\"text-center py-10 opacity-50\">No pending requests.</p>\n            ) : (\n              requests.map(req => (\n                <div\n                  key={req.id}\n                  className=\"p-3 rounded-lg border flex justify-between items-center bg-white dark:bg-slate-900 border-sky-500/30 shadow-sm\"\n                >\n                  <div className=\"flex flex-col\">\n                    <span className=\"font-bold text-lg\">{req.from.toLowerCase()}</span>\n                    <span className=\"text-xs text-slate-500\">wants to be friends</span>\n                  </div>\n                  <div className=\"flex gap-2\">\n                    <button\n                      onClick={() => handleDecline(req.from)}\n                      className=\"px-3 py-1 bg-slate-200 dark:bg-slate-800 rounded text-xs font-bold\"\n                    >\n                      Ignore\n                    </button>\n                    <button\n                      onClick={() => handleAccept(req.from)}\n                      className=\"px-3 py-1 bg-sky-500 text-white rounded text-xs font-bold\"\n                    >\n                      Accept\n                    </button>\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default FriendsScreen;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/GameScreen.tsx",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 17,
        "column": 28,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 17,
        "endColumn": 31,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [516, 519], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [516, 519], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      },
      {
        "ruleId": "max-lines-per-function",
        "severity": 1,
        "message": "Arrow function has too many lines (235). Maximum allowed is 150.",
        "line": 30,
        "column": 41,
        "nodeType": "ArrowFunctionExpression",
        "messageId": "exceed",
        "endLine": 281,
        "endColumn": 2
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1500.",
        "line": 69,
        "column": 10,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 69,
        "endColumn": 14
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 3,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import React, { FC, useEffect, useState } from 'react';\n// @ts-ignore\n// @ts-ignore\nimport MapArea from './MapArea';\n// @ts-ignore\nimport Logo from './Logo';\nimport Quiz from './Quiz';\nimport RegisterPanel from './RegisterPanel';\nimport SummaryScreen from './SummaryScreen';\n// @ts-ignore\nimport { GameStateObject, Street } from '../types/game';\nimport LandingPage from './LandingPage';\nimport OnboardingTour from './OnboardingTour';\n\ninterface GameScreenProps {\n  state: GameStateObject;\n  dispatch: React.Dispatch<any>;\n  theme: 'light' | 'dark';\n  deviceMode: 'mobile' | 'tablet' | 'desktop';\n  t: (key: string) => string;\n  currentStreet: Street | null;\n  handleSelectAnswer: (street: Street) => void;\n  handleNext: () => void;\n  processAnswer: (street: Street) => void;\n  setupGame: (freshName?: string) => void;\n  handleRegister: (name: string) => void;\n  hasPlayedToday: () => boolean;\n}\n\nconst GameScreen: FC<GameScreenProps> = ({\n  state,\n  dispatch,\n  theme,\n  deviceMode,\n  t,\n  currentStreet,\n  handleSelectAnswer,\n  handleNext,\n  processAnswer,\n  setupGame,\n  handleRegister,\n  hasPlayedToday,\n}) => {\n  const [showOnboarding, setShowOnboarding] = useState<boolean>(() => {\n    const completed = localStorage.getItem('girify_onboarding_completed');\n    return !completed && !state.username;\n  });\n\n  // Exit Warning\n  useEffect(() => {\n    const handleBeforeUnload = (e: BeforeUnloadEvent) => {\n      if (state.gameState === 'playing') {\n        const msg = t('exitGameWarning') || 'Exit game?';\n        e.preventDefault();\n        e.returnValue = msg;\n        return msg;\n      }\n      return undefined;\n    };\n    window.addEventListener('beforeunload', handleBeforeUnload);\n    return () => window.removeEventListener('beforeunload', handleBeforeUnload);\n  }, [state.gameState, t]);\n\n  const handleManualNext = () => {\n    if (state.feedback === 'selected' && state.selectedAnswer) {\n      processAnswer(state.selectedAnswer);\n      setTimeout(() => {\n        handleNext();\n      }, 1500);\n    } else if (state.feedback === 'transitioning') {\n      handleNext();\n    }\n  };\n\n  return (\n    <div\n      className={`flex-1 flex flex-col w-full h-full relative overflow-hidden font-inter ${theme === 'dark' ? 'bg-slate-950 text-white' : 'bg-slate-50 text-slate-900'}`}\n    >\n      {state.gameState === 'playing' && (\n        <Quiz.Banner\n          currentQuestionIndex={state.currentQuestionIndex}\n          totalQuestions={state.quizStreets.length}\n        />\n      )}\n\n      <div\n        className={`flex-1 flex ${['mobile', 'tablet'].includes(deviceMode) ? 'flex-col' : 'flex-row'} overflow-hidden relative z-0`}\n      >\n        {/* Map Area */}\n        <div\n          className={`relative z-0 min-w-0 ${['mobile', 'tablet'].includes(deviceMode) ? 'flex-1 w-full order-1' : 'flex-1 h-full order-1'}`}\n        >\n          <MapArea\n            currentStreet={currentStreet ?? undefined}\n            hintStreets={\n              state.gameState === 'playing'\n                ? state.hintStreets.slice(0, state.hintsRevealedCount)\n                : []\n            }\n            theme={theme}\n            onAnimationComplete={() => dispatch({ type: 'UNLOCK_INPUT' })}\n          />\n        </div>\n\n        {/* Quiz Dashboard Panel */}\n        {state.gameState === 'playing' && (\n          <div\n            className={`\n                  relative z-20 shrink-0\n                  glass-panel rounded-none border-l border-white/10\n                  ${\n                    ['mobile', 'tablet'].includes(deviceMode)\n                      ? 'w-full h-[45%] order-2 border-t rounded-t-3xl shadow-[0_-10px_40px_rgba(0,0,0,0.3)]'\n                      : 'w-[400px] lg:w-[450px] h-full order-2'\n                  }\n               `}\n          >\n            <Quiz>\n              <Quiz.Container keyProp={state.currentQuestionIndex}>\n                <Quiz.Content>\n                  <Quiz.Options\n                    options={state.options}\n                    onSelect={(street: Street) => {\n                      if (state.feedback === 'transitioning') {return;}\n                      // @ts-ignore\n                      if (state.autoAdvance) {handleSelectAnswer(street);}\n                      else {dispatch({ type: 'SELECT_ANSWER', payload: street });}\n                    }}\n                    selectedAnswer={state.selectedAnswer}\n                    feedback={state.feedback}\n                    correctName={currentStreet?.name}\n                    autoAdvance={state.autoAdvance}\n                    disabled={state.isInputLocked}\n                  />\n                </Quiz.Content>\n\n                <Quiz.Hints\n                  hintStreets={state.hintStreets}\n                  hintsRevealed={state.hintsRevealedCount}\n                  onReveal={() => dispatch({ type: 'REVEAL_HINT' })}\n                  feedback={state.feedback}\n                />\n\n                {!state.autoAdvance && (\n                  <Quiz.NextButton\n                    onNext={handleManualNext}\n                    isLastQuestion={state.currentQuestionIndex >= state.quizStreets.length - 1}\n                    isSubmit={state.feedback === 'selected'}\n                    feedback={state.feedback}\n                    disabled={!state.selectedAnswer && state.feedback === 'idle'}\n                  />\n                )}\n              </Quiz.Container>\n            </Quiz>\n          </div>\n        )}\n      </div>\n\n      {/* For logged-in users in intro state: show map with play overlay */}\n      {state.gameState === 'intro' && state.username && (\n        <>\n          {/* Map Background */}\n          {/* Map Background Removed - reusing underlay */}\n\n          {/* Translucent Play Overlay */}\n          <div\n            className={`absolute inset-0 z-[500] flex flex-col items-center justify-center backdrop-blur-sm ${theme === 'dark' ? 'bg-slate-950/70' : 'bg-white/70'}`}\n          >\n            <div className=\"text-center animate-fade-in-up\">\n              <div className=\"mb-6 flex justify-center\">\n                <Logo className=\"h-16 w-auto\" />\n              </div>\n              <h2\n                className={`text-3xl md:text-5xl font-black mb-4 ${theme === 'dark' ? 'text-white' : 'text-slate-900'} tracking-tight`}\n              >\n                {t('proveLocal') || 'PROVE YOU ARE A LOCAL'}\n              </h2>\n              <p\n                className={`text-lg mb-10 font-medium ${theme === 'dark' ? 'text-slate-300' : 'text-slate-600'}`}\n              >\n                {t('welcomeBack') || 'Welcome back'},{' '}\n                {state.profileLoaded ? state.realName || state.username.replace('@', '') : '...'}!\n              </p>\n              <button\n                onClick={() => setupGame()}\n                className={`px-12 py-5 rounded-full text-white shadow-xl transform hover:scale-105 transition-all duration-300 flex items-center justify-center mx-auto ring-4 ${\n                  hasPlayedToday()\n                    ? 'bg-[#000080] hover:bg-[#000060] shadow-[#000080]/30 ring-[#000080]/20'\n                    : 'bg-sky-500 hover:bg-sky-400 shadow-sky-500/30 ring-sky-500/20'\n                }`}\n              >\n                <span className=\"font-black text-xl tracking-wider\">\n                  {hasPlayedToday() ? t('replay') || 'Replay' : t('play') || 'Play'}\n                </span>\n              </button>\n            </div>\n          </div>\n        </>\n      )}\n\n      {/* For non-logged users: show full LandingPage */}\n      {state.gameState === 'intro' && !state.username && (\n        <LandingPage\n          theme={theme}\n          hasPlayedToday={hasPlayedToday()}\n          onStart={() => {\n            const seen = localStorage.getItem('girify_instructions_seen');\n            if (seen === 'true') {\n              dispatch({ type: 'SET_GAME_STATE', payload: 'register' });\n            } else {\n              dispatch({ type: 'SET_GAME_STATE', payload: 'instructions' });\n            }\n          }}\n          onLogin={() => {\n            dispatch({ type: 'SET_GAME_STATE', payload: 'register' });\n          }}\n        />\n      )}\n\n      {state.gameState === 'instructions' && (\n        <div\n          className={`absolute inset-0 z-[2000] flex flex-col items-center justify-center p-6 text-center backdrop-blur-md transition-colors duration-1000 ${theme === 'dark' ? 'bg-slate-950/80 text-white' : 'bg-slate-50/80 text-slate-900'}`}\n        >\n          <h2 className=\"heading-lg mb-8 text-sky-400\">{t('howToPlay')}</h2>\n          <ul className=\"text-left space-y-6 text-xl mb-12 max-w-md mx-auto\">\n            <li className=\"flex gap-4 items-center\">\n              <span className=\"text-2xl\">ðŸ“</span>\n              <span>{t('instructionsPoint1')}</span>\n            </li>\n            <li className=\"flex gap-4 items-center\">\n              <span className=\"text-2xl\">ðŸ¤”</span>\n              <span>{t('instructionsPoint2')}</span>\n            </li>\n            <li className=\"flex gap-4 items-center\">\n              <span className=\"text-2xl\">ðŸ’¡</span>\n              <span>{t('instructionsPoint3')}</span>\n            </li>\n            <li className=\"flex gap-4 items-center text-emerald-400 font-bold\">\n              <span className=\"text-2xl\">â³</span>\n              <span>{t('instructionsPoint4')}</span>\n            </li>\n          </ul>\n          <button\n            onClick={() => {\n              localStorage.setItem('girify_instructions_seen', 'true');\n              if (state.username) {setupGame();}\n              else {dispatch({ type: 'SET_GAME_STATE', payload: 'register' });}\n            }}\n            className=\"px-10 py-4 bg-emerald-500 hover:bg-emerald-600 text-white rounded-2xl shadow-lg shadow-emerald-500/20 font-bold text-xl transition-all transform hover:scale-105\"\n          >\n            {state.username ? t('imReady') : t('next')}\n          </button>\n        </div>\n      )}\n\n      {state.gameState === 'register' && (\n        <RegisterPanel theme={theme} onRegister={handleRegister} initialMode={state.registerMode} />\n      )}\n\n      {state.gameState === 'summary' && (\n        <div className=\"absolute inset-0 z-50 pointer-events-auto\">\n          <SummaryScreen\n            score={state.score}\n            // @ts-ignore\n            total={state.quizStreets.length}\n            theme={theme}\n            username={state.username}\n            realName={state.realName} // Pass real name\n            streak={state.streak} // Pass streak\n            onRestart={() => setupGame()}\n            quizResults={state.quizResults}\n            quizStreets={state.quizStreets}\n            t={t}\n          />\n        </div>\n      )}\n\n      {showOnboarding && <OnboardingTour onComplete={() => setShowOnboarding(false)} />}\n    </div>\n  );\n};\n\nexport default GameScreen;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/LandingPage.jsx",
    "messages": [
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'onStart' is missing in props validation",
        "line": 15,
        "column": 24,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 15,
        "endColumn": 41
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'onLogin' is missing in props validation",
        "line": 15,
        "column": 43,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 15,
        "endColumn": 50
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'theme' is missing in props validation",
        "line": 15,
        "column": 52,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 15,
        "endColumn": 57
      },
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 2,
        "message": "'hasPlayedToday' is defined but never used. Allowed unused args must match /^_/u.",
        "line": 15,
        "column": 59,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 15,
        "endColumn": 73
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'hasPlayedToday' is missing in props validation",
        "line": 15,
        "column": 59,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 15,
        "endColumn": 73
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 4000.",
        "line": 23,
        "column": 8,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 23,
        "endColumn": 12
      },
      {
        "ruleId": "react/no-unescaped-entities",
        "severity": 2,
        "message": "`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.",
        "line": 126,
        "column": 23,
        "nodeType": "JSXText",
        "messageId": "unescapedEntityAlts",
        "suggestions": [
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&quot;" },
            "fix": { "range": [5828, 5852], "text": "\n                      &quot;" },
            "desc": "Replace with `&quot;`."
          },
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&ldquo;" },
            "fix": { "range": [5828, 5852], "text": "\n                      &ldquo;" },
            "desc": "Replace with `&ldquo;`."
          },
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&#34;" },
            "fix": { "range": [5828, 5852], "text": "\n                      &#34;" },
            "desc": "Replace with `&#34;`."
          },
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&rdquo;" },
            "fix": { "range": [5828, 5852], "text": "\n                      &rdquo;" },
            "desc": "Replace with `&rdquo;`."
          }
        ]
      },
      {
        "ruleId": "react/no-unescaped-entities",
        "severity": 2,
        "message": "`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.",
        "line": 126,
        "column": 51,
        "nodeType": "JSXText",
        "messageId": "unescapedEntityAlts",
        "suggestions": [
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&quot;" },
            "fix": { "range": [5879, 5901], "text": "&quot;\n                    " },
            "desc": "Replace with `&quot;`."
          },
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&ldquo;" },
            "fix": { "range": [5879, 5901], "text": "&ldquo;\n                    " },
            "desc": "Replace with `&ldquo;`."
          },
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&#34;" },
            "fix": { "range": [5879, 5901], "text": "&#34;\n                    " },
            "desc": "Replace with `&#34;`."
          },
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&rdquo;" },
            "fix": { "range": [5879, 5901], "text": "&rdquo;\n                    " },
            "desc": "Replace with `&rdquo;`."
          }
        ]
      }
    ],
    "suppressedMessages": [],
    "errorCount": 7,
    "fatalErrorCount": 0,
    "warningCount": 1,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import React, { useEffect, useState } from 'react';\nimport { useTheme } from '../context/ThemeContext';\n\nimport { motion, AnimatePresence } from 'framer-motion';\nimport SeoHead from './SeoHead';\nimport { Link } from 'react-router-dom';\n\nconst NEWS_HEADLINES = [\n  'BREAKING: Local man finds parking in GrÃ cia on first try.',\n  \"ALERT: Guiri asks for 'Sangria' at classic Bodega.\",\n  'UPDATE: Rent prices drop by 0.00% this month.',\n  'SCANDAL: Pidgeon steals whole croissant from tourist.',\n];\n\nconst LandingPage = ({ onStart: _onStart, onLogin, theme, hasPlayedToday }) => {\n  const { t: _t } = useTheme();\n  // Simple ticker for \"Mejur Jouma\" news\n  const [newsIndex, setNewsIndex] = useState(0);\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setNewsIndex(prev => (prev + 1) % NEWS_HEADLINES.length);\n    }, 4000);\n    return () => clearInterval(interval);\n  }, []);\n\n  return (\n    <div\n      className={`min-h-screen flex flex-col relative ${theme === 'dark' ? 'bg-slate-950 text-white' : 'bg-slate-50 text-slate-900'} font-inter overflow-x-hidden`}\n    >\n      <SeoHead\n        title=\"Girify - Become a Local\"\n        description=\"Master the streets of Barcelona. Guess streets, earn Giuros, and prove you know the real city.\"\n      />\n\n      {/* Hero Section - pt-16 to account for fixed TopBar */}\n      <main className=\"flex-1 flex flex-col items-center pt-16 px-4 pb-12 w-full max-w-7xl mx-auto z-10\">\n        <motion.div\n          initial={{ opacity: 0, scale: 0.95 }}\n          animate={{ opacity: 1, scale: 1 }}\n          transition={{ duration: 0.8 }}\n          className=\"relative z-10 w-full flex flex-col items-center text-center max-w-4xl pt-8\"\n        >\n          {/* Pixel Art Hero */}\n          <div className=\"relative w-full max-w-2xl aspect-video rounded-3xl overflow-hidden shadow-2xl border-4 border-slate-900 dark:border-white/10 mb-8 group\">\n            <img\n              src=\"/images/guiri_invasion.png\"\n              alt=\"Barcelona Streets\"\n              className=\"w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-700\"\n            />\n            <div className=\"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/80 to-transparent p-6 pt-20\">\n              <h2 className=\"text-white text-xl md:text-3xl font-black tracking-tight text-balance shadow-black drop-shadow-lg\">\n                BECOME THE ULTIMATE LOCAL.\n              </h2>\n              <p className=\"text-white/80 text-sm md:text-base mt-2 font-mono\">\n                Show you know the real Barcelona... street by street.\n              </p>\n            </div>\n          </div>\n\n          <h1 className=\"heading-xl mb-6 max-w-2xl mx-auto text-balance\">\n            Master Selected Streets!\n          </h1>\n\n          <p className=\"text-lg md:text-xl font-medium opacity-70 mb-10 max-w-xl leading-relaxed text-balance\">\n            Navigate the city without a map. Earn{' '}\n            <span className=\"text-yellow-500 font-bold\">Giuros</span>, climb the rankings, and\n            celebrate your neighborhood.\n          </p>\n\n          <div className=\"flex flex-col sm:flex-row gap-4 w-full max-w-md justify-center mb-16\">\n            <button\n              onClick={onLogin}\n              className=\"flex-1 px-8 py-4 rounded-xl font-black text-xl bg-sky-500 hover:bg-sky-400 text-white shadow-lg shadow-sky-500/30 transform hover:-translate-y-1 transition-all duration-300\"\n            >\n              Sign Up to Play\n            </button>\n          </div>\n\n          {/* Features Grid */}\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 w-full mb-12 text-left\">\n            <div className=\"glass-panel p-6\">\n              <div className=\"text-4xl mb-4\">ðŸ†</div>\n              <h3 className=\"font-bold text-lg mb-2\">Rankings</h3>\n              <p className=\"text-sm opacity-60\">\n                Compete with friends and neighbors for the top spot.\n              </p>\n            </div>\n            <div className=\"glass-panel p-6\">\n              <div className=\"text-4xl mb-4\">ðŸ¤</div>\n              <h3 className=\"font-bold text-lg mb-2\">Friendship</h3>\n              <p className=\"text-sm opacity-60\">Challenge your friends and track their progress.</p>\n            </div>\n            <div className=\"glass-panel p-6\">\n              <div className=\"text-4xl mb-4\">ðŸ’°</div>\n              <h3 className=\"font-bold text-lg mb-2\">Rewards</h3>\n              <p className=\"text-sm opacity-60\">\n                Earn Giuros to customize your profile and unlock badges.\n              </p>\n            </div>\n          </div>\n\n          {/* Social / Mayor Section */}\n          <div className=\"w-full grid grid-cols-1 gap-6 p-4\">\n            {/* Character Card */}\n            <div className=\"bg-slate-100 dark:bg-slate-900 rounded-3xl p-6 flex items-center gap-4 text-left border border-slate-200 dark:border-slate-800 relative overflow-hidden\">\n              <div className=\"absolute top-0 right-0 p-2 opacity-10 font-black text-6xl\">NEWS</div>\n              <img\n                src=\"/images/mejur_jouma.png\"\n                alt=\"Mejur Jouma\"\n                className=\"w-24 h-24 rounded-full border-4 border-yellow-500 shadow-lg bg-indigo-900 object-cover\"\n              />\n              <div>\n                <div className=\"text-yellow-500 font-bold text-xs uppercase mb-1\">\n                  Mejur Jouma Reports\n                </div>\n                <div className=\"font-bold text-sm h-12 flex items-center\">\n                  <AnimatePresence mode=\"wait\">\n                    <motion.p\n                      key={newsIndex}\n                      initial={{ opacity: 0, y: 10 }}\n                      animate={{ opacity: 1, y: 0 }}\n                      exit={{ opacity: 0, y: -10 }}\n                      className=\"line-clamp-2\"\n                    >\n                      \"{NEWS_HEADLINES[newsIndex]}\"\n                    </motion.p>\n                  </AnimatePresence>\n                </div>\n              </div>\n            </div>\n          </div>\n        </motion.div>\n      </main>\n\n      {/* Footer - Single copyright notice */}\n      <footer className=\"relative mt-auto p-8 text-center text-sm opacity-40 font-mono z-10 bg-slate-100/50 dark:bg-slate-900/50 backdrop-blur-sm\">\n        <p className=\"mb-2\">&copy; {new Date().getFullYear()} Girify Â· Barcelona</p>\n        <div className=\"flex justify-center gap-4\">\n          <Link to=\"/privacy\" className=\"hover:text-white underline decoration-dotted\">\n            Privacy\n          </Link>\n          <Link to=\"/terms\" className=\"hover:text-white underline decoration-dotted\">\n            Terms\n          </Link>\n        </div>\n      </footer>\n    </div>\n  );\n};\n\nexport default LandingPage;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/LeaderboardScreen.jsx",
    "messages": [
      {
        "ruleId": "max-lines-per-function",
        "severity": 1,
        "message": "Arrow function has too many lines (213). Maximum allowed is 150.",
        "line": 10,
        "column": 27,
        "nodeType": "ArrowFunctionExpression",
        "messageId": "exceed",
        "endLine": 234,
        "endColumn": 2
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 5000.",
        "line": 25,
        "column": 87,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 25,
        "endColumn": 91
      },
      {
        "ruleId": "no-nested-ternary",
        "severity": 1,
        "message": "Do not nest ternary expressions.",
        "line": 118,
        "column": 14,
        "nodeType": "ConditionalExpression",
        "messageId": "noNestedTernary",
        "endLine": 228,
        "endColumn": 14
      },
      {
        "ruleId": "no-nested-ternary",
        "severity": 1,
        "message": "Do not nest ternary expressions.",
        "line": 125,
        "column": 17,
        "nodeType": "ConditionalExpression",
        "messageId": "noNestedTernary",
        "endLine": 228,
        "endColumn": 14
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1000.",
        "line": 147,
        "column": 64,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 147,
        "endColumn": 68
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 0.05.",
        "line": 170,
        "column": 52,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 170,
        "endColumn": 56
      },
      {
        "ruleId": "no-nested-ternary",
        "severity": 1,
        "message": "Do not nest ternary expressions.",
        "line": 181,
        "column": 27,
        "nodeType": "ConditionalExpression",
        "messageId": "noNestedTernary",
        "endLine": 185,
        "endColumn": 91
      },
      {
        "ruleId": "no-nested-ternary",
        "severity": 1,
        "message": "Do not nest ternary expressions.",
        "line": 193,
        "column": 29,
        "nodeType": "ConditionalExpression",
        "messageId": "noNestedTernary",
        "endLine": 199,
        "endColumn": 80
      },
      {
        "ruleId": "no-nested-ternary",
        "severity": 1,
        "message": "Do not nest ternary expressions.",
        "line": 195,
        "column": 33,
        "nodeType": "ConditionalExpression",
        "messageId": "noNestedTernary",
        "endLine": 199,
        "endColumn": 80
      },
      {
        "ruleId": "react/no-unused-prop-types",
        "severity": 1,
        "message": "'onClose' PropType is defined but prop is never used",
        "line": 237,
        "column": 3,
        "nodeType": "Identifier",
        "messageId": "unusedPropType",
        "endLine": 237,
        "endColumn": 10
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 10,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import React, { useEffect, useState } from 'react';\n\nimport { motion } from 'framer-motion';\nimport { useTheme } from '../context/ThemeContext';\nimport { useNavigate } from 'react-router-dom';\nimport { getLeaderboard } from '../utils/leaderboard';\nimport PropTypes from 'prop-types';\nimport TopBar from './TopBar';\n\nconst LeaderboardScreen = ({ currentUser }) => {\n  const { theme, t } = useTheme();\n  const navigate = useNavigate();\n  const [scores, setScores] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [period, setPeriod] = useState('all'); // 'all', 'monthly', 'weekly', 'daily'\n  const [error, setError] = useState(null);\n\n  const loadScores = React.useCallback(async () => {\n    setLoading(true);\n    setError(null);\n    setScores([]);\n\n    try {\n      const timeoutPromise = new Promise((_, reject) =>\n        setTimeout(() => reject(new Error('Timeout: Server response took too long')), 5000)\n      );\n      const dataPromise = getLeaderboard(period);\n      const data = await Promise.race([dataPromise, timeoutPromise]);\n\n      if (data === null) {\n        setScores([]);\n      } else {\n        setScores(data.filter(s => s.username && s.username !== 'UNKNOWN'));\n      }\n    } catch (err) {\n      console.error('Failed to load scores:', err);\n      let msg = err.message || 'Failed to load leaderboard';\n      if (msg.includes('Missing or insufficient permissions')) {\n        msg = 'Database permissions error. Ask admin to check Firestore rules.';\n      } else if (msg.includes('Timeout')) {\n        msg = 'Connection timed out. Please check your internet.';\n      }\n      setError(msg);\n      setScores([]);\n    } finally {\n      setLoading(false);\n    }\n  }, [period]);\n\n  useEffect(() => {\n    loadScores();\n  }, [loadScores]);\n\n  const TABS = [\n    { id: 'all', label: t('allTime') },\n    { id: 'monthly', label: t('monthly') },\n    { id: 'weekly', label: t('weekly') },\n    { id: 'daily', label: t('daily') },\n  ];\n\n  return (\n    <div\n      className={`fixed inset-0 w-full h-full flex flex-col overflow-hidden transition-colors duration-500\n           ${theme === 'dark' ? 'bg-slate-900 text-white' : 'bg-slate-50 text-slate-900'}\n      `}\n    >\n      <TopBar onOpenPage={page => navigate(page ? `/${page}` : '/')} />\n\n      <div className=\"flex-1 w-full px-4 py-8 pt-20 overflow-x-hidden\">\n        <div className=\"max-w-2xl mx-auto w-full\">\n          {/* Header */}\n          <div className=\"flex items-center justify-between mb-8 relative\">\n            <button\n              onClick={() => navigate(-1)}\n              className=\"flex items-center gap-2 text-sm font-bold opacity-60 hover:opacity-100 transition-opacity z-10\"\n            >\n              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d=\"M15 19l-7-7 7-7\"\n                />\n              </svg>\n              {t('back')}\n            </button>\n            <h1 className=\"text-xl font-black absolute left-1/2 transform -translate-x-1/2 flex items-center gap-2\">\n              <span className=\"text-2xl\">ðŸ†</span> {t('leaderboard')}\n            </h1>\n            <div className=\"w-10\" /> {/* Spacer */}\n          </div>\n\n          {/* Tabs */}\n          <div className=\"flex justify-center mb-6\">\n            <div\n              className={`flex p-1 rounded-xl ${theme === 'dark' ? 'bg-slate-800' : 'bg-slate-200'}`}\n            >\n              {TABS.map(tab => (\n                <button\n                  key={tab.id}\n                  onClick={() => setPeriod(tab.id)}\n                  className={`px-4 py-2 text-xs font-bold rounded-lg transition-all uppercase tracking-wider\n                         ${\n                           period === tab.id\n                             ? 'bg-sky-500 text-white shadow-md'\n                             : 'text-slate-500 hover:text-slate-800 dark:hover:text-slate-300'\n                         }\n                      `}\n                >\n                  {tab.label}\n                </button>\n              ))}\n            </div>\n          </div>\n\n          {/* List */}\n          <div className=\"flex-1\">\n            {loading ? (\n              <div className=\"flex flex-col items-center justify-center py-20 opacity-50 space-y-4\">\n                <div className=\"w-8 h-8 border-4 border-sky-500 border-t-transparent rounded-full animate-spin\" />\n                <span className=\"text-xs uppercase tracking-widest font-bold\">\n                  {t('loadingRankings')}\n                </span>\n              </div>\n            ) : error ? (\n              <div className=\"flex flex-col items-center justify-center py-20 text-center p-6\">\n                <span className=\"text-4xl mb-4\">âš ï¸</span>\n                <p className=\"font-bold text-red-400 mb-2\">{error}</p>\n                <button\n                  onClick={loadScores}\n                  className=\"px-4 py-2 bg-slate-200 dark:bg-slate-800 rounded-lg hover:opacity-80 transition-colors text-sm font-bold\"\n                >\n                  Try Again\n                </button>\n              </div>\n            ) : scores.length === 0 ? (\n              <div className=\"flex flex-col items-center justify-center py-20 opacity-40\">\n                <span className=\"text-4xl mb-4\">ðŸ“­</span>\n                <p className=\"font-bold\">{t('noRecords')}</p>\n              </div>\n            ) : (\n              <div className=\"space-y-2 pb-10\">\n                {scores.map((s, index) => {\n                  let dateStr = 'Unknown';\n                  try {\n                    if (s.timestamp && s.timestamp.seconds) {\n                      dateStr = new Date(s.timestamp.seconds * 1000).toLocaleDateString(undefined, {\n                        month: 'short',\n                        day: 'numeric',\n                      });\n                    } else if (s.timestamp) {\n                      dateStr = new Date(s.timestamp).toLocaleDateString(undefined, {\n                        month: 'short',\n                        day: 'numeric',\n                      });\n                    }\n                  } catch {\n                    dateStr = '--';\n                  }\n\n                  const isMe =\n                    currentUser &&\n                    s.username?.toLowerCase().replace(/^@/, '') ===\n                      currentUser.toLowerCase().replace(/^@/, '');\n\n                  return (\n                    <motion.div\n                      initial={{ opacity: 0, y: 10 }}\n                      animate={{ opacity: 1, y: 0 }}\n                      transition={{ delay: index * 0.05 }}\n                      key={s.id || index}\n                      onClick={() => {\n                        const cleanClicked = s.username?.replace(/^@/, '') || '';\n                        const myClean = currentUser?.replace(/^@/, '') || '';\n                        if (cleanClicked.toLowerCase() === myClean.toLowerCase())\n                          {navigate('/profile');}\n                        else {navigate(`/user/${encodeURIComponent(s.username)}`);}\n                      }}\n                      className={`flex items-center justify-between p-4 rounded-2xl border cursor-pointer transition-all hover:scale-[1.02]\n                        ${\n                          isMe\n                            ? 'border-sky-500 bg-sky-500/10 shadow-lg shadow-sky-500/10'\n                            : theme === 'dark'\n                              ? 'bg-slate-800 border-slate-700 hover:border-slate-600'\n                              : 'bg-white border-slate-200 hover:border-sky-200 shadow-sm'\n                        }\n                      `}\n                    >\n                      <div className=\"flex items-center gap-4\">\n                        <div\n                          className={`w-8 h-8 flex items-center justify-center rounded-full font-black text-sm\n                          ${\n                            index === 0\n                              ? 'bg-yellow-400 text-yellow-900'\n                              : index === 1\n                                ? 'bg-slate-300 text-slate-900'\n                                : index === 2\n                                  ? 'bg-amber-600 text-white'\n                                  : 'bg-slate-100 dark:bg-slate-700 opacity-50'\n                          }\n                        `}\n                        >\n                          {index + 1}\n                        </div>\n                        <div>\n                          <div className=\"font-bold text-sm flex items-center gap-1\">\n                            {s.username}\n                            {isMe && (\n                              <span className=\"text-[10px] bg-sky-500 text-white px-1.5 rounded-full\">\n                                YOU\n                              </span>\n                            )}\n                          </div>\n                          <div className=\"text-[10px] opacity-50 font-mono\">{dateStr}</div>\n                        </div>\n                      </div>\n\n                      <div className=\"text-right\">\n                        <div className=\"font-black text-lg text-sky-500\">\n                          {s.score.toLocaleString()}\n                        </div>\n                        <div className=\"text-[9px] font-bold opacity-40 uppercase\">Points</div>\n                      </div>\n                    </motion.div>\n                  );\n                })}\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nLeaderboardScreen.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  currentUser: PropTypes.string,\n};\n\nexport default LeaderboardScreen;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/Logo.jsx",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/MapArea.jsx",
    "messages": [],
    "suppressedMessages": [
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 2,
        "message": "'useRef' is defined but never used. Allowed unused vars must match /^_/u.",
        "line": 2,
        "column": 38,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 2,
        "endColumn": 44,
        "suggestions": [
          {
            "messageId": "removeUnusedVar",
            "data": { "varName": "useRef" },
            "fix": { "range": [56, 64], "text": "" },
            "desc": "Remove unused variable \"useRef\"."
          }
        ],
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 2,
        "message": "'GeoJSON' is defined but never used. Allowed unused vars must match /^_/u.",
        "line": 11,
        "column": 3,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 11,
        "endColumn": 10,
        "suggestions": [
          {
            "messageId": "removeUnusedVar",
            "data": { "varName": "GeoJSON" },
            "fix": { "range": [176, 187], "text": "" },
            "desc": "Remove unused variable \"GeoJSON\"."
          }
        ],
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'coords' is missing in props validation",
        "line": 26,
        "column": 23,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 26,
        "endColumn": 29,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'onAnimationComplete' is missing in props validation",
        "line": 26,
        "column": 31,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 26,
        "endColumn": 50,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'coords.length' is missing in props validation",
        "line": 29,
        "column": 26,
        "nodeType": "Identifier",
        "messageId": "missingPropType",
        "endLine": 29,
        "endColumn": 32,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'coords.flat' is missing in props validation",
        "line": 31,
        "column": 32,
        "nodeType": "Identifier",
        "messageId": "missingPropType",
        "endLine": 31,
        "endColumn": 36,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 80.",
        "line": 38,
        "column": 50,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 38,
        "endColumn": 52,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 80.",
        "line": 38,
        "column": 54,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 38,
        "endColumn": 56,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2100.",
        "line": 44,
        "column": 16,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 44,
        "endColumn": 20,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 100.",
        "line": 46,
        "column": 12,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 46,
        "endColumn": 15,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.3879.",
        "line": 57,
        "column": 20,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 57,
        "endColumn": 27,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1699.",
        "line": 57,
        "column": 29,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 57,
        "endColumn": 35,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 13.",
        "line": 57,
        "column": 38,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 57,
        "endColumn": 40,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'setCurrentZoom' is missing in props validation",
        "line": 68,
        "column": 24,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 68,
        "endColumn": 38,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'center' is missing in props validation",
        "line": 84,
        "column": 28,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 84,
        "endColumn": 34,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'zoom' is missing in props validation",
        "line": 84,
        "column": 36,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 84,
        "endColumn": 40,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'bounds' is missing in props validation",
        "line": 84,
        "column": 42,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 84,
        "endColumn": 48,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'bounds.length' is missing in props validation",
        "line": 88,
        "column": 26,
        "nodeType": "Identifier",
        "messageId": "missingPropType",
        "endLine": 88,
        "endColumn": 32,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 768.",
        "line": 90,
        "column": 44,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 90,
        "endColumn": 47,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 40.",
        "line": 91,
        "column": 35,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 91,
        "endColumn": 37,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 40.",
        "line": 91,
        "column": 39,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 91,
        "endColumn": 41,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 80.",
        "line": 91,
        "column": 46,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 91,
        "endColumn": 48,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 80.",
        "line": 91,
        "column": 50,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 91,
        "endColumn": 52,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 13.",
        "line": 94,
        "column": 35,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 94,
        "endColumn": 37,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.4036.",
        "line": 123,
        "column": 36,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 123,
        "endColumn": 43,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1744.",
        "line": 123,
        "column": 45,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 123,
        "endColumn": 51,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.4036.",
        "line": 124,
        "column": 34,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 124,
        "endColumn": 41,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1894.",
        "line": 124,
        "column": 43,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 124,
        "endColumn": 49,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.4218.",
        "line": 125,
        "column": 29,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 125,
        "endColumn": 36,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1186.",
        "line": 125,
        "column": 38,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 125,
        "endColumn": 44,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.4145.",
        "line": 126,
        "column": 31,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 126,
        "endColumn": 38,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1527.",
        "line": 126,
        "column": 40,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 126,
        "endColumn": 46,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.3809.",
        "line": 127,
        "column": 29,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 127,
        "endColumn": 36,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1228.",
        "line": 127,
        "column": 38,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 127,
        "endColumn": 44,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.3688.",
        "line": 128,
        "column": 25,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 128,
        "endColumn": 32,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1534.",
        "line": 128,
        "column": 34,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 128,
        "endColumn": 40,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.3684.",
        "line": 129,
        "column": 28,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 129,
        "endColumn": 35,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.191.",
        "line": 129,
        "column": 37,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 129,
        "endColumn": 42,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.3916.",
        "line": 130,
        "column": 32,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 130,
        "endColumn": 39,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1649.",
        "line": 130,
        "column": 41,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 130,
        "endColumn": 47,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.3954.",
        "line": 131,
        "column": 31,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 131,
        "endColumn": 38,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1619.",
        "line": 131,
        "column": 40,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 131,
        "endColumn": 46,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.3911.",
        "line": 132,
        "column": 34,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 132,
        "endColumn": 41,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1806.",
        "line": 132,
        "column": 43,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 132,
        "endColumn": 49,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.384.",
        "line": 133,
        "column": 29,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 133,
        "endColumn": 35,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1762.",
        "line": 133,
        "column": 37,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 133,
        "endColumn": 43,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.3758.",
        "line": 134,
        "column": 37,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 134,
        "endColumn": 44,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1778.",
        "line": 134,
        "column": 46,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 134,
        "endColumn": 52,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.3817.",
        "line": 135,
        "column": 29,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 135,
        "endColumn": 36,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1716.",
        "line": 135,
        "column": 38,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 135,
        "endColumn": 44,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.3875.",
        "line": 136,
        "column": 39,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 136,
        "endColumn": 46,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1753.",
        "line": 136,
        "column": 48,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 136,
        "endColumn": 54,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.3837.",
        "line": 137,
        "column": 40,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 137,
        "endColumn": 47,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.182.",
        "line": 137,
        "column": 49,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 137,
        "endColumn": 54,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.3675.",
        "line": 138,
        "column": 35,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 138,
        "endColumn": 42,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1469.",
        "line": 138,
        "column": 44,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 138,
        "endColumn": 50,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.3881.",
        "line": 141,
        "column": 42,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 141,
        "endColumn": 49,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1873.",
        "line": 141,
        "column": 51,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 141,
        "endColumn": 57,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.4397.",
        "line": 142,
        "column": 46,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 142,
        "endColumn": 53,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1465.",
        "line": 142,
        "column": 55,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 142,
        "endColumn": 61,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.3636.",
        "line": 143,
        "column": 37,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 143,
        "endColumn": 44,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1578.",
        "line": 143,
        "column": 46,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 143,
        "endColumn": 52,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.4187.",
        "line": 144,
        "column": 38,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 144,
        "endColumn": 45,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1642.",
        "line": 144,
        "column": 47,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 144,
        "endColumn": 53,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.3661.",
        "line": 145,
        "column": 54,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 145,
        "endColumn": 61,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1659.",
        "line": 145,
        "column": 63,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 145,
        "endColumn": 69,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.4103.",
        "line": 146,
        "column": 41,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 146,
        "endColumn": 48,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.2168.",
        "line": 146,
        "column": 50,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 146,
        "endColumn": 56,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.3768.",
        "line": 147,
        "column": 49,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 147,
        "endColumn": 56,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1378.",
        "line": 147,
        "column": 58,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 147,
        "endColumn": 64,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.3773.",
        "line": 148,
        "column": 38,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 148,
        "endColumn": 45,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1461.",
        "line": 148,
        "column": 47,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 148,
        "endColumn": 53,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.3851.",
        "line": 151,
        "column": 34,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 151,
        "endColumn": 41,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1811.",
        "line": 151,
        "column": 43,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 151,
        "endColumn": 49,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.3833.",
        "line": 152,
        "column": 26,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 152,
        "endColumn": 33,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1667.",
        "line": 152,
        "column": 35,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 152,
        "endColumn": 41,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.3755.",
        "line": 153,
        "column": 34,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 153,
        "endColumn": 41,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1754.",
        "line": 153,
        "column": 43,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 153,
        "endColumn": 49,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.413.",
        "line": 154,
        "column": 31,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 154,
        "endColumn": 37,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1317.",
        "line": 154,
        "column": 39,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 154,
        "endColumn": 45,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.3685.",
        "line": 155,
        "column": 39,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 155,
        "endColumn": 46,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.16.",
        "line": 155,
        "column": 48,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 155,
        "endColumn": 52,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.371.",
        "line": 156,
        "column": 31,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 156,
        "endColumn": 37,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1492.",
        "line": 156,
        "column": 39,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 156,
        "endColumn": 45,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.384.",
        "line": 157,
        "column": 50,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 157,
        "endColumn": 56,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1773.",
        "line": 157,
        "column": 58,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 157,
        "endColumn": 64,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.3636.",
        "line": 160,
        "column": 29,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 160,
        "endColumn": 36,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1578.",
        "line": 160,
        "column": 38,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 160,
        "endColumn": 44,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.4186.",
        "line": 161,
        "column": 39,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 161,
        "endColumn": 46,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1579.",
        "line": 161,
        "column": 48,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 161,
        "endColumn": 54,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.4189.",
        "line": 162,
        "column": 38,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 162,
        "endColumn": 45,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.158.",
        "line": 162,
        "column": 47,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 162,
        "endColumn": 52,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.4175.",
        "line": 163,
        "column": 37,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 163,
        "endColumn": 44,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.115.",
        "line": 163,
        "column": 46,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 163,
        "endColumn": 51,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.435.",
        "line": 166,
        "column": 48,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 166,
        "endColumn": 54,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1818.",
        "line": 166,
        "column": 56,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 166,
        "endColumn": 62,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.412.",
        "line": 167,
        "column": 33,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 167,
        "endColumn": 39,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.2163.",
        "line": 167,
        "column": 41,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 167,
        "endColumn": 47,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.4042.",
        "line": 168,
        "column": 38,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 168,
        "endColumn": 45,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1913.",
        "line": 168,
        "column": 47,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 168,
        "endColumn": 53,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.3892.",
        "line": 169,
        "column": 36,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 169,
        "endColumn": 43,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1384.",
        "line": 169,
        "column": 45,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 169,
        "endColumn": 51,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.3758.",
        "line": 170,
        "column": 31,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 170,
        "endColumn": 38,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1492.",
        "line": 170,
        "column": 40,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 170,
        "endColumn": 46,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.3753.",
        "line": 171,
        "column": 31,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 171,
        "endColumn": 38,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1828.",
        "line": 171,
        "column": 40,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 171,
        "endColumn": 46,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.361.",
        "line": 172,
        "column": 31,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 172,
        "endColumn": 37,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1287.",
        "line": 172,
        "column": 39,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 172,
        "endColumn": 45,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.3551.",
        "line": 173,
        "column": 26,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 173,
        "endColumn": 33,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.0722.",
        "line": 173,
        "column": 35,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 173,
        "endColumn": 41,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.3712.",
        "line": 176,
        "column": 44,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 176,
        "endColumn": 51,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1895.",
        "line": 176,
        "column": 53,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 176,
        "endColumn": 59,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.3784.",
        "line": 177,
        "column": 45,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 177,
        "endColumn": 52,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1925.",
        "line": 177,
        "column": 54,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 177,
        "endColumn": 60,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.3834.",
        "line": 178,
        "column": 42,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 178,
        "endColumn": 49,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1963.",
        "line": 178,
        "column": 51,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 178,
        "endColumn": 57,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.3907.",
        "line": 179,
        "column": 45,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 179,
        "endColumn": 52,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.2035.",
        "line": 179,
        "column": 54,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 179,
        "endColumn": 60,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.3948.",
        "line": 180,
        "column": 40,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 180,
        "endColumn": 47,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.2078.",
        "line": 180,
        "column": 49,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 180,
        "endColumn": 55,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.3995.",
        "line": 181,
        "column": 43,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 181,
        "endColumn": 50,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.2132.",
        "line": 181,
        "column": 52,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 181,
        "endColumn": 58,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.4035.",
        "line": 182,
        "column": 48,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 182,
        "endColumn": 55,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.2173.",
        "line": 182,
        "column": 57,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 182,
        "endColumn": 63,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.4072.",
        "line": 183,
        "column": 38,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 183,
        "endColumn": 45,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.2215.",
        "line": 183,
        "column": 47,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 183,
        "endColumn": 53,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.3896.",
        "line": 186,
        "column": 36,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 186,
        "endColumn": 43,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1539.",
        "line": 186,
        "column": 45,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 186,
        "endColumn": 51,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.4116.",
        "line": 187,
        "column": 38,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 187,
        "endColumn": 45,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1749.",
        "line": 187,
        "column": 47,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 187,
        "endColumn": 53,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.4277.",
        "line": 188,
        "column": 34,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 188,
        "endColumn": 41,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1444.",
        "line": 188,
        "column": 43,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 188,
        "endColumn": 49,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.3845.",
        "line": 189,
        "column": 37,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 189,
        "endColumn": 44,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1936.",
        "line": 189,
        "column": 46,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 189,
        "endColumn": 52,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.3957.",
        "line": 192,
        "column": 42,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 192,
        "endColumn": 49,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1113.",
        "line": 192,
        "column": 51,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 192,
        "endColumn": 57,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.4003.",
        "line": 193,
        "column": 38,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 193,
        "endColumn": 45,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1147.",
        "line": 193,
        "column": 47,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 193,
        "endColumn": 53,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.3875.",
        "line": 194,
        "column": 38,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 194,
        "endColumn": 45,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1123.",
        "line": 194,
        "column": 47,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 194,
        "endColumn": 53,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.3965.",
        "line": 195,
        "column": 48,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 195,
        "endColumn": 55,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1318.",
        "line": 195,
        "column": 57,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 195,
        "endColumn": 63,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.4041.",
        "line": 196,
        "column": 43,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 196,
        "endColumn": 50,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1362.",
        "line": 196,
        "column": 52,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 196,
        "endColumn": 58,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.4003.",
        "line": 197,
        "column": 27,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 197,
        "endColumn": 34,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1213.",
        "line": 197,
        "column": 36,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 197,
        "endColumn": 42,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.4005.",
        "line": 198,
        "column": 36,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 198,
        "endColumn": 43,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1218.",
        "line": 198,
        "column": 45,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 198,
        "endColumn": 51,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.4367.",
        "line": 201,
        "column": 34,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 201,
        "endColumn": 41,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1899.",
        "line": 201,
        "column": 43,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 201,
        "endColumn": 49,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.4478.",
        "line": 202,
        "column": 40,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 202,
        "endColumn": 47,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1856.",
        "line": 202,
        "column": 49,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 202,
        "endColumn": 55,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.4355.",
        "line": 203,
        "column": 42,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 203,
        "endColumn": 49,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1903.",
        "line": 203,
        "column": 51,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 203,
        "endColumn": 57,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.4339.",
        "line": 204,
        "column": 37,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 204,
        "endColumn": 44,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1902.",
        "line": 204,
        "column": 46,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 204,
        "endColumn": 52,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.4312.",
        "line": 205,
        "column": 39,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 205,
        "endColumn": 46,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1888.",
        "line": 205,
        "column": 48,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 205,
        "endColumn": 54,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.4243.",
        "line": 206,
        "column": 38,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 206,
        "endColumn": 45,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1924.",
        "line": 206,
        "column": 47,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 206,
        "endColumn": 53,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.4418.",
        "line": 209,
        "column": 47,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 209,
        "endColumn": 54,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1732.",
        "line": 209,
        "column": 56,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 209,
        "endColumn": 62,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.4344.",
        "line": 210,
        "column": 46,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 210,
        "endColumn": 53,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1611.",
        "line": 210,
        "column": 55,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 210,
        "endColumn": 61,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.4395.",
        "line": 211,
        "column": 27,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 211,
        "endColumn": 34,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1518.",
        "line": 211,
        "column": 36,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 211,
        "endColumn": 42,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.4486.",
        "line": 212,
        "column": 29,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 212,
        "endColumn": 36,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1651.",
        "line": 212,
        "column": 38,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 212,
        "endColumn": 44,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.4568.",
        "line": 213,
        "column": 31,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 213,
        "endColumn": 38,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1785.",
        "line": 213,
        "column": 40,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 213,
        "endColumn": 46,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.4613.",
        "line": 214,
        "column": 37,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 214,
        "endColumn": 44,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1792.",
        "line": 214,
        "column": 46,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 214,
        "endColumn": 52,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.4391.",
        "line": 215,
        "column": 39,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 215,
        "endColumn": 46,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1653.",
        "line": 215,
        "column": 48,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 215,
        "endColumn": 54,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.435.",
        "line": 216,
        "column": 30,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 216,
        "endColumn": 36,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1818.",
        "line": 216,
        "column": 38,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 216,
        "endColumn": 44,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 30.",
        "line": 223,
        "column": 16,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 223,
        "endColumn": 18,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 30.",
        "line": 223,
        "column": 20,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 223,
        "endColumn": 22,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 15.",
        "line": 224,
        "column": 18,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 224,
        "endColumn": 20,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 15.",
        "line": 224,
        "column": 22,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 224,
        "endColumn": 24,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "max-lines-per-function",
        "severity": 1,
        "message": "Arrow function has too many lines (172). Maximum allowed is 150.",
        "line": 237,
        "column": 17,
        "nodeType": "ArrowFunctionExpression",
        "messageId": "exceed",
        "endLine": 432,
        "endColumn": 2,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 13.",
        "line": 239,
        "column": 50,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 239,
        "endColumn": 52,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "react-hooks/exhaustive-deps",
        "severity": 1,
        "message": "The 'geometry' conditional could make the dependencies of useEffect Hook (at line 250) change on every render. To fix this, wrap the initialization of 'geometry' in its own useMemo() Hook.",
        "line": 242,
        "column": 9,
        "nodeType": "VariableDeclarator",
        "endLine": 242,
        "endColumn": 63,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 100.",
        "line": 259,
        "column": 56,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 259,
        "endColumn": 59,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.3879.",
        "line": 297,
        "column": 20,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 297,
        "endColumn": 27,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1699.",
        "line": 297,
        "column": 29,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 297,
        "endColumn": 35,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.2.",
        "line": 305,
        "column": 14,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 305,
        "endColumn": 18,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.6.",
        "line": 306,
        "column": 14,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 306,
        "endColumn": 18,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.45.",
        "line": 306,
        "column": 20,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 306,
        "endColumn": 24,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 41.3879.",
        "line": 328,
        "column": 37,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 328,
        "endColumn": 44,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2.1699.",
        "line": 328,
        "column": 46,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 328,
        "endColumn": 52,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 11.",
        "line": 350,
        "column": 27,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 350,
        "endColumn": 29,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "react/no-array-index-key",
        "severity": 1,
        "message": "Do not use Array index in keys",
        "line": 352,
        "column": 28,
        "nodeType": "Identifier",
        "messageId": "noArrayIndex",
        "endLine": 352,
        "endColumn": 31,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 15.",
        "line": 353,
        "column": 33,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 353,
        "endColumn": 35,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 5.",
        "line": 357,
        "column": 33,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 357,
        "endColumn": 34,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "react/self-closing-comp",
        "severity": 1,
        "message": "Empty components are self-closing",
        "line": 413,
        "column": 9,
        "nodeType": "JSXOpeningElement",
        "messageId": "notSelfClosing",
        "endLine": 415,
        "endColumn": 10,
        "fix": { "range": [15879, 15886], "text": " />" },
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "react/self-closing-comp",
        "severity": 1,
        "message": "Empty components are self-closing",
        "line": 416,
        "column": 9,
        "nodeType": "JSXOpeningElement",
        "messageId": "notSelfClosing",
        "endLine": 418,
        "endColumn": 10,
        "fix": { "range": [16086, 16093], "text": " />" },
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-empty-function",
        "severity": 1,
        "message": "Unexpected empty method 'onAnimationComplete'.",
        "line": 456,
        "column": 30,
        "nodeType": "ArrowFunctionExpression",
        "messageId": "unexpected",
        "endLine": 456,
        "endColumn": 32,
        "suggestions": [
          {
            "messageId": "suggestComment",
            "data": { "name": "method 'onAnimationComplete'" },
            "fix": { "range": [17190, 17190], "text": " /* empty */ " },
            "desc": "Add comment inside empty method 'onAnimationComplete'."
          }
        ],
        "suppressions": [{ "kind": "directive", "justification": "" }]
      }
    ],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/NewsScreen.jsx",
    "messages": [
      {
        "ruleId": "no-nested-ternary",
        "severity": 1,
        "message": "Do not nest ternary expressions.",
        "line": 75,
        "column": 10,
        "nodeType": "ConditionalExpression",
        "messageId": "noNestedTernary",
        "endLine": 120,
        "endColumn": 10
      },
      {
        "ruleId": "react/no-danger",
        "severity": 1,
        "message": "Dangerous property 'dangerouslySetInnerHTML' found",
        "line": 115,
        "column": 19,
        "nodeType": "JSXAttribute",
        "messageId": "dangerousProp",
        "endLine": 115,
        "endColumn": 99
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 2,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import React, { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport { useTheme } from '../context/ThemeContext';\nimport { getActiveAnnouncements, markAnnouncementAsRead } from '../utils/news';\nimport PropTypes from 'prop-types';\n\n/**\n * NewsScreen - Displays all past announcements\n */\nconst NewsScreen = ({ onClose, username }) => {\n  const { theme, t } = useTheme();\n  const [announcements, setAnnouncements] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchAnnouncements = async () => {\n      setLoading(true);\n      const news = await getActiveAnnouncements();\n      setAnnouncements(news);\n\n      // Mark all as read when viewing\n      if (username) {\n        for (const a of news) {\n          await markAnnouncementAsRead(username, a.id);\n        }\n      }\n      setLoading(false);\n    };\n\n    fetchAnnouncements();\n  }, [username]);\n\n  const formatDate = timestamp => {\n    if (!timestamp) {return '';}\n    const date = timestamp.toDate ? timestamp.toDate() : new Date(timestamp);\n    return date.toLocaleDateString(undefined, {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n    });\n  };\n\n  return (\n    <div\n      className={`fixed inset-0 z-[8000] flex flex-col pt-16 pb-6 px-4 md:px-8 overflow-hidden pointer-events-auto backdrop-blur-md ${\n        theme === 'dark' ? 'bg-neutral-950 text-white' : 'bg-slate-50 text-slate-900'\n      }`}\n    >\n      {/* Header */}\n      <div className=\"flex items-center justify-between max-w-2xl mx-auto w-full mb-8 shrink-0 relative\">\n        <button\n          onClick={onClose}\n          className=\"flex items-center gap-2 text-sm font-bold opacity-60 hover:opacity-100 transition-opacity z-10\"\n        >\n          <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M15 19l-7-7 7-7\"\n            />\n          </svg>\n          {t('back') || 'Back'}\n        </button>\n\n        <h2 className=\"text-xl font-black tracking-tight absolute left-1/2 transform -translate-x-1/2\">\n          {t('news') || 'News'}\n        </h2>\n\n        {/* Empty div for flex spacing */}\n        <div className=\"w-16\" />\n      </div>\n\n      <div className=\"flex-1 overflow-y-auto max-w-2xl mx-auto w-full pb-8\">\n        {loading ? (\n          <div className=\"flex items-center justify-center py-20\">\n            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-sky-500\" />\n          </div>\n        ) : announcements.length === 0 ? (\n          <div className=\"text-center py-20\">\n            <div className=\"text-6xl mb-4\">ðŸ“°</div>\n            <h2 className=\"text-xl font-bold mb-2\">{t('noNews') || 'No announcements yet'}</h2>\n            <p className=\"opacity-60\">{t('checkBackLater') || 'Check back later for updates!'}</p>\n          </div>\n        ) : (\n          <div className=\"space-y-6\">\n            <div className=\"flex flex-col items-center mb-6\">\n              <img\n                src=\"/mejur_jouma.png\"\n                alt=\"Mejur Jouma\"\n                className=\"w-32 h-32 object-contain hover:scale-110 transition-transform cursor-pointer\"\n                title=\"Mejur Jouma delivering the news\"\n              />\n              <p className=\"text-center text-sm opacity-50 uppercase tracking-widest font-bold mt-2\">\n                {t('latestUpdates') || 'Latest updates and announcements'}\n              </p>\n            </div>\n            {announcements.map(announcement => (\n              <motion.article\n                key={announcement.id}\n                initial={{ opacity: 0, y: 10 }}\n                animate={{ opacity: 1, y: 0 }}\n                className={`p-6 rounded-2xl border ${\n                  theme === 'dark' ? 'bg-slate-900 border-slate-800' : 'bg-white border-slate-200'\n                } shadow-sm`}\n              >\n                <div className=\"flex items-start justify-between mb-3\">\n                  <h2 className=\"text-xl font-bold\">{announcement.title}</h2>\n                  <span className=\"text-xs opacity-50 whitespace-nowrap ml-4 font-bold uppercase tracking-wider\">\n                    {formatDate(announcement.publishDate)}\n                  </span>\n                </div>\n                <div\n                  className=\"prose prose-sm dark:prose-invert max-w-none opacity-80 leading-relaxed\"\n                  dangerouslySetInnerHTML={{ __html: announcement.body.replace(/\\n/g, '<br />') }}\n                />\n              </motion.article>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nNewsScreen.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  username: PropTypes.string,\n};\n\nexport default NewsScreen;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/NotificationSystem.jsx",
    "messages": [
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'children' is missing in props validation",
        "line": 5,
        "column": 40,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 5,
        "endColumn": 48
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'notifications' is missing in props validation",
        "line": 33,
        "column": 34,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 33,
        "endColumn": 47
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'onDismiss' is missing in props validation",
        "line": 33,
        "column": 49,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 33,
        "endColumn": 58
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'notifications.map' is missing in props validation",
        "line": 37,
        "column": 24,
        "nodeType": "Identifier",
        "messageId": "missingPropType",
        "endLine": 37,
        "endColumn": 27
      }
    ],
    "suppressedMessages": [],
    "errorCount": 4,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { motion, AnimatePresence } from 'framer-motion';\nimport { useState } from 'react';\nimport { NotificationContext } from '../context/NotificationContext';\n\nexport const NotificationProvider = ({ children }) => {\n  const [notifications, setNotifications] = useState([]);\n\n  const notify = (message, type = 'info', duration = 3000) => {\n    const id = Date.now();\n    setNotifications(prev => [...prev, { id, message, type }]);\n\n    if (duration > 0) {\n      setTimeout(() => {\n        setNotifications(prev => prev.filter(n => n.id !== id));\n      }, duration);\n    }\n\n    return id;\n  };\n\n  const dismiss = id => {\n    setNotifications(prev => prev.filter(n => n.id !== id));\n  };\n\n  return (\n    <NotificationContext.Provider value={{ notify, dismiss }}>\n      {children}\n      <NotificationContainer notifications={notifications} onDismiss={dismiss} />\n    </NotificationContext.Provider>\n  );\n};\n\nconst NotificationContainer = ({ notifications, onDismiss }) => {\n  return (\n    <div className=\"fixed top-20 right-4 z-[9999] space-y-2 pointer-events-none\">\n      <AnimatePresence>\n        {notifications.map(notification => (\n          <motion.div\n            key={notification.id}\n            initial={{ opacity: 0, x: 50, scale: 0.8 }}\n            animate={{ opacity: 1, x: 0, scale: 1 }}\n            exit={{ opacity: 0, x: 50, scale: 0.8 }}\n            className={`\n              px-6 py-4 rounded-lg shadow-lg max-w-sm pointer-events-auto flex items-center justify-between\n              ${notification.type === 'success' ? 'bg-emerald-500' : ''}\n              ${notification.type === 'error' ? 'bg-rose-500' : ''}\n              ${notification.type === 'info' ? 'bg-sky-500' : ''}\n              ${notification.type === 'warning' ? 'bg-amber-500' : ''}\n              text-white font-medium\n            `}\n          >\n            <span>{notification.message}</span>\n            <button\n              onClick={() => onDismiss(notification.id)}\n              className=\"ml-4 hover:opacity-75 transition-opacity\"\n            >\n              âœ•\n            </button>\n          </motion.div>\n        ))}\n      </AnimatePresence>\n    </div>\n  );\n};\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/OnboardingTour.jsx",
    "messages": [
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'onComplete' is missing in props validation",
        "line": 7,
        "column": 27,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 7,
        "endColumn": 37
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 3.",
        "line": 73,
        "column": 23,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 73,
        "endColumn": 24
      },
      {
        "ruleId": "react/no-array-index-key",
        "severity": 1,
        "message": "Do not use Array index in keys",
        "line": 100,
        "column": 22,
        "nodeType": "Identifier",
        "messageId": "noArrayIndex",
        "endLine": 100,
        "endColumn": 23
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 0,
    "warningCount": 2,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import React, { useState } from 'react';\n\nimport { motion } from 'framer-motion';\nimport { useTheme } from '../context/ThemeContext';\nimport { storage } from '../utils/storage';\n\nconst OnboardingTour = ({ onComplete }) => {\n  const { theme } = useTheme();\n  const [step, setStep] = useState(0);\n\n  const steps = [\n    {\n      target: 'center',\n      title: 'Welcome to Girify!',\n      content: \"Let's take a quick tour to check out the app.\",\n      position: 'center',\n    },\n    {\n      target: 'map-area',\n      title: 'The Challenge',\n      content: 'A street will be highlighted on the map. Zoom and pan to find clues!',\n      position: 'top',\n    },\n    {\n      target: 'quiz-input',\n      title: 'Your Answer',\n      content: 'Select the correct street name from the options provided.',\n      position: 'bottom', // or right depending on layout\n    },\n    {\n      target: 'top-bar-coins',\n      title: 'Earn Rewards',\n      content: 'Score points to earn Giuros and unlock cool frames and badges!',\n      position: 'top-right',\n    },\n  ];\n\n  /*\n   * Since we can't easily query selectors across the app without complex ref forwarding,\n   * we'll use a centered overlay approach for simplicity and robustness,\n   * with perhaps some \"spotlight\" effect if possible, or just modal steps.\n   *\n   * For MVP: Modal centered card with \"Next\" button.\n   */\n\n  const handleNext = () => {\n    if (step < steps.length - 1) {\n      setStep(step + 1);\n    } else {\n      storage.set('girify_onboarding_completed', 'true');\n      onComplete();\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 z-[3000] flex items-center justify-center bg-black/60 backdrop-blur-sm p-6\">\n      <motion.div\n        key={step}\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        exit={{ opacity: 0, y: -20 }}\n        className={`max-w-md w-full p-8 rounded-3xl shadow-2xl ${\n          theme === 'dark'\n            ? 'bg-slate-900 border border-slate-700 text-white'\n            : 'bg-white text-slate-900'\n        }`}\n      >\n        <div className=\"flex flex-col items-center text-center space-y-6\">\n          <div className=\"text-5xl mb-2\">\n            {step === 0 && 'ðŸ‘‹'}\n            {step === 1 && 'ðŸ—ºï¸'}\n            {step === 2 && 'âœï¸'}\n            {step === 3 && 'ðŸ†'}\n          </div>\n\n          <h2 className=\"text-2xl font-black\">{steps[step].title}</h2>\n          <p className=\"text-lg opacity-80 leading-relaxed min-h-[3em]\">{steps[step].content}</p>\n\n          <div className=\"flex gap-2 w-full pt-4\">\n            <button\n              onClick={() => {\n                storage.set('girify_onboarding_completed', 'true');\n                onComplete();\n              }}\n              className=\"flex-1 py-4 font-bold opacity-50 hover:opacity-100 transition-opacity\"\n            >\n              Skip\n            </button>\n            <button\n              onClick={handleNext}\n              className=\"flex-[2] py-4 bg-sky-500 hover:bg-sky-600 text-white rounded-2xl font-bold shadow-lg shadow-sky-500/20 text-lg transition-all transform hover:scale-105\"\n            >\n              {step === steps.length - 1 ? \"Let's Play!\" : 'Next'}\n            </button>\n          </div>\n\n          <div className=\"flex gap-2 mt-4\">\n            {steps.map((_, i) => (\n              <div\n                key={i}\n                className={`w-2 h-2 rounded-full transition-colors ${\n                  i === step ? 'bg-sky-500' : 'bg-slate-300 dark:bg-slate-700'\n                }`}\n              />\n            ))}\n          </div>\n        </div>\n      </motion.div>\n    </div>\n  );\n};\n\nexport default OnboardingTour;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/PlaytestScreen.jsx",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 2,
        "message": "'PropTypes' is defined but never used. Allowed unused vars must match /^_/u.",
        "line": 2,
        "column": 8,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 2,
        "endColumn": 17,
        "suggestions": [
          {
            "messageId": "removeUnusedImportDeclaration",
            "data": { "varName": "PropTypes" },
            "fix": { "range": [27, 62], "text": "" },
            "desc": "Remove unused import declaration."
          }
        ]
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst PlaytestScreen = () => {\n  // We use the base URL without query params to ensure iframes render the normal app\n  const appUrl = window.location.origin + window.location.pathname;\n\n  return (\n    <div className=\"w-full h-screen bg-slate-900 overflow-hidden flex flex-col\">\n      <div className=\"h-12 bg-slate-800 border-b border-slate-700 flex items-center justify-between px-6 shrink-0\">\n        <h1 className=\"text-white font-bold tracking-widest uppercase text-sm\">\n          Girify Admin Playtest\n        </h1>\n        <div className=\"flex gap-4 text-[10px] text-slate-400 font-mono\">\n          <span className=\"flex items-center gap-1\">\n            <div className=\"w-2 h-2 rounded-full bg-emerald-500\" /> Live Sync (Simulated)\n          </span>\n          <button\n            onClick={() => (window.location.href = appUrl)}\n            className=\"hover:text-white transition-colors\"\n          >\n            Exit Admin\n          </button>\n        </div>\n      </div>\n\n      <div className=\"flex-1 overflow-x-auto overflow-y-hidden p-6 flex gap-8 items-center bg-slate-950\">\n        {/* Mobile View */}\n        <div className=\"flex flex-col gap-2 shrink-0\">\n          <div className=\"text-slate-400 text-xs font-mono text-center\">\n            Mobile (iPhone 12 - 390px)\n          </div>\n          <div\n            className=\"border-[12px] border-slate-800 rounded-[2rem] shadow-2xl overflow-hidden bg-black\"\n            style={{ width: '330px', height: '660px' }}\n          >\n            {/* Standard width is 375-390. Let's strictly use 390 */}\n            <iframe\n              src={appUrl}\n              title=\"Mobile View\"\n              className=\"w-full h-full bg-white border-0 block\"\n            />\n          </div>\n        </div>\n\n        {/* Tablet View */}\n        <div className=\"flex flex-col gap-2 shrink-0\">\n          <div className=\"text-slate-400 text-xs font-mono text-center\">\n            Tablet (iPad Mini - 768px)\n          </div>\n          <div\n            className=\"border-[12px] border-slate-800 rounded-[2rem] shadow-2xl overflow-hidden bg-black\"\n            style={{\n              width: '768px',\n              height: '1024px',\n              transform: 'scale(0.65)',\n              transformOrigin: 'top center',\n            }}\n          >\n            {/* Scaled down to fit vertically */}\n            <iframe\n              src={appUrl}\n              title=\"Tablet View\"\n              className=\"w-full h-full bg-white border-0 block\"\n            />\n          </div>\n        </div>\n\n        {/* Desktop View */}\n        <div className=\"flex flex-col gap-2 shrink-0 h-full\">\n          <div className=\"text-slate-400 text-xs font-mono text-center\">Desktop (Full)</div>\n          <div className=\"border-[12px] border-slate-800 rounded-[1rem] shadow-2xl overflow-hidden bg-black flex-1 w-[1024px]\">\n            <iframe\n              src={appUrl}\n              title=\"Desktop View\"\n              className=\"w-full h-full bg-white border-0 block\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// PlaytestScreen has no props\nPlaytestScreen.propTypes = {};\n\nexport default PlaytestScreen;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/PrivacyPolicy.jsx",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/ProfileScreen.jsx",
    "messages": [
      {
        "ruleId": "jsx-a11y/no-noninteractive-element-interactions",
        "message": "Definition for rule 'jsx-a11y/no-noninteractive-element-interactions' was not found.",
        "line": 1,
        "column": 1,
        "endLine": 1,
        "endColumn": 69,
        "severity": 2,
        "nodeType": null
      },
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 2,
        "message": "'FriendRequests' is defined but never used. Allowed unused vars must match /^_/u.",
        "line": 16,
        "column": 8,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 16,
        "endColumn": 22,
        "suggestions": [
          {
            "messageId": "removeUnusedImportDeclaration",
            "data": { "varName": "FriendRequests" },
            "fix": { "range": [633, 679], "text": "" },
            "desc": "Remove unused import declaration."
          }
        ]
      },
      {
        "ruleId": "max-lines-per-function",
        "severity": 1,
        "message": "Arrow function has too many lines (483). Maximum allowed is 150.",
        "line": 43,
        "column": 23,
        "nodeType": "ArrowFunctionExpression",
        "messageId": "exceed",
        "endLine": 571,
        "endColumn": 2
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1000.",
        "line": 101,
        "column": 53,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 101,
        "endColumn": 57
      },
      {
        "ruleId": "react/jsx-no-undef",
        "severity": 2,
        "message": "'motion' is not defined.",
        "line": 201,
        "column": 20,
        "nodeType": "JSXIdentifier",
        "messageId": "undefined",
        "endLine": 201,
        "endColumn": 26
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1000.",
        "line": 371,
        "column": 36,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 371,
        "endColumn": 40
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1000.",
        "line": 371,
        "column": 60,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 371,
        "endColumn": 64
      },
      {
        "ruleId": "no-nested-ternary",
        "severity": 1,
        "message": "Do not nest ternary expressions.",
        "line": 399,
        "column": 27,
        "nodeType": "ConditionalExpression",
        "messageId": "noNestedTernary",
        "endLine": 403,
        "endColumn": 88
      },
      {
        "ruleId": "react/jsx-no-undef",
        "severity": 2,
        "message": "'motion' is not defined.",
        "line": 430,
        "column": 22,
        "nodeType": "JSXIdentifier",
        "messageId": "undefined",
        "endLine": 430,
        "endColumn": 28
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 100.",
        "line": 486,
        "column": 78,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 486,
        "endColumn": 81
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 100.",
        "line": 490,
        "column": 58,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 490,
        "endColumn": 61
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 7.",
        "line": 524,
        "column": 46,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 524,
        "endColumn": 47
      },
      {
        "ruleId": "react/no-array-index-key",
        "severity": 1,
        "message": "Do not use Array index in keys",
        "line": 530,
        "column": 34,
        "nodeType": "Identifier",
        "messageId": "noArrayIndex",
        "endLine": 530,
        "endColumn": 35
      },
      {
        "ruleId": "no-nested-ternary",
        "severity": 1,
        "message": "Do not nest ternary expressions.",
        "line": 533,
        "column": 33,
        "nodeType": "ConditionalExpression",
        "messageId": "noNestedTernary",
        "endLine": 539,
        "endColumn": 66
      }
    ],
    "suppressedMessages": [],
    "errorCount": 4,
    "fatalErrorCount": 0,
    "warningCount": 10,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "/* eslint-disable jsx-a11y/no-noninteractive-element-interactions */\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { AnimatePresence } from 'framer-motion';\nimport { useTheme } from '../context/ThemeContext';\nimport {\n  getFriendCount,\n  getUserProfile,\n  updateUserProfile,\n  getUserGameHistory,\n} from '../utils/social';\nimport { getGiuros, getEquippedCosmetics } from '../utils/giuros';\nimport cosmetics from '../data/cosmetics.json';\nimport { getUnlockedAchievements, getNextAchievement } from '../data/achievements';\nimport { calculateStreak } from '../utils/stats';\nimport FriendRequests from './FriendRequests';\nimport TopBar from './TopBar';\nimport PropTypes from 'prop-types';\n\nconst AVATARS = [\n  'ðŸ¶',\n  'ðŸ±',\n  'ðŸ­',\n  'ðŸ¹',\n  'ðŸ°',\n  'ðŸ¦Š',\n  'ðŸ»',\n  'ðŸ¼',\n  'ðŸ¨',\n  'ðŸ¯',\n  'ðŸ¦',\n  'ðŸ®',\n  'ðŸ·',\n  'ðŸ¸',\n  'ðŸµ',\n  'ðŸ”',\n  'ðŸ§',\n  'ðŸ¦',\n  'ðŸ¦†',\n  'ðŸ¦…',\n];\n\nconst ProfileScreen = ({ username }) => {\n  const { theme, t } = useTheme();\n  const navigate = useNavigate();\n\n  const [allHistory, setAllHistory] = useState([]);\n\n  const uniqueHistory = React.useMemo(() => {\n    const seenDates = new Set();\n    const uniqueList = [];\n    allHistory.forEach(game => {\n      if (!seenDates.has(game.date)) {\n        seenDates.add(game.date);\n        uniqueList.push(game);\n      }\n    });\n    return uniqueList;\n  }, [allHistory]);\n\n  const [joinedDate, setJoinedDate] = useState('');\n\n  const [friendCount, setFriendCount] = useState(0);\n  const [giuros, setGiuros] = useState(0);\n  const [equippedCosmetics, setEquippedCosmetics] = useState({});\n\n  // Profile Edit State\n  const [profileData, setProfileData] = useState(null);\n  const [isEditing, setIsEditing] = useState(false);\n  const [editName, setEditName] = useState('');\n\n  // Show/Hide Giuros Info\n  const [showGiurosInfo, setShowGiurosInfo] = useState(false);\n\n  // Achievements State\n  const [selectedAchievement, setSelectedAchievement] = useState(null);\n\n  useEffect(() => {\n    const loadProfile = async () => {\n      if (username) {\n        const [count, bal, equipped, history, profile] = await Promise.all([\n          getFriendCount(username),\n          getGiuros(username),\n          getEquippedCosmetics(username),\n          getUserGameHistory(username),\n          getUserProfile(username),\n        ]);\n\n        setFriendCount(count);\n        setGiuros(bal);\n        setEquippedCosmetics(equipped);\n        setAllHistory(history || []); // history might be empty\n\n        if (profile) {\n          setProfileData(profile);\n          setEditName(profile.realName || '');\n\n          if (profile.joinedAt) {\n            const dateObj = profile.joinedAt.toDate\n              ? profile.joinedAt.toDate()\n              : new Date(profile.joinedAt.seconds * 1000);\n            setJoinedDate(dateObj.toLocaleDateString());\n          } else {\n            // Fallback to local storage if available or current date\n            setJoinedDate(localStorage.getItem('girify_joined') || new Date().toLocaleDateString());\n          }\n        }\n      }\n    };\n    loadProfile();\n  }, [username]);\n\n  const handleSaveProfile = async () => {\n    const data = {\n      realName: editName,\n    };\n    await updateUserProfile(username, data);\n    setProfileData(prev => ({ ...prev, ...data }));\n    setIsEditing(false);\n  };\n\n  // Use profileData from Firestore as fallback when history is empty\n  const totalGames = allHistory.length > 0 ? allHistory.length : profileData?.gamesPlayed || 0;\n  const bestScore =\n    allHistory.length > 0\n      ? Math.max(...allHistory.map(h => (h && h.score) || 0))\n      : profileData?.bestScore || 0;\n  const totalScore =\n    allHistory.length > 0\n      ? allHistory.reduce((acc, curr) => acc + ((curr && curr.score) || 0), 0)\n      : profileData?.totalScore || 0;\n  const dailyStreak =\n    allHistory.length > 0 ? calculateStreak(uniqueHistory) : profileData?.streak || 0;\n\n  const userStats = { gamesPlayed: totalGames, bestScore, streak: dailyStreak };\n  const unlockedBadges = getUnlockedAchievements(userStats);\n  const nextBadge = getNextAchievement(userStats);\n\n  // Determine display avatar\n  // Prioritize equipped cosmetic avatar ID\n  const equippedAvatarId = equippedCosmetics?.avatarId;\n  const cosmeticAvatar = cosmetics.avatars?.find(a => a.id === equippedAvatarId);\n\n  // Fallback to legacy index (stored in profileData.avatarId)\n  const legacyAvatarIndex = profileData?.avatarId ? profileData.avatarId - 1 : 0;\n  const legacyAvatar = AVATARS[Math.max(0, Math.min(legacyAvatarIndex, AVATARS.length - 1))];\n\n  // Get equipped frame class\n  const equippedFrame = cosmetics.avatarFrames.find(f => f.id === equippedCosmetics.frameId);\n  const frameClass = equippedFrame?.cssClass || 'ring-4 ring-white dark:ring-slate-700';\n\n  return (\n    <div\n      className={`fixed inset-0 w-full h-full flex flex-col overflow-hidden transition-colors duration-500\n           ${theme === 'dark' ? 'bg-slate-900 text-white' : 'bg-slate-50 text-slate-900'}\n      `}\n    >\n      <TopBar onOpenPage={page => navigate(page ? `/${page}` : '/')} />\n\n      <div className=\"flex-1 w-full px-4 py-8 pt-20 overflow-x-hidden\">\n        <div className=\"max-w-2xl mx-auto w-full\">\n          {/* Header */}\n          <div className=\"flex items-center justify-between mb-8 relative\">\n            <button\n              onClick={() => navigate(-1)}\n              className=\"flex items-center gap-2 text-sm font-bold opacity-60 hover:opacity-100 transition-opacity z-10\"\n            >\n              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d=\"M15 19l-7-7 7-7\"\n                />\n              </svg>\n              {t('back')}\n            </button>\n            <h1 className=\"text-xl font-black absolute left-1/2 transform -translate-x-1/2 flex items-center gap-2 max-w-[60%] truncate justify-center\">\n              {t('profile') || 'Profile'}\n            </h1>\n\n            {/* Giuros Balance */}\n            <button\n              onClick={() => setShowGiurosInfo(!showGiurosInfo)}\n              className=\"flex items-center gap-2 hover:scale-105 transition-transform\"\n            >\n              <img src=\"/giuro.png\" alt=\"Giuros\" className=\"h-6 w-auto object-contain\" />\n              <span className=\"font-black text-lg text-yellow-600 dark:text-yellow-400\">\n                {giuros}\n              </span>\n            </button>\n          </div>\n\n          {!profileData && <div className=\"py-10 text-center opacity-50\">Loading profile...</div>}\n\n          {profileData && (\n            <>\n              {/* Giuros Explainer Callout */}\n              <AnimatePresence>\n                {showGiurosInfo && (\n                  <motion.div\n                    initial={{ opacity: 0, height: 0, y: -20 }}\n                    animate={{ opacity: 1, height: 'auto', y: 0 }}\n                    exit={{ opacity: 0, height: 0, y: -20 }}\n                    className=\"relative mb-8 mx-2 filter drop-shadow-md overflow-hidden\"\n                  >\n                    <div\n                      className={`p-4 rounded-xl border-2 border-slate-900 bg-white dark:bg-slate-800 text-slate-900 dark:text-white relative z-10`}\n                    >\n                      <div className=\"flex items-start gap-3\">\n                        <img\n                          src=\"/giuro.png\"\n                          alt=\"\"\n                          className=\"h-8 w-auto object-contain shrink-0 mt-0.5\"\n                        />\n                        <div className=\"flex-1\">\n                          <h3 className=\"font-black text-lg mb-1\">{t('giurosExplainerTitle')}</h3>\n                          <p className=\"text-sm opacity-80 mb-3 leading-relaxed\">\n                            {t('giurosExplainerText')}\n                          </p>\n                          <button\n                            onClick={() => navigate('/shop')}\n                            className=\"px-4 py-2 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-lg text-xs font-black uppercase tracking-wider hover:scale-105 transition-transform\"\n                          >\n                            {t('goToShop')}\n                          </button>\n                        </div>\n                      </div>\n                    </div>\n                  </motion.div>\n                )}\n              </AnimatePresence>\n\n              {/* Main Profile Info */}\n              <div className=\"flex flex-col items-center mb-8\">\n                {/* Avatar Circle */}\n                <div className=\"relative group mb-4\">\n                  <div\n                    role=\"button\"\n                    tabIndex={0}\n                    onClick={() => navigate('/shop')} // Direct to shop for avatar changes\n                    onKeyDown={e => {\n                      if (e.key === 'Enter' || e.key === ' ') {\n                        navigate('/shop');\n                      }\n                    }}\n                    className={`w-28 h-28 rounded-full bg-gradient-to-br from-sky-400 to-indigo-600 flex items-center justify-center text-5xl shadow-2xl ${frameClass} select-none outline-none focus:ring-sky-500 cursor-pointer hover:scale-105 transition-transform overflow-hidden`}\n                  >\n                    {cosmeticAvatar ? (\n                      <img\n                        src={cosmeticAvatar.image}\n                        alt=\"Avatar\"\n                        className=\"w-full h-full object-cover\"\n                      />\n                    ) : (\n                      legacyAvatar\n                    )}\n                  </div>\n\n                  {/* Edit Button overlay (Just indicates editability of profile, but icon itself goes to shop) */}\n                  {!isEditing && (\n                    <button\n                      onClick={() => setIsEditing(true)}\n                      className={`absolute -bottom-1 -right-1 p-2 rounded-full shadow-lg ${theme === 'dark' ? 'bg-slate-700 text-white' : 'bg-white text-slate-900'}`}\n                    >\n                      <svg\n                        className=\"w-4 h-4\"\n                        fill=\"none\"\n                        stroke=\"currentColor\"\n                        viewBox=\"0 0 24 24\"\n                      >\n                        <path\n                          strokeLinecap=\"round\"\n                          strokeLinejoin=\"round\"\n                          strokeWidth={2}\n                          d=\"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z\"\n                        />\n                      </svg>\n                    </button>\n                  )}\n                </div>\n\n                {/* Handle / Name Display */}\n                <h2 className=\"text-3xl font-black tracking-tight mb-1\">\n                  {username.toLowerCase()}\n                </h2>\n\n                <div className=\"flex flex-col items-center gap-1\">\n                  {isEditing ? (\n                    <div className=\"mt-2 w-full max-w-[200px] flex flex-col gap-2\">\n                      <input\n                        type=\"text\"\n                        value={editName}\n                        onChange={e => setEditName(e.target.value)}\n                        placeholder=\"Your Real Name\"\n                        className={`w-full px-3 py-2 text-center text-sm rounded-lg border outline-none ${theme === 'dark' ? 'bg-slate-800 border-slate-700' : 'bg-white border-slate-200'}`}\n                      />\n                      <div className=\"flex justify-center gap-2\">\n                        <button\n                          onClick={() => setIsEditing(false)}\n                          className=\"flex-1 text-xs px-3 py-2 rounded-lg bg-slate-200 dark:bg-slate-700 font-bold\"\n                        >\n                          Cancel\n                        </button>\n                        <button\n                          onClick={handleSaveProfile}\n                          className=\"flex-1 text-xs px-3 py-2 rounded-lg bg-sky-500 text-white font-bold\"\n                        >\n                          Save\n                        </button>\n                      </div>\n                    </div>\n                  ) : null}\n                </div>\n\n                <p className=\"text-[10px] font-bold uppercase tracking-widest opacity-40 mt-3\">\n                  {t('playerSince')} {joinedDate}\n                </p>\n              </div>\n\n              {/* Friend Requests */}\n              <div className=\"text-center mb-6\">\n                {/* Title Badge Name */}\n                <p className=\"text-sm font-bold text-sky-500 uppercase tracking-widest mt-1\">\n                  {cosmetics.titles.find(t => t.id === equippedCosmetics.titleId)?.name ||\n                    'Street Explorer'}\n                </p>\n                <p className=\"text-xs opacity-50 mt-1\">Joined {joinedDate}</p>\n              </div>\n\n              {/* Stats Grid */}\n              <div className=\"grid grid-cols-5 gap-4 mb-8\">\n                <div className=\"flex flex-col items-center p-3 rounded-2xl bg-orange-500/10 dark:bg-orange-500/5\">\n                  <span className=\"text-2xl mb-1\">ðŸ”¥</span>\n                  <div className=\"flex flex-col items-center leading-none\">\n                    <span className=\"text-xl font-black text-orange-500\">{dailyStreak}</span>\n                    <span className=\"text-[10px] font-bold opacity-50\">\n                      Max: {Math.max(dailyStreak, profileData?.maxStreak || 0)}\n                    </span>\n                  </div>\n                  <span className=\"text-[9px] uppercase font-bold text-slate-400 tracking-wider mt-1\">\n                    {t('streak')}\n                  </span>\n                </div>\n                <div className=\"flex flex-col items-center p-3 rounded-2xl bg-purple-500/10 dark:bg-purple-500/5\">\n                  <span className=\"text-2xl mb-1\">ðŸ‘¥</span>\n                  <span className=\"text-xl font-black text-purple-500\">{friendCount}</span>\n                  <span className=\"text-[9px] uppercase font-bold text-slate-400 tracking-wider mt-1\">\n                    {t('friends')}\n                  </span>\n                </div>\n                <div className=\"flex flex-col items-center p-3 rounded-2xl bg-slate-500/10 dark:bg-slate-500/5\">\n                  <span className=\"text-2xl mb-1\">ðŸŽ®</span>\n                  <span className=\"text-xl font-black text-slate-700 dark:text-slate-200\">\n                    {totalGames}\n                  </span>\n                  <span className=\"text-[9px] uppercase font-bold text-slate-400 tracking-wider mt-1\">\n                    {t('games')}\n                  </span>\n                </div>\n                <div className=\"flex flex-col items-center p-3 rounded-2xl bg-emerald-500/10 dark:bg-emerald-500/5\">\n                  <span className=\"text-2xl mb-1\">ðŸ†</span>\n                  <span className=\"text-xl font-black text-emerald-500\">{bestScore}</span>\n                  <span className=\"text-[9px] uppercase font-bold text-slate-400 tracking-wider mt-1\">\n                    {t('best')}\n                  </span>\n                </div>\n                <div className=\"flex flex-col items-center p-3 rounded-2xl bg-sky-500/10 dark:bg-sky-500/5\">\n                  <span className=\"text-2xl mb-1\">âš¡ï¸</span>\n                  <span className=\"text-xl font-black text-sky-500\">\n                    {totalScore >= 1000 ? `${(totalScore / 1000).toFixed(1)}k` : totalScore}\n                  </span>\n                  <span className=\"text-[9px] uppercase font-bold text-slate-400 tracking-wider mt-1\">\n                    Total\n                  </span>\n                </div>\n              </div>\n\n              {/* Achievements Section */}\n              <div className=\"mb-8\">\n                <h3 className=\"font-bold text-lg mb-4 text-sky-500 flex items-center gap-2\">\n                  {t('achievements')}{' '}\n                  <span className=\"text-sm opacity-60 text-slate-500 dark:text-slate-400\">\n                    ({unlockedBadges.length})\n                  </span>\n                </h3>\n\n                {unlockedBadges.length > 0 ? (\n                  <div className=\"grid grid-cols-4 sm:grid-cols-5 gap-3\">\n                    {unlockedBadges.map(badge => (\n                      <button\n                        key={badge.id}\n                        onClick={() =>\n                          setSelectedAchievement(\n                            selectedAchievement?.id === badge.id ? null : badge\n                          )\n                        }\n                        className={`flex flex-col items-center p-3 rounded-2xl transition-all cursor-pointer border w-full h-full text-left ${\n                          selectedAchievement?.id === badge.id\n                            ? 'border-sky-500 bg-sky-500/10 dark:bg-sky-500/20 scale-105 shadow-md'\n                            : theme === 'dark'\n                              ? 'bg-slate-800 border-transparent hover:bg-slate-700'\n                              : 'bg-white border-transparent shadow-sm hover:shadow-md'\n                        }`}\n                        title={badge.description}\n                      >\n                        {badge.image ? (\n                          <img\n                            src={badge.image}\n                            alt={badge.name}\n                            className=\"w-10 h-10 object-contain mb-1 drop-shadow-sm\"\n                          />\n                        ) : (\n                          <span className=\"text-3xl mb-1\">{badge.emoji}</span>\n                        )}\n                        <span className=\"text-[10px] text-center font-bold opacity-70 leading-tight\">\n                          {badge.name}\n                        </span>\n                      </button>\n                    ))}\n                  </div>\n                ) : (\n                  <p className=\"text-sm opacity-50 text-center py-4 bg-slate-100 dark:bg-slate-800 rounded-xl\">\n                    Play games to unlock achievements!\n                  </p>\n                )}\n\n                <AnimatePresence>\n                  {selectedAchievement && (\n                    <motion.div\n                      initial={{ opacity: 0, height: 0 }}\n                      animate={{ opacity: 1, height: 'auto' }}\n                      exit={{ opacity: 0, height: 0 }}\n                      className=\"mt-4 p-4 rounded-xl bg-sky-500/10 border border-sky-500/30 overflow-hidden\"\n                    >\n                      <div className=\"flex items-center gap-4\">\n                        {selectedAchievement.image ? (\n                          <img\n                            src={selectedAchievement.image}\n                            alt={selectedAchievement.name}\n                            className=\"w-16 h-16 object-contain drop-shadow-md\"\n                            onError={e => {\n                              e.target.style.display = 'none';\n                              if (e.target.parentElement.querySelector('span')) {\n                                e.target.parentElement.querySelector('span').style.display =\n                                  'block';\n                              }\n                            }}\n                          />\n                        ) : (\n                          <span className=\"text-4xl\">{selectedAchievement.emoji}</span>\n                        )}\n                        <div>\n                          <h4 className=\"font-bold text-sky-600 dark:text-sky-400\">\n                            {selectedAchievement.name}\n                          </h4>\n                          <p className=\"text-sm opacity-80\">{selectedAchievement.description}</p>\n                        </div>\n                      </div>\n                    </motion.div>\n                  )}\n                </AnimatePresence>\n\n                {nextBadge && (\n                  <div\n                    className={`mt-4 p-4 rounded-2xl border ${theme === 'dark' ? 'bg-slate-800 border-slate-700' : 'bg-white border-slate-100 shadow-sm'}`}\n                  >\n                    <div className=\"flex items-center justify-between mb-2\">\n                      <span className=\"text-xs font-bold opacity-60\">{t('nextAchievement')}</span>\n                      {nextBadge.image ? (\n                        <img\n                          src={nextBadge.image}\n                          alt={nextBadge.name}\n                          className=\"w-8 h-8 object-contain\"\n                        />\n                      ) : (\n                        <span className=\"text-lg\">{nextBadge.emoji}</span>\n                      )}\n                    </div>\n                    <div className=\"flex items-center gap-3\">\n                      <div\n                        className={`flex-1 h-3 rounded-full ${theme === 'dark' ? 'bg-slate-700' : 'bg-slate-100'}`}\n                      >\n                        <div\n                          className=\"h-3 rounded-full bg-gradient-to-r from-sky-500 to-indigo-500 transition-all shadow-sm\"\n                          style={{ width: `${Math.round(nextBadge.progress * 100)}%` }}\n                        />\n                      </div>\n                      <span className=\"text-xs font-bold opacity-60 w-8 text-right\">\n                        {Math.round(nextBadge.progress * 100)}%\n                      </span>\n                    </div>\n                    <p className=\"text-xs opacity-50 mt-2\">\n                      {nextBadge.name}: {nextBadge.description}\n                    </p>\n                  </div>\n                )}\n              </div>\n\n              {/* Recent History */}\n              <div className=\"mb-20\">\n                <h3 className=\"font-bold text-lg mb-4 text-sky-500\">{t('recentActivity')}</h3>\n\n                {allHistory.length === 0 ? (\n                  <div className=\"text-center py-10 opacity-40 text-sm\">{t('noGamesYet')}</div>\n                ) : (\n                  <div className=\"space-y-3\">\n                    {(() => {\n                      const sorted = [...allHistory].sort(\n                        (a, b) => (b.timestamp || 0) - (a.timestamp || 0)\n                      );\n                      const dailyEarliest = new Map();\n                      sorted.forEach(g => {\n                        if (g.timestamp) {\n                          if (\n                            !dailyEarliest.has(g.date) ||\n                            g.timestamp < dailyEarliest.get(g.date)\n                          ) {\n                            dailyEarliest.set(g.date, g.timestamp);\n                          }\n                        }\n                      });\n\n                      return sorted.slice(0, 7).map((game, i) => {\n                        const isDaily =\n                          game.timestamp && dailyEarliest.get(game.date) === game.timestamp;\n\n                        return (\n                          <div\n                            key={i}\n                            className={`flex items-center justify-between p-4 rounded-2xl border transition-colors\n                              ${\n                                isDaily\n                                  ? theme === 'dark'\n                                    ? 'bg-emerald-900/10 border-emerald-500/20'\n                                    : 'bg-emerald-50 border-emerald-100'\n                                  : theme === 'dark'\n                                    ? 'bg-slate-800/50 border-slate-700'\n                                    : 'bg-white border-slate-100'\n                              }`}\n                          >\n                            <div>\n                              <p className=\"font-bold text-sm\">{t('dailyChallenge')}</p>\n                              <p className=\"text-[10px] text-slate-400\">\n                                {game.timestamp\n                                  ? new Date(game.timestamp).toLocaleDateString()\n                                  : 'Just now'}\n                              </p>\n                            </div>\n                            <div className=\"text-right\">\n                              <span\n                                className={`font-black text-lg ${isDaily ? 'text-emerald-600 dark:text-emerald-400 scale-110 inline-block' : 'text-slate-400 font-medium'}`}\n                              >\n                                {game.score}\n                              </span>\n                              <span className=\"text-[10px] font-bold text-slate-400 ml-1\">PTS</span>\n                            </div>\n                          </div>\n                        );\n                      });\n                    })()}\n                  </div>\n                )}\n              </div>\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nProfileScreen.propTypes = {\n  username: PropTypes.string.isRequired,\n};\n\nexport default ProfileScreen;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/PublicProfileScreen.jsx",
    "messages": [
      {
        "ruleId": "max-lines-per-function",
        "severity": 1,
        "message": "Arrow function has too many lines (331). Maximum allowed is 150.",
        "line": 39,
        "column": 29,
        "nodeType": "ArrowFunctionExpression",
        "messageId": "exceed",
        "endLine": 393,
        "endColumn": 2
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'currentUser' is missing in props validation",
        "line": 39,
        "column": 32,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 39,
        "endColumn": 43
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1000.",
        "line": 220,
        "column": 59,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 220,
        "endColumn": 63
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 6.",
        "line": 227,
        "column": 44,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 227,
        "endColumn": 45
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 6.",
        "line": 244,
        "column": 44,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 244,
        "endColumn": 45
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 6.",
        "line": 246,
        "column": 49,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 246,
        "endColumn": 50
      },
      {
        "ruleId": "no-nested-ternary",
        "severity": 1,
        "message": "Do not nest ternary expressions.",
        "line": 257,
        "column": 16,
        "nodeType": "ConditionalExpression",
        "messageId": "noNestedTernary",
        "endLine": 386,
        "endColumn": 16
      },
      {
        "ruleId": "no-nested-ternary",
        "severity": 1,
        "message": "Do not nest ternary expressions.",
        "line": 345,
        "column": 26,
        "nodeType": "ConditionalExpression",
        "messageId": "noNestedTernary",
        "endLine": 361,
        "endColumn": 26
      }
    ],
    "suppressedMessages": [
      {
        "ruleId": "no-alert",
        "severity": 2,
        "message": "Unexpected confirm.",
        "line": 123,
        "column": 23,
        "nodeType": "CallExpression",
        "messageId": "unexpected",
        "endLine": 125,
        "endColumn": 6,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      }
    ],
    "errorCount": 1,
    "fatalErrorCount": 0,
    "warningCount": 7,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useTheme } from '../context/ThemeContext';\nimport { getUserProfile } from '../utils/social';\nimport {\n  sendFriendRequest,\n  getFriendshipStatus,\n  blockUser,\n  getBlockStatus,\n} from '../utils/friends';\nimport { getEquippedCosmetics } from '../utils/giuros';\nimport { getUnlockedAchievements } from '../data/achievements';\nimport cosmetics from '../data/cosmetics.json';\nimport TopBar from './TopBar';\n\nconst AVATARS = [\n  'ðŸ¶',\n  'ðŸ±',\n  'ðŸ­',\n  'ðŸ¹',\n  'ðŸ°',\n  'ðŸ¦Š',\n  'ðŸ»',\n  'ðŸ¼',\n  'ðŸ¨',\n  'ðŸ¯',\n  'ðŸ¦',\n  'ðŸ®',\n  'ðŸ·',\n  'ðŸ¸',\n  'ðŸµ',\n  'ðŸ”',\n  'ðŸ§',\n  'ðŸ¦',\n  'ðŸ¦†',\n  'ðŸ¦…',\n];\n\nconst PublicProfileScreen = ({ currentUser }) => {\n  const { theme, t } = useTheme();\n  const { username: encodedUsername } = useParams();\n  const username = decodeURIComponent(encodedUsername || '');\n  const navigate = useNavigate();\n\n  const [profile, setProfile] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [friendStatus, setFriendStatus] = useState('none');\n  const [isBlocked, setIsBlocked] = useState(false);\n  const [sendingRequest, setSendingRequest] = useState(false);\n  const [requestSent, setRequestSent] = useState(false);\n  const [blocking, setBlocking] = useState(false);\n  const [error, setError] = useState(null);\n  const [equippedCosmetics, setEquippedCosmetics] = useState({});\n\n  useEffect(() => {\n    const loadProfile = async () => {\n      setLoading(true);\n      setError(null);\n      try {\n        const [data, cosmeticsData] = await Promise.all([\n          getUserProfile(username),\n          getEquippedCosmetics(username),\n        ]);\n\n        if (data) {\n          setProfile(data);\n        } else {\n          setProfile({\n            username,\n            gamesPlayed: 0,\n            bestScore: 0,\n            friendCount: 0,\n          });\n        }\n        setEquippedCosmetics(cosmeticsData || {});\n\n        if (currentUser && currentUser !== username) {\n          const [status, blocked] = await Promise.all([\n            getFriendshipStatus(currentUser, username),\n            getBlockStatus(currentUser, username),\n          ]);\n          setFriendStatus(status);\n          setIsBlocked(blocked);\n          if (status === 'pending') {\n            setRequestSent(true);\n          }\n        }\n      } catch (e) {\n        console.error('Error loading profile:', e);\n        setError('Failed to load profile');\n        setProfile({\n          username,\n          gamesPlayed: 0,\n          bestScore: 0,\n          friendCount: 0,\n        });\n      } finally {\n        setLoading(false);\n      }\n    };\n    if (username) {\n      loadProfile();\n    }\n  }, [username, currentUser]);\n\n  const handleAddFriend = async () => {\n    if (!currentUser || sendingRequest) {return;}\n    setSendingRequest(true);\n    try {\n      await sendFriendRequest(currentUser, username);\n      setRequestSent(true);\n      setFriendStatus('pending');\n    } catch (e) {\n      console.error('Error sending friend request:', e);\n    } finally {\n      setSendingRequest(false);\n    }\n  };\n\n  const handleBlock = async () => {\n    if (!currentUser || blocking) {return;}\n    // eslint-disable-next-line no-alert\n    const confirmed = window.confirm(\n      `Block ${username}? They won't be able to send you friend requests.`\n    );\n    if (!confirmed) {return;}\n\n    setBlocking(true);\n    try {\n      await blockUser(currentUser, username);\n      setIsBlocked(true);\n    } catch (e) {\n      console.error('Error blocking user:', e);\n    } finally {\n      setBlocking(false);\n    }\n  };\n\n  // Avatar Calculation\n  const avatarIndex = profile?.avatarId ? profile.avatarId - 1 : 0;\n  const safeAvatarIndex = Math.max(0, Math.min(avatarIndex, AVATARS.length - 1));\n  const displayAvatar = AVATARS[safeAvatarIndex] || AVATARS[0];\n  const initial = username ? username.charAt(0).toUpperCase() : '?';\n\n  // Frame Calculation\n  const equippedFrame = cosmetics.avatarFrames.find(f => f.id === equippedCosmetics.frameId);\n  const frameClass = equippedFrame?.cssClass || 'ring-4 ring-white dark:ring-slate-700';\n\n  // Achievements Calculation\n  // We don't have streak in public profile, so we pass 0 or a best guess\n  const userStats = {\n    gamesPlayed: profile?.gamesPlayed || 0,\n    bestScore: profile?.bestScore || 0,\n    streak: 0, // Not available publicly\n  };\n  const unlockedBadges = getUnlockedAchievements(userStats);\n\n  return (\n    <div\n      className={`fixed inset-0 w-full h-full flex flex-col overflow-hidden transition-colors duration-500\n           ${theme === 'dark' ? 'bg-slate-900 text-white' : 'bg-slate-50 text-slate-900'}\n      `}\n    >\n      <TopBar onOpenPage={page => navigate(page ? `/${page}` : '/')} />\n\n      <div className=\"flex-1 overflow-y-auto w-full px-4 py-8 pt-16\">\n        <div className=\"max-w-2xl mx-auto\">\n          {/* Header Row */}\n          <div className=\"flex items-center justify-between mb-6\">\n            <button\n              onClick={() => navigate(-1)}\n              className=\"flex items-center gap-2 text-sm font-bold opacity-60 hover:opacity-100 transition-opacity\"\n            >\n              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d=\"M15 19l-7-7 7-7\"\n                />\n              </svg>\n              {t('back')}\n            </button>\n            <h1 className=\"text-xl font-black\">{t('profile')}</h1>\n            <div className=\"w-16\" /> {/* Spacer for alignment */}\n          </div>\n\n          <div\n            className={`rounded-3xl shadow-xl overflow-hidden border\n                        ${theme === 'dark' ? 'bg-slate-800 border-slate-700' : 'bg-white border-slate-100'}\n                    `}\n          >\n            {/* Header */}\n            <div\n              className={`p-8 flex flex-col items-center border-b relative ${\n                theme === 'dark'\n                  ? 'border-slate-700 bg-slate-800/50'\n                  : 'border-slate-100 bg-slate-50'\n              }`}\n            >\n              {loading ? (\n                <div className=\"w-24 h-24 rounded-full bg-slate-200 dark:bg-slate-700 animate-pulse mb-4\" />\n              ) : (\n                <div\n                  className={`w-24 h-24 rounded-full bg-gradient-to-br from-sky-400 to-indigo-600 flex items-center justify-center text-4xl shadow-lg mb-4 ${frameClass}`}\n                >\n                  {profile && profile.avatarId ? displayAvatar : initial}\n                </div>\n              )}\n\n              <h2 className=\"text-2xl font-black tracking-tight\">{username.toLowerCase()}</h2>\n              {profile?.realName && (\n                <p className=\"text-sm font-bold opacity-50 mt-1\">{profile.realName}</p>\n              )}\n              {profile?.joinedAt && (\n                <p className=\"text-xs font-bold uppercase tracking-widest opacity-40 mt-2\">\n                  {t('playerSince')}{' '}\n                  {profile.joinedAt.toDate\n                    ? profile.joinedAt.toDate().toLocaleDateString()\n                    : new Date(profile.joinedAt.seconds * 1000).toLocaleDateString()}\n                </p>\n              )}\n\n              {/* Achievements Badges (Small Row) */}\n              {unlockedBadges.length > 0 && (\n                <div className=\"flex flex-wrap justify-center gap-2 mt-3\">\n                  {unlockedBadges.slice(0, 6).map(badge => (\n                    <span\n                      key={badge.id}\n                      className=\"text-xl\"\n                      title={`${badge.name}: ${badge.description}`}\n                    >\n                      {badge.image ? (\n                        <img\n                          src={badge.image}\n                          alt={badge.name}\n                          className=\"w-6 h-6 object-contain drop-shadow-sm\"\n                        />\n                      ) : (\n                        badge.emoji\n                      )}\n                    </span>\n                  ))}\n                  {unlockedBadges.length > 6 && (\n                    <span className=\"text-xs text-slate-400 self-center\">\n                      +{unlockedBadges.length - 6}\n                    </span>\n                  )}\n                </div>\n              )}\n            </div>\n\n            {/* Content */}\n            <div className=\"p-0\">\n              {' '}\n              {/* Padding removed to match ProfileScreen stats spacing */}\n              {loading ? (\n                <div className=\"flex justify-center py-12\">\n                  <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-sky-500\" />\n                </div>\n              ) : profile ? (\n                <>\n                  {/* Stats Grid */}\n                  <div className=\"p-6 grid grid-cols-5 gap-2 border-b border-slate-100 dark:border-slate-800\">\n                    <div className=\"text-center opacity-50\">\n                      {/* Streak Unknown */}\n                      <p className=\"text-xl font-black text-slate-400\">-</p>\n                      <p className=\"text-[9px] uppercase font-bold text-slate-400 tracking-wider\">\n                        {t('streak')}\n                      </p>\n                    </div>\n                    <div className=\"text-center\">\n                      <p className=\"text-xl font-black text-purple-500\">\n                        ðŸ‘¥{profile.friendCount || 0}\n                      </p>\n                      <p className=\"text-[9px] uppercase font-bold text-slate-400 tracking-wider\">\n                        {t('friends')}\n                      </p>\n                    </div>\n                    <div className=\"text-center\">\n                      <p className=\"text-xl font-black text-slate-700 dark:text-slate-200\">\n                        {profile.gamesPlayed || 0}\n                      </p>\n                      <p className=\"text-[9px] uppercase font-bold text-slate-400 tracking-wider\">\n                        {t('games')}\n                      </p>\n                    </div>\n                    <div className=\"text-center\">\n                      <p className=\"text-xl font-black text-emerald-500\">\n                        {profile.bestScore || 0}\n                      </p>\n                      <p className=\"text-[9px] uppercase font-bold text-slate-400 tracking-wider\">\n                        {t('best')}\n                      </p>\n                    </div>\n                    <div className=\"text-center opacity-50\">\n                      {/* Avg Unknown */}\n                      <p className=\"text-xl font-black text-slate-400\">-</p>\n                      <p className=\"text-[9px] uppercase font-bold text-slate-400 tracking-wider\">\n                        {t('avg')}\n                      </p>\n                    </div>\n                  </div>\n\n                  {/* Achievements Detail Block */}\n                  <div className=\"p-6 border-b border-slate-100 dark:border-slate-800\">\n                    <h3 className=\"text-sm font-bold uppercase tracking-wider opacity-50 mb-4\">\n                      {t('achievements')} ({unlockedBadges.length})\n                    </h3>\n                    {unlockedBadges.length > 0 ? (\n                      <div className=\"grid grid-cols-4 sm:grid-cols-5 gap-3\">\n                        {unlockedBadges.map(badge => (\n                          <div\n                            key={badge.id}\n                            className={`flex flex-col items-center p-2 rounded-xl ${\n                              theme === 'dark' ? 'bg-slate-700/50' : 'bg-slate-50'\n                            }`}\n                            title={badge.description}\n                          >\n                            {badge.image ? (\n                              <img\n                                src={badge.image}\n                                alt={badge.name}\n                                className=\"w-10 h-10 object-contain mb-1 drop-shadow-sm\"\n                              />\n                            ) : (\n                              <span className=\"text-2xl mb-1\">{badge.emoji}</span>\n                            )}\n                            <span className=\"text-[10px] text-center font-bold opacity-70 leading-tight\">\n                              {badge.name}\n                            </span>\n                          </div>\n                        ))}\n                      </div>\n                    ) : (\n                      <p className=\"text-sm opacity-50 text-center py-4\">No achievements yet.</p>\n                    )}\n                  </div>\n\n                  {/* Actions Area */}\n                  {currentUser && currentUser !== username && (\n                    <div className=\"p-6 space-y-4 bg-slate-50 dark:bg-slate-800/20\">\n                      {/* Friend Button */}\n                      {!isBlocked &&\n                        (friendStatus === 'friends' ? (\n                          <div className=\"w-full py-4 bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 rounded-xl text-center font-bold border border-emerald-500/20\">\n                            âœ… Friends\n                          </div>\n                        ) : friendStatus === 'pending' || requestSent ? (\n                          <div className=\"w-full py-4 bg-yellow-500/10 text-yellow-600 dark:text-yellow-400 rounded-xl text-center font-bold border border-yellow-500/20\">\n                            â³ Request Pending\n                          </div>\n                        ) : (\n                          <button\n                            onClick={handleAddFriend}\n                            disabled={sendingRequest}\n                            className=\"w-full py-4 bg-sky-500 hover:bg-sky-600 text-white rounded-xl font-bold transition-all disabled:opacity-50 shadow-lg shadow-sky-500/20\"\n                          >\n                            {sendingRequest ? 'Sending Friend Request...' : 'ðŸ‘‹ Add Friend'}\n                          </button>\n                        ))}\n\n                      {/* Block Button */}\n                      {isBlocked ? (\n                        <div className=\"w-full py-3 bg-red-500/10 text-red-500 rounded-xl text-center text-sm font-bold\">\n                          ðŸš« Blocked\n                        </div>\n                      ) : (\n                        <button\n                          onClick={handleBlock}\n                          disabled={blocking}\n                          className={`w-full py-3 rounded-xl text-sm font-bold transition-all opacity-60 hover:opacity-100\n                                      ${theme === 'dark' ? 'text-red-400 hover:bg-red-500/10' : 'text-red-500 hover:bg-red-50'}\n                                  `}\n                        >\n                          {blocking ? 'Blocking...' : 'ðŸš« Block User'}\n                        </button>\n                      )}\n                    </div>\n                  )}\n                </>\n              ) : (\n                <div className=\"text-center py-8 opacity-50\">\n                  <p>{error || 'Profile not found'}</p>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default PublicProfileScreen;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/Quiz/Banner.jsx",
    "messages": [
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 100.",
        "line": 23,
        "column": 82,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 23,
        "endColumn": 85
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 1,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import React from 'react';\nimport { useTheme } from '../../context/ThemeContext';\nimport PropTypes from 'prop-types';\n\nconst Banner = ({ currentQuestionIndex, totalQuestions }) => {\n  const { theme, t } = useTheme();\n\n  return (\n    <div className=\"w-full z-[800] pointer-events-none fixed top-12 left-0 right-0\">\n      <div className=\"mx-auto w-full max-w-xl px-4 pt-2\">\n        <div className=\"glass-panel rounded-b-xl rounded-t-none border-t-0 flex flex-col overflow-hidden shadow-xl ring-1 ring-white/10 pointer-events-auto\">\n          <div className=\"flex items-center justify-between px-6 py-2 bg-[#000080]/90 backdrop-blur-md text-white\">\n            <span className=\"text-xs font-bold uppercase tracking-widest opacity-90\">\n              {t('whichStreet')}\n            </span>\n            <span className=\"text-xs font-mono font-bold opacity-80 bg-white/10 px-2 py-1 rounded\">\n              {currentQuestionIndex + 1} / {totalQuestions}\n            </span>\n          </div>\n          <div className={`w-full h-1 ${theme === 'dark' ? 'bg-slate-800' : 'bg-slate-200'}`}>\n            <div\n              className=\"bg-sky-500 h-full transition-all duration-500 shadow-[0_0_10px_#0ea5e9]\"\n              style={{ width: `${((currentQuestionIndex + 1) / totalQuestions) * 100}%` }}\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nBanner.propTypes = {\n  currentQuestionIndex: PropTypes.number.isRequired,\n  totalQuestions: PropTypes.number.isRequired,\n};\n\nexport default Banner;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/Quiz/Hints.jsx",
    "messages": [
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 3.",
        "line": 8,
        "column": 37,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 8,
        "endColumn": 38
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 1,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import React from 'react';\nimport { useTheme } from '../../context/ThemeContext';\nimport PropTypes from 'prop-types';\n\nconst Hints = ({ hintStreets, hintsRevealed, onReveal, feedback }) => {\n  const { theme, t } = useTheme();\n\n  const canReveal = hintsRevealed < 3 && hintsRevealed < hintStreets.length;\n\n  if (feedback !== 'idle' && hintStreets.length === 0) {return null;}\n  if (feedback === 'idle' && hintStreets.length === 0) {return null;}\n\n  return (\n    <div\n      className={`p-2 md:p-4 border-t ${theme === 'dark' ? 'border-neutral-800 bg-neutral-900' : 'border-slate-100 bg-slate-50'}`}\n    >\n      <div className=\"flex flex-col gap-1.5 md:gap-3\">\n        <div className=\"flex justify-between items-center text-[10px] md:text-xs text-slate-500 uppercase font-bold tracking-wider\">\n          <span>{t('hints')}</span>\n          {canReveal && (\n            <button\n              onClick={onReveal}\n              className=\"text-sky-500 hover:text-sky-600 transition-colors text-[10px] md:text-xs\"\n            >\n              {t('revealHint')}\n            </button>\n          )}\n        </div>\n\n        <div className=\"flex flex-col gap-1 md:gap-2\">\n          {hintStreets.slice(0, hintsRevealed).map(street => (\n            <div\n              key={street.id}\n              className={`text-xs md:text-sm px-2 md:px-3 py-1 md:py-2 rounded-lg border flex items-center gap-2 animate-fadeIn\n                            ${\n                              theme === 'dark'\n                                ? 'bg-slate-700 border-slate-600 text-slate-200'\n                                : 'bg-white border-slate-200 text-slate-600'\n                            }\n                        `}\n            >\n              <div className=\"w-1.5 h-1.5 md:w-2 md:h-2 rounded-full bg-sky-500\" />\n              <span>Near: {street.name}</span>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nHints.propTypes = {\n  hintStreets: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.string.isRequired,\n      name: PropTypes.string.isRequired,\n    })\n  ).isRequired,\n  hintsRevealed: PropTypes.number.isRequired,\n  onReveal: PropTypes.func.isRequired,\n  feedback: PropTypes.oneOf(['idle', 'transitioning']).isRequired,\n};\n\nexport default Hints;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/Quiz/NextButton.jsx",
    "messages": [
      {
        "ruleId": "no-nested-ternary",
        "severity": 1,
        "message": "Do not nest ternary expressions.",
        "line": 14,
        "column": 17,
        "nodeType": "ConditionalExpression",
        "messageId": "noNestedTernary",
        "endLine": 18,
        "endColumn": 26
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 1,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import React from 'react';\n\nimport { motion } from 'framer-motion';\n\nimport { useTheme } from '../../context/ThemeContext';\nimport PropTypes from 'prop-types';\n\nconst NextButton = ({ onNext, isLastQuestion, feedback, isSubmit }) => {\n  const { theme, t } = useTheme();\n\n  // Show button when answer is selected (manual mode) or during transition\n  if (feedback !== 'selected' && feedback !== 'transitioning') {return null;}\n\n  const label = isSubmit\n    ? t('submit') || 'Submit'\n    : isLastQuestion\n      ? t('finishQuiz')\n      : t('nextQuestion');\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 10 }}\n      animate={{ opacity: 1, y: 0 }}\n      className=\"mt-2 md:mt-4 flex justify-center pb-4 relative z-50\"\n    >\n      <button\n        onClick={e => {\n          e.stopPropagation();\n          onNext();\n        }}\n        className={`w-full sm:w-auto px-6 md:px-8 py-2 md:py-3 text-sm md:text-base rounded-full font-black shadow-lg transition-all active:scale-95 border\n                    ${\n                      theme === 'dark'\n                        ? 'bg-neutral-200 hover:bg-white text-neutral-900 border-white' // High contrast button for dark mode\n                        : 'bg-slate-900 hover:bg-slate-800 text-white border-slate-900'\n                    }\n                `}\n      >\n        {label}\n      </button>\n    </motion.div>\n  );\n};\n\nNextButton.propTypes = {\n  onNext: PropTypes.func.isRequired,\n  isLastQuestion: PropTypes.bool.isRequired,\n  feedback: PropTypes.oneOf(['idle', 'selected', 'transitioning']).isRequired,\n  isSubmit: PropTypes.bool,\n};\n\nexport default NextButton;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/Quiz/Options.jsx",
    "messages": [
      {
        "ruleId": "react/no-unused-prop-types",
        "severity": 1,
        "message": "'correctName' PropType is defined but prop is never used",
        "line": 76,
        "column": 3,
        "nodeType": "Identifier",
        "messageId": "unusedPropType",
        "endLine": 76,
        "endColumn": 14
      },
      {
        "ruleId": "react/boolean-prop-naming",
        "severity": 1,
        "message": "Prop name `autoAdvance` doesnâ€™t match rule `^(is|has|should|can|will|did)[A-Z]([A-Za-z0-9]?)+`",
        "line": 77,
        "column": 3,
        "nodeType": "Property",
        "messageId": "patternMismatch",
        "endLine": 77,
        "endColumn": 41
      },
      {
        "ruleId": "react/boolean-prop-naming",
        "severity": 1,
        "message": "Prop name `disabled` doesnâ€™t match rule `^(is|has|should|can|will|did)[A-Z]([A-Za-z0-9]?)+`",
        "line": 78,
        "column": 3,
        "nodeType": "Property",
        "messageId": "patternMismatch",
        "endLine": 78,
        "endColumn": 27
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 3,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import React from 'react';\n\nimport PropTypes from 'prop-types';\n\nconst Options = ({ options, onSelect, selectedAnswer, feedback, autoAdvance, disabled }) => {\n  return (\n    <div className=\"flex-1 min-h-0 flex flex-col justify-center px-4 pb-2\">\n      <div className=\"grid grid-cols-2 sm:flex sm:flex-col gap-2 sm:gap-3 w-full max-w-lg mx-auto h-full sm:h-auto\">\n        {options.map(opt => {\n          const isSelected = selectedAnswer && opt.id === selectedAnswer.id;\n          const isSubmitted = feedback !== 'idle';\n\n          let btnClass = '';\n\n          if (isSubmitted) {\n            if (isSelected) {\n              // User's answer\n              if (autoAdvance) {\n                // Auto-mode: Dark blue highlight\n                btnClass =\n                  'bg-[#000080] text-white border-[#000080] ring-2 ring-[#000080] ring-opacity-100 shadow-none';\n              } else {\n                // Non-auto mode: Just show selected in dark blue (no correctness indication)\n                btnClass =\n                  'bg-[#000080] text-white border-[#000080] ring-4 ring-[#000080] ring-opacity-100 shadow-none';\n              }\n            } else {\n              // Other options - muted\n              btnClass = 'bg-slate-100 text-slate-400 border-slate-200';\n            }\n          } else if (isSelected) {\n            // Selected but not submitted yet (non-auto mode)\n            btnClass =\n              'bg-sky-500 text-white border-[#000080] ring-4 ring-[#000080] ring-opacity-100 shadow-none';\n          } else {\n            // Default unselected\n            btnClass = 'bg-white active:bg-slate-50 text-slate-800 border-slate-200';\n          }\n\n          return (\n            <button\n              key={opt.id}\n              onClick={e => {\n                e.currentTarget.blur();\n                onSelect(opt);\n              }}\n              disabled={disabled || feedback === 'transitioning'}\n              className={`w-full min-h-[2.25rem] sm:min-h-[3.5rem] flex-shrink-0 flex items-center justify-center sm:justify-start px-2 sm:px-4 rounded-xl text-center sm:text-left transition-all duration-200 relative overflow-hidden group border focus:outline-none focus:ring-0\n                                ${btnClass}\n                            `}\n            >\n              <span className=\"relative z-10 text-xs sm:text-sm md:text-base font-medium leading-tight line-clamp-3 sm:line-clamp-2 w-full\">\n                {opt.name}\n              </span>\n            </button>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\nOptions.propTypes = {\n  options: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.string.isRequired,\n      name: PropTypes.string.isRequired,\n    })\n  ).isRequired,\n  onSelect: PropTypes.func.isRequired,\n  selectedAnswer: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired,\n  }),\n  feedback: PropTypes.oneOf(['idle', 'transitioning']).isRequired,\n  correctName: PropTypes.string,\n  autoAdvance: PropTypes.bool.isRequired,\n  disabled: PropTypes.bool,\n};\n\nexport default Options;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/Quiz/index.tsx",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 19,
        "column": 14,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 19,
        "endColumn": 17,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [414, 417], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [414, 417], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 20,
        "column": 15,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 20,
        "endColumn": 18,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [434, 437], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [434, 437], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 21,
        "column": 13,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 21,
        "endColumn": 16,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [452, 455], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [452, 455], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 22,
        "column": 18,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 22,
        "endColumn": 21,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [475, 478], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [475, 478], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'children' is missing in props validation",
        "line": 27,
        "column": 32,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 27,
        "endColumn": 40
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'className' is missing in props validation",
        "line": 27,
        "column": 42,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 27,
        "endColumn": 51
      }
    ],
    "suppressedMessages": [],
    "errorCount": 2,
    "fatalErrorCount": 0,
    "warningCount": 4,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { FC, ReactNode } from 'react';\n// @ts-ignore\nimport { motion } from 'framer-motion';\n// @ts-ignore\nimport Banner from './Banner';\n// @ts-ignore\nimport Options from './Options';\n// @ts-ignore\nimport Hints from './Hints';\n// @ts-ignore\nimport NextButton from './NextButton';\n\ninterface QuizProps {\n  children?: ReactNode;\n  className?: string;\n}\n\ninterface QuizComponent extends FC<QuizProps> {\n  Banner: FC<any>;\n  Options: FC<any>;\n  Hints: FC<any>;\n  NextButton: FC<any>;\n  Container: FC<{ children: ReactNode; keyProp: string | number }>;\n  Content: FC<{ children: ReactNode }>;\n}\n\nconst Quiz: QuizComponent = ({ children, className }) => {\n  return (\n    <div\n      className={`\n             w-full h-full flex flex-col pointer-events-auto overflow-hidden\n             ${className || ''}\n        `}\n    >\n      {children}\n    </div>\n  );\n};\n\n// Subcomponent for the standard container animations\nconst Container: FC<{ children: ReactNode; keyProp: string | number }> = ({\n  children,\n  keyProp,\n}) => {\n  return (\n    <motion.div\n      key={keyProp}\n      initial={{ opacity: 0, x: 50 }}\n      animate={{ opacity: 1, x: 0 }}\n      exit={{ opacity: 0, x: -50 }}\n      transition={{ duration: 0.3 }}\n      className=\"w-full h-full flex flex-col overflow-hidden\"\n    >\n      {children}\n    </motion.div>\n  );\n};\n\n// Wrapper for the Main content area (Options usually)\nconst Content: FC<{ children: ReactNode }> = ({ children }) => {\n  return (\n    <div className=\"flex-1 flex flex-col justify-evenly p-2 pt-4 w-full overflow-hidden relative z-10\">\n      {children}\n    </div>\n  );\n};\n\nQuiz.Banner = Banner;\nQuiz.Options = Options;\nQuiz.Hints = Hints;\nQuiz.NextButton = NextButton;\nQuiz.Container = Container;\nQuiz.Content = Content;\n\nexport default Quiz;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/RegisterPanel.jsx",
    "messages": [
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 3.",
        "line": 49,
        "column": 25,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 49,
        "endColumn": 26
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1000.",
        "line": 69,
        "column": 31,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 69,
        "endColumn": 35
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 9000.",
        "line": 69,
        "column": 54,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 69,
        "endColumn": 58
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 20.",
        "line": 74,
        "column": 60,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 74,
        "endColumn": 62
      },
      {
        "ruleId": "max-lines-per-function",
        "severity": 1,
        "message": "Arrow function has too many lines (266). Maximum allowed is 150.",
        "line": 111,
        "column": 23,
        "nodeType": "ArrowFunctionExpression",
        "messageId": "exceed",
        "endLine": 420,
        "endColumn": 2
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'initialMode' is missing in props validation",
        "line": 111,
        "column": 56,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 111,
        "endColumn": 78
      },
      {
        "ruleId": "no-nested-ternary",
        "severity": 1,
        "message": "Do not nest ternary expressions.",
        "line": 405,
        "column": 14,
        "nodeType": "ConditionalExpression",
        "messageId": "noNestedTernary",
        "endLine": 405,
        "endColumn": 82
      }
    ],
    "suppressedMessages": [
      {
        "ruleId": "no-console",
        "severity": 2,
        "message": "Unexpected console statement. Only these console methods are allowed: warn, error.",
        "line": 149,
        "column": 9,
        "nodeType": "MemberExpression",
        "messageId": "limited",
        "endLine": 149,
        "endColumn": 20,
        "suggestions": [
          {
            "fix": { "range": [5029, 5109], "text": "" },
            "messageId": "removeConsole",
            "data": { "propertyName": "log" },
            "desc": "Remove the console.log()."
          }
        ],
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-console",
        "severity": 2,
        "message": "Unexpected console statement. Only these console methods are allowed: warn, error.",
        "line": 243,
        "column": 9,
        "nodeType": "MemberExpression",
        "messageId": "limited",
        "endLine": 243,
        "endColumn": 20,
        "suggestions": [
          {
            "fix": { "range": [7824, 7864], "text": "" },
            "messageId": "removeConsole",
            "data": { "propertyName": "log" },
            "desc": "Remove the console.log()."
          }
        ],
        "suppressions": [{ "kind": "directive", "justification": "" }]
      }
    ],
    "errorCount": 1,
    "fatalErrorCount": 0,
    "warningCount": 6,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import React, { useState, useEffect } from 'react';\n\nimport { motion } from 'framer-motion';\nimport { auth, googleProvider } from '../firebase';\nimport {\n  signInWithPopup,\n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword,\n  updateProfile,\n  sendEmailVerification,\n} from 'firebase/auth';\nimport { ensureUserProfile, recordReferral, getUserByEmail } from '../utils/social';\nimport { storage } from '../utils/storage';\nimport { useTheme } from '../context/ThemeContext';\nimport PropTypes from 'prop-types';\n\n// Username validation constants\nconst MAX_USERNAME_LENGTH = 20;\nconst USERNAME_REGEX = /^[a-zA-Z0-9_]+$/;\n\n// Basic profanity filter (add more as needed)\nconst BLOCKED_WORDS = [\n  'admin',\n  'moderator',\n  'girify',\n  'support',\n  'official',\n  'fuck',\n  'shit',\n  'ass',\n  'bitch',\n  'dick',\n  'cock',\n  'pussy',\n  'nazi',\n  'hitler',\n  'nigger',\n  'faggot',\n  'retard',\n];\n\nconst validateUsername = (username, t) => {\n  if (!username || username.trim().length === 0) {\n    return { valid: false, error: t('usernameRequired') };\n  }\n  if (username.length > MAX_USERNAME_LENGTH) {\n    return { valid: false, error: t('usernameTooLong') };\n  }\n  if (username.length < 3) {\n    return { valid: false, error: t('usernameShort') };\n  }\n  if (!USERNAME_REGEX.test(username)) {\n    return { valid: false, error: t('usernameInvalid') };\n  }\n\n  const lowerName = username.toLowerCase();\n  for (const word of BLOCKED_WORDS) {\n    if (lowerName.includes(word)) {\n      return { valid: false, error: t('usernameNotAllowed') };\n    }\n  }\n\n  return { valid: true, error: null };\n};\n\n// Helper: Generate a unique handle from a name\nconst generateHandle = baseName => {\n  const cleanName = baseName.split(' ')[0].replace(/[^a-zA-Z0-9]/g, '');\n  const randomId = Math.floor(1000 + Math.random() * 9000);\n  return `@${cleanName}${randomId}`;\n};\n\n// Helper: Generate random avatar ID\nconst getRandomAvatarId = () => Math.floor(Math.random() * 20) + 1;\n\n// Helper: Map Firebase error codes to user messages\n// Helper: Map Firebase error codes to user messages\nconst getAuthErrorMessage = (code, message) => {\n  switch (code) {\n    case 'auth/popup-closed-by-user':\n      return 'Sign-in cancelled. Please try again.';\n    case 'auth/cancelled-popup-request':\n      return 'Multiple sign-in attempts detected. Please try again.';\n    case 'auth/network-request-failed':\n      return 'Network error. Please check your connection and try again.';\n    case 'auth/too-many-requests':\n      return 'Too many attempts. Please wait a moment and try again.';\n    case 'auth/popup-blocked':\n      return message\n        ? `Google sign-in failed: ${message}`\n        : 'Popup blocked by browser. Please allow popups and try again.';\n    case 'auth/invalid-email':\n      return 'Invalid email address format.';\n    case 'auth/user-not-found':\n      return 'No account found with this email. Please sign up first.';\n    case 'auth/wrong-password':\n      return 'Incorrect password. Please try again.';\n    case 'auth/email-already-in-use':\n      return 'This email is already registered. Please sign in instead.';\n    case 'auth/weak-password':\n      return 'Password must be at least 6 characters long.';\n    case 'auth/invalid-credential':\n      return 'Invalid email or password. Please check your credentials.';\n    case 'auth/user-disabled':\n      return 'This account has been disabled. Please contact support.';\n    default:\n      return 'Authentication failed. Please try again.';\n  }\n};\n\nconst RegisterPanel = ({ theme: themeProp, onRegister, initialMode = 'signin' }) => {\n  const { theme: contextTheme, t } = useTheme();\n  const theme = themeProp || contextTheme; // Use prop if provided (GameScreen), else context (standalone)\n  const [isSignUp, setIsSignUp] = useState(initialMode === 'signup');\n\n  // Sync state with prop if it changes\n  useEffect(() => {\n    setIsSignUp(initialMode === 'signup');\n  }, [initialMode]);\n  const [firstName, setFirstName] = useState('');\n  const [lastName, setLastName] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  const handleGoogleLogin = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      const result = await signInWithPopup(auth, googleProvider);\n      const user = result.user;\n\n      let handle = user.displayName;\n      let avatarId = getRandomAvatarId();\n      const fullName = user.displayName || user.email?.split('@')[0] || 'User';\n\n      // Check for existing profile by email to prevent duplicates\n      const existingProfile = await getUserByEmail(user.email);\n\n      if (existingProfile) {\n        handle = existingProfile.username;\n        // Enforce @ if missing in existing profile (migration check)\n        if (!handle.startsWith('@')) {\n          handle = `@${  handle}`;\n        }\n        avatarId = existingProfile.avatarId || avatarId;\n        // eslint-disable-next-line no-console\n        console.log(`[Auth] Found existing profile for email ${user.email}: ${handle}`);\n      } else {\n        // Create new handle if no profile exists\n        handle = generateHandle(fullName);\n        // Ensure handle starts with @\n        if (!handle.startsWith('@')) {\n          handle = `@${  handle}`;\n        }\n\n        if (user.displayName !== handle) {\n          await updateProfile(user, { displayName: handle });\n        }\n      }\n\n      await ensureUserProfile(handle, user.uid, {\n        realName: fullName,\n        avatarId,\n        email: user.email,\n      });\n\n      await handlePostLogin(handle, existingProfile);\n    } catch (err) {\n      setError(getAuthErrorMessage(err.code, err.message));\n      setLoading(false);\n    }\n  };\n\n  const handlePostLogin = async (handle, existingProfile) => {\n    // Record referral\n    const referrer = storage.get('girify_referrer');\n    if (referrer && referrer !== handle && !existingProfile) {\n      await recordReferral(referrer, handle);\n      storage.remove('girify_referrer');\n    }\n\n    // Save joined date\n    if (!storage.get('girify_joined')) {\n      storage.set('girify_joined', new Date().toLocaleDateString());\n    }\n    // Callback to parent to close modal / start game\n    if (onRegister) {onRegister(handle);}\n\n    setLoading(false);\n  };\n\n  const handleEmailAuth = async e => {\n    e.preventDefault();\n    if (!email || !password) {\n      setError(t('enterEmailAndPassword'));\n      return;\n    }\n\n    try {\n      setLoading(true);\n      setError('');\n      let userCredential;\n\n      if (isSignUp) {\n        if (!firstName || !lastName) {\n          setError(t('enterYourName') || 'Please enter your first and last name');\n          setLoading(false);\n          return;\n        }\n\n        const validation = validateUsername(firstName, t);\n        if (!validation.valid) {\n          setError(validation.error);\n          setLoading(false);\n          return;\n        }\n\n        const handle = generateHandle(firstName);\n        const avatarId = getRandomAvatarId();\n        const realName = `${firstName} ${lastName}`.trim();\n\n        userCredential = await createUserWithEmailAndPassword(auth, email, password);\n        await updateProfile(userCredential.user, { displayName: handle });\n        await sendEmailVerification(userCredential.user);\n\n        await ensureUserProfile(handle, userCredential.user.uid, {\n          realName,\n          avatarId,\n          email: email,\n        });\n\n        // Record Referral for Email Signups\n        const referrer = storage.get('girify_referrer');\n        if (referrer && referrer !== handle) {\n          await recordReferral(referrer, handle);\n          storage.remove('girify_referrer');\n        }\n\n        await auth.signOut();\n        // eslint-disable-next-line no-console\n        console.log('Verification email sent!');\n        setError(t('verificationSent') || 'Verification email sent! Please check your inbox.');\n        setIsSignUp(false); // Switch to sign in view\n        setLoading(false);\n        return;\n      }\n\n      // Sign In Flow\n      userCredential = await signInWithEmailAndPassword(auth, email, password);\n\n      if (!userCredential.user.emailVerified) {\n        setError(\n          'Please verify your email address before signing in. Check your inbox for the verification link.'\n        );\n        await auth.signOut();\n        setLoading(false);\n        return;\n      }\n\n      // Fetch profile to get handle\n      const profile = await ensureUserProfile(\n        userCredential.user.displayName, // Fallback if needed, but ensureUserProfile handles extraction\n        userCredential.user.uid,\n        { email: email }\n      );\n\n      let handle = profile?.username || userCredential.user.displayName || 'User';\n      if (!handle.startsWith('@')) {\n        handle = `@${  handle}`;\n      }\n\n      await handlePostLogin(handle, profile);\n    } catch (err) {\n      setError(getAuthErrorMessage(err.code));\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"absolute inset-0 z-[3000] flex items-center justify-center p-6 backdrop-blur-xl pointer-events-auto overflow-hidden overflow-y-auto\">\n      <motion.div\n        initial={{ scale: 0.9, opacity: 0 }}\n        animate={{ scale: 1, opacity: 1 }}\n        className={`w-full max-w-sm p-8 rounded-3xl shadow-2xl border my-auto ${\n          theme === 'dark'\n            ? 'bg-slate-900/90 border-slate-700 text-white'\n            : 'bg-white/90 border-slate-200 text-slate-900'\n        }`}\n      >\n        <h2 className=\"text-3xl font-black mb-2 tracking-tight text-center\">\n          {isSignUp ? 'Join Girify' : 'Welcome Back'}\n        </h2>\n        <p\n          className={`text-xs text-center mb-6 uppercase tracking-wider font-bold ${theme === 'dark' ? 'text-slate-400' : 'text-slate-500'}`}\n        >\n          {isSignUp ? 'Create an account to track stats' : 'Sign in to continue'}\n        </p>\n\n        {/* Google Button */}\n        <button\n          onClick={handleGoogleLogin}\n          disabled={loading}\n          className=\"w-full py-3 mb-4 rounded-xl border flex items-center justify-center gap-2 transition-colors bg-white hover:bg-slate-50 text-slate-700 border-slate-200 font-bold text-sm shadow-sm\"\n        >\n          <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\">\n            <path\n              fill=\"#4285F4\"\n              d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"\n            />\n            <path\n              fill=\"#34A853\"\n              d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"\n            />\n            <path\n              fill=\"#FBBC05\"\n              d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"\n            />\n            <path\n              fill=\"#EA4335\"\n              d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"\n            />\n          </svg>\n          Continue with Google\n        </button>\n\n        <div className=\"relative mb-6\">\n          <div className=\"absolute inset-0 flex items-center\">\n            <div\n              className={`w-full border-t ${theme === 'dark' ? 'border-slate-700' : 'border-slate-200'}`}\n             />\n          </div>\n          <div className=\"relative flex justify-center text-xs uppercase\">\n            <span\n              className={`px-2 ${theme === 'dark' ? 'bg-slate-900 text-slate-500' : 'bg-white text-slate-400'}`}\n            >\n              Or with email\n            </span>\n          </div>\n        </div>\n\n        {error && (\n          <div className=\"p-3 mb-4 text-xs text-rose-500 bg-rose-50 dark:bg-rose-900/20 rounded-lg text-center\">\n            {error}\n          </div>\n        )}\n\n        <form onSubmit={handleEmailAuth} className=\"space-y-3\">\n          {isSignUp && (\n            <div className=\"flex gap-3\">\n              <input\n                type=\"text\"\n                placeholder={t('firstName') || 'First Name'}\n                value={firstName}\n                onChange={e => setFirstName(e.target.value)}\n                className={`w-1/2 px-4 py-3 rounded-xl border font-medium outline-none focus:ring-2 focus:ring-sky-500 transition-all ${\n                  theme === 'dark'\n                    ? 'bg-slate-800 border-slate-700 text-white placeholder-slate-600'\n                    : 'bg-white border-slate-200 text-slate-900 placeholder-slate-400'\n                }`}\n              />\n              <input\n                type=\"text\"\n                placeholder={t('lastName') || 'Last Name'}\n                value={lastName}\n                onChange={e => setLastName(e.target.value)}\n                className={`w-1/2 px-4 py-3 rounded-xl border font-medium outline-none focus:ring-2 focus:ring-sky-500 transition-all ${\n                  theme === 'dark'\n                    ? 'bg-slate-800 border-slate-700 text-white placeholder-slate-600'\n                    : 'bg-white border-slate-200 text-slate-900 placeholder-slate-400'\n                }`}\n              />\n            </div>\n          )}\n          <input\n            type=\"email\"\n            placeholder=\"Email address\"\n            value={email}\n            onChange={e => setEmail(e.target.value)}\n            className={`w-full px-4 py-3 rounded-xl border font-medium outline-none focus:ring-2 focus:ring-sky-500 transition-all ${\n              theme === 'dark'\n                ? 'bg-slate-800 border-slate-700 text-white placeholder-slate-600'\n                : 'bg-white border-slate-200 text-slate-900 placeholder-slate-400'\n            }`}\n          />\n          <input\n            type=\"password\"\n            placeholder=\"Password\"\n            value={password}\n            onChange={e => setPassword(e.target.value)}\n            className={`w-full px-4 py-3 rounded-xl border font-medium outline-none focus:ring-2 focus:ring-sky-500 transition-all ${\n              theme === 'dark'\n                ? 'bg-slate-800 border-slate-700 text-white placeholder-slate-600'\n                : 'bg-white border-slate-200 text-slate-900 placeholder-slate-400'\n            }`}\n          />\n          <button\n            type=\"submit\"\n            disabled={loading}\n            className={`w-full py-3 mt-2 rounded-xl font-bold text-sm transition-all shadow-lg active:scale-95 text-white\n                            ${loading ? 'bg-slate-400 cursor-wait' : 'bg-sky-500 hover:bg-sky-600 shadow-sky-500/20'}\n                        `}\n          >\n            {loading ? 'Please wait...' : isSignUp ? 'Create Account' : 'Sign In'}\n          </button>\n        </form>\n\n        <div className=\"mt-4 text-center\">\n          <button\n            onClick={() => setIsSignUp(!isSignUp)}\n            className={`text-xs font-semibold hover:underline ${theme === 'dark' ? 'text-slate-400 hover:text-white' : 'text-slate-500 hover:text-slate-900'}`}\n          >\n            {isSignUp ? 'Already have an account? Sign In' : \"Don't have an account? Sign Up\"}\n          </button>\n        </div>\n      </motion.div>\n    </div>\n  );\n};\n\nRegisterPanel.propTypes = {\n  theme: PropTypes.oneOf(['dark', 'light']).isRequired,\n  onRegister: PropTypes.func,\n};\n\nexport default RegisterPanel;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/SeoHead.jsx",
    "messages": [
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'title' is missing in props validation",
        "line": 5,
        "column": 20,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 5,
        "endColumn": 25
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'description' is missing in props validation",
        "line": 5,
        "column": 27,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 5,
        "endColumn": 38
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'image' is missing in props validation",
        "line": 5,
        "column": 40,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 5,
        "endColumn": 45
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'path' is missing in props validation",
        "line": 5,
        "column": 47,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 5,
        "endColumn": 56
      }
    ],
    "suppressedMessages": [],
    "errorCount": 4,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import React from 'react';\nimport { Helmet } from 'react-helmet-async';\nimport { useTranslation } from 'react-i18next';\n\nconst SeoHead = ({ title, description, image, path = '' }) => {\n  const { t } = useTranslation();\n\n  const siteUrl = 'https://girify.com'; // Replace with actual if known, or relative\n  const fullUrl = `${siteUrl}${path}`;\n  const metaTitle = title ? `${title} | Girify` : 'Girify - Barcelona Streets Quiz';\n  const metaDescription =\n    description ||\n    t('appDescription') ||\n    'Master the streets of Barcelona with this addictive puzzle game. Daily challenges, leaderboards, and more!';\n  const metaImage = image ? `${siteUrl}${image}` : `${siteUrl}/og-image.png`; // Fallback image\n\n  return (\n    <Helmet>\n      {/* Visual */}\n      <title>{metaTitle}</title>\n      <meta name=\"description\" content={metaDescription} />\n\n      {/* Open Graph / Facebook */}\n      <meta property=\"og:type\" content=\"website\" />\n      <meta property=\"og:url\" content={fullUrl} />\n      <meta property=\"og:title\" content={metaTitle} />\n      <meta property=\"og:description\" content={metaDescription} />\n      <meta property=\"og:image\" content={metaImage} />\n\n      {/* Twitter */}\n      <meta name=\"twitter:card\" content=\"summary_large_image\" />\n      <meta name=\"twitter:url\" content={fullUrl} />\n      <meta name=\"twitter:title\" content={metaTitle} />\n      <meta name=\"twitter:description\" content={metaDescription} />\n      <meta name=\"twitter:image\" content={metaImage} />\n    </Helmet>\n  );\n};\n\nexport default SeoHead;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/SettingsScreen.jsx",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 2,
        "message": "'AnimatePresence' is defined but never used. Allowed unused vars must match /^_/u.",
        "line": 3,
        "column": 18,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 3,
        "endColumn": 33,
        "suggestions": [
          {
            "messageId": "removeUnusedVar",
            "data": { "varName": "AnimatePresence" },
            "fix": { "range": [57, 74], "text": "" },
            "desc": "Remove unused variable \"AnimatePresence\"."
          }
        ]
      },
      {
        "ruleId": "max-lines-per-function",
        "severity": 1,
        "message": "Arrow function has too many lines (369). Maximum allowed is 150.",
        "line": 14,
        "column": 24,
        "nodeType": "ArrowFunctionExpression",
        "messageId": "exceed",
        "endLine": 415,
        "endColumn": 2
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 7.",
        "line": 54,
        "column": 21,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 54,
        "endColumn": 22
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1000.",
        "line": 94,
        "column": 50,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 94,
        "endColumn": 54
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1000.",
        "line": 132,
        "column": 54,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 132,
        "endColumn": 58
      },
      {
        "ruleId": "no-nested-ternary",
        "severity": 1,
        "message": "Do not nest ternary expressions.",
        "line": 190,
        "column": 47,
        "nodeType": "ConditionalExpression",
        "messageId": "noNestedTernary",
        "endLine": 194,
        "endColumn": 121
      },
      {
        "ruleId": "jsx-a11y/click-events-have-key-events",
        "message": "Definition for rule 'jsx-a11y/click-events-have-key-events' was not found.",
        "line": 393,
        "column": 18,
        "endLine": 393,
        "endColumn": 135,
        "severity": 2,
        "nodeType": null
      },
      {
        "ruleId": "jsx-a11y/no-noninteractive-element-interactions",
        "message": "Definition for rule 'jsx-a11y/no-noninteractive-element-interactions' was not found.",
        "line": 393,
        "column": 18,
        "endLine": 393,
        "endColumn": 135,
        "severity": 2,
        "nodeType": null
      },
      {
        "ruleId": "react/boolean-prop-naming",
        "severity": 1,
        "message": "Prop name `autoAdvance` doesnâ€™t match rule `^(is|has|should|can|will|did)[A-Z]([A-Za-z0-9]?)+`",
        "line": 420,
        "column": 3,
        "nodeType": "Property",
        "messageId": "patternMismatch",
        "endLine": 420,
        "endColumn": 41
      }
    ],
    "suppressedMessages": [
      {
        "ruleId": "no-alert",
        "severity": 2,
        "message": "Unexpected prompt.",
        "line": 110,
        "column": 19,
        "nodeType": "CallExpression",
        "messageId": "unexpected",
        "endLine": 110,
        "endColumn": 59,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      }
    ],
    "errorCount": 3,
    "fatalErrorCount": 0,
    "warningCount": 6,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import React, { useState } from 'react';\n\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { useTheme } from '../context/ThemeContext';\nimport { useNotifications } from '../hooks/useNotifications';\nimport { useNotification } from '../hooks/useNotification';\nimport { useConfirm } from '../hooks/useConfirm';\nimport { storage } from '../utils/storage';\nimport { STORAGE_KEYS } from '../config/constants';\nimport { getUserProfile, updateUserProfile } from '../utils/social';\nimport { ConfirmDialog } from './ConfirmDialog';\nimport PropTypes from 'prop-types';\n\nconst SettingsScreen = ({ onClose, onLogout, autoAdvance, setAutoAdvance, username }) => {\n  const { theme, themeMode, changeTheme, language, changeLanguage, languages, t } = useTheme();\n  const { notify } = useNotification();\n  const { confirm, confirmConfig, handleClose } = useConfirm();\n\n  // Use Notifications Hook\n  const { isSupported, isIOS, requestPermission } = useNotifications();\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [devTapCount, setDevTapCount] = useState(0);\n\n  // User Profile Settings\n  const [profileSettings, setProfileSettings] = useState({\n    notificationSettings: {\n      dailyReminder: true,\n      friendActivity: true,\n      newsUpdates: true,\n    },\n  });\n\n  // Load Profile Settings\n  React.useEffect(() => {\n    if (username) {\n      getUserProfile(username).then(profile => {\n        if (profile) {\n          setProfileSettings({\n            notificationSettings: profile.notificationSettings || {\n              dailyReminder: true,\n              friendActivity: true,\n              newsUpdates: true,\n            },\n          });\n        }\n      });\n    }\n  }, [username]);\n\n  const handleVersionClick = () => {\n    if (isAdmin) {return;}\n    const newCount = devTapCount + 1;\n    setDevTapCount(newCount);\n    if (newCount >= 7) {\n      handleAdminAccess();\n      setDevTapCount(0);\n    }\n  };\n\n  // Check Admin Status\n  React.useEffect(() => {\n    const checkAdmin = async () => {\n      // Dynamic import to avoid heavy load if not needed\n      const { auth, db } = await import('../firebase');\n      const { doc, getDoc } = await import('firebase/firestore');\n\n      if (auth.currentUser) {\n        try {\n          const docRef = doc(db, 'admins', auth.currentUser.uid);\n          const snap = await getDoc(docRef);\n          if (snap.exists()) {\n            setIsAdmin(true);\n          }\n        } catch (e) {\n          console.error('Admin check failed', e);\n        }\n      }\n    };\n    checkAdmin();\n  }, []);\n\n  const handleClearHistory = async () => {\n    if (\n      await confirm(\n        t('clearHistoryConfirm') ||\n          'Are you sure you want to clear your game history? This cannot be undone.',\n        'Clear History',\n        true\n      )\n    ) {\n      storage.remove(STORAGE_KEYS.HISTORY);\n      notify(t('historyCleared') || 'Game history cleared.', 'success');\n      // Force reload to update UI\n      setTimeout(() => window.location.reload(), 1000);\n    }\n  };\n\n  const handleSignOut = async () => {\n    if (await confirm('Are you sure you want to sign out?', 'Sign Out')) {\n      onLogout();\n    }\n  };\n\n  const toggleAutoAdvance = () => {\n    setAutoAdvance(!autoAdvance);\n  };\n\n  const handleAdminAccess = async () => {\n    // eslint-disable-next-line no-alert\n    const input = window.prompt('Enter Admin Access Key:');\n    if (input === 'GIRIFY_ADMIN_ACCESS_2026_SECURE') {\n      try {\n        const { setDoc, doc, updateDoc } = await import('firebase/firestore');\n        const { db, auth } = await import('../firebase');\n\n        if (auth.currentUser) {\n          // 1. Create admin document for RBAC\n          await setDoc(doc(db, 'admins', auth.currentUser.uid), {\n            email: auth.currentUser.email,\n            promotedAt: new Date(),\n          });\n\n          // 2. Update user profile for UI consistency\n          if (username) {\n            await updateDoc(doc(db, 'users', username), {\n              role: 'admin',\n            });\n          }\n\n          notify('Success! You are now an Admin.', 'success');\n          setIsAdmin(true);\n          setTimeout(() => window.location.reload(), 1000);\n        }\n      } catch (e) {\n        console.error(e);\n        notify(`Error promoting: ${  e.message}`, 'error');\n      }\n    } else {\n      if (input) {notify('Access Denied.', 'error');}\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 z-[8000] flex items-center justify-center p-4 backdrop-blur-sm bg-black/50 overflow-hidden\">\n      <motion.div\n        initial={{ scale: 0.9, opacity: 0 }}\n        animate={{ scale: 1, opacity: 1 }}\n        exit={{ scale: 0.9, opacity: 0 }}\n        className={`w-full max-w-md max-h-[80vh] flex flex-col rounded-3xl shadow-2xl overflow-hidden\n                    ${theme === 'dark' ? 'bg-slate-900 text-white' : 'bg-white text-slate-900'}\n                `}\n      >\n        {/* Header */}\n        <div\n          className={`p-6 border-b shrink-0 flex justify-between items-center ${theme === 'dark' ? 'border-slate-800' : 'border-slate-100'}`}\n        >\n          <h2 className=\"text-2xl font-black tracking-tight\">{t('settings')}</h2>\n          <button\n            onClick={onClose}\n            className={`p-2 rounded-full transition-colors ${theme === 'dark' ? 'hover:bg-slate-800' : 'hover:bg-slate-100'}`}\n          >\n            <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M6 18L18 6M6 6l12 12\"\n              />\n            </svg>\n          </button>\n        </div>\n\n        {/* Content */}\n        <div className=\"flex-1 overflow-y-auto p-6 space-y-6\">\n          {/* Language */}\n          <div className=\"space-y-4\">\n            <h3 className=\"text-sm font-bold uppercase tracking-wider opacity-50\">\n              {t('language')}\n            </h3>\n            <div\n              className={`p-4 rounded-xl border ${theme === 'dark' ? 'border-slate-800 bg-slate-800/50' : 'border-slate-100 bg-slate-50'}`}\n            >\n              <div className=\"flex gap-2\">\n                {languages.map(lang => (\n                  <button\n                    key={lang.code}\n                    onClick={() => changeLanguage(lang.code)}\n                    className={`flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-all\n                                            ${\n                                              language === lang.code\n                                                ? 'bg-sky-500 text-white shadow-md'\n                                                : theme === 'dark'\n                                                  ? 'bg-slate-700 hover:bg-slate-600 text-slate-300'\n                                                  : 'bg-white hover:bg-slate-100 text-slate-700 border border-slate-200'\n                                            }\n                                        `}\n                  >\n                    <span className=\"mr-1\">{lang.flag}</span> {lang.name}\n                  </button>\n                ))}\n              </div>\n            </div>\n          </div>\n\n          {/* Appearance */}\n          <div className=\"space-y-4\">\n            <h3 className=\"text-sm font-bold uppercase tracking-wider opacity-50\">\n              {t('appearance') || 'Appearance'}\n            </h3>\n            <div\n              className={`p-1.5 rounded-xl border flex ${theme === 'dark' ? 'border-slate-800 bg-slate-800/50' : 'border-slate-100 bg-slate-50'}`}\n            >\n              {[\n                { id: 'light', icon: 'â˜€ï¸', label: 'Light' },\n                { id: 'dark', icon: 'ðŸŒ™', label: 'Dark' },\n                { id: 'auto', icon: 'âš™ï¸', label: 'System' },\n              ].map(mode => (\n                <button\n                  key={mode.id}\n                  onClick={() => {\n                    changeTheme(mode.id);\n                    if (username) {\n                      updateUserProfile(username, { theme: mode.id });\n                    }\n                  }}\n                  className={`flex-1 py-2 rounded-lg text-sm font-bold flex items-center justify-center gap-2 transition-all\n                    ${\n                      themeMode === mode.id\n                        ? 'bg-white dark:bg-slate-700 text-sky-500 shadow-sm'\n                        : 'text-slate-500 hover:text-slate-900 dark:hover:text-slate-300'\n                    }\n                  `}\n                >\n                  <span className=\"text-lg\">{mode.icon}</span>\n                  {mode.label}\n                </button>\n              ))}\n            </div>\n          </div>\n\n          {/* Gameplay */}\n          <div className=\"space-y-4\">\n            <h3 className=\"text-sm font-bold uppercase tracking-wider opacity-50\">Gameplay</h3>\n            <div\n              className={`flex items-center justify-between p-4 rounded-xl border ${theme === 'dark' ? 'border-slate-800 bg-slate-800/50' : 'border-slate-100 bg-slate-50'}`}\n            >\n              <div className=\"flex items-center gap-3\">\n                <div\n                  className={`p-2 rounded-full ${theme === 'dark' ? 'bg-emerald-500/20 text-emerald-400' : 'bg-emerald-100 text-emerald-600'}`}\n                >\n                  <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth={2}\n                      d=\"M13 10V3L4 14h7v7l9-11h-7z\"\n                    />\n                  </svg>\n                </div>\n                <div>\n                  <span className=\"font-medium\">{t('autoAdvance')}</span>\n                  <p className=\"text-xs opacity-50\">{t('autoAdvanceDesc')}</p>\n                </div>\n              </div>\n              <button\n                onClick={toggleAutoAdvance}\n                className={`w-12 h-7 rounded-full transition-colors relative ${autoAdvance ? 'bg-emerald-500' : 'bg-slate-300'}`}\n              >\n                <div\n                  className={`absolute top-1 w-5 h-5 rounded-full bg-white transition-all shadow-sm ${autoAdvance ? 'left-6' : 'left-1'}`}\n                />\n              </button>\n            </div>\n          </div>\n\n          {/* Notifications */}\n          <div className=\"space-y-4\">\n            <h3 className=\"text-sm font-bold uppercase tracking-wider opacity-50\">Notifications</h3>\n            <div\n              className={`flex items-center justify-between p-4 rounded-xl border ${theme === 'dark' ? 'border-slate-800 bg-slate-800/50' : 'border-slate-100 bg-slate-50'}`}\n            >\n              <div className=\"flex items-center gap-3\">\n                <div\n                  className={`p-2 rounded-full ${theme === 'dark' ? 'bg-amber-500/20 text-amber-400' : 'bg-amber-100 text-amber-600'}`}\n                >\n                  <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth={2}\n                      d=\"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9\"\n                    />\n                  </svg>\n                </div>\n                <div>\n                  <span className=\"font-medium\">Daily Reminders</span>\n                  <p className=\"text-xs opacity-50\">Get reminded to play each day</p>\n                </div>\n              </div>\n              <button\n                onClick={async () => {\n                  const isEnabled = profileSettings.notificationSettings?.dailyReminder ?? true;\n\n                  if (!isSupported) {\n                    notify('Notifications not supported on this device.', 'warning');\n                    return;\n                  }\n\n                  if (!isEnabled) {\n                    const granted = await requestPermission();\n                    if (!granted) {\n                      notify('Permission blocked. Please enable in browser settings.', 'warning');\n                      return;\n                    } else {\n                      notify('Notifications enabled!', 'success');\n                    }\n                  } else {\n                    notify('Notifications disabled.', 'info');\n                  }\n\n                  const newSettings = {\n                    ...profileSettings.notificationSettings,\n                    dailyReminder: !isEnabled,\n                  };\n                  setProfileSettings(prev => ({ ...prev, notificationSettings: newSettings }));\n                  if (username) {\n                    await updateUserProfile(username, { notificationSettings: newSettings });\n                  }\n                }}\n                className={`w-12 h-7 rounded-full transition-colors relative ${(profileSettings.notificationSettings?.dailyReminder ?? true) ? 'bg-emerald-500' : 'bg-slate-300'}`}\n              >\n                <div\n                  className={`absolute top-1 w-5 h-5 rounded-full bg-white transition-all shadow-sm ${(profileSettings.notificationSettings?.dailyReminder ?? true) ? 'left-6' : 'left-1'}`}\n                />\n              </button>\n            </div>\n            {isIOS && (\n              <p className=\"text-xs text-rose-500 mt-2\">\n                Daily reminders not reliable on iPhone PWA\n              </p>\n            )}\n          </div>\n\n          {/* Data */}\n          <div className=\"space-y-4\">\n            <h3 className=\"text-sm font-bold uppercase tracking-wider opacity-50\">\n              Data & Account\n            </h3>\n            <button\n              onClick={handleClearHistory}\n              className=\"w-full flex items-center gap-3 p-4 rounded-xl border border-rose-200 bg-rose-50 text-rose-700 hover:bg-rose-100 transition-colors font-medium dark:bg-rose-900/20 dark:border-rose-900/50 dark:text-rose-400\"\n            >\n              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"\n                />\n              </svg>\n              Clear Game History\n            </button>\n\n            <button\n              onClick={handleSignOut}\n              className={`w-full flex items-center gap-3 p-4 rounded-xl border transition-colors font-medium\n                                ${theme === 'dark' ? 'border-slate-700 hover:bg-slate-800' : 'border-slate-200 hover:bg-slate-50'}\n                            `}\n            >\n              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\"\n                />\n              </svg>\n              {t('logout')}\n            </button>\n          </div>\n\n          {/* Admin Section */}\n          <div className=\"pt-2\">\n            {isAdmin ? (\n              <a\n                href=\"/admin\"\n                className=\"block w-full text-center p-3 rounded-xl bg-slate-800 text-slate-200 font-bold hover:bg-slate-700 transition-colors\"\n              >\n                Open Admin Panel\n              </a>\n            ) : (\n              <div className=\"mt-8 text-center pb-4\">\n                {/* eslint-disable-next-line jsx-a11y/click-events-have-key-events, jsx-a11y/no-noninteractive-element-interactions */}\n                <p\n                  onClick={handleVersionClick}\n                  className=\"text-xs text-slate-300 dark:text-slate-700 select-none cursor-default\"\n                >\n                  v0.1.0\n                </p>\n              </div>\n            )}\n          </div>\n        </div>\n      </motion.div>\n      <ConfirmDialog\n        isOpen={!!confirmConfig}\n        title={confirmConfig?.title}\n        message={confirmConfig?.message}\n        isDangerous={confirmConfig?.isDangerous}\n        onConfirm={() => handleClose(true)}\n        onCancel={() => handleClose(false)}\n      />\n    </div>\n  );\n};\n\nSettingsScreen.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  onLogout: PropTypes.func.isRequired,\n  autoAdvance: PropTypes.bool.isRequired,\n  setAutoAdvance: PropTypes.func.isRequired,\n  username: PropTypes.string,\n};\n\nexport default SettingsScreen;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/ShopScreen.jsx",
    "messages": [
      {
        "ruleId": "max-lines-per-function",
        "severity": 1,
        "message": "Arrow function has too many lines (374). Maximum allowed is 150.",
        "line": 16,
        "column": 20,
        "nodeType": "ArrowFunctionExpression",
        "messageId": "exceed",
        "endLine": 417,
        "endColumn": 2
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2000.",
        "line": 56,
        "column": 42,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 56,
        "endColumn": 46
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2000.",
        "line": 62,
        "column": 42,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 62,
        "endColumn": 46
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2000.",
        "line": 71,
        "column": 42,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 71,
        "endColumn": 46
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2000.",
        "line": 74,
        "column": 42,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 74,
        "endColumn": 46
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2000.",
        "line": 92,
        "column": 40,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 92,
        "endColumn": 44
      },
      {
        "ruleId": "no-nested-ternary",
        "severity": 1,
        "message": "Do not nest ternary expressions.",
        "line": 175,
        "column": 19,
        "nodeType": "ConditionalExpression",
        "messageId": "noNestedTernary",
        "endLine": 179,
        "endColumn": 73
      },
      {
        "ruleId": "no-nested-ternary",
        "severity": 1,
        "message": "Do not nest ternary expressions.",
        "line": 208,
        "column": 23,
        "nodeType": "ConditionalExpression",
        "messageId": "noNestedTernary",
        "endLine": 212,
        "endColumn": 56
      },
      {
        "ruleId": "jsx-a11y/click-events-have-key-events",
        "message": "Definition for rule 'jsx-a11y/click-events-have-key-events' was not found.",
        "line": 218,
        "column": 26,
        "endLine": 218,
        "endColumn": 94,
        "severity": 2,
        "nodeType": null
      },
      {
        "ruleId": "no-nested-ternary",
        "severity": 1,
        "message": "Do not nest ternary expressions.",
        "line": 229,
        "column": 28,
        "nodeType": "ConditionalExpression",
        "messageId": "noNestedTernary",
        "endLine": 243,
        "endColumn": 28
      },
      {
        "ruleId": "no-nested-ternary",
        "severity": 1,
        "message": "Do not nest ternary expressions.",
        "line": 282,
        "column": 31,
        "nodeType": "ConditionalExpression",
        "messageId": "noNestedTernary",
        "endLine": 286,
        "endColumn": 70
      },
      {
        "ruleId": "jsx-a11y/click-events-have-key-events",
        "message": "Definition for rule 'jsx-a11y/click-events-have-key-events' was not found.",
        "line": 316,
        "column": 11,
        "endLine": 316,
        "endColumn": 76,
        "severity": 2,
        "nodeType": null
      },
      {
        "ruleId": "jsx-a11y/click-events-have-key-events",
        "message": "Definition for rule 'jsx-a11y/click-events-have-key-events' was not found.",
        "line": 321,
        "column": 14,
        "endLine": 321,
        "endColumn": 82,
        "severity": 2,
        "nodeType": null
      },
      {
        "ruleId": "react/no-unescaped-entities",
        "severity": 2,
        "message": "`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.",
        "line": 335,
        "column": 19,
        "nodeType": "JSXText",
        "messageId": "unescapedEntityAlts",
        "suggestions": [
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&quot;" },
            "fix": {
              "range": [13610, 13649],
              "text": "\n                  &quot;\n                  "
            },
            "desc": "Replace with `&quot;`."
          },
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&ldquo;" },
            "fix": {
              "range": [13610, 13649],
              "text": "\n                  &ldquo;\n                  "
            },
            "desc": "Replace with `&ldquo;`."
          },
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&#34;" },
            "fix": {
              "range": [13610, 13649],
              "text": "\n                  &#34;\n                  "
            },
            "desc": "Replace with `&#34;`."
          },
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&rdquo;" },
            "fix": {
              "range": [13610, 13649],
              "text": "\n                  &rdquo;\n                  "
            },
            "desc": "Replace with `&rdquo;`."
          }
        ]
      },
      {
        "ruleId": "react/no-unescaped-entities",
        "severity": 2,
        "message": "`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.",
        "line": 340,
        "column": 19,
        "nodeType": "JSXText",
        "messageId": "unescapedEntityAlts",
        "suggestions": [
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&quot;" },
            "fix": {
              "range": [13819, 13856],
              "text": "\n                  &quot;\n                "
            },
            "desc": "Replace with `&quot;`."
          },
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&ldquo;" },
            "fix": {
              "range": [13819, 13856],
              "text": "\n                  &ldquo;\n                "
            },
            "desc": "Replace with `&ldquo;`."
          },
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&#34;" },
            "fix": {
              "range": [13819, 13856],
              "text": "\n                  &#34;\n                "
            },
            "desc": "Replace with `&#34;`."
          },
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&rdquo;" },
            "fix": {
              "range": [13819, 13856],
              "text": "\n                  &rdquo;\n                "
            },
            "desc": "Replace with `&rdquo;`."
          }
        ]
      }
    ],
    "suppressedMessages": [],
    "errorCount": 5,
    "fatalErrorCount": 0,
    "warningCount": 10,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import React, { useState, useEffect } from 'react';\nimport { AnimatePresence } from 'framer-motion';\nimport { useNavigate } from 'react-router-dom';\nimport { useTheme } from '../context/ThemeContext';\nimport {\n  getGiuros,\n  spendGiuros,\n  getPurchasedCosmetics,\n  setEquippedCosmetics,\n  getEquippedCosmetics,\n} from '../utils/giuros';\nimport { getShopItems } from '../utils/shop';\nimport TopBar from './TopBar';\nimport PropTypes from 'prop-types';\n\nconst ShopScreen = ({ username }) => {\n  const { theme, t } = useTheme();\n  const navigate = useNavigate();\n\n  const [balance, setBalance] = useState(0);\n  const [purchased, setPurchased] = useState([]);\n  const [equipped, setEquipped] = useState({});\n  const [activeTab, setActiveTab] = useState('avatars');\n  const [loading, setLoading] = useState(true);\n  const [message, setMessage] = useState(null);\n  const [flavorModal, setFlavorModal] = useState(null);\n  const [shopItems, setShopItems] = useState({\n    avatarFrames: [],\n    titles: [],\n    special: [],\n    avatars: [],\n  });\n\n  useEffect(() => {\n    const loadData = async () => {\n      if (!username) {return;}\n      setLoading(true);\n      const [bal, owned, eq, items] = await Promise.all([\n        getGiuros(username),\n        getPurchasedCosmetics(username),\n        getEquippedCosmetics(username),\n        getShopItems(),\n      ]);\n      setBalance(bal);\n      setPurchased(owned);\n      setEquipped(eq);\n      setShopItems(items);\n      setLoading(false);\n    };\n    loadData();\n  }, [username]);\n\n  const handlePurchase = async (item, _category) => {\n    if (purchased.includes(item.id)) {\n      setMessage({ type: 'error', text: t('alreadyOwned') });\n      setTimeout(() => setMessage(null), 2000);\n      return;\n    }\n\n    if (balance < item.cost) {\n      setMessage({ type: 'error', text: t('notEnoughGiuros') });\n      setTimeout(() => setMessage(null), 2000);\n      return;\n    }\n\n    const result = await spendGiuros(username, item.cost, item.id);\n    if (result.success) {\n      setBalance(result.newBalance);\n      setPurchased(prev => [...prev, item.id]);\n      setMessage({ type: 'success', text: `${t('purchased') || 'Purchased'} ${item.name}!` });\n      setTimeout(() => setMessage(null), 2000);\n    } else {\n      setMessage({ type: 'error', text: result.error || t('purchaseFailed') || 'Purchase failed' });\n      setTimeout(() => setMessage(null), 2000);\n    }\n  };\n\n  const handleEquip = async (item, category) => {\n    const newEquipped = { ...equipped };\n\n    if (category === 'frames') {\n      newEquipped.frameId = item.id;\n    } else if (category === 'titles') {\n      newEquipped.titleId = item.id;\n    } else if (category === 'avatars') {\n      newEquipped.avatarId = item.id;\n    }\n\n    await setEquippedCosmetics(username, newEquipped);\n    setEquipped(newEquipped);\n    setMessage({ type: 'success', text: `${t('equipped')} ${item.name}!` });\n    setTimeout(() => setMessage(null), 2000);\n  };\n\n  const tabs = [\n    { id: 'avatars', label: `ðŸ‘¤ ${t('avatars') || 'Avatars'}`, items: shopItems.avatars || [] },\n    { id: 'frames', label: `ðŸ–¼ï¸ ${t('frames')}`, items: shopItems.avatarFrames || [] },\n    { id: 'titles', label: `ðŸ·ï¸ ${t('titles')}`, items: shopItems.titles || [] },\n    { id: 'special', label: `âœ¨ ${t('special')}`, items: shopItems.special || [] },\n  ];\n\n  const activeItems = tabs.find(t => t.id === activeTab)?.items || [];\n\n  const isOwned = itemId =>\n    purchased.includes(itemId) ||\n    (shopItems.avatars && shopItems.avatars.find(a => a.id === itemId)?.cost === 0);\n  const isEquipped = itemId => {\n    if (activeTab === 'frames') {return equipped.frameId === itemId;}\n    if (activeTab === 'titles') {return equipped.titleId === itemId;}\n    if (activeTab === 'avatars') {return equipped.avatarId === itemId;}\n    return false;\n  };\n\n  return (\n    <div\n      className={`fixed inset-0 w-full h-full flex flex-col overflow-hidden transition-colors duration-500\n           ${theme === 'dark' ? 'bg-slate-900 text-white' : 'bg-slate-50 text-slate-900'}\n      `}\n    >\n      <TopBar onOpenPage={page => navigate(page ? `/${page}` : '/')} />\n\n      <div className=\"flex-1 overflow-y-auto w-full px-4 py-6 pt-16\">\n        <div className=\"max-w-2xl mx-auto\">\n          {/* Header */}\n          <div className=\"flex items-center justify-between mb-8 relative\">\n            <button\n              onClick={() => navigate(-1)}\n              className=\"flex items-center gap-2 text-sm font-bold opacity-60 hover:opacity-100 transition-opacity z-10\"\n            >\n              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d=\"M15 19l-7-7 7-7\"\n                />\n              </svg>\n              {t('back')}\n            </button>\n\n            {/* Title Centered */}\n            <h1 className=\"text-xl font-black absolute left-1/2 transform -translate-x-1/2 flex items-center gap-2\">\n              <span>ðŸ›’</span> {t('shop')}\n            </h1>\n\n            {/* Balance - Transparent */}\n            <div className=\"flex items-center gap-2 px-2 z-10\">\n              <img src=\"/giuro.png\" alt=\"Giuros\" className=\"h-6 w-auto object-contain\" />\n              <span className=\"font-black text-lg text-yellow-600 dark:text-yellow-400\">\n                {balance}\n              </span>\n            </div>\n          </div>\n\n          {/* Message */}\n          {message && (\n            <div\n              className={`mb-4 p-3 rounded-xl text-center font-bold text-sm ${\n                message.type === 'success'\n                  ? 'bg-emerald-500/20 text-emerald-600 dark:text-emerald-400'\n                  : 'bg-red-500/20 text-red-600 dark:text-red-400'\n              }`}\n            >\n              {message.text}\n            </div>\n          )}\n\n          {/* Tabs */}\n          <div className=\"flex gap-2 mb-6 overflow-x-auto pb-2\">\n            {tabs.map(tab => (\n              <button\n                key={tab.id}\n                onClick={() => setActiveTab(tab.id)}\n                className={`px-4 py-2 rounded-xl font-bold text-sm whitespace-nowrap transition-all ${\n                  activeTab === tab.id\n                    ? 'bg-sky-500 text-white shadow-lg'\n                    : theme === 'dark'\n                      ? 'bg-slate-800 text-slate-300 hover:bg-slate-700'\n                      : 'bg-slate-100 text-slate-600 hover:bg-slate-200'\n                }`}\n              >\n                {tab.label}\n              </button>\n            ))}\n          </div>\n\n          {/* Items Grid */}\n          {loading ? (\n            <div className=\"flex justify-center py-16\">\n              <div className=\"animate-spin rounded-full h-10 w-10 border-b-2 border-sky-500\" />\n            </div>\n          ) : (\n            <div\n              className={\n                activeTab === 'titles'\n                  ? 'grid grid-cols-1 sm:grid-cols-2 gap-4'\n                  : 'grid grid-cols-1 sm:grid-cols-2 gap-4'\n              }\n            >\n              {activeItems.map(item => {\n                const owned = isOwned(item.id);\n                const active = isEquipped(item.id);\n\n                return (\n                  <div\n                    key={item.id}\n                    className={`p-4 rounded-2xl border transition-all ${\n                      active\n                        ? 'border-sky-500 bg-sky-500/10'\n                        : theme === 'dark'\n                          ? 'border-slate-700 bg-slate-800'\n                          : 'border-slate-200 bg-white'\n                    }`}\n                  >\n                    <div className=\"flex items-start justify-between mb-3\">\n                      <div className=\"flex items-center gap-3\">\n                        {/* Preview Icon */}\n                        {/* eslint-disable-next-line jsx-a11y/click-events-have-key-events */}\n                        <div\n                          onClick={() => {\n                            if (activeTab === 'titles') {setFlavorModal(item);}\n                          }}\n                          className={`w-12 h-12 rounded-xl bg-slate-100 dark:bg-slate-700 flex items-center justify-center text-2xl relative overflow-hidden shrink-0 ${\n                            activeTab === 'titles'\n                              ? 'cursor-pointer hover:scale-105 transition-transform'\n                              : ''\n                          }`}\n                        >\n                          {item.cssClass ? (\n                            <div className={`w-10 h-10 rounded-full ${item.cssClass}`} />\n                          ) : item.image && activeTab === 'avatars' ? (\n                            <img\n                              src={item.image}\n                              alt={item.name}\n                              className=\"w-full h-full object-cover\"\n                            />\n                          ) : (\n                            <span>\n                              {item.image && activeTab !== 'avatars'\n                                ? 'ðŸŽ'\n                                : item.prefix || item.emoji || 'âœ¨'}\n                            </span>\n                          )}\n                        </div>\n\n                        <div>\n                          <h3 className=\"font-bold text-sm leading-tight\">\n                            {t(item.name) || item.name}\n                          </h3>\n                          <p className=\"text-xs opacity-60 mt-1 line-clamp-2\">\n                            {activeTab === 'titles' && item.flavorText\n                              ? `\"${item.flavorText}\"`\n                              : t(item.description) || item.description}\n                          </p>\n                        </div>\n                      </div>\n\n                      {/* Price / Status */}\n                      <div className=\"text-right ml-2 shrink-0\">\n                        {owned ? (\n                          <span className=\"text-xs font-bold text-emerald-500 bg-emerald-500/20 px-2 py-1 rounded-full whitespace-nowrap\">\n                            âœ“ {t('owned')}\n                          </span>\n                        ) : (\n                          <div className=\"flex items-center gap-1 justify-end\">\n                            <img src=\"/giuro.png\" alt=\"\" className=\"h-4 w-auto object-contain\" />\n                            <span className=\"font-black text-yellow-600 dark:text-yellow-400 text-sm\">\n                              {item.cost}\n                            </span>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n\n                    {/* Actions */}\n                    <div className=\"flex gap-2 mt-3\">\n                      {owned ? (\n                        activeTab !== 'special' && (\n                          <button\n                            onClick={() => handleEquip(item, activeTab)}\n                            className={`flex-1 py-2 rounded-xl font-bold text-xs transition-all ${\n                              active\n                                ? 'bg-sky-500 text-white'\n                                : theme === 'dark'\n                                  ? 'bg-slate-700 hover:bg-slate-600'\n                                  : 'bg-slate-100 hover:bg-slate-200'\n                            }`}\n                          >\n                            {active ? `âœ“ ${t('equipped')}` : t('equip')}\n                          </button>\n                        )\n                      ) : (\n                        <button\n                          onClick={() => handlePurchase(item, activeTab)}\n                          disabled={balance < item.cost}\n                          className={`flex-1 py-2 rounded-xl font-bold text-xs transition-all ${\n                            balance >= item.cost\n                              ? 'bg-yellow-500 hover:bg-yellow-600 text-white shadow-lg shadow-yellow-500/20'\n                              : 'bg-slate-300 text-slate-500 cursor-not-allowed'\n                          }`}\n                        >\n                          {t('buy')}\n                        </button>\n                      )}\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          )}\n        </div>\n      </div>\n\n      <AnimatePresence>\n        {flavorModal && (\n          // eslint-disable-next-line jsx-a11y/click-events-have-key-events\n          <div\n            className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm\"\n            onClick={() => setFlavorModal(null)}\n          >\n            {/* eslint-disable-next-line jsx-a11y/click-events-have-key-events */}\n            <div\n              className={`p-6 rounded-3xl w-full max-w-sm shadow-2xl transform transition-all relative ${theme === 'dark' ? 'bg-slate-800 text-white' : 'bg-white text-slate-900'}`}\n              onClick={e => e.stopPropagation()}\n            >\n              {/* Header */}\n              <div className=\"text-center mb-6\">\n                <div className=\"w-20 h-20 mx-auto bg-slate-100 dark:bg-slate-700 rounded-full flex items-center justify-center text-5xl mb-4 shadow-inner\">\n                  {flavorModal.prefix || flavorModal.emoji || 'âœ¨'}\n                </div>\n                <h3 className=\"text-xl font-bold mb-1\">\n                  {t(flavorModal.name) || flavorModal.name}\n                </h3>\n                <div className=\"text-sm opacity-60 italic px-4\">\n                  \"\n                  {t(flavorModal.flavorText) ||\n                    flavorModal.flavorText ||\n                    t(flavorModal.description) ||\n                    flavorModal.description}\n                  \"\n                </div>\n              </div>\n\n              {/* Cost Badge */}\n              <div className=\"flex justify-center mb-6\">\n                {(() => {\n                  const owned = isOwned(flavorModal.id);\n                  if (owned)\n                    {return (\n                      <span className=\"px-3 py-1 rounded-full bg-emerald-500/20 text-emerald-500 font-bold text-sm\">\n                        {t('owned')}\n                      </span>\n                    );}\n                  return (\n                    <div className=\"flex items-center gap-2 bg-yellow-500/10 px-3 py-1 rounded-full\">\n                      <img src=\"/giuro.png\" alt=\"\" className=\"w-5 h-5\" />\n                      <span className=\"font-bold text-yellow-600 dark:text-yellow-400\">\n                        {flavorModal.cost}\n                      </span>\n                    </div>\n                  );\n                })()}\n              </div>\n\n              {/* Actions */}\n              <div className=\"flex gap-2\">\n                {(() => {\n                  const owned = isOwned(flavorModal.id);\n                  const active = isEquipped(flavorModal.id);\n\n                  if (owned) {\n                    return (\n                      <button\n                        onClick={() => {\n                          handleEquip(flavorModal, 'titles');\n                          setFlavorModal(null);\n                        }}\n                        className={`flex-1 py-3 rounded-xl font-bold text-sm transition-all ${\n                          active\n                            ? 'bg-emerald-500 text-white'\n                            : 'bg-sky-500 hover:bg-sky-600 text-white shadow-lg'\n                        }`}\n                      >\n                        {active ? `âœ“ ${t('equipped')}` : t('equip')}\n                      </button>\n                    );\n                  } else {\n                    return (\n                      <button\n                        onClick={() => handlePurchase(flavorModal, 'titles')}\n                        disabled={balance < flavorModal.cost}\n                        className={`flex-1 py-3 rounded-xl font-bold text-sm transition-all ${\n                          balance >= flavorModal.cost\n                            ? 'bg-yellow-500 hover:bg-yellow-600 text-white shadow-lg'\n                            : 'bg-slate-300 text-slate-500 cursor-not-allowed'\n                        }`}\n                      >\n                        {t('buy')}\n                      </button>\n                    );\n                  }\n                })()}\n\n                <button\n                  onClick={() => setFlavorModal(null)}\n                  className=\"px-4 py-3 rounded-xl font-bold text-sm bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors\"\n                >\n                  {t('close')}\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n};\n\nShopScreen.propTypes = {\n  username: PropTypes.string.isRequired,\n};\n\nexport default ShopScreen;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/StreetsFetcher.jsx",
    "messages": [
      {
        "ruleId": "max-lines-per-function",
        "severity": 1,
        "message": "Arrow function has too many lines (226). Maximum allowed is 150.",
        "line": 4,
        "column": 24,
        "nodeType": "ArrowFunctionExpression",
        "messageId": "exceed",
        "endLine": 274,
        "endColumn": 2
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 429.",
        "line": 45,
        "column": 31,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 45,
        "endColumn": 34
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 500.",
        "line": 45,
        "column": 57,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 45,
        "endColumn": 60
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1000.",
        "line": 53,
        "column": 70,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 53,
        "endColumn": 74
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 4.",
        "line": 101,
        "column": 46,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 101,
        "endColumn": 47
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 5.",
        "line": 106,
        "column": 38,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 106,
        "endColumn": 39
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 5.",
        "line": 107,
        "column": 38,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 107,
        "endColumn": 39
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 3.",
        "line": 136,
        "column": 170,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 136,
        "endColumn": 171
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 4.",
        "line": 136,
        "column": 222,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 136,
        "endColumn": 223
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 10.",
        "line": 239,
        "column": 54,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 239,
        "endColumn": 56
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 10.",
        "line": 241,
        "column": 37,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 241,
        "endColumn": 39
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 10.",
        "line": 243,
        "column": 49,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 243,
        "endColumn": 51
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 12,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import React, { useState } from 'react';\nimport { Download, Play, AlertCircle } from 'lucide-react';\n\nconst StreetsFetcher = () => {\n  const [status, setStatus] = useState('');\n  const [progress, setProgress] = useState('');\n  const [streets, setStreets] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  // API Mirror State\n  const [apiMirror, setApiMirror] = useState('https://overpass-api.de/api/interpreter');\n\n  const API_MIRRORS = [\n    { name: 'Main (overpass-api.de)', url: 'https://overpass-api.de/api/interpreter' },\n    { name: 'Kumi Systems', url: 'https://overpass.kumi.systems/api/interpreter' },\n    { name: 'French Mirror', url: 'https://overpass.openstreetmap.fr/api/interpreter' },\n  ];\n\n  // Barcelona bounding box: [min_lat, min_lon, max_lat, max_lon]\n  const BBOX = '41.3200,2.0524,41.4695,2.2280';\n\n  const tierMapping = {\n    motorway: 1,\n    trunk: 1,\n    primary: 1,\n    secondary: 2,\n    tertiary: 3,\n    residential: 4,\n    living_street: 4,\n    unclassified: 4,\n    service: 4,\n    pedestrian: 4,\n  };\n\n  const wait = ms => new Promise(resolve => setTimeout(resolve, ms));\n\n  const fetchWithRetry = async (url, options, retries = 3, delay = 1000) => {\n    try {\n      const response = await fetch(url, options);\n\n      // If satisfied with response, return it\n      if (response.ok) {return response;}\n\n      // If rate limited (429) or server error (500+), throw to trigger retry\n      if (response.status === 429 || response.status >= 500) {\n        throw new Error(`Request failed with status ${response.status}`);\n      }\n\n      // Client errors (400-499) usually shouldn't be retried\n      return response;\n    } catch (error) {\n      if (retries > 0) {\n        setStatus(`âš ï¸ Error: ${error.message}. Retrying in ${delay / 1000}s...`);\n        await wait(delay);\n        return fetchWithRetry(url, options, retries - 1, delay * 2);\n      }\n      throw error;\n    }\n  };\n\n  const fetchStreets = async () => {\n    setLoading(true);\n    setStatus(`Fetching street data from ${API_MIRRORS.find(m => m.url === apiMirror)?.name}...`);\n    setProgress('');\n    setStreets([]);\n\n    try {\n      // Overpass API query for Barcelona streets\n      const query = `\n        [out:json][timeout:180];\n        (\n          way[\"highway\"][\"name\"](${BBOX});\n        );\n        out geom;\n      `;\n\n      // Using fetchWithRetry directly\n      const responseReal = await fetchWithRetry(apiMirror, {\n        method: 'POST',\n        body: `data=${encodeURIComponent(query)}`,\n      });\n\n      // Note: In the previous failed lint, I had a 'response' variable unused.\n      // I've removed the redundant first call.\n\n      if (!responseReal.ok) {\n        throw new Error(`API error: ${responseReal.status}`);\n      }\n\n      const data = await responseReal.json();\n      setProgress(`Received ${data.elements.length} street segments`);\n\n      // Process the data\n      const processedStreets = new Map();\n\n      data.elements.forEach(element => {\n        if (!element.tags?.name) {return;}\n\n        const name = element.tags.name;\n        const highway = element.tags.highway;\n        const tier = tierMapping[highway] || 4;\n\n        // Convert geometry from [lon, lat] to [lat, lon] and round\n        const geometry =\n          element.geometry?.map(coord => [\n            Number(coord.lat.toFixed(5)),\n            Number(coord.lon.toFixed(5)),\n          ]) || [];\n\n        if (geometry.length === 0) {return;}\n\n        // Group by name (same street may have multiple segments)\n        if (!processedStreets.has(name)) {\n          processedStreets.set(name, {\n            id: `street_${name.toLowerCase().replace(/[^a-z0-9]/g, '_')}`,\n            name: name,\n            tier: tier,\n            geometry: [],\n          });\n        }\n\n        processedStreets.get(name).geometry.push(geometry);\n      });\n\n      const streetArray = Array.from(processedStreets.values());\n\n      // Sort by tier then name\n      streetArray.sort((a, b) => {\n        if (a.tier !== b.tier) {return a.tier - b.tier;}\n        return a.name.localeCompare(b.name);\n      });\n\n      setStreets(streetArray);\n      setStatus(`âœ“ Successfully processed ${streetArray.length} unique streets`);\n      setProgress(\n        `Tier breakdown: T1=${streetArray.filter(s => s.tier === 1).length}, T2=${streetArray.filter(s => s.tier === 2).length}, T3=${streetArray.filter(s => s.tier === 3).length}, T4=${streetArray.filter(s => s.tier === 4).length}`\n      );\n    } catch (error) {\n      setStatus(`Error: ${error.message}`);\n      setProgress('Please try another mirror or wait a moment.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const downloadJSON = () => {\n    const dataStr = JSON.stringify(streets, null, 2);\n    const blob = new Blob([dataStr], { type: 'application/json' });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = 'barcelona_streets.json';\n    link.click();\n    URL.revokeObjectURL(url);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-8 pt-20\">\n      <div className=\"max-w-4xl mx-auto\">\n        <div className=\"bg-white rounded-lg shadow-lg p-8\">\n          <div className=\"flex justify-between items-start mb-6\">\n            <div>\n              <h1 className=\"text-3xl font-bold text-gray-800 mb-2\">Barcelona Streets Fetcher</h1>\n              <p className=\"text-gray-600\">\n                Fetch all streets from OpenStreetMap with proper tier classification\n              </p>\n            </div>\n            <div className=\"flex flex-col items-end gap-2\">\n              <label htmlFor=\"api-mirror-select\" className=\"text-sm font-semibold text-gray-700\">\n                API Mirror:\n              </label>\n              <select\n                id=\"api-mirror-select\"\n                value={apiMirror}\n                onChange={e => setApiMirror(e.target.value)}\n                className=\"p-2 border rounded-md text-sm bg-gray-50 hover:bg-white transition-colors cursor-pointer\"\n              >\n                {API_MIRRORS.map(m => (\n                  <option key={m.url} value={m.url}>\n                    {m.name}\n                  </option>\n                ))}\n              </select>\n            </div>\n          </div>\n\n          <div className=\"space-y-4\">\n            <button\n              onClick={fetchStreets}\n              disabled={loading}\n              className=\"w-full bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-400 text-white font-semibold py-3 px-6 rounded-lg flex items-center justify-center gap-2 transition-colors\"\n            >\n              {loading ? (\n                <>\n                  <div className=\"animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full\" />\n                  Fetching...\n                </>\n              ) : (\n                <>\n                  <Play className=\"w-5 h-5\" />\n                  Fetch Streets\n                </>\n              )}\n            </button>\n\n            {status && (\n              <div\n                className={`p-4 rounded-lg ${status.includes('Error') ? 'bg-red-50 border border-red-200' : 'bg-green-50 border border-green-200'}`}\n              >\n                <div className=\"flex items-start gap-2\">\n                  <AlertCircle\n                    className={`w-5 h-5 mt-0.5 ${status.includes('Error') ? 'text-red-600' : 'text-green-600'}`}\n                  />\n                  <div className=\"flex-1\">\n                    <p\n                      className={`font-medium ${status.includes('Error') ? 'text-red-800' : 'text-green-800'}`}\n                    >\n                      {status}\n                    </p>\n                    {progress && <p className=\"text-sm text-gray-600 mt-1\">{progress}</p>}\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {streets.length > 0 && (\n              <div className=\"space-y-4\">\n                <button\n                  onClick={downloadJSON}\n                  className=\"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-6 rounded-lg flex items-center justify-center gap-2 transition-colors\"\n                >\n                  <Download className=\"w-5 h-5\" />\n                  Download JSON ({streets.length} streets)\n                </button>\n\n                <div className=\"bg-gray-50 rounded-lg p-4 max-h-96 overflow-y-auto\">\n                  <h3 className=\"font-semibold text-gray-800 mb-3\">Preview (first 10 streets):</h3>\n                  <pre className=\"text-xs text-gray-700 whitespace-pre-wrap\">\n                    {JSON.stringify(streets.slice(0, 10), null, 2)}\n                  </pre>\n                  {streets.length > 10 && (\n                    <p className=\"text-sm text-gray-500 mt-2 italic\">\n                      ... and {streets.length - 10} more streets\n                    </p>\n                  )}\n                </div>\n\n                <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n                  <h3 className=\"font-semibold text-blue-900 mb-2\">Data Format:</h3>\n                  <ul className=\"text-sm text-blue-800 space-y-1\">\n                    <li>\n                      â€¢ <strong>id</strong>: Unique identifier (auto-generated)\n                    </li>\n                    <li>\n                      â€¢ <strong>name</strong>: Street display name\n                    </li>\n                    <li>\n                      â€¢ <strong>tier</strong>: 1=Major highways, 2=Avenues, 3=Standard streets,\n                      4=Residential\n                    </li>\n                    <li>\n                      â€¢ <strong>geometry</strong>: Array of polylines in [Lat, Lon] format\n                      (Leaflet-ready)\n                    </li>\n                  </ul>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default StreetsFetcher;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/SummaryScreen.jsx",
    "messages": [
      {
        "ruleId": "max-lines-per-function",
        "severity": 1,
        "message": "Arrow function has too many lines (226). Maximum allowed is 150.",
        "line": 10,
        "column": 23,
        "nodeType": "ArrowFunctionExpression",
        "messageId": "exceed",
        "endLine": 264,
        "endColumn": 2
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'score' is missing in props validation",
        "line": 11,
        "column": 3,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 11,
        "endColumn": 8
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'total' is missing in props validation",
        "line": 12,
        "column": 3,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 12,
        "endColumn": 8
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'theme' is missing in props validation",
        "line": 13,
        "column": 3,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 13,
        "endColumn": 8
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'username' is missing in props validation",
        "line": 14,
        "column": 3,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 14,
        "endColumn": 11
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'realName' is missing in props validation",
        "line": 15,
        "column": 3,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 15,
        "endColumn": 11
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'streak' is missing in props validation",
        "line": 16,
        "column": 3,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 16,
        "endColumn": 9
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'onRestart' is missing in props validation",
        "line": 17,
        "column": 3,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 17,
        "endColumn": 12
      },
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 2,
        "message": "'quizResults' is defined but never used. Allowed unused args must match /^_/u.",
        "line": 18,
        "column": 3,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 18,
        "endColumn": 14
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'quizResults' is missing in props validation",
        "line": 18,
        "column": 3,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 18,
        "endColumn": 14
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'quizStreets' is missing in props validation",
        "line": 19,
        "column": 3,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 19,
        "endColumn": 14
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'t' is missing in props validation",
        "line": 20,
        "column": 3,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 20,
        "endColumn": 4
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 100.",
        "line": 26,
        "column": 36,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 26,
        "endColumn": 39
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'username.replace' is missing in props validation",
        "line": 72,
        "column": 40,
        "nodeType": "Identifier",
        "messageId": "missingPropType",
        "endLine": 72,
        "endColumn": 47
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 0.9.",
        "line": 74,
        "column": 23,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 74,
        "endColumn": 26
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 0.7.",
        "line": 75,
        "column": 23,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 75,
        "endColumn": 26
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 0.5.",
        "line": 76,
        "column": 23,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 76,
        "endColumn": 26
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'username.toLowerCase' is missing in props validation",
        "line": 102,
        "column": 41,
        "nodeType": "Identifier",
        "messageId": "missingPropType",
        "endLine": 102,
        "endColumn": 52
      },
      {
        "ruleId": "no-restricted-globals",
        "severity": 2,
        "message": "Unexpected use of 'alert'.",
        "line": 115,
        "column": 9,
        "nodeType": "Identifier",
        "messageId": "defaultMessage",
        "endLine": 115,
        "endColumn": 14
      },
      {
        "ruleId": "react/no-unescaped-entities",
        "severity": 2,
        "message": "`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.",
        "line": 164,
        "column": 17,
        "nodeType": "JSXText",
        "messageId": "unescapedEntityAlts",
        "suggestions": [
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&quot;" },
            "fix": { "range": [6183, 6201], "text": "\n                &quot;" },
            "desc": "Replace with `&quot;`."
          },
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&ldquo;" },
            "fix": { "range": [6183, 6201], "text": "\n                &ldquo;" },
            "desc": "Replace with `&ldquo;`."
          },
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&#34;" },
            "fix": { "range": [6183, 6201], "text": "\n                &#34;" },
            "desc": "Replace with `&#34;`."
          },
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&rdquo;" },
            "fix": { "range": [6183, 6201], "text": "\n                &rdquo;" },
            "desc": "Replace with `&rdquo;`."
          }
        ]
      },
      {
        "ruleId": "react/no-unescaped-entities",
        "severity": 2,
        "message": "`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.",
        "line": 164,
        "column": 34,
        "nodeType": "JSXText",
        "messageId": "unescapedEntityAlts",
        "suggestions": [
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&quot;" },
            "fix": { "range": [6217, 6233], "text": "&quot;\n              " },
            "desc": "Replace with `&quot;`."
          },
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&ldquo;" },
            "fix": { "range": [6217, 6233], "text": "&ldquo;\n              " },
            "desc": "Replace with `&ldquo;`."
          },
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&#34;" },
            "fix": { "range": [6217, 6233], "text": "&#34;\n              " },
            "desc": "Replace with `&#34;`."
          },
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&rdquo;" },
            "fix": { "range": [6217, 6233], "text": "&rdquo;\n              " },
            "desc": "Replace with `&rdquo;`."
          }
        ]
      }
    ],
    "suppressedMessages": [
      {
        "ruleId": "no-alert",
        "severity": 2,
        "message": "Unexpected alert.",
        "line": 115,
        "column": 9,
        "nodeType": "CallExpression",
        "messageId": "unexpected",
        "endLine": 115,
        "endColumn": 52,
        "suppressions": [{ "kind": "directive", "justification": "" }]
      }
    ],
    "errorCount": 16,
    "fatalErrorCount": 0,
    "warningCount": 5,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import React, { useState, useEffect, useMemo } from 'react';\n\nimport { motion } from 'framer-motion';\nimport { getCuriosityByStreets } from '../data/curiosities';\nimport { fetchWikiImage } from '../utils/wiki';\nimport { useNavigate } from 'react-router-dom';\nimport { storage } from '../utils/storage';\nimport { STORAGE_KEYS } from '../config/constants';\n\nconst SummaryScreen = ({\n  score,\n  total,\n  theme,\n  username,\n  realName,\n  streak,\n  onRestart,\n  quizResults,\n  quizStreets,\n  t,\n}) => {\n  const navigate = useNavigate();\n  // Always show curiosities first, then actions\n  const [view, setView] = useState('curiosity');\n\n  const maxPossibleScore = total * 100;\n  const curiosity = useMemo(() => getCuriosityByStreets(quizStreets), [quizStreets]);\n  const [displayImage, setDisplayImage] = useState(curiosity.image);\n\n  // Calculate streak using useMemo to avoid impure function during render\n  const streakValue = useMemo(() => {\n    if (streak && streak > 0) {return streak;}\n    try {\n      const history = storage.get(STORAGE_KEYS.HISTORY, []);\n      if (history.length === 0) {return 1;}\n\n      // Get unique dates (first game of each day)\n      const uniqueDates = [...new Set(history.map(h => h.date))].sort().reverse();\n      if (uniqueDates.length === 0) {return 1;}\n\n      // Count consecutive days from today/yesterday\n      const now = new Date();\n      const today = now.toISOString().split('T')[0].replace(/-/g, '');\n      const yesterdayDate = new Date(now);\n      yesterdayDate.setDate(yesterdayDate.getDate() - 1);\n      const yesterday = yesterdayDate.toISOString().split('T')[0].replace(/-/g, '');\n\n      // If last play wasn't today or yesterday, streak is broken\n      if (uniqueDates[0] !== today && uniqueDates[0] !== yesterday) {return 1;}\n\n      let streak = 0;\n      const expectedDate = new Date(now);\n\n      for (const dateStr of uniqueDates) {\n        const expected = expectedDate.toISOString().split('T')[0].replace(/-/g, '');\n        if (dateStr === expected) {\n          streak++;\n          expectedDate.setDate(expectedDate.getDate() - 1);\n        } else {\n          break;\n        }\n      }\n      return Math.max(streak, 1);\n    } catch {\n      return 1;\n    }\n  }, [streak]);\n  // Dynamic Greeting based on score percentage\n  const getGreeting = () => {\n    const percentage = score / maxPossibleScore;\n    const displayName =\n      realName || (username ? username.replace('@', '').split(/\\d/)[0] : 'Explorer');\n\n    if (percentage >= 0.9) {return `Incredible, ${displayName}!`;}\n    if (percentage >= 0.7) {return `Great job, ${displayName}!`;}\n    if (percentage >= 0.5) {return `Good effort, ${displayName}!`;}\n    return `Keep exploring, ${displayName}!`;\n  };\n\n  useEffect(() => {\n    let active = true;\n    const loadDynamicImage = async () => {\n      if (curiosity.title) {\n        const url = await fetchWikiImage(curiosity.title);\n        if (active && url) {\n          setDisplayImage(url);\n        }\n      }\n    };\n    loadDynamicImage();\n    return () => {\n      active = false;\n    };\n  }, [curiosity]);\n\n  const handleNext = () => {\n    setView('actions');\n  };\n\n  const handleShare = async () => {\n    const baseUrl = 'https://girify.com'; // Updated domain\n    const refCode = username ? username.toLowerCase().replace(/[^a-z0-9]/g, '') : '';\n    const shareUrl = refCode ? `${baseUrl}?ref=${refCode}` : baseUrl;\n    const text = `ðŸŒ† Girify Daily Challenge:\\nScore: ${score}/${maxPossibleScore}\\n\\nCan you beat me? Play here: ${shareUrl} #Girify #Barcelona`;\n\n    try {\n      if (navigator.share) {\n        await navigator.share({\n          title: 'Girify - Barcelona Street Quiz',\n          text: text,\n        });\n      } else {\n        await navigator.clipboard.writeText(shareUrl);\n        // eslint-disable-next-line no-alert\n        alert('Referral link copied to clipboard!');\n      }\n    } catch (e) {\n      console.error('Share failed:', e);\n    }\n  };\n\n  return (\n    <div\n      className={`absolute inset-0 flex flex-col items-center justify-center p-6 text-center backdrop-blur-md transition-colors duration-500 pointer-events-auto overflow-y-auto font-inter z-[5000]\n            ${theme === 'dark' ? 'bg-slate-950/95 text-white' : 'bg-slate-50/95 text-slate-800'}`}\n    >\n      {view === 'curiosity' && (\n        <motion.div\n          initial={{ opacity: 0, scale: 0.95 }}\n          animate={{ opacity: 1, scale: 1 }}\n          className=\"flex flex-col items-center max-w-md relative z-20 w-full\"\n        >\n          <h2 className=\"text-xs font-black mb-2 text-sky-400 uppercase tracking-[0.3em] drop-shadow-md\">\n            {t('cityCuriosity') || 'City Curiosity'}\n          </h2>\n          <h3 className=\"text-3xl md:text-4xl font-black tracking-tight mb-6 text-balance text-white drop-shadow-[0_2px_10px_rgba(0,0,0,0.8)] leading-tight\">\n            {curiosity.title}\n          </h3>\n\n          <div className=\"glass-panel w-full overflow-hidden mb-6 shadow-2xl group border border-white/10 relative rounded-3xl\">\n            <div className=\"overflow-hidden h-48 md:h-64 w-full relative\">\n              <img\n                src={displayImage}\n                alt=\"Barcelona\"\n                className=\"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110\"\n              />\n              <div className=\"absolute inset-0 bg-gradient-to-t from-slate-900/90 via-transparent to-transparent\" />\n              <div className=\"absolute bottom-3 right-3\">\n                <button\n                  onClick={handleShare}\n                  className=\"p-2.5 rounded-full bg-sky-500 hover:bg-sky-600 transition-all active:scale-95 shadow-lg text-white\"\n                  title=\"Share this curiosity\"\n                >\n                  ðŸŽ\n                </button>\n              </div>\n            </div>\n\n            <div className=\"p-6 text-left relative z-10 bg-slate-950/80 backdrop-blur-md border-t border-white/10\">\n              <span className=\"text-xs font-bold text-sky-400 uppercase tracking-wider mb-2 block\">\n                {t('didYouKnow') || 'Did you know?'}\n              </span>\n              <p className=\"text-lg leading-relaxed font-medium text-white drop-shadow-sm\">\n                \"{curiosity.fact}\"\n              </p>\n            </div>\n          </div>\n\n          <div className=\"flex gap-3 w-full\">\n            <button\n              onClick={handleShare}\n              className=\"flex-1 py-4 bg-white/5 hover:bg-white/10 border border-white/10 text-white rounded-2xl font-bold text-sm transition-all\"\n            >\n              ðŸŽ {t('share') || 'Share & Earn'}\n            </button>\n            <button\n              onClick={handleNext}\n              className=\"flex-[2] py-4 bg-sky-500 hover:bg-sky-400 text-white rounded-2xl shadow-xl shadow-sky-500/20 font-bold text-lg transition-all transform hover:scale-[1.02]\"\n            >\n              {t('next') || 'Next'}\n            </button>\n          </div>\n        </motion.div>\n      )}\n\n      {/* Actions Screen - Bento Grid Layout */}\n      {view === 'actions' && (\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"flex flex-col items-center w-full max-w-md animate-fadeIn\"\n        >\n          <div className=\"mb-8 text-center animate-slide-up\">\n            <h2 className=\"text-2xl md:text-3xl font-black mb-2 bg-gradient-to-br from-white to-slate-400 bg-clip-text text-transparent\">\n              {getGreeting()}\n            </h2>\n            <p className=\"text-sm opacity-60 uppercase tracking-widest font-bold\">\n              {t('todaysChallenge') || \"Today's Challenge\"}\n            </p>\n          </div>\n\n          {/* Bento Stats Grid */}\n          <div className=\"grid grid-cols-2 gap-4 w-full mb-8\">\n            {/* Score Card */}\n            <div className=\"glass-panel p-4 flex flex-col items-center justify-center col-span-1 asp-square\">\n              <span className=\"text-xs opacity-50 uppercase tracking-wider font-bold mb-1\">\n                Score\n              </span>\n              <div className=\"flex flex-col items-center\">\n                <span className=\"text-4xl md:text-5xl font-black text-emerald-400 leading-none\">\n                  {score}\n                </span>\n                <span className=\"text-sm font-bold text-slate-400 mt-1\">\n                  / {maxPossibleScore} {t('pts')}\n                </span>\n              </div>\n            </div>\n\n            {/* Streak Card */}\n            <div className=\"glass-panel p-4 flex flex-col items-center justify-center col-span-1 asp-square bg-orange-500/10 border-orange-500/20 relative overflow-hidden\">\n              <div className=\"absolute -right-4 -top-4 opacity-10 text-6xl\">ðŸ”¥</div>\n              <span className=\"text-xs font-bold text-orange-400 uppercase tracking-wider mb-1\">\n                {t('streak') || 'Streak'}\n              </span>\n              <span className=\"text-3xl md:text-4xl font-black text-white\">{streakValue}</span>\n              <span className=\"text-[10px] opacity-60 uppercase\">{t('daysStreak') || 'Days'}</span>\n            </div>\n          </div>\n\n          {/* Primary: Share Referral Link */}\n          <button\n            onClick={handleShare}\n            className=\"w-full py-5 bg-gradient-to-r from-emerald-500 to-sky-500 hover:from-emerald-400 hover:to-sky-400 text-white rounded-2xl shadow-2xl font-black text-lg transition-all transform hover:scale-[1.02] mb-4 flex items-center justify-center gap-3 group\"\n          >\n            <span className=\"text-2xl group-hover:rotate-12 transition-transform\">ðŸŽ</span>\n            <div className=\"flex flex-col items-start leading-none\">\n              <span>{t('shareAndEarnGiuros') || 'Share & Earn Giuros'}</span>\n              <span className=\"text-[10px] font-medium opacity-80 mt-1 uppercase tracking-wide\">\n                {t('inviteFriendsEarnRewards') || 'Invite friends & earn'}\n              </span>\n            </div>\n          </button>\n\n          {/* Secondary: Play Again */}\n          <button\n            onClick={onRestart}\n            className=\"w-full py-4 rounded-xl font-bold text-lg uppercase tracking-wider transition-all \n               bg-slate-800 text-slate-300 hover:bg-slate-700 hover:text-white border border-slate-700 hover:border-slate-500 glass-button mb-6\"\n          >\n            ðŸ”„ {t('playAgain') || 'Play Again'}\n          </button>\n\n          {/* Feedback Link */}\n          <button\n            onClick={() => navigate('/feedback')}\n            className=\"text-xs opacity-40 hover:opacity-100 hover:text-sky-400 transition-colors uppercase tracking-widest font-semibold\"\n          >\n            ðŸ“ {t('haveFeedback') || 'Share Feedback'}\n          </button>\n        </motion.div>\n      )}\n    </div>\n  );\n};\n\nexport default SummaryScreen;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/TermsOfService.jsx",
    "messages": [
      {
        "ruleId": "react/no-unescaped-entities",
        "severity": 2,
        "message": "`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.",
        "line": 42,
        "column": 36,
        "nodeType": "JSXText",
        "messageId": "unescapedEntityAlts",
        "suggestions": [
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&quot;" },
            "fix": {
              "range": [1523, 1701],
              "text": "\n              The game is provided &quot;as is\" without warranties of any kind. We are not responsible\n              for any errors in map data or service interruptions.\n            "
            },
            "desc": "Replace with `&quot;`."
          },
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&ldquo;" },
            "fix": {
              "range": [1523, 1701],
              "text": "\n              The game is provided &ldquo;as is\" without warranties of any kind. We are not responsible\n              for any errors in map data or service interruptions.\n            "
            },
            "desc": "Replace with `&ldquo;`."
          },
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&#34;" },
            "fix": {
              "range": [1523, 1701],
              "text": "\n              The game is provided &#34;as is\" without warranties of any kind. We are not responsible\n              for any errors in map data or service interruptions.\n            "
            },
            "desc": "Replace with `&#34;`."
          },
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&rdquo;" },
            "fix": {
              "range": [1523, 1701],
              "text": "\n              The game is provided &rdquo;as is\" without warranties of any kind. We are not responsible\n              for any errors in map data or service interruptions.\n            "
            },
            "desc": "Replace with `&rdquo;`."
          }
        ]
      },
      {
        "ruleId": "react/no-unescaped-entities",
        "severity": 2,
        "message": "`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.",
        "line": 42,
        "column": 42,
        "nodeType": "JSXText",
        "messageId": "unescapedEntityAlts",
        "suggestions": [
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&quot;" },
            "fix": {
              "range": [1523, 1701],
              "text": "\n              The game is provided \"as is&quot; without warranties of any kind. We are not responsible\n              for any errors in map data or service interruptions.\n            "
            },
            "desc": "Replace with `&quot;`."
          },
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&ldquo;" },
            "fix": {
              "range": [1523, 1701],
              "text": "\n              The game is provided \"as is&ldquo; without warranties of any kind. We are not responsible\n              for any errors in map data or service interruptions.\n            "
            },
            "desc": "Replace with `&ldquo;`."
          },
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&#34;" },
            "fix": {
              "range": [1523, 1701],
              "text": "\n              The game is provided \"as is&#34; without warranties of any kind. We are not responsible\n              for any errors in map data or service interruptions.\n            "
            },
            "desc": "Replace with `&#34;`."
          },
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&rdquo;" },
            "fix": {
              "range": [1523, 1701],
              "text": "\n              The game is provided \"as is&rdquo; without warranties of any kind. We are not responsible\n              for any errors in map data or service interruptions.\n            "
            },
            "desc": "Replace with `&rdquo;`."
          }
        ]
      }
    ],
    "suppressedMessages": [],
    "errorCount": 2,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import React from 'react';\nimport { useTheme } from '../context/ThemeContext';\nimport { Link } from 'react-router-dom';\n\nconst TermsOfService = () => {\n  const { theme } = useTheme();\n\n  return (\n    <div\n      className={`min-h-screen p-8 ${theme === 'dark' ? 'bg-slate-950 text-slate-300' : 'bg-slate-50 text-slate-700'}`}\n    >\n      <div className=\"max-w-3xl mx-auto\">\n        <div className=\"mb-8\">\n          <Link to=\"/\" className=\"text-sky-500 font-bold hover:underline\">\n            â† Back to Home\n          </Link>\n        </div>\n\n        <h1 className=\"text-4xl font-black mb-8\">Terms of Service</h1>\n\n        <div className=\"space-y-6\">\n          <section>\n            <h2 className=\"text-2xl font-bold mb-3\">1. Acceptance of Terms</h2>\n            <p className=\"opacity-80\">\n              By accessing and using Girify, you agree to be bound by these Terms of Service.\n            </p>\n          </section>\n\n          <section>\n            <h2 className=\"text-2xl font-bold mb-3\">2. User Conduct</h2>\n            <p className=\"opacity-80\">You agree not to:</p>\n            <ul className=\"list-disc pl-5 mt-2 space-y-1 opacity-80\">\n              <li>Use the service for any illegal purpose.</li>\n              <li>Attempt to cheat, exploit, or manipulate game mechanics or leaderboards.</li>\n              <li>Harass or harm other users.</li>\n            </ul>\n          </section>\n\n          <section>\n            <h2 className=\"text-2xl font-bold mb-3\">3. Disclaimer</h2>\n            <p className=\"opacity-80\">\n              The game is provided \"as is\" without warranties of any kind. We are not responsible\n              for any errors in map data or service interruptions.\n            </p>\n          </section>\n\n          <section>\n            <h2 className=\"text-2xl font-bold mb-3\">4. Changes to Terms</h2>\n            <p className=\"opacity-80\">\n              We reserve the right to modify these terms at any time. Continued use of the service\n              constitutes acceptance of new terms.\n            </p>\n          </section>\n\n          <div className=\"pt-8 text-sm opacity-50\">Last updated: January 2026</div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default TermsOfService;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/TopBar.jsx",
    "messages": [
      {
        "ruleId": "max-lines-per-function",
        "severity": 1,
        "message": "Arrow function has too many lines (245). Maximum allowed is 150.",
        "line": 8,
        "column": 16,
        "nodeType": "ArrowFunctionExpression",
        "messageId": "exceed",
        "endLine": 268,
        "endColumn": 2
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'onLogout' is missing in props validation",
        "line": 8,
        "column": 57,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 8,
        "endColumn": 65
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 0,
    "warningCount": 1,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import React, { useState } from 'react';\nimport { useTheme } from '../context/ThemeContext';\n\nimport { motion, AnimatePresence } from 'framer-motion';\nimport Logo from './Logo';\nimport PropTypes from 'prop-types';\n\nconst TopBar = ({ onOpenPage, username, onTriggerLogin, onLogout }) => {\n  const { theme, t } = useTheme();\n  const [menuOpen, setMenuOpen] = useState(false);\n  const [showLoginModal, setShowLoginModal] = useState(false);\n\n  const handleMenuClick = page => {\n    const RESTRICTED_PAGES = ['profile', 'friends', 'leaderboard', 'shop', 'admin'];\n\n    // Auth actions (no restriction check needed)\n    if (page === 'login') {\n      onTriggerLogin('signin');\n      setMenuOpen(false);\n      return;\n    }\n    if (page === 'signup') {\n      onTriggerLogin('signup');\n      setMenuOpen(false);\n      return;\n    }\n    if (page === 'logout') {\n      if (onLogout) {onLogout();}\n      setMenuOpen(false);\n      return;\n    }\n\n    if (RESTRICTED_PAGES.includes(page) && !username) {\n      setShowLoginModal(true);\n      // specific logic: if we are closing menu or keeping it open?\n      // Let's keep menu open or close it? User requirement implies prompting.\n      // Usually better to keep menu open or close it. Let's close menu to show modal clearly.\n      setMenuOpen(false);\n      return;\n    }\n\n    onOpenPage(page);\n    setMenuOpen(false);\n  };\n\n  return (\n    <>\n      <div\n        className={`fixed top-0 left-0 right-0 h-12 z-[4000] flex items-center justify-between px-3 md:px-6 transition-colors duration-300\n                ${theme === 'dark' ? 'bg-slate-700/90 text-white' : 'bg-white/90 text-slate-800'}\nbackdrop-blur-md border-b ${theme === 'dark' ? 'border-slate-600' : 'border-slate-200'}\n`}\n      >\n        {/* Left: Menu & Brand */}\n        <div className=\"flex items-center gap-3 md:gap-4\">\n          <button\n            onClick={() => setMenuOpen(!menuOpen)}\n            className={`p-2 rounded-full transition-colors shrink-0 ${theme === 'dark' ? 'hover:bg-neutral-300' : 'hover:bg-slate-100'} `}\n          >\n            <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M4 6h16M4 12h16M4 18h16\"\n              />\n            </svg>\n          </button>\n          <button\n            onClick={() => onOpenPage(null)}\n            className=\"flex items-center hover:opacity-80 transition-opacity\"\n          >\n            <Logo className=\"h-5 md:h-7 w-auto object-contain\" />\n          </button>\n        </div>\n\n        {/* Right: Controls */}\n        <div className=\"flex items-center gap-2 sm:gap-4\">\n          {/* Theme Toggle */}\n          {/* Theme Toggle Removed */}\n        </div>\n      </div>\n\n      {/* Slide-out Menu */}\n      <AnimatePresence>\n        {menuOpen && (\n          <>\n            {/* Backdrop */}\n            <motion.div\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              onClick={() => setMenuOpen(false)}\n              className=\"fixed inset-0 bg-black/50 z-[6000]\"\n            />\n            {/* Drawer */}\n            <motion.div\n              initial={{ x: '-100%' }}\n              animate={{ x: 0 }}\n              exit={{ x: '-100%' }}\n              transition={{ type: 'spring', damping: 25, stiffness: 200 }}\n              className={`fixed top-0 bottom-0 left-0 w-64 z-[7000] shadow-2xl flex flex-col\n                                    ${theme === 'dark' ? 'bg-neutral-200 text-neutral-900' : 'bg-white text-slate-800'}\n`}\n            >\n              <div className=\"flex justify-between items-center p-6 pb-4 shrink-0\">\n                <h2 className=\"text-xl font-bold\">{t('menu')}</h2>\n                <button onClick={() => setMenuOpen(false)} className=\"p-1 hover:opacity-75\">\n                  <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth={2}\n                      d=\"M6 18L18 6M6 6l12 12\"\n                    />\n                  </svg>\n                </button>\n              </div>\n\n              <nav className=\"flex-1 flex flex-col gap-2 overflow-y-auto px-6 pb-20\">\n                <button\n                  onClick={() => handleMenuClick(null)}\n                  className=\"text-left py-2 px-3 rounded-lg hover:bg-slate-500/10 font-medium text-sky-500 bg-sky-500/10 flex items-center gap-3 shrink-0\"\n                >\n                  <span className=\"text-xl\">ðŸ </span> {t('home')}\n                </button>\n                <button\n                  onClick={() => handleMenuClick('profile')}\n                  className=\"text-left py-2 px-3 rounded-lg hover:bg-slate-500/10 font-medium flex items-center gap-3 shrink-0\"\n                >\n                  <span className=\"text-xl\">ðŸ‘¤</span> {t('myProfile')}\n                </button>\n                <button\n                  onClick={() => handleMenuClick('friends')}\n                  className=\"text-left py-2 px-3 rounded-lg hover:bg-slate-500/10 font-medium flex items-center gap-3 shrink-0\"\n                >\n                  <span className=\"text-xl\">ðŸ‘¥</span> {t('friends')}\n                </button>\n                <button\n                  onClick={() => handleMenuClick('leaderboard')}\n                  className=\"text-left py-2 px-3 rounded-lg hover:bg-slate-500/10 font-medium flex items-center gap-3 shrink-0\"\n                >\n                  <span className=\"text-xl\">ðŸ†</span> {t('leaderboard')}\n                </button>\n                <button\n                  onClick={() => handleMenuClick('shop')}\n                  className=\"text-left py-2 px-3 rounded-lg hover:bg-slate-500/10 font-medium flex items-center gap-3 shrink-0\"\n                >\n                  <span className=\"text-xl\">ðŸ›’</span> {t('shop')}\n                </button>\n                <button\n                  onClick={() => handleMenuClick('about')}\n                  className=\"text-left py-2 px-3 rounded-lg hover:bg-slate-500/10 font-medium flex items-center gap-3 shrink-0\"\n                >\n                  <span className=\"text-xl\">â„¹ï¸</span> {t('about')}\n                </button>\n                <button\n                  onClick={() => handleMenuClick('news')}\n                  className=\"text-left py-2 px-3 rounded-lg hover:bg-slate-500/10 font-medium flex items-center gap-3 shrink-0\"\n                >\n                  <span className=\"text-xl\">ðŸ“°</span> {t('news') || 'News'}\n                </button>\n                <button\n                  onClick={() => handleMenuClick('feedback')}\n                  className=\"text-left py-2 px-3 rounded-lg hover:bg-slate-500/10 font-medium flex items-center gap-3 shrink-0\"\n                >\n                  <span className=\"text-xl\">ðŸ“</span> {t('feedback') || 'Feedback'}\n                </button>\n                <button\n                  onClick={() => handleMenuClick('settings')}\n                  className=\"text-left py-2 px-3 rounded-lg hover:bg-slate-500/10 font-medium flex items-center gap-3 shrink-0\"\n                >\n                  <span className=\"text-xl\">âš™ï¸</span> {t('settings')}\n                </button>\n\n                {/* Auth Actions in Menu */}\n                <div className=\"h-px bg-slate-200 dark:bg-slate-700 my-2 shrink-0\" />\n\n                {!username ? (\n                  <>\n                    <button\n                      onClick={() => handleMenuClick('login')}\n                      className=\"text-left py-2 px-3 rounded-lg hover:bg-emerald-500/10 font-bold text-emerald-600 dark:text-emerald-400 flex items-center gap-3 shrink-0\"\n                    >\n                      <span className=\"text-xl\">ðŸ”‘</span> Sign In\n                    </button>\n                    <button\n                      onClick={() => handleMenuClick('signup')}\n                      className=\"text-left py-2 px-3 rounded-lg hover:bg-sky-500/10 font-bold text-sky-500 flex items-center gap-3 shrink-0\"\n                    >\n                      <span className=\"text-xl\">âœ¨</span> Sign Up\n                    </button>\n                  </>\n                ) : (\n                  <button\n                    onClick={() => handleMenuClick('logout')}\n                    className=\"text-left py-2 px-3 rounded-lg hover:bg-red-500/10 font-bold text-red-500 flex items-center gap-3 shrink-0\"\n                  >\n                    <span className=\"text-xl\">ðŸšª</span> Log Out\n                  </button>\n                )}\n              </nav>\n\n              <div className=\"mb-6 mx-6 p-2 text-xs text-slate-500 text-center shrink-0\">\n                v1.0.1 Girify\n              </div>\n            </motion.div>\n          </>\n        )}\n      </AnimatePresence>\n\n      {/* Login Required Modal */}\n      <AnimatePresence>\n        {showLoginModal && (\n          <div className=\"fixed inset-0 z-[8000] flex items-center justify-center p-4\">\n            <motion.div\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              onClick={() => setShowLoginModal(false)}\n              className=\"absolute inset-0 bg-black/50 backdrop-blur-sm\"\n            />\n            <motion.div\n              initial={{ scale: 0.9, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              exit={{ scale: 0.9, opacity: 0 }}\n              className={`relative z-10 w-full max-w-sm p-6 rounded-2xl shadow-xl text-center\n                        ${theme === 'dark' ? 'bg-slate-800 text-white' : 'bg-white text-slate-800'}\n                    `}\n            >\n              <h3 className=\"text-xl font-black mb-2\">{t('loginRequired') || 'Login Required'}</h3>\n              <p className=\"mb-6 opacity-70\">\n                {t('loginRequiredMessage') ||\n                  'Join the Girify community! Create a profile to track your progress, earn badges, and compete on the leaderboard.'}\n              </p>\n              <div className=\"flex flex-col gap-3\">\n                <button\n                  onClick={() => {\n                    setShowLoginModal(false);\n                    onTriggerLogin('signup');\n                  }}\n                  className=\"w-full py-3 bg-sky-500 hover:bg-sky-600 text-white rounded-xl font-bold shadow-lg shadow-sky-500/20 active:scale-95 transition-all\"\n                >\n                  Sign Up\n                </button>\n                <button\n                  onClick={() => {\n                    setShowLoginModal(false);\n                    onTriggerLogin('signin');\n                  }}\n                  className=\"w-full py-3 bg-white border-2 border-slate-200 hover:bg-slate-50 dark:bg-slate-800 dark:border-slate-700 text-slate-900 dark:text-white rounded-xl font-bold transition-all\"\n                >\n                  Sign In\n                </button>\n                <button\n                  onClick={() => setShowLoginModal(false)}\n                  className=\"w-full py-3 text-slate-500 hover:text-slate-800 dark:hover:text-white font-medium transition-colors\"\n                >\n                  {t('cancel') || 'Cancel'}\n                </button>\n              </div>\n            </motion.div>\n          </div>\n        )}\n      </AnimatePresence>\n    </>\n  );\n};\n\nTopBar.propTypes = {\n  onOpenPage: PropTypes.func.isRequired,\n  username: PropTypes.string,\n  onTriggerLogin: PropTypes.func,\n};\n\nexport default TopBar;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/VerifyEmailScreen.jsx",
    "messages": [
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'theme' is missing in props validation",
        "line": 6,
        "column": 30,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 6,
        "endColumn": 35
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import React from 'react';\nimport { useTheme } from '../context/ThemeContext';\nimport { auth } from '../firebase';\nimport { sendEmailVerification } from 'firebase/auth';\n\nconst VerifyEmailScreen = ({ theme }) => {\n  const { t } = useTheme();\n  const [sent, setSent] = React.useState(false);\n\n  const handleResend = async () => {\n    if (auth.currentUser) {\n      await sendEmailVerification(auth.currentUser);\n      setSent(true);\n    }\n  };\n\n  return (\n    <div\n      className={`min-h-screen flex flex-col items-center justify-center p-6 text-center ${\n        theme === 'dark' ? 'bg-slate-950 text-white' : 'bg-slate-50 text-slate-900'\n      }`}\n    >\n      <div className=\"max-w-md w-full glass-panel p-8\">\n        <div className=\"text-6xl mb-6\">ðŸ“§</div>\n        <h1 className=\"text-3xl font-black mb-4\">{t('verifyEmail') || 'Verify Your Email'}</h1>\n        <p className=\"text-lg opacity-80 mb-8\">\n          {t('verifyEmailMessage') ||\n            \"We've sent a verification link to your email address. Please click it to unlock the full game!\"}\n        </p>\n\n        <div className=\"bg-slate-100 dark:bg-slate-900/50 p-4 rounded-xl mb-8 font-mono text-sm opacity-70\">\n          {auth.currentUser?.email}\n        </div>\n\n        <div className=\"space-y-4\">\n          <button\n            onClick={() => window.location.reload()}\n            className=\"w-full py-3 bg-emerald-500 hover:bg-emerald-600 text-white rounded-xl font-bold shadow-lg transition-all\"\n          >\n            {t('iHaveVerified') || \"I've Verified It!\"}\n          </button>\n\n          <button\n            onClick={handleResend}\n            disabled={sent}\n            className=\"w-full py-3 bg-sky-500/10 text-sky-500 hover:bg-sky-500 hover:text-white rounded-xl font-bold transition-all\"\n          >\n            {sent ? 'Sent!' : t('resendEmail') || 'Resend Email'}\n          </button>\n\n          <button\n            onClick={() => auth.signOut()}\n            className=\"text-sm opacity-50 hover:opacity-100 underline mt-4\"\n          >\n            {t('logout') || 'Log Out'}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default VerifyEmailScreen;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/__tests__/GameScreen.test.tsx",
    "messages": [
      {
        "ruleId": "react/display-name",
        "severity": 2,
        "message": "Component definition is missing display name",
        "line": 10,
        "column": 21,
        "nodeType": "ArrowFunctionExpression",
        "messageId": "noDisplayName",
        "endLine": 10,
        "endColumn": 75
      },
      {
        "ruleId": "react/display-name",
        "severity": 2,
        "message": "Component definition is missing display name",
        "line": 11,
        "column": 24,
        "nodeType": "ArrowFunctionExpression",
        "messageId": "noDisplayName",
        "endLine": 11,
        "endColumn": 68
      },
      {
        "ruleId": "react/display-name",
        "severity": 2,
        "message": "Component definition is missing display name",
        "line": 12,
        "column": 22,
        "nodeType": "ArrowFunctionExpression",
        "messageId": "noDisplayName",
        "endLine": 12,
        "endColumn": 66
      },
      {
        "ruleId": "react/display-name",
        "severity": 2,
        "message": "Component definition is missing display name",
        "line": 13,
        "column": 22,
        "nodeType": "ArrowFunctionExpression",
        "messageId": "noDisplayName",
        "endLine": 17,
        "endColumn": 4
      },
      {
        "ruleId": "react/display-name",
        "severity": 2,
        "message": "Component definition is missing display name",
        "line": 18,
        "column": 20,
        "nodeType": "ArrowFunctionExpression",
        "messageId": "noDisplayName",
        "endLine": 22,
        "endColumn": 4
      },
      {
        "ruleId": "react/display-name",
        "severity": 2,
        "message": "Component definition is missing display name",
        "line": 23,
        "column": 25,
        "nodeType": "ArrowFunctionExpression",
        "messageId": "noDisplayName",
        "endLine": 27,
        "endColumn": 4
      }
    ],
    "suppressedMessages": [],
    "errorCount": 6,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { describe, it, expect, vi } from 'vitest';\nimport { render, screen, fireEvent } from '@testing-library/react';\nimport GameScreen from '../GameScreen';\nimport { BrowserRouter } from 'react-router-dom';\n\n// Mock dependencies\nvi.mock('../MapArea', () => ({ default: () => <div data-testid=\"map-area\">Map Area</div> }));\nvi.mock('../Quiz', () => {\n  const MockQuiz = ({ children }: any) => <div data-testid=\"quiz\">{children}</div>;\n  MockQuiz.Banner = () => <div data-testid=\"quiz-banner\">Quiz Banner</div>;\n  MockQuiz.Container = ({ children }: any) => <div>{children}</div>;\n  MockQuiz.Content = ({ children }: any) => <div>{children}</div>;\n  MockQuiz.Options = ({ onSelect }: any) => (\n    <div data-testid=\"quiz-options\">\n      <button onClick={() => onSelect({ id: 'street1', name: 'Test Street' })}>Option 1</button>\n    </div>\n  );\n  MockQuiz.Hints = ({ onReveal }: any) => (\n    <div data-testid=\"quiz-hints\">\n      <button onClick={onReveal}>Reveal Hint</button>\n    </div>\n  );\n  MockQuiz.NextButton = ({ onNext }: any) => (\n    <button data-testid=\"next-button\" onClick={onNext}>\n      Next\n    </button>\n  );\n  return { default: MockQuiz };\n});\nvi.mock('../RegisterPanel', () => ({\n  default: ({ onRegister }: any) => (\n    <div data-testid=\"register-panel\">\n      <button onClick={() => onRegister('@testuser')}>Register</button>\n    </div>\n  ),\n}));\nvi.mock('../SummaryScreen', () => ({\n  default: () => <div data-testid=\"summary-screen\">Summary</div>,\n}));\nvi.mock('../LandingPage', () => ({\n  default: ({ onStart, onLogin }: any) => (\n    <div data-testid=\"landing-page\">\n      <button onClick={onStart}>Start</button>\n      <button onClick={onLogin}>Login</button>\n    </div>\n  ),\n}));\nvi.mock('../Logo', () => ({ default: () => <div>Logo</div> }));\nvi.mock('../OnboardingTour', () => ({\n  default: () => <div data-testid=\"onboarding\">Onboarding</div>,\n}));\n\n// Mock utils\nvi.mock('../../utils/dailyChallenge', () => ({\n  hasPlayedToday: vi.fn(() => false),\n}));\n\nconst mockDispatch = vi.fn();\nconst mockSetupGame = vi.fn();\nconst mockHandleRegister = vi.fn();\nconst mockHandleSelectAnswer = vi.fn();\nconst mockHandleNext = vi.fn();\nconst mockProcessAnswer = vi.fn();\n\nconst defaultProps = {\n  state: {\n    username: null,\n    gameState: 'intro',\n    score: 0,\n    streak: 0,\n    quizStreets: [],\n    currentQuestionIndex: 0,\n    quizResults: [],\n    hintStreets: [],\n    hintsRevealedCount: 0,\n    options: [],\n    feedback: 'idle',\n    autoAdvance: false,\n    selectedAnswer: null,\n    isInputLocked: false,\n    profileLoaded: false,\n  },\n  dispatch: mockDispatch,\n  theme: 'light',\n  deviceMode: 'desktop',\n  t: (key: string) => key,\n  currentStreet: null,\n  handleSelectAnswer: mockHandleSelectAnswer,\n  handleNext: mockHandleNext,\n  processAnswer: mockProcessAnswer,\n  setupGame: mockSetupGame,\n  handleRegister: mockHandleRegister,\n  hasPlayedToday: () => false,\n};\n\nconst renderGameScreen = (props: any = {}) => {\n  return render(\n    <BrowserRouter>\n      <GameScreen {...defaultProps} {...props} />\n    </BrowserRouter>\n  );\n};\n\ndescribe('GameScreen Component', () => {\n  it('renders LandingPage when not logged in and in intro state', () => {\n    renderGameScreen();\n    expect(screen.getByTestId('landing-page')).toBeInTheDocument();\n  });\n\n  it('renders Play button when logged in and in intro state', () => {\n    renderGameScreen({\n      state: { ...defaultProps.state, username: '@TestUser', profileLoaded: true },\n    });\n    // Checks for \"play\" text (t('play'))\n    expect(screen.getByText('play')).toBeInTheDocument();\n  });\n\n  it('calls setupGame when Play button is clicked', () => {\n    renderGameScreen({\n      state: { ...defaultProps.state, username: '@TestUser', profileLoaded: true },\n    });\n\n    const playBtn = screen.getByText('play');\n    fireEvent.click(playBtn.closest('button')!);\n\n    expect(mockSetupGame).toHaveBeenCalled();\n  });\n\n  it('renders RegisterPanel when in register state', () => {\n    renderGameScreen({\n      state: { ...defaultProps.state, gameState: 'register' },\n    });\n    expect(screen.getByTestId('register-panel')).toBeInTheDocument();\n  });\n\n  it('renders MapArea and Quiz when playing', () => {\n    renderGameScreen({\n      state: {\n        ...defaultProps.state,\n        gameState: 'playing',\n        username: '@TestUser',\n        quizStreets: [{ id: '1', name: 'Street' }],\n      },\n    });\n    expect(screen.getByTestId('map-area')).toBeInTheDocument();\n    expect(screen.getByTestId('quiz')).toBeInTheDocument();\n    expect(screen.getByTestId('quiz-banner')).toBeInTheDocument();\n  });\n\n  it('renders SummaryScreen when in summary state', () => {\n    renderGameScreen({\n      state: { ...defaultProps.state, gameState: 'summary', username: '@TestUser' },\n    });\n    expect(screen.getByTestId('summary-screen')).toBeInTheDocument();\n  });\n});\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/icons/CatalanFlag.jsx",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/icons/SpanishFlag.jsx",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/icons/UKFlag.jsx",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/components/stories/TopBar.stories.jsx",
    "messages": [
      {
        "ruleId": "no-empty-function",
        "severity": 1,
        "message": "Unexpected empty method 'onMenu'.",
        "line": 12,
        "column": 19,
        "nodeType": "ArrowFunctionExpression",
        "messageId": "unexpected",
        "endLine": 12,
        "endColumn": 21,
        "suggestions": [
          {
            "messageId": "suggestComment",
            "data": { "name": "method 'onMenu'" },
            "fix": { "range": [215, 215], "text": " /* empty */ " },
            "desc": "Add comment inside empty method 'onMenu'."
          }
        ]
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 1,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import TopBar from '../TopBar';\n\nexport default {\n  title: 'Components/TopBar',\n  component: TopBar,\n  parameters: {\n    layout: 'fullscreen',\n  },\n  args: {\n    score: 1500,\n    bestScore: 2400,\n    onMenu: () => {},\n    theme: 'dark',\n  },\n  argTypes: {\n    theme: {\n      control: { type: 'select' },\n      options: ['light', 'dark'],\n    },\n  },\n};\n\nexport const Default = {};\n\nexport const LightMode = {\n  args: {\n    theme: 'light',\n  },\n};\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/config/constants.ts",
    "messages": [
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 60.",
        "line": 4,
        "column": 15,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 4,
        "endColumn": 17
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1000.",
        "line": 4,
        "column": 20,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 4,
        "endColumn": 24
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 60.",
        "line": 5,
        "column": 13,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 5,
        "endColumn": 15
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 60.",
        "line": 5,
        "column": 18,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 5,
        "endColumn": 20
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1000.",
        "line": 5,
        "column": 23,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 5,
        "endColumn": 27
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 24.",
        "line": 6,
        "column": 12,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 6,
        "endColumn": 14
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 60.",
        "line": 6,
        "column": 17,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 6,
        "endColumn": 19
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 60.",
        "line": 6,
        "column": 22,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 6,
        "endColumn": 24
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1000.",
        "line": 6,
        "column": 27,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 6,
        "endColumn": 31
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 7.",
        "line": 7,
        "column": 13,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 7,
        "endColumn": 14
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 24.",
        "line": 7,
        "column": 17,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 7,
        "endColumn": 19
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 60.",
        "line": 7,
        "column": 22,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 7,
        "endColumn": 24
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 60.",
        "line": 7,
        "column": 27,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 7,
        "endColumn": 29
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1000.",
        "line": 7,
        "column": 32,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 7,
        "endColumn": 36
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 7.",
        "line": 51,
        "column": 22,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 51,
        "endColumn": 23
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 15,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "// ==================== TIME CONSTANTS ====================\nexport const TIME = {\n  ONE_SECOND: 1000,\n  ONE_MINUTE: 60 * 1000,\n  ONE_HOUR: 60 * 60 * 1000,\n  ONE_DAY: 24 * 60 * 60 * 1000,\n  ONE_WEEK: 7 * 24 * 60 * 60 * 1000,\n\n  // Specific timeouts\n  FEEDBACK_DELAY: 2000,\n  AUTO_ADVANCE_DELAY: 1000,\n  ANIMATION_DURATION: 300,\n} as const;\n\n// ==================== GAME CONFIG ====================\nexport const GAME = {\n  QUESTIONS_PER_GAME: 10,\n  MAX_HINTS: 3,\n  TIME_BONUS_THRESHOLD: 5, // seconds\n\n  // Scoring\n  POINTS: {\n    CORRECT_BASE: 100,\n    TIME_BONUS_MAX: 50,\n    HINT_PENALTY: 20,\n    STREAK_MULTIPLIER: 1.1,\n  },\n} as const;\n\n// ==================== USER SYSTEM ====================\nexport const USER = {\n  USERNAME: {\n    MIN_LENGTH: 3,\n    MAX_LENGTH: 20,\n    CORE_NAME_MAX: 10, // chars before 4-digit suffix\n    SUFFIX_MIN: 1000,\n    SUFFIX_MAX: 9999,\n    DEFAULT_NAME: 'User',\n  },\n\n  HANDLE_FORMATS: {\n    OLD_REGEX: /.*#\\d{4}$/,\n    NEW_REGEX: /^@[a-zA-Z0-9]+\\d{4}$/,\n    EXCESSIVE_DIGITS: /\\d{5,}$/,\n  },\n};\n\n// ==================== FEEDBACK & PROMPTS ====================\nexport const FEEDBACK = {\n  PROMPT_INTERVAL: TIME.ONE_WEEK,\n  PROMPT_CHANCE: 1 / 7, // 14.3% chance per completion\n  MIN_GAMES_BEFORE_PROMPT: 5,\n};\n\n// ==================== MIGRATION & SYNC ====================\nexport const MIGRATION = {\n  MAX_HISTORY_UPLOAD: 500, // prevent rate limit\n  BATCH_SIZE: 50,\n  RETRY_ATTEMPTS: 3,\n};\n\n// ==================== REWARDS ====================\nexport const REWARDS = {\n  DAILY_LOGIN: 10,\n  CHALLENGE_COMPLETE: 50,\n  STREAK_BONUS_PER_DAY: 5,\n  REFERRAL_BONUS: 100,\n  FEEDBACK_APPROVAL: 25,\n};\n\n// ==================== STORAGE KEYS ====================\nexport const STORAGE_KEYS = {\n  USERNAME: 'girify_username',\n  HISTORY: 'girify_history',\n  LAST_FEEDBACK: 'girify_last_feedback',\n  AUTO_ADVANCE: 'girify_auto_advance',\n  PURCHASED: 'girify_purchased',\n  EQUIPPED: 'girify_equipped',\n  GIUROS: 'girify_giuros',\n  REFERRER: 'girify_referrer',\n  JOINED: 'girify_joined',\n\n  // Migration flags\n  HISTORY_SYNCED: 'girify_history_synced',\n  COSMETICS_SYNCED: 'girify_cosmetics_synced',\n\n  // App state\n  THEME_MODE: 'girify_theme_mode',\n  LANGUAGE: 'girify_language',\n  ONBOARDING_COMPLETED: 'girify_onboarding_completed',\n  INSTRUCTIONS_SEEN: 'girify_instructions_seen',\n  REAL_NAME: 'girify_realName',\n};\n\n// ==================== STREET FILTERS ====================\nexport const STREET_FILTERS = {\n  EXCLUDED_TYPES: ['autopista', 'autovia', 'ronda', 'b-1', 'b-2'],\n  MIN_GEOMETRY_LENGTH: 1,\n};\n\n// ==================== API LIMITS ====================\nexport const API = {\n  RATE_LIMIT_DELAY: 100, // ms between requests\n  MAX_RETRIES: 3,\n  TIMEOUT: 10000, // 10 seconds\n};\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/config/gameConfig.ts",
    "messages": [
      {
        "ruleId": "radix",
        "severity": 2,
        "message": "Missing radix parameter.",
        "line": 32,
        "column": 56,
        "nodeType": "CallExpression",
        "messageId": "missingRadix",
        "endLine": 32,
        "endColumn": 82,
        "suggestions": [
          {
            "messageId": "addRadixParameter10",
            "fix": { "range": [1034, 1034], "text": ", 10" },
            "desc": "Add radix parameter `10` for parsing decimal numbers."
          }
        ]
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { GAME, REWARDS, FEEDBACK } from './constants';\n\nexport const calculateScore = (timeElapsed: number, isCorrect: boolean, hintsUsed: number): number => {\n  if (!isCorrect) {return 0;}\n\n  let score = GAME.POINTS.CORRECT_BASE;\n\n  // Time bonus (faster = more points)\n  if (timeElapsed < GAME.TIME_BONUS_THRESHOLD) {\n    const timeBonus = Math.floor(\n      GAME.POINTS.TIME_BONUS_MAX * (1 - timeElapsed / GAME.TIME_BONUS_THRESHOLD)\n    );\n    score += timeBonus;\n  }\n\n  // Hint penalty\n  score -= hintsUsed * GAME.POINTS.HINT_PENALTY;\n\n  return Math.max(0, score);\n};\n\nexport const calculateStreakBonus = (streakDays: number): number => {\n  return REWARDS.CHALLENGE_COMPLETE + streakDays * REWARDS.STREAK_BONUS_PER_DAY;\n};\n\nexport const shouldPromptFeedback = (lastFeedbackTime: string | null | undefined, gamesPlayed: number = 10): boolean => {\n  if (gamesPlayed < FEEDBACK.MIN_GAMES_BEFORE_PROMPT) {\n    return false;\n  }\n\n  const now = Date.now();\n  const timeSinceLastPrompt = lastFeedbackTime ? now - parseInt(lastFeedbackTime) : Infinity;\n\n  return timeSinceLastPrompt > FEEDBACK.PROMPT_INTERVAL && Math.random() < FEEDBACK.PROMPT_CHANCE;\n};\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/context/LoadingContext.tsx",
    "messages": [
      {
        "ruleId": "react-refresh/only-export-components",
        "severity": 1,
        "message": "Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.",
        "line": 42,
        "column": 14,
        "nodeType": "Identifier",
        "messageId": "namedExport",
        "endLine": 42,
        "endColumn": 24
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 1,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { createContext, useContext, useState, FC, ReactNode } from 'react';\n\ninterface LoadingState {\n  [key: string]: boolean;\n}\n\ninterface LoadingContextType {\n  loading: LoadingState;\n  startLoading: (key: string) => void;\n  stopLoading: (key: string) => void;\n  isLoading: (key: string) => boolean;\n  isAnyLoading: () => boolean;\n}\n\nconst LoadingContext = createContext<LoadingContextType | undefined>(undefined);\n\nexport const LoadingProvider: FC<{ children: ReactNode }> = ({ children }) => {\n  const [loading, setLoading] = useState<LoadingState>({});\n\n  const startLoading = (key: string) => {\n    setLoading(prev => ({ ...prev, [key]: true }));\n  };\n\n  const stopLoading = (key: string) => {\n    setLoading(prev => ({ ...prev, [key]: false }));\n  };\n\n  const isLoading = (key: string) => loading[key] || false;\n\n  const isAnyLoading = () => Object.values(loading).some(v => v);\n\n  return (\n    <LoadingContext.Provider\n      value={{ loading, startLoading, stopLoading, isLoading, isAnyLoading }}\n    >\n      {children}\n      {isAnyLoading() && <GlobalLoadingIndicator />}\n    </LoadingContext.Provider>\n  );\n};\n\nexport const useLoading = () => {\n  const context = useContext(LoadingContext);\n  if (!context) {\n    throw new Error('useLoading must be used within LoadingProvider');\n  }\n  return context;\n};\n\n// Global loading indicator (top bar)\nconst GlobalLoadingIndicator = () => (\n  <div className=\"fixed top-0 left-0 right-0 h-1 bg-blue-500/20 z-[9999]\" role=\"progressbar\">\n    <div className=\"h-full bg-sky-500 animate-loading-bar shadow-[0_0_10px_#0ea5e9]\" />\n  </div>\n);\n\nexport default LoadingContext;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/context/NotificationContext.tsx",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/context/ThemeContext.jsx",
    "messages": [
      {
        "ruleId": "react-refresh/only-export-components",
        "severity": 1,
        "message": "Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.",
        "line": 6,
        "column": 14,
        "nodeType": "Identifier",
        "messageId": "namedExport",
        "endLine": 6,
        "endColumn": 22
      },
      {
        "ruleId": "no-empty-function",
        "severity": 1,
        "message": "Unexpected empty method 'changeLanguage'.",
        "line": 13,
        "column": 29,
        "nodeType": "ArrowFunctionExpression",
        "messageId": "unexpected",
        "endLine": 13,
        "endColumn": 31,
        "suggestions": [
          {
            "messageId": "suggestComment",
            "data": { "name": "method 'changeLanguage'" },
            "fix": { "range": [450, 450], "text": " /* empty */ " },
            "desc": "Add comment inside empty method 'changeLanguage'."
          }
        ]
      },
      {
        "ruleId": "no-empty-function",
        "severity": 1,
        "message": "Unexpected empty method 'toggleTheme'.",
        "line": 14,
        "column": 26,
        "nodeType": "ArrowFunctionExpression",
        "messageId": "unexpected",
        "endLine": 14,
        "endColumn": 28,
        "suggestions": [
          {
            "messageId": "suggestComment",
            "data": { "name": "method 'toggleTheme'" },
            "fix": { "range": [479, 479], "text": " /* empty */ " },
            "desc": "Add comment inside empty method 'toggleTheme'."
          }
        ]
      },
      {
        "ruleId": "no-empty-function",
        "severity": 1,
        "message": "Unexpected empty method 'setZoom'.",
        "line": 19,
        "column": 22,
        "nodeType": "ArrowFunctionExpression",
        "messageId": "unexpected",
        "endLine": 19,
        "endColumn": 24,
        "suggestions": [
          {
            "messageId": "suggestComment",
            "data": { "name": "method 'setZoom'" },
            "fix": { "range": [590, 590], "text": " /* empty */ " },
            "desc": "Add comment inside empty method 'setZoom'."
          }
        ]
      },
      {
        "ruleId": "react/prop-types",
        "severity": 2,
        "message": "'children' is missing in props validation",
        "line": 25,
        "column": 33,
        "nodeType": "Property",
        "messageId": "missingPropType",
        "endLine": 25,
        "endColumn": 41
      },
      {
        "ruleId": "react-hooks/set-state-in-effect",
        "severity": 2,
        "message": "Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  43 |     // Only update if changed to avoid cascading renders warning\n  44 |     if (newTheme !== theme) {\n> 45 |       setTheme(newTheme);\n     |       ^^^^^^^^ Avoid calling setState() directly within an effect\n  46 |     }\n  47 |     document.documentElement.setAttribute('class', newTheme);\n  48 |     localStorage.setItem('girify_theme_mode', themeMode); // Persist preference",
        "line": 45,
        "column": 7,
        "nodeType": null,
        "endLine": 45,
        "endColumn": 15
      },
      {
        "ruleId": "consistent-return",
        "severity": 2,
        "message": "Arrow function expected no return value.",
        "line": 63,
        "column": 5,
        "nodeType": "ReturnStatement",
        "messageId": "unexpectedReturnValue",
        "endLine": 63,
        "endColumn": 73
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 768.",
        "line": 82,
        "column": 17,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 82,
        "endColumn": 20
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1024.",
        "line": 83,
        "column": 17,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 83,
        "endColumn": 21
      }
    ],
    "suppressedMessages": [],
    "errorCount": 3,
    "fatalErrorCount": 0,
    "warningCount": 6,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import React, { createContext, useContext, useState, useEffect } from 'react';\nimport { getTranslation, LANGUAGES } from '../i18n/translations';\n\nconst ThemeContext = createContext();\n\nexport const useTheme = () => {\n  const context = useContext(ThemeContext);\n  if (!context) {\n    // Defensive coding: Return default values if used outside provider (e.g. tests)\n    return {\n      theme: 'light',\n      language: 'en',\n      changeLanguage: () => {},\n      toggleTheme: () => {},\n      languages: [],\n      t: key => key,\n      deviceMode: 'desktop',\n      zoom: 1,\n      setZoom: () => {},\n    };\n  }\n  return context;\n};\n\nexport const ThemeProvider = ({ children }) => {\n  // Theme: 'light' | 'dark' | 'auto'\n  const [themeMode, setThemeMode] = useState(() => {\n    return localStorage.getItem('girify_theme_mode') || 'auto';\n  });\n\n  const [theme, setTheme] = useState('light'); // Actual resolved theme\n\n  // Resolve Auto theme\n  useEffect(() => {\n    const resolveTheme = () => {\n      if (themeMode === 'auto') {\n        return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\n      }\n      return themeMode;\n    };\n\n    const newTheme = resolveTheme();\n    // Only update if changed to avoid cascading renders warning\n    if (newTheme !== theme) {\n      setTheme(newTheme);\n    }\n    document.documentElement.setAttribute('class', newTheme);\n    localStorage.setItem('girify_theme_mode', themeMode); // Persist preference\n  }, [themeMode, theme]);\n\n  // Listen for system changes if auto\n  useEffect(() => {\n    if (themeMode !== 'auto') {return;}\n    const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\n    const handleChange = e => {\n      if (themeMode === 'auto') {\n        const newTheme = e.matches ? 'dark' : 'light';\n        setTheme(newTheme);\n        document.documentElement.setAttribute('class', newTheme);\n      }\n    };\n    mediaQuery.addEventListener('change', handleChange);\n    return () => mediaQuery.removeEventListener('change', handleChange);\n  }, [themeMode]);\n\n  // Language: 'en' | 'es' | 'ca'\n  const [language, setLanguage] = useState(() => {\n    const saved = localStorage.getItem('girify_language');\n    if (saved) {return saved;}\n    // Auto-detect from browser\n    const browserLang = navigator.language?.split('-')[0];\n    if (['es', 'ca'].includes(browserLang)) {return browserLang;}\n    return 'en';\n  });\n\n  // Zoom State\n  const [zoom, setZoom] = useState(1);\n\n  // Auto-detect device mode based on viewport width\n  const getDeviceMode = () => {\n    const width = window.innerWidth;\n    if (width < 768) {return 'mobile';}\n    if (width < 1024) {return 'tablet';}\n    return 'desktop';\n  };\n\n  const [deviceMode, setDeviceMode] = useState(getDeviceMode());\n\n  // Listen for window resize to update device mode\n  useEffect(() => {\n    const handleResize = () => {\n      setDeviceMode(getDeviceMode());\n    };\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  const changeTheme = mode => {\n    setThemeMode(mode);\n  };\n\n  // Deprecated single toggle, mapped to cycle\n  const toggleTheme = () => {\n    setThemeMode(prev => (prev === 'light' ? 'dark' : 'light'));\n  };\n\n  const changeLanguage = lang => {\n    setLanguage(lang);\n    localStorage.setItem('girify_language', lang);\n  };\n\n  // Translation helper\n  const t = key => getTranslation(language, key);\n\n  useEffect(() => {\n    // Apply theme data-attribute to html or body for Tailwind dark mode if configured\n    document.documentElement.setAttribute('class', theme);\n  }, [theme]);\n\n  return (\n    <ThemeContext.Provider\n      value={{\n        theme,\n        themeMode,\n        changeTheme,\n        toggleTheme,\n        deviceMode,\n        zoom,\n        setZoom,\n        language,\n        changeLanguage,\n        languages: LANGUAGES,\n        t,\n      }}\n    >\n      {children}\n    </ThemeContext.Provider>\n  );\n};\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/data/achievements.ts",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 309,
        "column": 48,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 309,
        "endColumn": 51,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [8516, 8519], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [8516, 8519], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 397,
        "column": 43,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 397,
        "endColumn": 46,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [11642, 11645], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [11642, 11645], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 0.99.",
        "line": 425,
        "column": 58,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 425,
        "endColumn": 62
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 3,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "/**\n * Achievement Badges - Earned through gameplay milestones\n * These are separate from purchasable cosmetics\n *\n * Categories:\n * - starter: Basic gameplay milestones\n * - guiri_path: Tourist-themed comedy badges\n * - local_path: Local knowledge badges\n * - high_roller: Premium shop badges\n * - urban_survival: City life challenges\n * - gastronomy: Food & drink themed\n * - digital_nomad: Remote worker experience\n */\n\nexport interface AchievementCriteria {\n  gamesPlayed?: number;\n  bestScore?: number;\n  streak?: number;\n  wrongStreak?: number;\n  totalPanKm?: number;\n  consecutiveDays?: number;\n  gamesWithoutQuitting?: number;\n  eixampleCorners?: number;\n  gothicStreak?: number;\n  bornGuesses?: number;\n  poblenouGuesses?: number;\n  foodStreetsPerfect?: number;\n  nightPlay?: boolean;\n  ramblasQuickGuess?: boolean;\n  precisionGuess?: boolean;\n  fastLoss?: boolean;\n  speedModeHighScore?: boolean;\n  inviteCount?: number;\n}\n\nexport type AchievementCategory = 'starter' | 'social' | 'guiri_path' | 'local_path' | 'high_roller' | 'urban_survival' | 'gastronomy' | 'digital_nomad';\nexport type AchievementType = 'merit' | 'shop';\n\nexport interface Achievement {\n  id: string;\n  image?: string;\n  name: string;\n  description: string;\n  category: AchievementCategory;\n  type: AchievementType;\n  criteria?: AchievementCriteria;\n  flavorText?: string;\n  cost?: number;\n  emoji?: string;\n  progress?: number;\n}\n\n// Emoji mapping for badges (fallback if no image)\nexport const ACHIEVEMENT_BADGES: Achievement[] = [\n  // === SOCIAL ===\n  {\n    id: 'badge_gentrificador',\n    image: '/badges/badge_gentrificador.png',\n    name: 'The Gentrificador',\n    description: 'You told 3 friends about the city. Now rent is going up 50%.',\n    category: 'social',\n    type: 'merit',\n    criteria: { inviteCount: 3 },\n    flavorText: 'Invite 3 friends',\n  },\n  {\n    id: 'badge_tour_guide',\n    image: '/badges/badge_tour_guide.png',\n    name: 'Unofficial Guide',\n    description: 'You are basically leading groups with an umbrella now.',\n    category: 'social',\n    type: 'merit',\n    criteria: { inviteCount: 10 },\n    flavorText: 'Invite 10 friends',\n  },\n  {\n    id: 'badge_influencer',\n    image: '/badges/badge_influencer.png',\n    name: 'Barcelona Influencer',\n    description: '\"Check out this hidden gem!\" (It is a Starbucks).',\n    category: 'social',\n    type: 'merit',\n    criteria: { inviteCount: 25 },\n    flavorText: 'Invite 25 friends',\n  },\n\n  // === STARTER (General Gameplay) ===\n  {\n    id: 'badge_first_game',\n    image: '/badges/badge_first_game.png',\n    name: 'Fresh Guiri',\n    description: 'You just arrived. Careful with the Sangria, it is strong.',\n    category: 'starter',\n    type: 'merit',\n    criteria: { gamesPlayed: 1 },\n  },\n  {\n    id: 'badge_explorer',\n    image: '/badges/badge_explorer.png',\n    name: 'Ramblas Survivor',\n    description: 'You walked 5 times without buying a flying magnet. Impressive.',\n    category: 'starter',\n    type: 'merit',\n    criteria: { gamesPlayed: 5 },\n  },\n  {\n    id: 'badge_scholar',\n    image: '/badges/badge_scholar.png',\n    name: 'Metro Master',\n    description: 'You know that L1 is a sauna and L5 smells funny.',\n    category: 'starter',\n    type: 'merit',\n    criteria: { gamesPlayed: 10 },\n  },\n  {\n    id: 'badge_veteran',\n    image: '/badges/badge_veteran.png',\n    name: 'Honorary Resident',\n    description: 'You have started complaining about tourists. One of us.',\n    category: 'starter',\n    type: 'merit',\n    criteria: { gamesPlayed: 50 },\n  },\n  {\n    id: 'badge_legend',\n    image: '/badges/badge_legend.png',\n    name: 'The Alcalde',\n    description: 'You basically run this town. Next stop: city council.',\n    category: 'starter',\n    type: 'merit',\n    criteria: { gamesPlayed: 100 },\n  },\n  {\n    id: 'badge_streak_3',\n    image: '/badges/badge_streak_3.png',\n    name: 'CalÃ§otada Season',\n    description: \"Things are heating up. Don't forget the bib.\",\n    category: 'starter',\n    type: 'merit',\n    criteria: { streak: 3 },\n  },\n  {\n    id: 'badge_streak_7',\n    image: '/badges/badge_streak_7.png',\n    name: 'Festa Major',\n    description: 'A full week of partying (playing). Your neighbors hate you.',\n    category: 'starter',\n    type: 'merit',\n    criteria: { streak: 7 },\n  },\n  {\n    id: 'badge_streak_30',\n    image: '/badges/badge_streak_30.png',\n    name: 'Sagrada FamÃ­lia',\n    description: 'Slow, steady, and taking forever to finish. A masterpiece.',\n    category: 'starter',\n    type: 'merit',\n    criteria: { streak: 30 },\n  },\n  {\n    id: 'badge_champion',\n    image: '/badges/badge_champion.png',\n    name: 'Tapa King',\n    description: 'You ordered everything on the menu. A solid performance.',\n    category: 'starter',\n    type: 'merit',\n    criteria: { bestScore: 1800 },\n  },\n  {\n    id: 'badge_perfect',\n    image: '/badges/badge_perfect.png',\n    name: \"GaudÃ­'s Vision\",\n    description: 'Pure perfection. Not a single straight line in sight.',\n    category: 'starter',\n    type: 'merit',\n    criteria: { bestScore: 2000 },\n  },\n\n  // === SPECIALS (Formerly complex categories, now Starter) ===\n  {\n    id: 'badge_gamba_roja',\n    image: '/badges/badge_gamba_roja.png',\n    name: 'The Gamba Roja',\n    description: 'Forgot sunscreen? You blend in with the paella now.',\n    category: 'starter',\n    type: 'merit',\n    criteria: { wrongStreak: 5 },\n    flavorText: 'Get 5 wrong in a row',\n  },\n  {\n    id: 'badge_night_owl',\n    image: '/badges/badge_night_owl.png',\n    name: 'Razzmatazz Zombie',\n    description: 'Playing at 4AM? Go home, you have work tomorrow.',\n    category: 'starter',\n    type: 'merit',\n    criteria: { nightPlay: true },\n    flavorText: 'Play between 3AM and 6AM',\n  },\n  {\n    id: 'badge_fast_loss',\n    image: '/badges/badge_fast_loss.png',\n    name: 'Pickpocketed',\n    description: \"Game over in 30 seconds. They took your phone, didn't they?\",\n    category: 'starter',\n    type: 'merit',\n    criteria: { fastLoss: true },\n    flavorText: 'Lose within 30 seconds',\n  },\n  {\n    id: 'badge_precision',\n    image: '/badges/badge_precision.png',\n    name: 'Human GPS',\n    description: \"You don't need Google Maps. You ARE Google Maps.\",\n    category: 'starter',\n    type: 'merit',\n    criteria: { precisionGuess: true },\n    flavorText: 'Guess with <10m error',\n  },\n\n  // === SHOP ITEMS (Categorized as starter for now to keep them visible) ===\n  {\n    id: 'badge_paellador',\n    name: 'Paellador Fan',\n    description: 'Neon yellow rice. Deliciously fake.',\n    category: 'starter',\n    type: 'shop',\n    cost: 50,\n    emoji: 'ðŸ¥˜',\n  },\n  {\n    id: 'badge_sangria_bucket',\n    name: 'Sangria Bucket',\n    description: '10 straws, 1 headache.',\n    category: 'starter',\n    type: 'shop',\n    cost: 100,\n    emoji: 'ðŸ·',\n  },\n  {\n    id: 'badge_tcasual',\n    name: 'T-Casual Hoarder',\n    description: 'You have 15 of these in your wallet. None work.',\n    category: 'starter',\n    type: 'shop',\n    cost: 200,\n    emoji: 'ðŸŽ«',\n  },\n  {\n    id: 'badge_pigeon',\n    name: 'Plaza Cat',\n    description: 'Owner of the plaza. Judge of tourists.',\n    category: 'starter',\n    type: 'shop',\n    cost: 300,\n    emoji: 'ðŸˆ',\n  },\n  {\n    id: 'badge_scooter',\n    name: 'Electric Menace',\n    description: 'Sidewalks are for the weak. Speed is key.',\n    category: 'starter',\n    type: 'shop',\n    cost: 500,\n    emoji: 'ðŸ›´',\n  },\n  {\n    id: 'badge_yacht',\n    name: 'Yacht Parking',\n    description: 'For when the port is too small for your ego.',\n    category: 'starter',\n    type: 'shop',\n    cost: 1000,\n    emoji: 'ðŸ›¥ï¸',\n  },\n];\n\nexport interface BadgeCategoryInfo {\n  name: string;\n  color: string;\n  icon: string;\n}\n\nexport const BADGE_CATEGORIES: Record<string, BadgeCategoryInfo> = {\n  starter: { name: 'Merits', color: 'blue', icon: 'ðŸ†' },\n  social: { name: 'Social', color: 'purple', icon: 'ðŸ‘¥' },\n};\n\n/**\n * Get all shop badges (purchasable with Giuros)\n */\nexport const getShopBadges = (): Achievement[] => {\n  return ACHIEVEMENT_BADGES.filter(b => b.type === 'shop');\n};\n\n/**\n * Get all merit badges (earned through gameplay)\n */\nexport const getMeritBadges = (): Achievement[] => {\n  return ACHIEVEMENT_BADGES.filter(b => b.type === 'merit');\n};\n\n/**\n * Check which achievements a user has unlocked based on their stats\n * @param {Object} stats - User stats including special tracking fields\n * @param {Array} purchasedBadges - Array of badge IDs user has purchased\n * @returns {Array} Array of unlocked badge objects\n */\nexport const getUnlockedAchievements = (stats: any, purchasedBadges: string[] = []): Achievement[] => {\n  if (!stats) {return [];}\n\n  const {\n    gamesPlayed = 0,\n    bestScore = 0,\n    streak = 0,\n    wrongStreak = 0,\n    totalPanKm = 0,\n    consecutiveDays = 0,\n    gamesWithoutQuitting = 0,\n    eixampleCorners = 0,\n    gothicStreak = 0,\n    bornGuesses = 0,\n    poblenouGuesses = 0,\n    nightPlay = false,\n    ramblasQuickGuess = false,\n    precisionGuess = false,\n    foodStreetsPerfect = 0,\n    fastLoss = false,\n    speedModeHighScore = false,\n  } = stats;\n\n  const unlocked: Achievement[] = [];\n  const purchasedSet = new Set(purchasedBadges);\n\n  for (const badge of ACHIEVEMENT_BADGES) {\n    // Shop badges - check if purchased\n    if (badge.type === 'shop') {\n      if (purchasedSet.has(badge.id)) {\n        unlocked.push(badge);\n      }\n      continue;\n    }\n\n    // Merit badges - check criteria\n    const { criteria } = badge;\n    if (!criteria) {continue;}\n    let meets = true;\n\n    if (criteria.gamesPlayed && gamesPlayed < criteria.gamesPlayed) {meets = false;}\n    if (criteria.bestScore && bestScore < criteria.bestScore) {meets = false;}\n    if (criteria.streak && streak < criteria.streak) {meets = false;}\n    if (criteria.wrongStreak && wrongStreak < criteria.wrongStreak) {meets = false;}\n    if (criteria.totalPanKm && totalPanKm < criteria.totalPanKm) {meets = false;}\n    if (criteria.consecutiveDays && consecutiveDays < criteria.consecutiveDays) {meets = false;}\n    if (criteria.gamesWithoutQuitting && gamesWithoutQuitting < criteria.gamesWithoutQuitting)\n      {meets = false;}\n    if (criteria.eixampleCorners && eixampleCorners < criteria.eixampleCorners) {meets = false;}\n    if (criteria.gothicStreak && gothicStreak < criteria.gothicStreak) {meets = false;}\n    if (criteria.bornGuesses && bornGuesses < criteria.bornGuesses) {meets = false;}\n    if (criteria.poblenouGuesses && poblenouGuesses < criteria.poblenouGuesses) {meets = false;}\n    if (criteria.foodStreetsPerfect && foodStreetsPerfect < criteria.foodStreetsPerfect)\n      {meets = false;}\n    if (criteria.nightPlay && !nightPlay) {meets = false;}\n    if (criteria.ramblasQuickGuess && !ramblasQuickGuess) {meets = false;}\n    if (criteria.precisionGuess && !precisionGuess) {meets = false;}\n    if (criteria.fastLoss && !fastLoss) {meets = false;}\n    if (criteria.speedModeHighScore && !speedModeHighScore) {meets = false;}\n    if (criteria.inviteCount && (stats.inviteCount || 0) < criteria.inviteCount) {meets = false;}\n\n    if (meets) {\n      unlocked.push(badge);\n    }\n  }\n\n  return unlocked;\n};\n\n/**\n * Get badges grouped by category\n */\nexport const getBadgesByCategory = (): Record<string, Achievement[]> => {\n  const grouped: Record<string, Achievement[]> = {};\n  for (const badge of ACHIEVEMENT_BADGES) {\n    if (!grouped[badge.category]) {\n      grouped[badge.category] = [];\n    }\n    grouped[badge.category].push(badge);\n  }\n  return grouped;\n};\n\n/**\n * Get the next achievement the user is closest to unlocking\n * @param {Object} stats - User stats\n * @returns {Object|null} Next achievement with progress info\n */\nexport const getNextAchievement = (stats: any): Achievement | null => {\n  if (!stats) {return null;}\n\n  const { gamesPlayed = 0, bestScore = 0, streak = 0 } = stats;\n  const unlocked = getUnlockedAchievements(stats);\n  const unlockedIds = new Set(unlocked.map(b => b.id));\n\n  let closest: Achievement | null = null;\n  let closestProgress = 0;\n\n  for (const badge of ACHIEVEMENT_BADGES) {\n    if (unlockedIds.has(badge.id)) {continue;}\n    if (badge.type === 'shop') {continue;} // Skip shop badges for \"next achievement\"\n\n    const { criteria } = badge;\n    if (!criteria) {continue;}\n    let progress = 0;\n\n    if (criteria.gamesPlayed) {\n      progress = gamesPlayed / criteria.gamesPlayed;\n    } else if (criteria.bestScore) {\n      progress = bestScore / criteria.bestScore;\n    } else if (criteria.streak) {\n      progress = streak / criteria.streak;\n    }\n\n    if (progress > closestProgress) {\n      closestProgress = progress;\n      closest = { ...badge, progress: Math.min(progress, 0.99) };\n    }\n  }\n\n  return closest;\n};\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/data/activityTypes.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/data/curiosities.js",
    "messages": [
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 3.",
        "line": 350,
        "column": 51,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 350,
        "endColumn": 52
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 1,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "// Barcelona Curiosities Data\n// Source: User Provided JSON (25 Valid Entries)\n\nconst CURIOSITIES_DATA = [\n  {\n    id: 1,\n    location: 'Carrer del Bisbe',\n    district: 'Ciutat Vella',\n    type: 'Legend',\n    text: 'The bridge connecting the Generalitat and the Casa dels Canonges was built in 1928, not during the Middle Ages. Look for the skull with a dagger through it underneath; legend says if the dagger is removed, Barcelona will fall.',\n    image:\n      'https://images.unsplash.com/photo-1539186607619-df476afe3ff1?auto=format&fit=crop&w=800&q=80',\n  },\n  {\n    id: 2,\n    location: 'PlaÃ§a de Sant Felip Neri',\n    district: 'Ciutat Vella',\n    type: 'History',\n    text: 'The pockmarks on the church walls were long rumored to be from execution squads during the Civil War. In reality, they are the scars of a 1938 fascist bombing that killed 42 people, mostly children hiding in the basement.',\n    image:\n      'https://images.unsplash.com/photo-1523531294919-4bcd7c65e216?auto=format&fit=crop&w=800&q=80',\n  },\n  {\n    id: 3,\n    location: 'Sagrada FamÃ­lia',\n    district: 'Eixample',\n    type: 'Architecture',\n    text: 'The Passion FaÃ§ade features a 4x4 magic square where every row, column, and diagonal adds up to 33. This number represents the age of Jesus Christ at the time of his death.',\n    image:\n      'https://images.unsplash.com/photo-1583778175782-d1d494957d77?auto=format&fit=crop&w=800&q=80',\n  },\n  {\n    id: 4,\n    location: 'Font de Canaletes',\n    district: 'Ciutat Vella',\n    type: 'Legend',\n    text: 'Located at the top of La Rambla, this 19th-century fountain is the gathering point for FC Barcelona celebrations. Legend promises that anyone who drinks its water will eventually return to the city.',\n    image:\n      'https://images.unsplash.com/photo-1512411082531-d859f931d87f?auto=format&fit=crop&w=800&q=80',\n  },\n  {\n    id: 5,\n    location: 'Columbus Monument',\n    district: 'Ciutat Vella',\n    type: 'Curiosity',\n    text: 'The statue of Christopher Columbus points toward the sea, but not toward the Americas. He is actually pointing southeast, roughly in the direction of his supposed birthplace, Genoa.',\n    image:\n      'https://images.unsplash.com/photo-1520112460341-35639f727402?auto=format&fit=crop&w=800&q=80',\n  },\n  {\n    id: 6,\n    location: \"Carrer d'AvinyÃ³\",\n    district: 'Ciutat Vella',\n    type: 'Art',\n    text: \"This street once housed a famous brothel visited by a young Pablo Picasso. The women working there inspired his groundbreaking cubist masterpiece, 'Les Demoiselles d'Avignon'.\",\n    image:\n      'https://images.unsplash.com/photo-1505322022379-7c3353ee6291?auto=format&fit=crop&w=800&q=80',\n  },\n  {\n    id: 7,\n    location: 'Temple of Augustus',\n    district: 'Ciutat Vella',\n    type: 'History',\n    text: 'Inside the courtyard of the Centre Excursionista de Catalunya, four massive Roman columns stand hidden. They are over 2,000 years old and were part of the forum of the original Roman colony, Barcino.',\n    image:\n      'https://images.unsplash.com/photo-1514813482567-2858e6c00ee1?auto=format&fit=crop&w=800&q=80',\n  },\n  {\n    id: 8,\n    location: 'Carrer de Montcada',\n    district: 'Ciutat Vella',\n    type: 'Culture',\n    text: \"This was the most prestigious street in medieval Barcelona, lined with Gothic palaces. Today, five of these interconnected palaces house the Picasso Museum, the city's most visited art gallery.\",\n    image:\n      'https://images.unsplash.com/photo-1503917988258-f19c08679093?auto=format&fit=crop&w=800&q=80',\n  },\n  {\n    id: 9,\n    location: 'Santa Maria del Mar',\n    district: 'Ciutat Vella',\n    type: 'History',\n    text: \"Known as the 'Cathedral of the Sea,' it was built entirely by the local port workers (bastaixos) who carried heavy stones from MontjuÃ¯c on their backs. Look at the main doors to see carvings honoring these workers.\",\n    image:\n      'https://images.unsplash.com/photo-1533602161203-d64e9a11a2f6?auto=format&fit=crop&w=800&q=80',\n  },\n  {\n    id: 10,\n    location: 'Casa BatllÃ³',\n    district: 'Eixample',\n    type: 'Architecture',\n    text: \"The roof of this GaudÃ­ masterpiece represents the back of the dragon slain by Saint George. The balconies are designed to look like the skulls of the dragon's victims, while the pillars resemble their bones.\",\n    image:\n      'https://images.unsplash.com/photo-1563297050-48413b91c828?auto=format&fit=crop&w=800&q=80',\n  },\n  {\n    id: 11,\n    location: 'Passeig de GrÃ cia',\n    district: 'Eixample',\n    type: 'Art',\n    text: 'The hexagonal paving stones on this street were designed by Antoni GaudÃ­ himself. They feature marine motifs like starfish and snails, originally intended for the floor of Casa BatllÃ³.',\n    image:\n      'https://images.unsplash.com/photo-1549144511-f099e773c147?auto=format&fit=crop&w=800&q=80',\n  },\n  {\n    id: 12,\n    location: 'PlaÃ§a de Catalunya',\n    district: 'Eixample',\n    type: 'History',\n    text: \"This massive square is the heart of the city but didn't exist until 1927. Before the 1888 Expo, it was an empty space where the city walls had been torn down to connect the old city with the new Eixample.\",\n    image:\n      'https://images.unsplash.com/photo-1518684079-3c830dcef090?auto=format&fit=crop&w=800&q=80',\n  },\n  {\n    id: 13,\n    location: 'La Pedrera (Casa MilÃ )',\n    district: 'Eixample',\n    type: 'Architecture',\n    text: \"Locals initially hated GaudÃ­'s building, calling it 'La Pedrera' (The Quarry) because of its rough stone appearance. Its wavy stone structure was so heavy that it required innovative internal steel supports.\",\n    image:\n      'https://images.unsplash.com/photo-1561501900-3701fa6a0864?auto=format&fit=crop&w=800&q=80',\n  },\n  {\n    id: 14,\n    location: 'Carrer dels Mirallers',\n    district: 'Ciutat Vella',\n    type: 'Curiosity',\n    text: \"Look at the corner of the building for a 'Carassa' (a stone face). In medieval times, these faces signaled to illiterate sailors where the local brothels were located.\",\n    image:\n      'https://images.unsplash.com/photo-1534353436294-0dbd4bdac845?auto=format&fit=crop&w=800&q=80',\n  },\n  {\n    id: 15,\n    location: 'PlaÃ§a de George Orwell',\n    district: 'Ciutat Vella',\n    type: 'Curiosity',\n    text: \"Known to locals as 'Trippy Square,' it was named after the author of '1984.' Ironically, it was the first place in Barcelona to have permanent police surveillance cameras installed.\",\n    image:\n      'https://images.unsplash.com/photo-1502602898657-3e91760cbb34?auto=format&fit=crop&w=800&q=80',\n  },\n  {\n    id: 16,\n    location: 'Bunkers del Carmel',\n    district: 'Horta-GuinardÃ³',\n    type: 'History',\n    text: 'These are not actually bunkers but anti-aircraft battery bases from the Civil War. After the war, the area became a shanty town (barraquisme) before being renovated for the public view.',\n    image:\n      'https://images.unsplash.com/photo-1527473350117-7cc87042d330?auto=format&fit=crop&w=800&q=80',\n  },\n  {\n    id: 17,\n    location: 'Arc de Triomf',\n    district: 'Eixample',\n    type: 'Architecture',\n    text: \"Unlike the Arc de Triomphe in Paris, which celebrates military victories, Barcelona's arch was built as the gateway to the 1888 Universal Exhibition and represents civil and economic progress.\",\n    image:\n      'https://images.unsplash.com/photo-1558642084-fd07fae5282e?auto=format&fit=crop&w=800&q=80',\n  },\n  {\n    id: 18,\n    location: 'Mercat de Sant Josep de la Boqueria',\n    district: 'Ciutat Vella',\n    type: 'Food',\n    text: \"The market began as a traveling street market in 1217. Its iconic modernist metal roof wasn't built until 1914, turning it into the permanent culinary landmark it is today.\",\n    image:\n      'https://images.unsplash.com/photo-1541544186542-a63328e93344?auto=format&fit=crop&w=800&q=80',\n  },\n  {\n    id: 19,\n    location: 'Carrer de Petritxol',\n    district: 'Ciutat Vella',\n    type: 'Culture',\n    text: \"This was the first pedestrian-only street in Barcelona, converted in 1959. It is famous for its 'granges' serving thick hot chocolate and its ceramic plaques documenting the street's history.\",\n    image:\n      'https://images.unsplash.com/photo-1503917988258-f19c08679093?auto=format&fit=crop&w=800&q=80',\n  },\n  {\n    id: 20,\n    location: 'Barcelona Cathedral',\n    district: 'Ciutat Vella',\n    type: 'Legend',\n    text: \"In the cathedral's cloister, you will find 13 white geese. They represent the age of Saint Eulalia, the city's co-patron saint, who was martyred by the Romans at 13.\",\n    image:\n      'https://images.unsplash.com/photo-1550586678-f7225f03c44b?auto=format&fit=crop&w=800&q=80',\n  },\n  {\n    id: 21,\n    location: \"Casa de l'Ardiaca\",\n    district: 'Ciutat Vella',\n    type: 'Art',\n    text: 'Look for the marble mailbox designed by Lluis DomÃ¨nech i Montaner. The swallows represent the speed of justice, while the tortoise represents the reality of the slow legal system.',\n    image:\n      'https://images.unsplash.com/photo-1512411082531-d859f931d87f?auto=format&fit=crop&w=800&q=80',\n  },\n  {\n    id: 22,\n    location: 'Park GÃ¼ell',\n    district: 'GrÃ cia',\n    type: 'History',\n    text: 'GaudÃ­ originally designed this as a private, high-end housing estate for 60 families. It was a commercial failure, with only two houses ever built, leading it to become a public park.',\n    image:\n      'https://images.unsplash.com/photo-1523531294919-4bcd7c65e216?auto=format&fit=crop&w=800&q=80',\n  },\n  {\n    id: 23,\n    location: 'Carrer de la Portaferrissa',\n    district: 'Ciutat Vella',\n    type: 'History',\n    text: \"Named 'Iron Gate' because a metal rod was kept here so farmers could measure their carts before entering the narrow city streets to avoid getting stuck.\",\n    image:\n      'https://images.unsplash.com/photo-1549144511-f099e773c147?auto=format&fit=crop&w=800&q=80',\n  },\n  {\n    id: 24,\n    location: 'Carrer de les Mosques',\n    district: 'Ciutat Vella',\n    type: 'Curiosity',\n    text: \"This is one of the narrowest streets in Barcelona. Its name, 'Street of the Flies,' comes from the swarms that used to follow the waste from the nearby meat markets.\",\n    image:\n      'https://images.unsplash.com/photo-1502602898657-3e91760cbb34?auto=format&fit=crop&w=800&q=80',\n  },\n  {\n    id: 25,\n    location: 'PlaÃ§a Reial',\n    district: 'Ciutat Vella',\n    type: 'Art',\n    text: \"The lanterns with the winged helmets were Antoni GaudÃ­'s first commission for the city after graduating. He was only 26 years old at the time.\",\n    image:\n      'https://images.unsplash.com/photo-1563297050-48413b91c828?auto=format&fit=crop&w=800&q=80',\n  },\n  {\n    id: 26,\n    location: 'Gran Via de les Corts Catalanes',\n    district: 'Eixample',\n    type: 'History',\n    text: \"Spanning 13.1 km, it is the longest street in Catalonia, stretching from L'Hospitalet to Sant AdriÃ  de BesÃ²s.\",\n    image:\n      'https://upload.wikimedia.org/wikipedia/commons/e/e0/Gran_Via_de_les_Corts_Catalanes%2C_680_BCN_02.jpg',\n  },\n  {\n    id: 27,\n    location: 'Avinguda Diagonal',\n    district: 'Eixample',\n    type: 'Architecture',\n    text: 'Ildefons CerdÃ  designed this avenue to cut through the orthogonal grid, facilitating rapid transit across the city.',\n    image:\n      'https://upload.wikimedia.org/wikipedia/commons/a/a2/Barcelona_-_Avinguda_Diagonal_-_View_ENE_I.jpg',\n  },\n  {\n    id: 28,\n    location: 'Rambla del Poblenou',\n    district: 'Sant MartÃ­',\n    type: 'Culture',\n    text: 'The heart of the Poblenou district, leading directly to the Bogatell beach. It retains a village-like atmosphere.',\n    image:\n      'https://upload.wikimedia.org/wikipedia/commons/5/52/Rambla_del_Poblenou_%28Barcelona%29_October_2023.JPG',\n  },\n  {\n    id: 29,\n    location: 'Ronda de Dalt',\n    district: 'Horta-GuinardÃ³',\n    type: 'History',\n    text: 'Built for the 1992 Olympics, this ring road drastically reduced traffic congestion in the city center.',\n    image: 'https://upload.wikimedia.org/wikipedia/commons/2/22/Ronda_de_dalt_Barna.JPG',\n  },\n];\n\nconst GENERIC_IMAGES = [\n  'https://images.unsplash.com/photo-1583422409516-2895a77efded?w=800', // Park Guell\n  'https://images.unsplash.com/photo-1562883676-8c7feb83f09b?w=800', // Sagrada\n  'https://images.unsplash.com/photo-1511527661048-7fe73d85e9a4?w=800', // Streets\n  'https://images.unsplash.com/photo-1579282240050-352db0a14c21?w=800', // Rambla\n  'https://images.unsplash.com/photo-1558642084-fd07fae5282e?w=800', // Beach\n  'https://images.unsplash.com/photo-1539037116277-4db20889f2d4?w=800', // Street\n];\n\nfunction getRandomImage() {\n  return GENERIC_IMAGES[Math.floor(Math.random() * GENERIC_IMAGES.length)];\n}\n\n/**\n * Clean street name for fuzzy matching\n */\nconst simplify = name => {\n  return name\n    .toLowerCase()\n    .normalize('NFD')\n    .replace(/[\\u0300-\\u036f]/g, '') // accents\n    .replace(\n      /^(carrer|avinguda|plaÃ§a|passeig|passatge|ronda|via|camÃ­|parc|jardins|rambla)\\s+(de\\s+|del\\s+|d'|els\\s+)?/i,\n      ''\n    ) // prefixes\n    .replace(/[^a-z0-9]/g, ''); // punctuation\n};\n\n/**\n * Get a curiosity based on the streets played in the quiz.\n * @param {Array} quizStreets - Array of street objects from the daily quiz\n * @returns {Object} - Curiosity object with image, fact, and location\n */\nimport { seededRandom, getTodaySeed } from '../utils/dailyChallenge';\n\n/**\n * Get a curiosity based on the streets played in the quiz.\n * @param {Array} quizStreets - Array of street objects from the daily quiz\n * @param {number} [dateSeed] - Optional date seed for deterministic fallback\n * @returns {Object} - Curiosity object with image, fact, and location\n */\nexport function getCuriosityByStreets(quizStreets, dateSeed) {\n  const seed = dateSeed || getTodaySeed();\n\n  if (!quizStreets || quizStreets.length === 0) {\n    // Fallback deterministic\n    const index = Math.floor(seededRandom(seed) * CURIOSITIES_DATA.length);\n    const random = CURIOSITIES_DATA[index];\n    const imgIndex = Math.floor(seededRandom(seed + 1) * GENERIC_IMAGES.length);\n    return {\n      title: random.location,\n      fact: random.text,\n      image: random.image || GENERIC_IMAGES[imgIndex],\n      location: random.location,\n      matchedStreet: null,\n    };\n  }\n\n  // Try to find a match - check each street against curiosities\n  for (const street of quizStreets) {\n    const simpleName = simplify(street.name);\n\n    // Find a curiosity where the location name matches loosely\n    const match = CURIOSITIES_DATA.find(c => {\n      const simpleLoc = simplify(c.location);\n      // Check both directions for substring matching\n      return simpleName.includes(simpleLoc) || simpleLoc.includes(simpleName);\n    });\n\n    if (match) {\n      return {\n        title: match.location,\n        fact: match.text,\n        image: match.image || getRandomImage(), // Keep random per reload if matched? No, should be consistent too\n        location: match.location,\n        matchedStreet: street.name, // Include which street matched\n      };\n    }\n  }\n\n  // No match found? Pick a deterministically random curiosity\n  const index = Math.floor(seededRandom(seed + 2) * CURIOSITIES_DATA.length);\n  const random = CURIOSITIES_DATA[index];\n  const imgIndex = Math.floor(seededRandom(seed + 3) * GENERIC_IMAGES.length);\n\n  return {\n    title: random.location,\n    fact: random.text,\n    image: random.image || GENERIC_IMAGES[imgIndex],\n    location: random.location,\n    matchedStreet: null,\n  };\n}\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/declarations.d.ts",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 4,
        "column": 18,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 4,
        "endColumn": 21,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [81, 84], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [81, 84], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 1,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "/// <reference types=\"vite/client\" />\n\ndeclare module '*.jsx' {\n  const content: any;\n  export default content;\n}\n\ndeclare module '*.svg' {\n  const content: string;\n  export default content;\n}\n\ndeclare module '*.png' {\n  const content: string;\n  export default content;\n}\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/firebase.ts",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/hooks/__tests__/useScoreCalculator.test.ts",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/hooks/index.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/hooks/useAchievements.ts",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/hooks/useAnnouncements.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/hooks/useAsyncOperation.ts",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 12,
        "column": 26,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 12,
        "endColumn": 29,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [411, 414], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [411, 414], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 13,
        "column": 23,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 13,
        "endColumn": 26,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [447, 450], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [447, 450], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      },
      {
        "ruleId": "consistent-return",
        "severity": 2,
        "message": "Expected to return a value at the end of async arrow function.",
        "line": 27,
        "column": 35,
        "nodeType": "ArrowFunctionExpression",
        "messageId": "missingReturn",
        "endLine": 27,
        "endColumn": 37
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 50,
        "column": 29,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 50,
        "endColumn": 32,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [1445, 1448], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [1445, 1448], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 0,
    "warningCount": 3,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { useCallback } from 'react';\nimport { useLoading } from '../context/LoadingContext';\n// @ts-ignore\nimport { useNotification } from './useNotification'; // Assuming useNotification is exported from hooks, or context\n// @ts-ignore\nimport { logger } from '../utils/logger';\n\ninterface AsyncOptions {\n    loadingKey?: string;\n    successMessage?: string;\n    errorMessage?: string;\n    onSuccess?: (result: any) => void;\n    onError?: (error: any) => void;\n}\n\n/**\n * Hook to wrap async operations with loading state and error handling\n */\nexport const useAsyncOperation = () => {\n    const { startLoading, stopLoading } = useLoading();\n    const { notify } = useNotification();\n\n    const execute = useCallback(\n        async <T>(\n            operation: () => Promise<T>,\n            options: AsyncOptions = {}\n        ): Promise<T | undefined> => {\n            const {\n                loadingKey = 'global',\n                successMessage,\n                errorMessage = 'An error occurred',\n                onSuccess,\n                onError,\n            } = options;\n\n            startLoading(loadingKey);\n\n            try {\n                const result = await operation();\n\n                if (successMessage) {\n                    notify(successMessage, 'success');\n                }\n\n                if (onSuccess) {\n                    onSuccess(result);\n                }\n\n                return result;\n            } catch (error: any) {\n                logger.error(`Async operation failed [${loadingKey}]:`, error);\n\n                if (options.errorMessage !== null) {\n                    // Pass null to suppress error notification\n                    notify(errorMessage, 'error');\n                }\n\n                if (onError) {\n                    onError(error);\n                }\n            } finally {\n                stopLoading(loadingKey);\n            }\n        },\n        [startLoading, stopLoading, notify]\n    );\n\n    return { execute };\n};\n\nexport default useAsyncOperation;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/hooks/useAuth.ts",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 41,
        "column": 22,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 41,
        "endColumn": 25,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [1232, 1235], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [1232, 1235], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 120,
        "column": 21,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 120,
        "endColumn": 24,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [4049, 4052], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [4049, 4052], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 134,
        "column": 22,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 134,
        "endColumn": 25,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [4384, 4387], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [4384, 4387], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 136,
        "column": 11,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 136,
        "endColumn": 14,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [4450, 4453], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [4450, 4453], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 153,
        "column": 46,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 153,
        "endColumn": 49,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [4969, 4972], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [4969, 4972], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 165,
        "column": 55,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 165,
        "endColumn": 58,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [5472, 5475], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [5472, 5475], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 5.",
        "line": 170,
        "column": 13,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 170,
        "endColumn": 14
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 173,
        "column": 29,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 173,
        "endColumn": 32,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [5721, 5724], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [5721, 5724], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 206,
        "column": 33,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 206,
        "endColumn": 36,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [6883, 6886], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [6883, 6886], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 10.",
        "line": 229,
        "column": 41,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 229,
        "endColumn": 43
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 248,
        "column": 63,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 248,
        "endColumn": 66,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [8200, 8203], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [8200, 8203], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 254,
        "column": 44,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 254,
        "endColumn": 47,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [8388, 8391], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [8388, 8391], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 254,
        "column": 52,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 254,
        "endColumn": 55,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [8396, 8399], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [8396, 8399], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1000.",
        "line": 267,
        "column": 45,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 267,
        "endColumn": 49
      }
    ],
    "suppressedMessages": [
      {
        "ruleId": "no-console",
        "severity": 2,
        "message": "Unexpected console statement. Only these console methods are allowed: warn, error.",
        "line": 159,
        "column": 9,
        "nodeType": "MemberExpression",
        "messageId": "limited",
        "endLine": 159,
        "endColumn": 20,
        "suggestions": [
          {
            "fix": { "range": [5187, 5260], "text": "" },
            "messageId": "removeConsole",
            "data": { "propertyName": "log" },
            "desc": "Remove the console.log()."
          }
        ],
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-console",
        "severity": 2,
        "message": "Unexpected console statement. Only these console methods are allowed: warn, error.",
        "line": 204,
        "column": 9,
        "nodeType": "MemberExpression",
        "messageId": "limited",
        "endLine": 204,
        "endColumn": 20,
        "suggestions": [
          {
            "fix": { "range": [6694, 6774], "text": "" },
            "messageId": "removeConsole",
            "data": { "propertyName": "log" },
            "desc": "Remove the console.log()."
          }
        ],
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-console",
        "severity": 2,
        "message": "Unexpected console statement. Only these console methods are allowed: warn, error.",
        "line": 232,
        "column": 7,
        "nodeType": "MemberExpression",
        "messageId": "limited",
        "endLine": 232,
        "endColumn": 18,
        "suggestions": [
          {
            "fix": { "range": [7704, 7776], "text": "" },
            "messageId": "removeConsole",
            "data": { "propertyName": "log" },
            "desc": "Remove the console.log()."
          }
        ],
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-console",
        "severity": 2,
        "message": "Unexpected console statement. Only these console methods are allowed: warn, error.",
        "line": 272,
        "column": 5,
        "nodeType": "MemberExpression",
        "messageId": "limited",
        "endLine": 272,
        "endColumn": 16,
        "suggestions": [
          {
            "fix": { "range": [8937, 9018], "text": "" },
            "messageId": "removeConsole",
            "data": { "propertyName": "log" },
            "desc": "Remove the console.log()."
          }
        ],
        "suppressions": [{ "kind": "directive", "justification": "" }]
      }
    ],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 14,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { useState, useEffect, useCallback, Dispatch } from 'react';\nimport { onAuthStateChanged, signOut, User } from 'firebase/auth';\n// @ts-ignore\nimport { auth } from '../firebase';\n// @ts-ignore\nimport { storage } from '../utils/storage';\nimport {\n  ensureUserProfile,\n  healMigration,\n  updateUserProfile,\n  getUserGameHistory,\n  saveUserGameResult,\n  checkUnseenFeedbackRewards,\n  markFeedbackRewardSeen,\n  // @ts-ignore\n} from '../utils/social';\n// @ts-ignore\nimport { claimDailyLoginBonus } from '../utils/giuros';\nimport { useNotification } from './useNotification';\nimport { useAsyncOperation } from './useAsyncOperation';\nimport { UserProfile } from '../types/user';\n// @ts-ignore\nimport { sanitizeInput } from '../utils/security';\n// @ts-ignore\nimport { UserMigrationService } from '../services/userMigration';\n// @ts-ignore\nimport { STORAGE_KEYS, MIGRATION, TIME } from '../config/constants';\n// @ts-ignore\nimport { logger } from '../utils/logger';\n\nexport interface UseAuthResult {\n  emailVerified: boolean | null;\n  isLoading: boolean;\n  handleLogout: (navigate: (path: string) => void) => void;\n}\n\n/**\n * Hook for Firebase authentication and user profile management\n */\nexport const useAuth = (\n  dispatch: Dispatch<any>,\n  currentGameState: string,\n  onAnnouncementsCheck?: () => void\n): UseAuthResult => {\n  const [emailVerified, setEmailVerified] = useState<boolean | null>(true);\n  const [isLoading, setIsLoading] = useState(true);\n  const { notify } = useNotification();\n  const { execute } = useAsyncOperation(); // [NEW] Use async loader\n\n  // Parse referral code from URL on load\n  useEffect(() => {\n    const params = new URLSearchParams(window.location.search);\n    const ref = params.get('ref');\n    if (ref && !storage.get(STORAGE_KEYS.REFERRER)) {\n      storage.set(STORAGE_KEYS.REFERRER, ref);\n    }\n  }, []);\n\n  // Firebase Auth Listener\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, async (user: User | null) => {\n      // Logic for initial load isn't easily wrapped in atomic async op because it's an event listener,\n      // but we can wrap the syncUserProfile part.\n      if (user) {\n        // Refresh user data to get latest emailVerified status\n        try {\n          await user.reload();\n          const freshUser = auth.currentUser;\n          setEmailVerified(freshUser?.emailVerified ?? false);\n        } catch (e) {\n          console.warn('[Auth] Failed to reload user:', e);\n          setEmailVerified(user.emailVerified);\n        }\n\n        let displayName = sanitizeInput(\n          user.displayName || user.email?.split('@')[0] || 'User'\n        ).toLowerCase();\n\n        // Handle format migration\n        displayName = await UserMigrationService.migrateToNewFormat(user, displayName);\n\n        // Ensure Firestore profile and sync data - Wrapped in execute for global loading\n        await execute(\n          async () => {\n            await syncUserProfile(displayName, user, dispatch, onAnnouncementsCheck, notify);\n          },\n          { loadingKey: 'profile-sync', errorMessage: undefined } // Suppress annoying error on load if passive\n        );\n\n        // Update state\n        dispatch({ type: 'SET_USERNAME', payload: displayName });\n        if (currentGameState === 'register') {\n          dispatch({ type: 'SET_GAME_STATE', payload: 'intro' });\n        }\n      }\n      setIsLoading(false);\n    });\n\n    return () => unsubscribe();\n  }, [currentGameState, dispatch, onAnnouncementsCheck, notify, execute]);\n\n  /**\n   * Handle user logout\n   */\n  const handleLogout = useCallback(\n    (navigate: (path: string) => void) => {\n      execute(\n        async () => {\n          await signOut(auth);\n          storage.remove(STORAGE_KEYS.USERNAME);\n          storage.remove('lastPlayedDate');\n          dispatch({ type: 'LOGOUT' });\n          navigate('/');\n        },\n        {\n          loadingKey: 'logout',\n          successMessage: 'You have been logged out successfully.',\n          errorMessage: 'Failed to sign out. Please try again.',\n        }\n      ).catch((err: any) => logger.error('Sign out error', err));\n    },\n    [dispatch, execute] // Removed notify dependency as it's handled by execute\n  );\n\n  return { emailVerified, isLoading, handleLogout };\n};\n\n/**\n * Sync user profile data with Firestore\n */\nasync function syncUserProfile(\n  displayName: string,\n  user: User,\n  dispatch: Dispatch<any>,\n  onAnnouncementsCheck: (() => void) | undefined,\n  notify: any\n) {\n  try {\n    const profile = (await ensureUserProfile(displayName, user.uid, {\n      email: user.email,\n    })) as unknown as UserProfile;\n\n    if (profile) {\n      if (profile.realName) {\n        dispatch({ type: 'SET_REAL_NAME', payload: profile.realName });\n      }\n      if (profile.streak) {\n        dispatch({ type: 'SET_STREAK', payload: profile.streak });\n      }\n      dispatch({ type: 'SET_PROFILE_LOADED' });\n\n      // Self-heal any broken migration links\n      healMigration(displayName).catch((err: any) => console.error(err));\n\n      // Claim daily login bonus\n      const bonusResult = await claimDailyLoginBonus(displayName);\n      if (bonusResult.claimed) {\n        // eslint-disable-next-line no-console\n        console.log(`[Giuros] Daily login bonus claimed: +${bonusResult.bonus}`);\n      }\n\n      // Check for feedback rewards\n      const rewards = await checkUnseenFeedbackRewards(displayName);\n      if (rewards && rewards.length > 0) {\n        const total = rewards.reduce((acc: number, r: any) => acc + (r.reward || 0), 0);\n        if (notify) {\n          notify(\n            `ðŸŽ‰ Your feedback has been approved! +${total} Giuros`,\n            'success',\n            5 * TIME.ONE_SECOND\n          );\n        }\n        rewards.forEach((r: any) => markFeedbackRewardSeen(r.id));\n      }\n\n      // Check for announcements\n      if (onAnnouncementsCheck) {\n        onAnnouncementsCheck();\n      }\n\n      // Sync local history (one-time migration)\n      await syncLocalHistory(displayName);\n      await syncLocalCosmetics(displayName);\n      await backfillJoinDate(displayName, profile);\n    }\n  } catch (e) {\n    console.error('[Auth] Profile sync error:', e);\n    throw e; // Re-throw to let useAsyncOperation handle the error state if needed\n  }\n}\n\n/**\n * One-time sync of local game history to Firestore\n */\nasync function syncLocalHistory(displayName: string) {\n  if (storage.get(STORAGE_KEYS.HISTORY_SYNCED)) {return;}\n\n  try {\n    const localHistory = storage.get(STORAGE_KEYS.HISTORY, []);\n    if (Array.isArray(localHistory) && localHistory.length > 0) {\n      const existing = await getUserGameHistory(displayName);\n      if (existing.length === 0) {\n        // eslint-disable-next-line no-console\n        console.log(`[Migration] Syncing ${localHistory.length} games to Firestore...`);\n        const toUpload = localHistory.slice(-MIGRATION.MAX_HISTORY_UPLOAD);\n        toUpload.forEach((game: any) => saveUserGameResult(displayName, game));\n      }\n    }\n    storage.set(STORAGE_KEYS.HISTORY_SYNCED, 'true');\n  } catch (e) {\n    console.error('History sync failed', e);\n  }\n}\n\n/**\n * One-time sync of local cosmetics/currency to Firestore\n */\nasync function syncLocalCosmetics(displayName: string) {\n  if (storage.get(STORAGE_KEYS.COSMETICS_SYNCED)) {return;}\n\n  try {\n    const purchased = storage.get(STORAGE_KEYS.PURCHASED);\n    const equipped = storage.get(STORAGE_KEYS.EQUIPPED);\n    const giuros = storage.get(STORAGE_KEYS.GIUROS);\n\n    if (\n      (purchased && purchased.length > 0) ||\n      (equipped && Object.keys(equipped).length > 0) ||\n      (giuros !== undefined && giuros > 10) // giuros is number from storage.get if stored as number/JSON\n    ) {\n      // eslint-disable-next-line no-console\n      console.log('[Migration] Syncing cosmetics and giuros to Firestore...');\n      await updateUserProfile(displayName, {\n        purchasedCosmetics: purchased,\n        equippedCosmetics: equipped,\n        giuros: giuros,\n      });\n    }\n    storage.set(STORAGE_KEYS.COSMETICS_SYNCED, 'true');\n  } catch (e) {\n    console.error('[Migration] Failed to sync cosmetics:', e);\n  }\n}\n\n/**\n * Backfill join date from local history if older\n */\nasync function backfillJoinDate(displayName: string, profile: any) {\n  let earliestDate: Date | null = null;\n\n  try {\n    const history = storage.get(STORAGE_KEYS.HISTORY, []);\n    if (history.length > 0) {\n      const sorted = [...history].sort((a: any, b: any) => (a.timestamp || 0) - (b.timestamp || 0));\n      if (sorted[0].timestamp) {\n        earliestDate = new Date(sorted[0].timestamp);\n      }\n    }\n  } catch (e) {\n    console.warn('History parse error', e);\n  }\n\n  let profileDate: Date | null = null;\n  if (profile && profile.joinedAt) {\n    profileDate = profile.joinedAt.toDate\n      ? profile.joinedAt.toDate()\n      : new Date(profile.joinedAt.seconds * 1000);\n  }\n\n  if (earliestDate && (!profileDate || earliestDate < profileDate)) {\n    // eslint-disable-next-line no-console\n    console.log('[Migration] Backfilling registry date from history:', earliestDate);\n    await updateUserProfile(displayName, { joinedAt: earliestDate });\n    storage.set(STORAGE_KEYS.JOINED, earliestDate!.toLocaleDateString());\n  }\n\n  if (!storage.get(STORAGE_KEYS.JOINED)) {\n    if (profileDate) {\n      storage.set(STORAGE_KEYS.JOINED, profileDate.toLocaleDateString());\n    } else {\n      storage.set(STORAGE_KEYS.JOINED, new Date().toLocaleDateString());\n    }\n  }\n}\n\nexport default useAuth;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/hooks/useConfirm.ts",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/hooks/useDailyChallenge.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/hooks/useGameState.ts",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 2,
        "message": "'GAME' is defined but never used. Allowed unused vars must match /^_/u.",
        "line": 37,
        "column": 16,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 37,
        "endColumn": 20,
        "suggestions": [
          {
            "messageId": "removeUnusedVar",
            "data": { "varName": "GAME" },
            "fix": { "range": [1057, 1063], "text": "" },
            "desc": "Remove unused variable \"GAME\"."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 2,
        "message": "'FEEDBACK' is defined but never used. Allowed unused vars must match /^_/u.",
        "line": 37,
        "column": 22,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 37,
        "endColumn": 30,
        "suggestions": [
          {
            "messageId": "removeUnusedVar",
            "data": { "varName": "FEEDBACK" },
            "fix": { "range": [1063, 1073], "text": "" },
            "desc": "Remove unused variable \"FEEDBACK\"."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 43,
        "column": 22,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 43,
        "endColumn": 25,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [1339, 1342], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [1339, 1342], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      },
      {
        "ruleId": "max-lines-per-function",
        "severity": 1,
        "message": "Arrow function has too many lines (241). Maximum allowed is 150.",
        "line": 58,
        "column": 29,
        "nodeType": "ArrowFunctionExpression",
        "messageId": "exceed",
        "endLine": 373,
        "endColumn": 2
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 64,
        "column": 14,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 64,
        "endColumn": 17,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [2088, 2091], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [2088, 2091], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 100.",
        "line": 108,
        "column": 56,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 108,
        "endColumn": 59
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 50.",
        "line": 111,
        "column": 50,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 111,
        "endColumn": 52
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 139,
        "column": 55,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 139,
        "endColumn": 58,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [4669, 4672], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [4669, 4672], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 147,
        "column": 20,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 147,
        "endColumn": 23,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [4982, 4985], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [4982, 4985], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 3.",
        "line": 157,
        "column": 60,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 157,
        "endColumn": 61
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 3.",
        "line": 158,
        "column": 72,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 158,
        "endColumn": 73
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 50.",
        "line": 159,
        "column": 63,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 159,
        "endColumn": 65
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1000.",
        "line": 194,
        "column": 52,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 194,
        "endColumn": 56
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 3.",
        "line": 255,
        "column": 41,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 255,
        "endColumn": 42
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 3.",
        "line": 257,
        "column": 67,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 257,
        "endColumn": 68
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 100.",
        "line": 258,
        "column": 70,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 258,
        "endColumn": 73
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 50.",
        "line": 258,
        "column": 76,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 258,
        "endColumn": 78
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 324,
        "column": 30,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 324,
        "endColumn": 33,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [10860, 10863], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [10860, 10863], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      }
    ],
    "suppressedMessages": [
      {
        "ruleId": "react-hooks/exhaustive-deps",
        "severity": 1,
        "message": "React Hook useEffect has a missing dependency: 'handleNext'. Either include it or remove the dependency array.",
        "line": 100,
        "column": 6,
        "nodeType": "ArrayExpression",
        "endLine": 100,
        "endColumn": 41,
        "suggestions": [
          {
            "desc": "Update the dependencies array to be: [handleNext, state.autoAdvance, state.feedback]",
            "fix": {
              "range": [3275, 3310],
              "text": "[handleNext, state.autoAdvance, state.feedback]"
            }
          }
        ],
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "react-hooks/exhaustive-deps",
        "severity": 1,
        "message": "React Hook useCallback has a missing dependency: 'saveGameResults'. Either include it or remove the dependency array.",
        "line": 272,
        "column": 6,
        "nodeType": "ArrayExpression",
        "endLine": 280,
        "endColumn": 4,
        "suggestions": [
          {
            "desc": "Update the dependencies array to be: [state.feedback, state.currentQuestionIndex, state.quizStreets, state.gameState, state.plannedQuestions, saveGameResults, validStreets, generateOptionsList]",
            "fix": {
              "range": [9225, 9397],
              "text": "[state.feedback, state.currentQuestionIndex, state.quizStreets, state.gameState, state.plannedQuestions, saveGameResults, validStreets, generateOptionsList]"
            }
          }
        ],
        "suppressions": [{ "kind": "directive", "justification": "" }]
      }
    ],
    "errorCount": 2,
    "fatalErrorCount": 0,
    "warningCount": 16,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { useReducer, useEffect, useCallback, useMemo, Dispatch } from 'react';\nimport { useNavigate } from 'react-router-dom';\n// @ts-ignore\nimport { auth } from '../firebase';\n// @ts-ignore\nimport { gameReducer, initialState } from '../reducers/gameReducer';\nimport {\n  getTodaySeed,\n  selectDailyStreets,\n  markTodayAsPlayed,\n  selectDistractors,\n  shuffleOptions,\n  // @ts-ignore\n} from '../utils/dailyChallenge';\n// @ts-ignore\nimport { calculateStreak } from '../utils/stats';\n// @ts-ignore\nimport { saveScore } from '../utils/leaderboard';\n// @ts-ignore\nimport { calculateScore, shouldPromptFeedback } from '../config/gameConfig';\nimport {\n  updateUserGameStats,\n  saveUserGameResult,\n  getReferrer,\n  hasDailyReferral,\n  // @ts-ignore\n} from '../utils/social';\n// @ts-ignore\nimport { awardChallengeBonus, awardReferralBonus } from '../utils/giuros';\n// @ts-ignore\nimport { storage } from '../utils/storage';\n// @ts-ignore\nimport { logger } from '../utils/logger';\n// @ts-ignore\nimport quizPlan from '../data/quizPlan.json';\n// @ts-ignore\nimport { TIME, GAME, FEEDBACK, STORAGE_KEYS } from '../config/constants';\nimport { Street, GameStateObject, QuizResult } from '../types/game';\nimport { useAsyncOperation } from './useAsyncOperation'; // [NEW]\n\nexport interface UseGameStateResult {\n  state: GameStateObject;\n  dispatch: Dispatch<any>;\n  currentStreet: Street | null;\n  setupGame: (freshName?: string) => void;\n  processAnswer: (selectedStreet: Street) => void;\n  handleSelectAnswer: (selectedStreet: Street) => void;\n  handleNext: () => void;\n  handleRegister: (name: string) => void;\n}\n\n/**\n * Hook for managing all game state and gameplay logic\n * @param {Array} validStreets - Array of valid street objects\n * @param {Function} getHintStreets - Function to calculate hint streets\n * @returns {Object} Game state, dispatch, and handlers\n */\nexport const useGameState = (\n  validStreets: Street[],\n  getHintStreets: (street: Street) => Street[]\n): UseGameStateResult => {\n  const [state, dispatch] = useReducer(gameReducer, initialState) as [\n    GameStateObject,\n    Dispatch<any>,\n  ];\n  const navigate = useNavigate();\n  const { execute } = useAsyncOperation(); // [NEW]\n\n  // Current street being quizzed\n  const currentStreet = useMemo(\n    () => (state.gameState === 'playing' ? state.quizStreets[state.currentQuestionIndex] : null),\n    [state.gameState, state.quizStreets, state.currentQuestionIndex]\n  );\n\n  // Sync Auto-Advance to localStorage\n  useEffect(() => {\n    storage.set(STORAGE_KEYS.AUTO_ADVANCE, state.autoAdvance);\n  }, [state.autoAdvance]);\n\n  // Calculate hint streets when current street changes\n  useEffect(() => {\n    if (!currentStreet) {\n      dispatch({ type: 'SET_HINT_STREETS', payload: [] });\n      return;\n    }\n    const hints = getHintStreets(currentStreet);\n    dispatch({ type: 'SET_HINT_STREETS', payload: hints });\n  }, [currentStreet, getHintStreets]);\n\n  // Auto-advance effect\n  useEffect(() => {\n    let timeoutId: ReturnType<typeof setTimeout>;\n    if (state.feedback === 'transitioning' && state.autoAdvance) {\n      timeoutId = setTimeout(() => {\n        handleNext();\n      }, TIME.AUTO_ADVANCE_DELAY);\n    }\n    return () => clearTimeout(timeoutId);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [state.autoAdvance, state.feedback]);\n\n  /**\n   * Generate quiz options for a question\n   */\n  const generateOptionsList = useCallback(\n    (target: Street, allStreets: Street[], questionIndex: number) => {\n      const todaySeed = getTodaySeed();\n      const questionSeed = todaySeed + questionIndex * 100;\n      const distractors = selectDistractors(allStreets, target, questionSeed);\n      const opts = [target, ...distractors];\n      return shuffleOptions(opts, questionSeed + 50);\n    },\n    []\n  );\n\n  /**\n   * Setup a new game session\n   */\n  const setupGame = useCallback(\n    (freshName?: string) => {\n      // NOTE: Setup is mostly synchronous/local calculation, so we might not need a loader here unless\n      // we decide to fetch daily questions from server instead of local JSON plan.\n      // Keeping it sync for now to avoid specific \"loading\" flash on simple transitions.\n\n      const activeName = freshName || state.username;\n      if (!activeName) {\n        dispatch({ type: 'SET_GAME_STATE', payload: 'register' });\n        return;\n      }\n\n      if (validStreets.length === 0) {\n        logger.error('No valid streets found!');\n        dispatch({ type: 'SET_GAME_STATE', payload: 'intro' });\n        return;\n      }\n\n      const todaySeed = getTodaySeed();\n      const todayStr = new Date().toISOString().split('T')[0];\n      const plannedQuiz = quizPlan?.quizzes?.find((q: any) => q.date === todayStr);\n\n      let selected: Street[] | undefined;\n      let initialOptions: Street[] | undefined;\n\n      if (plannedQuiz && plannedQuiz.questions?.length > 0) {\n        const streetMap = new Map(validStreets.map(s => [s.id, s]));\n        selected = plannedQuiz.questions\n          .map((q: any) => streetMap.get(q.correctId))\n          .filter(Boolean) as Street[];\n\n        if (selected.length > 0) {\n          const firstQ = plannedQuiz.questions[0];\n          const correctStreet = streetMap.get(firstQ.correctId);\n          const distractorStreets = firstQ.distractorIds\n            .map((id: string) => streetMap.get(id))\n            .filter(Boolean) as Street[];\n\n          if (correctStreet && distractorStreets.length >= 3) {\n            const opts = [correctStreet, ...distractorStreets.slice(0, 3)];\n            initialOptions = shuffleOptions(opts, todaySeed + 50);\n          } else {\n            initialOptions = generateOptionsList(selected[0], validStreets, 0);\n          }\n        }\n      }\n\n      if (!selected || selected.length === 0) {\n        selected = selectDailyStreets(validStreets, todaySeed);\n        initialOptions =\n          selected.length > 0 ? generateOptionsList(selected[0], validStreets, 0) : [];\n      }\n\n      dispatch({\n        type: 'START_GAME',\n        payload: {\n          quizStreets: selected,\n          initialOptions: initialOptions,\n          plannedQuestions: plannedQuiz?.questions || null,\n        },\n      });\n    },\n    [state.username, validStreets, generateOptionsList]\n  );\n\n  /**\n   * Process answer submission\n   */\n  const processAnswer = useCallback(\n    (selectedStreet: Street) => {\n      if (state.feedback === 'transitioning') {return;}\n      if (!currentStreet) {return;}\n\n      const isCorrect = selectedStreet.id === currentStreet.id;\n      const timeElapsed = state.questionStartTime\n        ? (Date.now() - state.questionStartTime) / 1000\n        : 0;\n      const points = calculateScore(timeElapsed, isCorrect, state.hintsRevealedCount);\n\n      const result: QuizResult = {\n        street: currentStreet,\n        userAnswer: selectedStreet.name,\n        status: isCorrect ? 'correct' : 'failed',\n        time: timeElapsed,\n        points: points,\n        hintsUsed: state.hintsRevealedCount,\n      };\n\n      dispatch({\n        type: 'ANSWER_SUBMITTED',\n        payload: { result, points, selectedStreet },\n      });\n    },\n    [currentStreet, state.feedback, state.questionStartTime, state.hintsRevealedCount]\n  );\n\n  /**\n   * Handle answer selection\n   */\n  const handleSelectAnswer = useCallback(\n    (selectedStreet: Street) => {\n      dispatch({ type: 'SELECT_ANSWER', payload: selectedStreet });\n      processAnswer(selectedStreet);\n    },\n    [processAnswer]\n  );\n\n  /**\n   * Handle advancing to next question or game end\n   */\n  const handleNext = useCallback(() => {\n    if (state.feedback !== 'transitioning') {return;}\n\n    const nextIndex = state.currentQuestionIndex + 1;\n\n    if (nextIndex >= state.quizStreets.length) {\n      // Game complete\n      if (state.gameState === 'playing') {\n        saveGameResults();\n        // Since saving is async (fire-and-forget logic below), we don't strictly *block* UI here,\n        // but we could wrap saveGameResults in execute() if we wanted a \"Saving...\" indicator.\n        // For now, let's keep it fluid as users might want to see summary immediately.\n      }\n      dispatch({ type: 'NEXT_QUESTION', payload: {} });\n    } else {\n      // Next question\n      const nextStreet = state.quizStreets[nextIndex];\n      let nextOptions;\n\n      if (state.plannedQuestions && state.plannedQuestions[nextIndex]) {\n        const plannedQ = state.plannedQuestions[nextIndex];\n        const streetMap = new Map(validStreets.map(s => [s.id, s]));\n        const distractorStreets = plannedQ.distractorIds\n          .map((id: string) => streetMap.get(id))\n          .filter(Boolean) as Street[];\n\n        if (distractorStreets.length >= 3) {\n          const todaySeed = getTodaySeed();\n          const opts = [nextStreet, ...distractorStreets.slice(0, 3)];\n          nextOptions = shuffleOptions(opts, todaySeed + nextIndex * 100 + 50);\n        } else {\n          nextOptions = generateOptionsList(nextStreet, validStreets, nextIndex);\n        }\n      } else {\n        nextOptions = generateOptionsList(nextStreet, validStreets, nextIndex);\n      }\n\n      dispatch({\n        type: 'NEXT_QUESTION',\n        payload: { options: nextOptions },\n      });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [\n    state.feedback,\n    state.currentQuestionIndex,\n    state.quizStreets,\n    state.gameState,\n    state.plannedQuestions,\n    validStreets,\n    generateOptionsList,\n  ]);\n\n  /**\n   * Save game results to localStorage and Firestore\n   */\n  const saveGameResults = useCallback(() => {\n    execute(\n      async () => {\n        markTodayAsPlayed();\n        const history = storage.get(STORAGE_KEYS.HISTORY, []);\n        const avgTime = state.quizResults.length\n          ? (\n              state.quizResults.reduce(\n                (acc: number, curr: QuizResult) => acc + (curr.time || 0),\n                0\n              ) / state.quizResults.length\n            ).toFixed(1)\n          : 0;\n\n        const newRecord = {\n          date: getTodaySeed(),\n          score: state.score,\n          avgTime: avgTime,\n          timestamp: Date.now(),\n          username: state.username,\n        };\n        history.push(newRecord);\n        storage.set(STORAGE_KEYS.HISTORY, history);\n\n        if (state.username) {\n          await saveUserGameResult(state.username, newRecord);\n\n          const isBonus = await hasDailyReferral(state.username);\n          await saveScore(state.username, state.score, newRecord.avgTime, {\n            isBonus,\n            correctAnswers: state.correct,\n            questionCount: state.questions?.length || 0,\n            // @ts-ignore\n            email: auth.currentUser?.email,\n          });\n\n          const historyForStreak = storage.get(STORAGE_KEYS.HISTORY, []);\n          const streak = calculateStreak(historyForStreak);\n          const totalScore = historyForStreak.reduce(\n            (acc: number, h: any) => acc + (h.score || 0),\n            0\n          );\n\n          await updateUserGameStats(state.username, {\n            streak,\n            totalScore,\n            lastPlayDate: getTodaySeed(),\n          });\n\n          await awardChallengeBonus(state.username, streak);\n\n          const referrer = await getReferrer(state.username);\n          if (referrer) {\n            await awardReferralBonus(referrer);\n          }\n\n          // Check for feedback prompt\n          const lastFeedback = storage.get(STORAGE_KEYS.LAST_FEEDBACK);\n          const historyList = storage.get(STORAGE_KEYS.HISTORY, []);\n\n          if (shouldPromptFeedback(lastFeedback, historyList.length)) {\n            setTimeout(() => navigate('/feedback'), TIME.FEEDBACK_DELAY);\n          }\n        }\n      },\n      { loadingKey: 'save-game', errorMessage: 'Failed to save game results' }\n    );\n  }, [state, navigate, execute]);\n\n  /**\n   * Handle user registration\n   */\n  const handleRegister = useCallback((name: string) => {\n    storage.set(STORAGE_KEYS.USERNAME, name);\n    dispatch({ type: 'SET_USERNAME', payload: name });\n    dispatch({ type: 'SET_GAME_STATE', payload: 'intro' });\n  }, []);\n\n  return {\n    state,\n    dispatch,\n    currentStreet,\n    setupGame,\n    processAnswer,\n    handleSelectAnswer,\n    handleNext,\n    handleRegister,\n  };\n};\n\nexport default useGameState;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/hooks/useGameTimer.ts",
    "messages": [
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1000.",
        "line": 42,
        "column": 51,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 42,
        "endColumn": 55
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1000.",
        "line": 76,
        "column": 76,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 76,
        "endColumn": 80
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1000.",
        "line": 79,
        "column": 10,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 79,
        "endColumn": 14
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 3,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { useState, useCallback, useRef, useEffect } from 'react';\n\nexport interface UseGameTimerResult {\n  timer: number;\n  startTimer: () => void;\n  stopTimer: () => void;\n  resetTimer: () => void;\n  isRunning: boolean;\n}\n\n/**\n * Custom hook for managing a game timer with start, stop, and reset functionality.\n * Tracks elapsed time in seconds with automatic updates.\n *\n * @returns {{\n *   timer: number,\n *   startTimer: Function,\n *   stopTimer: Function,\n *   resetTimer: Function,\n *   isRunning: boolean\n * }}\n *\n * @example\n * const { timer, startTimer, stopTimer, resetTimer, isRunning } = useGameTimer();\n *\n * startTimer(); // Begin counting\n * // timer updates every second\n * stopTimer(); // Pause counting\n * resetTimer(); // Reset to 0\n */\nexport function useGameTimer(): UseGameTimerResult {\n  const [timer, setTimer] = useState(0);\n  const [isRunning, setIsRunning] = useState(false);\n  const intervalRef = useRef<ReturnType<typeof setInterval> | null>(null);\n  const startTimeRef = useRef<number | null>(null);\n\n  /**\n   * Start or resume the timer\n   */\n  const startTimer = useCallback(() => {\n    if (!isRunning) {\n      startTimeRef.current = Date.now() - timer * 1000;\n      setIsRunning(true);\n    }\n  }, [isRunning, timer]);\n\n  /**\n   * Stop/pause the timer\n   */\n  const stopTimer = useCallback(() => {\n    setIsRunning(false);\n    if (intervalRef.current) {\n      clearInterval(intervalRef.current);\n      intervalRef.current = null;\n    }\n  }, []);\n\n  /**\n   * Reset timer to 0 and stop\n   */\n  const resetTimer = useCallback(() => {\n    setIsRunning(false);\n    setTimer(0);\n    startTimeRef.current = null;\n    if (intervalRef.current) {\n      clearInterval(intervalRef.current);\n      intervalRef.current = null;\n    }\n  }, []);\n\n  // Handle timer updates when running\n  useEffect(() => {\n    if (isRunning) {\n      intervalRef.current = setInterval(() => {\n        if (startTimeRef.current !== null) {\n          const elapsed = Math.floor((Date.now() - startTimeRef.current) / 1000);\n          setTimer(elapsed);\n        }\n      }, 1000);\n    } else {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n        intervalRef.current = null;\n      }\n    }\n\n    // Cleanup on unmount\n    return () => {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n    };\n  }, [isRunning]);\n\n  return {\n    timer,\n    startTimer,\n    stopTimer,\n    resetTimer,\n    isRunning,\n  };\n}\n\nexport default useGameTimer;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/hooks/useLocalStorage.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/hooks/useNotification.ts",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/hooks/useNotifications.js",
    "messages": [],
    "suppressedMessages": [
      {
        "ruleId": "no-console",
        "severity": 2,
        "message": "Unexpected console statement. Only these console methods are allowed: warn, error.",
        "line": 83,
        "column": 9,
        "nodeType": "MemberExpression",
        "messageId": "limited",
        "endLine": 83,
        "endColumn": 20,
        "suggestions": [
          {
            "fix": { "range": [2860, 2895], "text": "" },
            "messageId": "removeConsole",
            "data": { "propertyName": "log" },
            "desc": "Remove the console.log()."
          }
        ],
        "suppressions": [{ "kind": "directive", "justification": "" }]
      }
    ],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/hooks/useScoreCalculator.ts",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/hooks/useStreets.ts",
    "messages": [
      {
        "ruleId": "max-depth",
        "severity": 1,
        "message": "Blocks are nested too deeply (5). Maximum allowed is 4.",
        "line": 75,
        "column": 13,
        "nodeType": "IfStatement",
        "messageId": "tooDeeply",
        "endLine": 75,
        "endColumn": 44
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 3.",
        "line": 75,
        "column": 33,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 75,
        "endColumn": 34
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 3.",
        "line": 81,
        "column": 26,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 81,
        "endColumn": 27
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 3.",
        "line": 98,
        "column": 24,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 98,
        "endColumn": 25
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 4,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { useCallback } from 'react';\nimport * as turf from '@turf/turf';\n// @ts-ignore\nimport rawStreets from '../data/streets.json';\nimport { Street } from '../types/game';\n\n// --- Static Data Initialization ---\n// Calculate this once at module load time, not on every render\n\nconst isValidType = (name: string): boolean => {\n  if (!name) {return false;}\n  const lower = name.toLowerCase();\n  return (\n    !lower.includes('autopista') &&\n    !lower.includes('autovia') &&\n    !lower.includes('b-1') &&\n    !lower.includes('b-2')\n  );\n};\n\nconst validStreetsData: Street[] = (() => {\n  const streets = rawStreets as Street[];\n  const rawValidStreets = streets.filter(\n    s => isValidType(s.name) && s.geometry && s.geometry.length > 0\n  );\n\n  // Deduplicate by name, keeping the one with most geometry points\n  const uniqueStreetsMap = new Map<string, Street>();\n  rawValidStreets.forEach(s => {\n    if (!uniqueStreetsMap.has(s.name)) {\n      uniqueStreetsMap.set(s.name, s);\n    } else {\n      const existing = uniqueStreetsMap.get(s.name)!;\n      const currentLength = s.geometry.flat().length;\n      const existingLength = existing.geometry.flat().length;\n      if (currentLength > existingLength) {\n        uniqueStreetsMap.set(s.name, s);\n      }\n    }\n  });\n\n  return Array.from(uniqueStreetsMap.values());\n})();\n\n/**\n * Hook for managing street data - validation and hint calculation\n * @returns {Object} { validStreets, getHintStreets }\n */\nexport const useStreets = () => {\n  /**\n   * Calculate hint streets (streets that intersect with target)\n   * @param {Object} targetStreet - The current street to find hints for\n   * @returns {Array} Up to 3 streets that intersect or are near target\n   */\n  const getHintStreets = useCallback((targetStreet: Street) => {\n    if (!targetStreet) {return [];}\n\n    const toTurf = (lines: number[][][]) => lines.map(line => line.map(p => [p[1], p[0]]));\n    let hints: Street[] = [];\n\n    try {\n      const currentGeo = turf.multiLineString(toTurf(targetStreet.geometry));\n\n      // OPTIMIZATION: Iterate over validStreetsData instead of rawStreets\n      // This is smaller and already filtered/deduped\n      for (const street of validStreetsData) {\n        if (street.id === targetStreet.id) {continue;}\n\n        // No need to check isValidType here as validStreetsData is already filtered\n\n        if (street.geometry) {\n          const otherGeo = turf.multiLineString(toTurf(street.geometry));\n          if (!turf.booleanDisjoint(currentGeo, otherGeo)) {\n            hints.push(street);\n            if (hints.length >= 3) {break;}\n          }\n        }\n      }\n\n      // If not enough intersecting streets, find nearest\n      if (hints.length < 3) {\n        const currentCentroid = turf.centroid(currentGeo);\n        const candidates: { street: Street; dist: number }[] = [];\n\n        for (const street of validStreetsData) {\n          if (street.id === targetStreet.id) {continue;}\n          if (hints.some(h => h.id === street.id)) {continue;}\n\n          if (street.geometry) {\n            const p1 = street.geometry[0][0];\n            const otherPoint = turf.point([p1[1], p1[0]]);\n            const dist = turf.distance(currentCentroid, otherPoint);\n            candidates.push({ street, dist });\n          }\n        }\n\n        candidates.sort((a, b) => a.dist - b.dist);\n        const needed = 3 - hints.length;\n        const extra = candidates.slice(0, needed).map(c => c.street);\n        hints = [...hints, ...extra];\n      }\n    } catch (e) {\n      console.error('Turf error in getHintStreets:', e);\n    }\n\n    return hints;\n  }, []);\n\n  return { validStreets: validStreetsData, getHintStreets, rawStreets: rawStreets as Street[] };\n};\n\nexport default useStreets;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/i18n/translations.jsx",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/main.jsx",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/reducers/gameReducer.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/services/userMigration.js",
    "messages": [],
    "suppressedMessages": [
      {
        "ruleId": "no-console",
        "severity": 2,
        "message": "Unexpected console statement. Only these console methods are allowed: warn, error.",
        "line": 55,
        "column": 5,
        "nodeType": "MemberExpression",
        "messageId": "limited",
        "endLine": 55,
        "endColumn": 16,
        "suggestions": [
          {
            "fix": { "range": [1973, 2048], "text": "" },
            "messageId": "removeConsole",
            "data": { "propertyName": "log" },
            "desc": "Remove the console.log()."
          }
        ],
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-console",
        "severity": 2,
        "message": "Unexpected console statement. Only these console methods are allowed: warn, error.",
        "line": 59,
        "column": 5,
        "nodeType": "MemberExpression",
        "messageId": "limited",
        "endLine": 59,
        "endColumn": 16,
        "suggestions": [
          {
            "fix": { "range": [2204, 2263], "text": "" },
            "messageId": "removeConsole",
            "data": { "propertyName": "log" },
            "desc": "Remove the console.log()."
          }
        ],
        "suppressions": [{ "kind": "directive", "justification": "" }]
      }
    ],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/setupTests.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/stories/Button.jsx",
    "messages": [
      {
        "ruleId": "react/boolean-prop-naming",
        "severity": 1,
        "message": "Prop name `primary` doesnâ€™t match rule `^(is|has|should|can|will|did)[A-Z]([A-Za-z0-9]?)+`",
        "line": 30,
        "column": 3,
        "nodeType": "Property",
        "messageId": "patternMismatch",
        "endLine": 30,
        "endColumn": 26
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 1,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import React from 'react';\n\nimport PropTypes from 'prop-types';\n\nimport './button.css';\n\n/** Primary UI component for user interaction */\nexport const Button = ({\n  primary = false,\n  backgroundColor = null,\n  size = 'medium',\n  label,\n  ...props\n}) => {\n  const mode = primary ? 'storybook-button--primary' : 'storybook-button--secondary';\n  return (\n    <button\n      type=\"button\"\n      className={['storybook-button', `storybook-button--${size}`, mode].join(' ')}\n      style={backgroundColor && { backgroundColor }}\n      {...props}\n    >\n      {label}\n    </button>\n  );\n};\n\nButton.propTypes = {\n  /** Is this the principal call to action on the page? */\n  primary: PropTypes.bool,\n  /** What background color to use */\n  backgroundColor: PropTypes.string,\n  /** How large should the button be? */\n  size: PropTypes.oneOf(['small', 'medium', 'large']),\n  /** Button contents */\n  label: PropTypes.string.isRequired,\n  /** Optional click handler */\n  onClick: PropTypes.func,\n};\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/stories/Button.stories.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/stories/Header.jsx",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/stories/Header.stories.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/stories/Page.jsx",
    "messages": [
      {
        "ruleId": "react/no-unescaped-entities",
        "severity": 2,
        "message": "`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.",
        "line": 35,
        "column": 13,
        "nodeType": "JSXText",
        "messageId": "unescapedEntityAlts",
        "suggestions": [
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&quot;" },
            "fix": {
              "range": [1046, 1202],
              "text": "\n            Use a higher-level connected component. Storybook helps you compose such data from the\n            &quot;args\" of child component stories\n          "
            },
            "desc": "Replace with `&quot;`."
          },
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&ldquo;" },
            "fix": {
              "range": [1046, 1202],
              "text": "\n            Use a higher-level connected component. Storybook helps you compose such data from the\n            &ldquo;args\" of child component stories\n          "
            },
            "desc": "Replace with `&ldquo;`."
          },
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&#34;" },
            "fix": {
              "range": [1046, 1202],
              "text": "\n            Use a higher-level connected component. Storybook helps you compose such data from the\n            &#34;args\" of child component stories\n          "
            },
            "desc": "Replace with `&#34;`."
          },
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&rdquo;" },
            "fix": {
              "range": [1046, 1202],
              "text": "\n            Use a higher-level connected component. Storybook helps you compose such data from the\n            &rdquo;args\" of child component stories\n          "
            },
            "desc": "Replace with `&rdquo;`."
          }
        ]
      },
      {
        "ruleId": "react/no-unescaped-entities",
        "severity": 2,
        "message": "`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.",
        "line": 35,
        "column": 18,
        "nodeType": "JSXText",
        "messageId": "unescapedEntityAlts",
        "suggestions": [
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&quot;" },
            "fix": {
              "range": [1046, 1202],
              "text": "\n            Use a higher-level connected component. Storybook helps you compose such data from the\n            \"args&quot; of child component stories\n          "
            },
            "desc": "Replace with `&quot;`."
          },
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&ldquo;" },
            "fix": {
              "range": [1046, 1202],
              "text": "\n            Use a higher-level connected component. Storybook helps you compose such data from the\n            \"args&ldquo; of child component stories\n          "
            },
            "desc": "Replace with `&ldquo;`."
          },
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&#34;" },
            "fix": {
              "range": [1046, 1202],
              "text": "\n            Use a higher-level connected component. Storybook helps you compose such data from the\n            \"args&#34; of child component stories\n          "
            },
            "desc": "Replace with `&#34;`."
          },
          {
            "messageId": "replaceWithAlt",
            "data": { "alt": "&rdquo;" },
            "fix": {
              "range": [1046, 1202],
              "text": "\n            Use a higher-level connected component. Storybook helps you compose such data from the\n            \"args&rdquo; of child component stories\n          "
            },
            "desc": "Replace with `&rdquo;`."
          }
        ]
      }
    ],
    "suppressedMessages": [],
    "errorCount": 2,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import React from 'react';\n\nimport { Header } from './Header';\nimport './page.css';\n\nexport const Page = () => {\n  const [user, setUser] = React.useState();\n\n  return (\n    <article>\n      <Header\n        user={user}\n        onLogin={() => setUser({ name: 'Jane Doe' })}\n        onLogout={() => setUser(undefined)}\n        onCreateAccount={() => setUser({ name: 'Jane Doe' })}\n      />\n\n      <section className=\"storybook-page\">\n        <h2>Pages in Storybook</h2>\n        <p>\n          We recommend building UIs with a{' '}\n          <a href=\"https://componentdriven.org\" target=\"_blank\" rel=\"noopener noreferrer\">\n            <strong>component-driven</strong>\n          </a>{' '}\n          process starting with atomic components and ending with pages.\n        </p>\n        <p>\n          Render pages with mock data. This makes it easy to build and review page states without\n          needing to navigate to them in your app. Here are some handy patterns for managing page\n          data in Storybook:\n        </p>\n        <ul>\n          <li>\n            Use a higher-level connected component. Storybook helps you compose such data from the\n            \"args\" of child component stories\n          </li>\n          <li>\n            Assemble data in the page component from your services. You can mock these services out\n            using Storybook.\n          </li>\n        </ul>\n        <p>\n          Get a guided tutorial on component-driven development at{' '}\n          <a href=\"https://storybook.js.org/tutorials/\" target=\"_blank\" rel=\"noopener noreferrer\">\n            Storybook tutorials\n          </a>\n          . Read more in the{' '}\n          <a href=\"https://storybook.js.org/docs\" target=\"_blank\" rel=\"noopener noreferrer\">\n            docs\n          </a>\n          .\n        </p>\n        <div className=\"tip-wrapper\">\n          <span className=\"tip\">Tip</span> Adjust the width of the canvas with the{' '}\n          <svg width=\"10\" height=\"10\" viewBox=\"0 0 12 12\" xmlns=\"http://www.w3.org/2000/svg\">\n            <g fill=\"none\" fillRule=\"evenodd\">\n              <path\n                d=\"M1.5 5.2h4.8c.3 0 .5.2.5.4v5.1c-.1.2-.3.3-.4.3H1.4a.5.5 0 01-.5-.4V5.7c0-.3.2-.5.5-.5zm0-2.1h6.9c.3 0 .5.2.5.4v7a.5.5 0 01-1 0V4H1.5a.5.5 0 010-1zm0-2.1h9c.3 0 .5.2.5.4v9.1a.5.5 0 01-1 0V2H1.5a.5.5 0 010-1zm4.3 5.2H2V10h3.8V6.2z\"\n                id=\"a\"\n                fill=\"#999\"\n              />\n            </g>\n          </svg>\n          Viewports addon in the toolbar\n        </div>\n      </section>\n    </article>\n  );\n};\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/stories/Page.stories.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/styles/tokens.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/test/setup.ts",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/types/game.ts",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 5,
        "column": 33,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 5,
        "endColumn": 36,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [182, 185], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [182, 185], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 1,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "export interface Street {\n    id: string;\n    name: string;\n    geometry: number[][][]; // array of line strings or whatever the GeoJSON structure is\n    properties?: Record<string, any>;\n}\n\nexport interface QuizQuestion {\n    correctId: string;\n    distractorIds: string[];\n}\n\nexport interface QuizPlan {\n    date: string;\n    questions: QuizQuestion[];\n}\n\nexport interface QuizResult {\n    street: Street;\n    userAnswer: string;\n    status: 'correct' | 'failed';\n    time: number;\n    points: number;\n    hintsUsed: number;\n}\n\nexport type GameState =\n    | 'register'\n    | 'intro'\n    | 'playing'\n    | 'summary'\n    | 'instructions';\n\nexport type Feedback =\n    | 'none'\n    | 'correct'\n    | 'incorrect'\n    | 'transitioning'\n    | 'idle'\n    | 'selected';\n\nexport interface GameStateObject {\n    username: string | null;\n    realName: string | null;\n    gameState: GameState;\n    quizStreets: Street[];\n    currentQuestionIndex: number;\n    questionStartTime: number | null;\n    score: number;\n    correct: number;\n    questions?: Street[]; // legacy/redundant?\n    options: Street[];\n    quizResults: QuizResult[];\n    feedback: Feedback;\n    selectedStreet: Street | null;\n    hintsRevealedCount: number;\n    hintStreets: Street[];\n    autoAdvance: boolean;\n    registerMode: 'signin' | 'signup';\n    streak: number;\n    profileLoaded: boolean;\n    plannedQuestions: QuizQuestion[] | null;\n    selectedAnswer: Street | null; // Added\n    isInputLocked: boolean; // Added\n    activePage: string | null; // Added\n}\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/types/user.ts",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/utils/__tests__/dailyChallenge.test.ts",
    "messages": [
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 20200101.",
        "line": 25,
        "column": 36,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 25,
        "endColumn": 44
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 4.",
        "line": 34,
        "column": 18,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 34,
        "endColumn": 19
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 20250113.",
        "line": 47,
        "column": 58,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 47,
        "endColumn": 66
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 20250114.",
        "line": 48,
        "column": 58,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 48,
        "endColumn": 66
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 20250113.",
        "line": 56,
        "column": 57,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 56,
        "endColumn": 65
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 10.",
        "line": 57,
        "column": 47,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 57,
        "endColumn": 49
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 6,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { describe, it, expect, beforeEach } from 'vitest';\nimport {\n  getTodaySeed,\n  selectDailyStreets,\n  hasPlayedToday,\n  markTodayAsPlayed,\n} from '../dailyChallenge';\n\ndescribe('dailyChallenge utils', () => {\n  beforeEach(() => {\n    // Clear localStorage before each test\n    localStorage.clear();\n  });\n\n  describe('getTodaySeed', () => {\n    it('returns consistent seed for same day', () => {\n      const seed1 = getTodaySeed();\n      const seed2 = getTodaySeed();\n      expect(seed1).toBe(seed2);\n    });\n\n    it('returns date in YYYYMMDD number format', () => {\n      // Implementation returns parseInt(YYYYMMDD)\n      const seed = getTodaySeed();\n      expect(seed).toBeGreaterThan(20200101); // Logical check\n    });\n  });\n\n  describe('selectDailyStreets', () => {\n    // Mock streets with tiers\n    const mockStreets = Array.from({ length: 20 }, (_, i) => ({\n      id: `${i}`,\n      name: `Street ${i}`,\n      tier: (i % 4) + 1, // Distribute tiers 1-4\n      geometry: [[[]]],\n    }));\n\n    it('returns deterministic selection for same seed', () => {\n      const seed = 20250113;\n      const selection1 = selectDailyStreets(mockStreets, seed);\n      const selection2 = selectDailyStreets(mockStreets, seed);\n\n      expect(selection1).toEqual(selection2);\n    });\n\n    it('returns different streets (or order) for different seeds', () => {\n      const selection1 = selectDailyStreets(mockStreets, 20250113);\n      const selection2 = selectDailyStreets(mockStreets, 20250114);\n\n      // Highly unlikely to match exactly including shuffling\n      expect(selection1).not.toEqual(selection2);\n    });\n\n    it('returns correct number of streets', () => {\n      // Should return 10 or max available\n      const selection = selectDailyStreets(mockStreets, 20250113);\n      expect(selection).toHaveLength(Math.min(10, mockStreets.length));\n    });\n  });\n\n  describe('hasPlayedToday / markTodayAsPlayed', () => {\n    it('returns false when not played today', () => {\n      // Manually remove if needed, though beforeEach clears\n      expect(hasPlayedToday()).toBe(false);\n    });\n\n    it('returns true after marking as played', () => {\n      markTodayAsPlayed();\n      expect(hasPlayedToday()).toBe(true);\n    });\n\n    it('returns false for different day', () => {\n      // Mock storage to yesterday\n      // Current implementation compares storage string to getTodaySeed string\n      // getTodaySeed returns YYYYMMDD\n      const yesterdaySeed = (getTodaySeed() - 1).toString();\n\n      localStorage.setItem('lastPlayedDate', yesterdaySeed);\n\n      expect(hasPlayedToday()).toBe(false);\n    });\n  });\n});\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/utils/__tests__/firebase.test.js",
    "messages": [
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 20240101.",
        "line": 38,
        "column": 23,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 38,
        "endColumn": 31
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1500.",
        "line": 58,
        "column": 35,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 58,
        "endColumn": 39
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1200.",
        "line": 78,
        "column": 34,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 78,
        "endColumn": 38
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1500.",
        "line": 101,
        "column": 35,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 101,
        "endColumn": 39
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1200.",
        "line": 116,
        "column": 35,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 116,
        "endColumn": 39
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1500.",
        "line": 131,
        "column": 35,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 131,
        "endColumn": 39
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1500.",
        "line": 146,
        "column": 35,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 146,
        "endColumn": 39
      },
      {
        "ruleId": "no-empty-function",
        "severity": 1,
        "message": "Unexpected empty arrow function.",
        "line": 152,
        "column": 77,
        "nodeType": "ArrowFunctionExpression",
        "messageId": "unexpected",
        "endLine": 152,
        "endColumn": 79,
        "suggestions": [
          {
            "messageId": "suggestComment",
            "data": { "name": "arrow function" },
            "fix": { "range": [4196, 4196], "text": " /* empty */ " },
            "desc": "Add comment inside empty arrow function."
          }
        ]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1500.",
        "line": 154,
        "column": 27,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 154,
        "endColumn": 31
      },
      {
        "ruleId": "no-empty-function",
        "severity": 1,
        "message": "Unexpected empty arrow function.",
        "line": 163,
        "column": 77,
        "nodeType": "ArrowFunctionExpression",
        "messageId": "unexpected",
        "endLine": 163,
        "endColumn": 79,
        "suggestions": [
          {
            "messageId": "suggestComment",
            "data": { "name": "arrow function" },
            "fix": { "range": [4521, 4521], "text": " /* empty */ " },
            "desc": "Add comment inside empty arrow function."
          }
        ]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1500.",
        "line": 165,
        "column": 29,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 165,
        "endColumn": 33
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1500.",
        "line": 178,
        "column": 35,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 178,
        "endColumn": 39
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1500.",
        "line": 193,
        "column": 35,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 193,
        "endColumn": 39
      },
      {
        "ruleId": "no-empty-function",
        "severity": 1,
        "message": "Unexpected empty arrow function.",
        "line": 205,
        "column": 83,
        "nodeType": "ArrowFunctionExpression",
        "messageId": "unexpected",
        "endLine": 205,
        "endColumn": 85,
        "suggestions": [
          {
            "messageId": "suggestComment",
            "data": { "name": "arrow function" },
            "fix": { "range": [5589, 5589], "text": " /* empty */ " },
            "desc": "Add comment inside empty arrow function."
          }
        ]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1500.",
        "line": 208,
        "column": 35,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 208,
        "endColumn": 39
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2000.",
        "line": 256,
        "column": 48,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 256,
        "endColumn": 52
      },
      {
        "ruleId": "no-empty-function",
        "severity": 1,
        "message": "Unexpected empty arrow function.",
        "line": 273,
        "column": 83,
        "nodeType": "ArrowFunctionExpression",
        "messageId": "unexpected",
        "endLine": 273,
        "endColumn": 85,
        "suggestions": [
          {
            "messageId": "suggestComment",
            "data": { "name": "arrow function" },
            "fix": { "range": [7750, 7750], "text": " /* empty */ " },
            "desc": "Add comment inside empty arrow function."
          }
        ]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1500.",
        "line": 313,
        "column": 42,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 313,
        "endColumn": 46
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 18,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { describe, it, expect, vi, beforeEach } from 'vitest';\nimport { saveScore, getLeaderboard } from '../leaderboard';\n\n// Mock Firestore\nconst mocks = vi.hoisted(() => ({\n  addDoc: vi.fn(),\n  setDoc: vi.fn(),\n  getDoc: vi.fn(),\n  getDocs: vi.fn(),\n  collection: vi.fn(),\n  doc: vi.fn(),\n  query: vi.fn(),\n  orderBy: vi.fn(),\n  limit: vi.fn(),\n  where: vi.fn(),\n  timestamp: { now: vi.fn(() => ({ seconds: 1234567890 })) },\n}));\n\nvi.mock('firebase/firestore', () => ({\n  collection: (...args) => mocks.collection(...args),\n  doc: (...args) => mocks.doc(...args),\n  setDoc: (...args) => mocks.setDoc(...args),\n  addDoc: (...args) => mocks.addDoc(...args),\n  getDoc: (...args) => mocks.getDoc(...args),\n  getDocs: (...args) => mocks.getDocs(...args),\n  query: (...args) => mocks.query(...args),\n  orderBy: (...args) => mocks.orderBy(...args),\n  limit: (...args) => mocks.limit(...args),\n  where: (...args) => mocks.where(...args),\n  Timestamp: mocks.timestamp,\n}));\n\nvi.mock('../../firebase', () => ({\n  db: {},\n}));\n\nvi.mock('../dailyChallenge', () => ({\n  getTodaySeed: () => 20240101,\n}));\n\ndescribe('Firebase Leaderboard Functions', () => {\n  beforeEach(() => {\n    vi.clearAllMocks();\n    mocks.collection.mockReturnValue('mockCollection');\n    mocks.doc.mockReturnValue('mockDoc');\n    mocks.query.mockReturnValue('mocks.query');\n    mocks.orderBy.mockReturnValue('mocks.orderBy');\n    mocks.limit.mockReturnValue('mocks.limit');\n    mocks.where.mockReturnValue('mocks.where');\n  });\n\n  describe('saveScore', () => {\n    it('should save score to history collection', async () => {\n      mocks.getDoc.mockResolvedValue({\n        exists: () => false,\n      });\n\n      await saveScore('TestUser', 1500, '10.5');\n\n      expect(mocks.addDoc).toHaveBeenCalledTimes(1);\n      expect(mocks.addDoc).toHaveBeenCalledWith(\n        'mockCollection',\n        expect.objectContaining({\n          username: 'TestUser',\n          score: 1500,\n          time: 10.5,\n          date: 20240101,\n          platform: 'web',\n        })\n      );\n    });\n\n    it('should update personal best when no previous score exists', async () => {\n      mocks.getDoc.mockResolvedValue({\n        exists: () => false,\n      });\n\n      await saveScore('NewUser', 1200, '12.0');\n\n      expect(mocks.setDoc).toHaveBeenCalledTimes(1);\n      expect(mocks.setDoc).toHaveBeenCalledWith(\n        'mockDoc',\n        expect.objectContaining({\n          username: 'NewUser',\n          score: 1200,\n          time: 12.0,\n        })\n      );\n    });\n\n    it('should update personal best when new score is higher', async () => {\n      mocks.getDoc.mockResolvedValue({\n        exists: () => true,\n        data: () => ({\n          username: 'TestUser',\n          score: 1000,\n          time: 15.0,\n        }),\n      });\n\n      await saveScore('TestUser', 1500, '10.0');\n\n      expect(mocks.setDoc).toHaveBeenCalledTimes(1);\n    });\n\n    it('should not update personal best when new score is lower', async () => {\n      mocks.getDoc.mockResolvedValue({\n        exists: () => true,\n        data: () => ({\n          username: 'TestUser',\n          score: 1500,\n          time: 10.0,\n        }),\n      });\n\n      await saveScore('TestUser', 1200, '12.0');\n\n      expect(mocks.setDoc).not.toHaveBeenCalled();\n    });\n\n    it('should update personal best when score is same but time is better', async () => {\n      mocks.getDoc.mockResolvedValue({\n        exists: () => true,\n        data: () => ({\n          username: 'TestUser',\n          score: 1500,\n          time: 12.0,\n        }),\n      });\n\n      await saveScore('TestUser', 1500, '10.0');\n\n      expect(mocks.setDoc).toHaveBeenCalledTimes(1);\n    });\n\n    it('should not update personal best when score is same but time is worse', async () => {\n      mocks.getDoc.mockResolvedValue({\n        exists: () => true,\n        data: () => ({\n          username: 'TestUser',\n          score: 1500,\n          time: 10.0,\n        }),\n      });\n\n      await saveScore('TestUser', 1500, '12.0');\n\n      expect(mocks.setDoc).not.toHaveBeenCalled();\n    });\n\n    it('should handle missing username gracefully', async () => {\n      const consoleSpy = vi.spyOn(console, 'warn').mockImplementation(() => {});\n\n      await saveScore('', 1500, '10.0');\n\n      expect(consoleSpy).toHaveBeenCalled();\n      expect(mocks.addDoc).not.toHaveBeenCalled();\n\n      consoleSpy.mockRestore();\n    });\n\n    it('should handle null username gracefully', async () => {\n      const consoleSpy = vi.spyOn(console, 'warn').mockImplementation(() => {});\n\n      await saveScore(null, 1500, '10.0');\n\n      expect(consoleSpy).toHaveBeenCalled();\n      expect(mocks.addDoc).not.toHaveBeenCalled();\n\n      consoleSpy.mockRestore();\n    });\n\n    it('should parse time as float', async () => {\n      mocks.getDoc.mockResolvedValue({\n        exists: () => false,\n      });\n\n      await saveScore('TestUser', 1500, '10.5');\n\n      expect(mocks.addDoc).toHaveBeenCalledWith(\n        'mockCollection',\n        expect.objectContaining({\n          time: 10.5,\n        })\n      );\n    });\n\n    it('should include timestamp and date', async () => {\n      mocks.getDoc.mockResolvedValue({\n        exists: () => false,\n      });\n\n      await saveScore('TestUser', 1500, '10.0');\n\n      expect(mocks.addDoc).toHaveBeenCalledWith(\n        'mockCollection',\n        expect.objectContaining({\n          date: 20240101,\n          timestamp: expect.any(Object),\n        })\n      );\n    });\n\n    it('should handle Firestore errors gracefully', async () => {\n      const consoleErrorSpy = vi.spyOn(console, 'error').mockImplementation(() => {});\n      mocks.addDoc.mockRejectedValue(new Error('Firestore error'));\n\n      await saveScore('TestUser', 1500, '10.0');\n\n      expect(consoleErrorSpy).toHaveBeenCalled();\n      consoleErrorSpy.mockRestore();\n    });\n  });\n\n  describe('getLeaderboard', () => {\n    it('should fetch all-time leaderboard from highscores collection', async () => {\n      const mockScores = [\n        { id: '1', data: () => ({ username: 'User1', score: 1800, time: 8.0 }) },\n        { id: '2', data: () => ({ username: 'User2', score: 1700, time: 9.0 }) },\n      ];\n\n      // Return valid snapshot structure for both calls (scores + migrations)\n      mocks.getDocs.mockResolvedValue({\n        docs: mockScores,\n        forEach: fn => mockScores.forEach(fn),\n        size: mockScores.length,\n        empty: mockScores.length === 0,\n      });\n\n      const result = await getLeaderboard('all');\n\n      expect(mocks.query).toHaveBeenCalled();\n      expect(result).toHaveLength(2);\n      expect(result[0]).toMatchObject({\n        id: '@user1', // updated expectation\n        username: '@user1', // updated expectation\n        score: 1800,\n      });\n    });\n\n    it('should fetch daily leaderboard with date filter', async () => {\n      const mockScores = [\n        { id: '1', data: () => ({ username: 'User1', score: 1800, time: 8.0, date: 20240101 }) },\n      ];\n\n      mocks.getDocs.mockResolvedValue({\n        docs: mockScores,\n        forEach: fn => mockScores.forEach(fn),\n        size: mockScores.length,\n        empty: mockScores.length === 0,\n      });\n\n      await getLeaderboard('daily');\n\n      // Logic changed: Now it fetches last 2000 items and filters in-memory\n      expect(mocks.limit).toHaveBeenCalledWith(2000);\n    });\n\n    it('should handle empty leaderboard', async () => {\n      mocks.getDocs.mockResolvedValue({\n        docs: [],\n        forEach: fn => [].forEach(fn),\n        size: 0,\n        empty: true,\n      });\n\n      const result = await getLeaderboard('all');\n\n      expect(result).toEqual([]);\n    });\n\n    it('should handle Firestore errors gracefully', async () => {\n      const consoleErrorSpy = vi.spyOn(console, 'error').mockImplementation(() => {});\n      mocks.getDocs.mockRejectedValue(new Error('Firestore error'));\n\n      const result = await getLeaderboard('all');\n\n      expect(result).toEqual([]);\n      expect(consoleErrorSpy).toHaveBeenCalled();\n      consoleErrorSpy.mockRestore();\n    });\n\n    it('should deduplicate scores by username', async () => {\n      const mockScores = [\n        { id: '1', data: () => ({ username: 'User1', score: 1800, time: 8.0 }) },\n        { id: '2', data: () => ({ username: 'User1', score: 1700, time: 9.0 }) },\n        { id: '3', data: () => ({ username: 'User2', score: 1600, time: 10.0 }) },\n      ];\n\n      mocks.getDocs.mockResolvedValue({\n        docs: mockScores,\n        forEach: fn => mockScores.forEach(fn),\n        size: mockScores.length,\n        empty: mockScores.length === 0,\n      });\n\n      const result = await getLeaderboard('all');\n\n      // Should only have one entry per user (the highest score)\n      const usernames = result.map(r => r.username);\n      expect(new Set(usernames).size).toBe(usernames.length);\n    });\n  });\n\n  describe('Integration: Save and Retrieve', () => {\n    it.skip('should save score and retrieve it from leaderboard', async () => {\n      // Setup: No existing score\n      mocks.getDoc.mockResolvedValue({\n        exists: () => false,\n      });\n\n      // Save score\n      await saveScore('IntegrationUser', 1500, '10.0');\n\n      // Verify save was called\n      expect(mocks.addDoc).toHaveBeenCalled();\n      expect(mocks.getDoc).toHaveBeenCalled();\n      expect(mocks.setDoc).toHaveBeenCalled();\n\n      // Setup: Mock retrieval\n      const mockDocs = [\n        {\n          id: '1',\n          data: () => ({\n            username: 'IntegrationUser',\n            score: 1500,\n            time: 10.0,\n            date: 20240101,\n          }),\n        },\n      ];\n      mocks.getDocs.mockResolvedValue({\n        docs: mockDocs,\n        forEach: fn => mockDocs.forEach(fn),\n        size: mockDocs.length,\n      });\n\n      // Retrieve leaderboard\n      const leaderboard = await getLeaderboard('all');\n\n      expect(leaderboard).toHaveLength(1);\n      expect(leaderboard[0]).toMatchObject({\n        username: 'IntegrationUser',\n        score: 1500,\n        time: 10.0,\n      });\n    });\n  });\n});\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/utils/__tests__/gameLogic.test.js",
    "messages": [
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 20000101.",
        "line": 48,
        "column": 36,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 48,
        "endColumn": 44
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 21000101.",
        "line": 49,
        "column": 33,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 49,
        "endColumn": 41
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 20240315.",
        "line": 65,
        "column": 25,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 65,
        "endColumn": 33
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 10.",
        "line": 76,
        "column": 37,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 76,
        "endColumn": 39
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 5.",
        "line": 113,
        "column": 47,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 113,
        "endColumn": 48
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 5.",
        "line": 118,
        "column": 51,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 118,
        "endColumn": 52
      },
      {
        "ruleId": "radix",
        "severity": 2,
        "message": "Missing radix parameter.",
        "line": 183,
        "column": 63,
        "nodeType": "CallExpression",
        "messageId": "missingRadix",
        "endLine": 183,
        "endColumn": 74,
        "suggestions": [
          {
            "messageId": "addRadixParameter10",
            "fix": { "range": [5972, 5972], "text": ", 10" },
            "desc": "Add radix parameter `10` for parsing decimal numbers."
          }
        ]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 24.",
        "line": 187,
        "column": 34,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 187,
        "endColumn": 36
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 60.",
        "line": 191,
        "column": 36,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 191,
        "endColumn": 38
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 10.",
        "line": 198,
        "column": 22,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 198,
        "endColumn": 24
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1000.",
        "line": 204,
        "column": 30,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 204,
        "endColumn": 34
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 60.",
        "line": 204,
        "column": 37,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 204,
        "endColumn": 39
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 60.",
        "line": 204,
        "column": 42,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 204,
        "endColumn": 44
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 0,
    "warningCount": 12,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { describe, it, expect, beforeEach, vi } from 'vitest';\nimport {\n  getTodaySeed,\n  selectDailyStreets,\n  hasPlayedToday,\n  markTodayAsPlayed,\n  getTimeUntilNext,\n} from '../dailyChallenge';\n\ndescribe('Daily Challenge - Game Logic', () => {\n  // Mock streets data\n  const mockStreets = [\n    { id: '1', name: 'Carrer de Balmes', tier: 1, geometry: [[[]]] },\n    { id: '2', name: 'Avinguda Diagonal', tier: 1, geometry: [[[]]] },\n    { id: '3', name: 'Passeig de GrÃ cia', tier: 1, geometry: [[[]]] },\n    { id: '4', name: 'Carrer de AragÃ³', tier: 2, geometry: [[[]]] },\n    { id: '5', name: 'Carrer de ValÃ¨ncia', tier: 2, geometry: [[[]]] },\n    { id: '6', name: 'Gran Via', tier: 2, geometry: [[[]]] },\n    { id: '7', name: 'Ronda de Sant Pere', tier: 3, geometry: [[[]]] },\n    { id: '8', name: 'Carrer de ProvenÃ§a', tier: 3, geometry: [[[]]] },\n    { id: '9', name: 'Carrer de Mallorca', tier: 4, geometry: [[[]]] },\n    { id: '10', name: 'Carrer de RossellÃ³', tier: 4, geometry: [[[]]] },\n    { id: '11', name: 'Carrer de CÃ²rsega', tier: 4, geometry: [[[]]] },\n    { id: '12', name: 'Carrer de Girona', tier: 1, geometry: [[[]]] },\n  ];\n\n  beforeEach(() => {\n    // Clear localStorage before each test\n    localStorage.clear();\n    vi.clearAllMocks();\n  });\n\n  afterEach(() => {\n    vi.useRealTimers();\n  });\n\n  describe('getTodaySeed', () => {\n    it('should return a seed in YYYYMMDD format', () => {\n      const seed = getTodaySeed();\n\n      // Seed should be a number\n      expect(typeof seed).toBe('number');\n\n      // Seed should be 8 digits (YYYYMMDD)\n      expect(seed.toString()).toMatch(/^\\d{8}$/);\n\n      // Seed should be reasonable (between 20000101 and 21000101)\n      expect(seed).toBeGreaterThan(20000101);\n      expect(seed).toBeLessThan(21000101);\n    });\n\n    it('should return the same seed when called multiple times on the same day', () => {\n      const seed1 = getTodaySeed();\n      const seed2 = getTodaySeed();\n\n      expect(seed1).toBe(seed2);\n    });\n\n    it('should generate correct seed for a specific date', () => {\n      // Set system time to a specific date\n      vi.useFakeTimers();\n      vi.setSystemTime(new Date('2024-03-15'));\n\n      const seed = getTodaySeed();\n      expect(seed).toBe(20240315);\n\n      vi.useRealTimers();\n    });\n  });\n\n  describe('selectDailyStreets', () => {\n    it('should return exactly 10 streets', () => {\n      const seed = 20240101;\n      const selected = selectDailyStreets(mockStreets, seed);\n\n      expect(selected).toHaveLength(10);\n    });\n\n    it('should return the same streets for the same seed', () => {\n      const seed = 20240101;\n      const selected1 = selectDailyStreets(mockStreets, seed);\n      const selected2 = selectDailyStreets(mockStreets, seed);\n\n      // Same seed should produce same selection\n      expect(selected1.map(s => s.id)).toEqual(selected2.map(s => s.id));\n      expect(selected1.map(s => s.name)).toEqual(selected2.map(s => s.name));\n    });\n\n    it('should return different streets for different seeds', () => {\n      const seed1 = 20240101;\n      const seed2 = 20240102;\n\n      const selected1 = selectDailyStreets(mockStreets, seed1);\n      const selected2 = selectDailyStreets(mockStreets, seed2);\n\n      // Different seeds should produce different selections\n      const ids1 = selected1.map(s => s.id).sort();\n      const ids2 = selected2.map(s => s.id).sort();\n\n      expect(ids1).not.toEqual(ids2);\n    });\n\n    it('should select streets from different tiers', () => {\n      const seed = 20240101;\n      const selected = selectDailyStreets(mockStreets, seed);\n\n      // Should have streets from multiple tiers\n      const tiers = new Set(selected.map(s => s.tier));\n      expect(tiers.size).toBeGreaterThan(1);\n    });\n\n    it('should handle fewer than 10 streets gracefully', () => {\n      const fewStreets = mockStreets.slice(0, 5);\n      const seed = 20240101;\n      const selected = selectDailyStreets(fewStreets, seed);\n\n      // Should return all available streets\n      expect(selected.length).toBeLessThanOrEqual(5);\n      expect(selected.length).toBeGreaterThan(0);\n    });\n\n    it('should not modify the original streets array', () => {\n      const seed = 20240101;\n      const originalLength = mockStreets.length;\n      const originalFirst = mockStreets[0];\n\n      selectDailyStreets(mockStreets, seed);\n\n      expect(mockStreets).toHaveLength(originalLength);\n      expect(mockStreets[0]).toBe(originalFirst);\n    });\n  });\n\n  describe('hasPlayedToday', () => {\n    it('should return false when no play date is stored', () => {\n      expect(hasPlayedToday()).toBe(false);\n    });\n\n    it(\"should return true when today's date is stored\", () => {\n      const todaySeed = getTodaySeed();\n      localStorage.setItem('lastPlayedDate', String(todaySeed));\n\n      expect(hasPlayedToday()).toBe(true);\n    });\n\n    it('should return false when a different date is stored', () => {\n      const yesterdaySeed = getTodaySeed() - 1;\n      localStorage.setItem('lastPlayedDate', String(yesterdaySeed));\n\n      expect(hasPlayedToday()).toBe(false);\n    });\n  });\n\n  describe('markTodayAsPlayed', () => {\n    it(\"should store today's seed in localStorage\", () => {\n      markTodayAsPlayed();\n\n      const stored = localStorage.getItem('lastPlayedDate');\n      const todaySeed = getTodaySeed();\n\n      expect(stored).toBe(String(todaySeed));\n    });\n\n    it('should update hasPlayedToday to return true', () => {\n      expect(hasPlayedToday()).toBe(false);\n\n      markTodayAsPlayed();\n\n      expect(hasPlayedToday()).toBe(true);\n    });\n  });\n\n  describe('getTimeUntilNext', () => {\n    it('should return a string with hours and minutes', () => {\n      const timeString = getTimeUntilNext();\n\n      // Should match format \"Xh Ym\"\n      expect(timeString).toMatch(/^\\d+h \\d+m$/);\n    });\n\n    it('should return time until midnight', () => {\n      const timeString = getTimeUntilNext();\n      const [hours, minutes] = timeString.split(' ').map(s => parseInt(s));\n\n      // Hours should be between 0 and 23\n      expect(hours).toBeGreaterThanOrEqual(0);\n      expect(hours).toBeLessThan(24);\n\n      // Minutes should be between 0 and 59\n      expect(minutes).toBeGreaterThanOrEqual(0);\n      expect(minutes).toBeLessThan(60);\n    });\n\n    it('should decrease over time', () => {\n      vi.useFakeTimers();\n      // Set to 10:00 AM\n      const start = new Date();\n      start.setHours(10, 0, 0, 0);\n      vi.setSystemTime(start);\n\n      const time1 = getTimeUntilNext();\n\n      // Advance time by 1 hour\n      vi.advanceTimersByTime(1000 * 60 * 60);\n\n      const time2 = getTimeUntilNext();\n\n      // time1 should be \"14h 0m\", time2 should be \"13h 0m\" (roughly)\n      // We just check that string changed effectively\n      expect(time1).not.toBe(time2);\n\n      vi.useRealTimers();\n    });\n  });\n});\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/utils/__tests__/scoring.test.ts",
    "messages": [
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 5.",
        "line": 22,
        "column": 42,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 22,
        "endColumn": 43
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 100.",
        "line": 41,
        "column": 47,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 41,
        "endColumn": 50
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 95.",
        "line": 58,
        "column": 29,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 58,
        "endColumn": 31
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 95.",
        "line": 59,
        "column": 34,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 59,
        "endColumn": 36
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 80.",
        "line": 63,
        "column": 29,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 63,
        "endColumn": 31
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 80.",
        "line": 64,
        "column": 34,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 64,
        "endColumn": 36
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 60.",
        "line": 68,
        "column": 29,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 68,
        "endColumn": 31
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 60.",
        "line": 69,
        "column": 34,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 69,
        "endColumn": 36
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 40.",
        "line": 73,
        "column": 29,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 73,
        "endColumn": 31
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 40.",
        "line": 74,
        "column": 34,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 74,
        "endColumn": 36
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 10.",
        "line": 78,
        "column": 29,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 78,
        "endColumn": 31
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 10.",
        "line": 79,
        "column": 34,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 79,
        "endColumn": 36
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 12,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { describe, it, expect } from 'vitest';\nimport { calculateScore, calculateStreakBonus } from '../../config/gameConfig';\nimport { getScoreTier, getScoreTierColor } from '../scoring';\nimport { GAME, REWARDS } from '../../config/constants';\n\ndescribe('Scoring Logic (gameConfig)', () => {\n    it('returns 0 for incorrect answers', () => {\n        const score = calculateScore(2, false, 0);\n        expect(score).toBe(0);\n    });\n\n    it('awards full base points for correct answer with no hints and fast time', () => {\n        // timeElapsed = 0 should give Max time bonus\n        const score = calculateScore(0, true, 0);\n        // Base + Max Bonus\n        const expected = GAME.POINTS.CORRECT_BASE + GAME.POINTS.TIME_BONUS_MAX;\n        expect(score).toBe(expected);\n    });\n\n    it('reduces time bonus as time elapses', () => {\n        const fastScore = calculateScore(1, true, 0);\n        const slowScore = calculateScore(5, true, 0);\n        expect(fastScore).toBeGreaterThan(slowScore);\n    });\n\n    it('gives no time bonus if elapsed time exceeds threshold', () => {\n        const score = calculateScore(GAME.TIME_BONUS_THRESHOLD + 1, true, 0);\n        expect(score).toBe(GAME.POINTS.CORRECT_BASE);\n    });\n\n    it('subtracts points for using hints', () => {\n        const scoreWithoutHints = calculateScore(2, true, 0);\n        const scoreWithHints = calculateScore(2, true, 1);\n\n        expect(scoreWithHints).toBe(\n            scoreWithoutHints - GAME.POINTS.HINT_PENALTY\n        );\n    });\n\n    it('never returns negative scores', () => {\n        const score = calculateScore(2, true, 100); // Many hints\n        expect(score).toBeGreaterThanOrEqual(0);\n    });\n});\n\ndescribe('Streak Logic', () => {\n    it('calculates streak bonus correctly', () => {\n        const streak = 3;\n        const bonus = calculateStreakBonus(streak);\n        // Base reward + (streak * per day)\n        const expected = REWARDS.CHALLENGE_COMPLETE + (streak * REWARDS.STREAK_BONUS_PER_DAY);\n        expect(bonus).toBe(expected);\n    });\n});\n\ndescribe('Score Tiers (scoring.ts)', () => {\n    it('returns \"Perfect!\" for 90+', () => {\n        expect(getScoreTier(95)).toBe('Perfect!');\n        expect(getScoreTierColor(95)).toContain('emerald');\n    });\n\n    it('returns \"Excellent\" for 75-89', () => {\n        expect(getScoreTier(80)).toBe('Excellent');\n        expect(getScoreTierColor(80)).toContain('green');\n    });\n\n    it('returns \"Good\" for 50-74', () => {\n        expect(getScoreTier(60)).toBe('Good');\n        expect(getScoreTierColor(60)).toContain('yellow');\n    });\n\n    it('returns \"Fair\" for 30-49', () => {\n        expect(getScoreTier(40)).toBe('Fair');\n        expect(getScoreTierColor(40)).toContain('orange');\n    });\n\n    it('returns \"Slow\" for >0 but <30', () => {\n        expect(getScoreTier(10)).toBe('Slow');\n        expect(getScoreTierColor(10)).toContain('red');\n    });\n\n    it('returns \"Wrong\" for 0', () => {\n        expect(getScoreTier(0)).toBe('Wrong');\n        expect(getScoreTierColor(0)).toContain('rose');\n    });\n});\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/utils/__tests__/username.test.js",
    "messages": [
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 20.",
        "line": 8,
        "column": 44,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 8,
        "endColumn": 46
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 10.",
        "line": 18,
        "column": 60,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 18,
        "endColumn": 62
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 20.",
        "line": 33,
        "column": 39,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 33,
        "endColumn": 41
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 3,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { describe, it, expect } from 'vitest';\n\ndescribe('Username Validation Logic', () => {\n  // Logic mirrored from App.jsx fix\n  const isValidUsername = displayName => {\n    const newFormatRegex = /^@[a-zA-Z0-9]+\\d{4}$/;\n    const hasExcessiveDigits = /\\d{5,}$/.test(displayName);\n    const isTooLong = displayName.length > 20;\n\n    if (hasExcessiveDigits) {return false;}\n    if (isTooLong) {return false;}\n    return newFormatRegex.test(displayName);\n  };\n\n  const generateNewHandle = displayName => {\n    const randomId = 1234; // Fixed for test\n    let coreName = displayName.replace(/^@/, '').split(/\\d/)[0];\n    coreName = coreName.replace(/[^a-zA-Z]/g, '').slice(0, 10) || 'User';\n    return `@${coreName}${randomId}`;\n  };\n\n  it('should reject long numeric suffixes', () => {\n    expect(isValidUsername('@Roberto8320452683603623')).toBe(false);\n    expect(isValidUsername('@Roberto12345')).toBe(false);\n  });\n\n  it('should accept valid handles', () => {\n    expect(isValidUsername('@Roberto1234')).toBe(true);\n    expect(isValidUsername('@User9999')).toBe(true);\n  });\n\n  it('should reject too long usernames', () => {\n    const longName = `@${  'a'.repeat(20)  }1234`;\n    expect(isValidUsername(longName)).toBe(false);\n  });\n\n  it('should generate short, clean handles from bad input', () => {\n    const badInput = '@Roberto8320452683603623';\n    const newHandle = generateNewHandle(badInput);\n    expect(newHandle).toBe('@Roberto1234');\n  });\n\n  it('should handle email-like inputs correctly for generation', () => {\n    // App.jsx splits email before this logic usually, but let's test the cleaner\n    const input = 'robertosanchezgallego'; // too long\n    const newHandle = generateNewHandle(input);\n    // 'robertosan' is 10 chars\n    expect(newHandle).toBe('@robertosan1234');\n  });\n\n  it('should handle names with spaces or special chars', () => {\n    const input = 'John Doe!';\n    const newHandle = generateNewHandle(input);\n    expect(newHandle).toBe('@JohnDoe1234');\n  });\n});\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/utils/badgeTracking.js",
    "messages": [
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 5.",
        "line": 103,
        "column": 29,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 103,
        "endColumn": 30
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 60.",
        "line": 108,
        "column": 54,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 108,
        "endColumn": 56
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 5.",
        "line": 113,
        "column": 61,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 113,
        "endColumn": 62
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 3.",
        "line": 126,
        "column": 72,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 126,
        "endColumn": 73
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 5.",
        "line": 182,
        "column": 40,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 182,
        "endColumn": 41
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 5,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "/**\n * Badge Tracking Utility\n * Handles tracking badge progress and awarding merit badges\n */\n\nimport { db } from '../firebase';\nimport { doc, getDoc, setDoc, updateDoc, increment, collection, getDocs } from 'firebase/firestore';\n\n// Street name patterns for location-based badges\nconst RAMBLAS_PATTERNS = /rambla|ramblas/i;\nconst EIXAMPLE_PATTERNS = /eixample|diagonal|passeig de grÃ cia|aragÃ³|valÃ¨ncia|mallorca|rossellÃ³/i;\nconst GOTHIC_PATTERNS = /gÃ²tic|gothic|call|bisbe|ferran|portal|jaume|pi\\b/i;\nconst BORN_PATTERNS = /born|ribera|princesa|montcada|passeig del born/i;\nconst POBLENOU_PATTERNS = /poblenou|llacuna|pallars|pujades|pere iv|taulat/i;\nconst FOOD_STREETS = /verdi|blai|parlament|enric granados|rambla catalunya/i;\n\n/**\n * Get user's badge stats from Firestore\n */\nexport async function getBadgeStats(username) {\n  if (!username) {return null;}\n\n  try {\n    const statsRef = doc(db, 'users', username, 'badgeStats', 'current');\n    const statsSnap = await getDoc(statsRef);\n\n    if (statsSnap.exists()) {\n      return statsSnap.data();\n    }\n\n    // Return default stats\n    return {\n      gamesPlayed: 0,\n      bestScore: 0,\n      streak: 0,\n      wrongStreak: 0,\n      totalPanKm: 0,\n      consecutiveDays: 0,\n      gamesWithoutQuitting: 0,\n      eixampleCorners: 0,\n      gothicStreak: 0,\n      bornGuesses: 0,\n      poblenouGuesses: 0,\n      nightPlay: false,\n      ramblasQuickGuess: false,\n      precisionGuess: false,\n      foodStreetsPerfect: 0,\n      fastLoss: false,\n      speedModeHighScore: false,\n      inviteCount: 0,\n      lastPlayDate: null,\n    };\n  } catch (e) {\n    console.error('[BadgeStats] Error getting stats:', e);\n    return null;\n  }\n}\n\n/**\n * Update badge stats after a game\n */\nexport async function updateBadgeStats(username, gameResult) {\n  if (!username || !gameResult) {return;}\n\n  try {\n    const statsRef = doc(db, 'users', username, 'badgeStats', 'current');\n    const statsSnap = await getDoc(statsRef);\n    const currentStats = statsSnap.exists() ? statsSnap.data() : {};\n\n    const updates = {};\n\n    // Games played\n    updates.gamesPlayed = increment(1);\n\n    // Best score\n    if (gameResult.score > (currentStats.bestScore || 0)) {\n      updates.bestScore = gameResult.score;\n    }\n\n    // Check if game was completed without quitting\n    if (gameResult.completed) {\n      updates.gamesWithoutQuitting = increment(1);\n    }\n\n    // Consecutive days tracking\n    const today = new Date().toDateString();\n    const lastPlay = currentStats.lastPlayDate;\n    if (lastPlay) {\n      const yesterday = new Date();\n      yesterday.setDate(yesterday.getDate() - 1);\n      if (lastPlay === yesterday.toDateString()) {\n        updates.consecutiveDays = increment(1);\n      } else if (lastPlay !== today) {\n        updates.consecutiveDays = 1;\n      }\n    } else {\n      updates.consecutiveDays = 1;\n    }\n    updates.lastPlayDate = today;\n\n    // Night play (2-5 AM)\n    const hour = new Date().getHours();\n    if (hour >= 2 && hour < 5) {\n      updates.nightPlay = true;\n    }\n\n    // Fast loss (all wrong in under 1 minute)\n    if (gameResult.duration && gameResult.duration < 60 && gameResult.correctCount === 0) {\n      updates.fastLoss = true;\n    }\n\n    // Wrong streak tracking\n    if (gameResult.wrongStreak && gameResult.wrongStreak >= 5) {\n      updates.wrongStreak = Math.max(currentStats.wrongStreak || 0, gameResult.wrongStreak);\n    }\n\n    // Per-question analysis\n    if (gameResult.questions) {\n      let currentGothicStreak = 0;\n      let maxGothicStreak = currentStats.gothicStreak || 0;\n\n      for (const q of gameResult.questions) {\n        const streetName = q.streetName || '';\n\n        // Ramblas quick guess\n        if (RAMBLAS_PATTERNS.test(streetName) && q.correct && q.time < 3) {\n          updates.ramblasQuickGuess = true;\n        }\n\n        // Eixample corners\n        if (EIXAMPLE_PATTERNS.test(streetName) && q.correct) {\n          updates.eixampleCorners = increment(1);\n        }\n\n        // Gothic Quarter streak\n        if (GOTHIC_PATTERNS.test(streetName)) {\n          if (q.correct) {\n            currentGothicStreak++;\n            maxGothicStreak = Math.max(maxGothicStreak, currentGothicStreak);\n          } else {\n            currentGothicStreak = 0;\n          }\n        }\n\n        // El Born guesses\n        if (BORN_PATTERNS.test(streetName) && q.correct) {\n          updates.bornGuesses = increment(1);\n        }\n\n        // Poblenou guesses\n        if (POBLENOU_PATTERNS.test(streetName) && q.correct) {\n          updates.poblenouGuesses = increment(1);\n        }\n\n        // Food streets perfect\n        if (FOOD_STREETS.test(streetName) && q.correct && q.attempts === 1) {\n          updates.foodStreetsPerfect = increment(1);\n        }\n      }\n\n      if (maxGothicStreak > (currentStats.gothicStreak || 0)) {\n        updates.gothicStreak = maxGothicStreak;\n      }\n    }\n\n    // Apply updates\n    if (statsSnap.exists()) {\n      await updateDoc(statsRef, updates);\n    } else {\n      await setDoc(statsRef, {\n        gamesPlayed: 1,\n        bestScore: gameResult.score || 0,\n        streak: 0,\n        wrongStreak: 0,\n        totalPanKm: 0,\n        consecutiveDays: 1,\n        gamesWithoutQuitting: gameResult.completed ? 1 : 0,\n        eixampleCorners: 0,\n        gothicStreak: 0,\n        bornGuesses: 0,\n        poblenouGuesses: 0,\n        nightPlay: hour >= 2 && hour < 5,\n        ramblasQuickGuess: false,\n        precisionGuess: false,\n        foodStreetsPerfect: 0,\n        fastLoss: false,\n        speedModeHighScore: false,\n        lastPlayDate: today,\n        ...updates,\n      });\n    }\n  } catch (e) {\n    console.error('[BadgeStats] Error updating stats:', e);\n  }\n}\n\n/**\n * Get user's purchased badges\n */\nexport async function getPurchasedBadges(username) {\n  if (!username) {return [];}\n\n  try {\n    const badgesRef = collection(db, 'users', username, 'purchasedBadges');\n    const badgesSnap = await getDocs(badgesRef);\n    return badgesSnap.docs.map(d => d.id);\n  } catch (e) {\n    console.error('[BadgeStats] Error getting purchased badges:', e);\n    return [];\n  }\n}\n\n/**\n * Purchase a badge\n */\nexport async function purchaseBadge(username, badgeId) {\n  if (!username || !badgeId) {return { success: false, error: 'Invalid params' };}\n\n  try {\n    const badgeRef = doc(db, 'users', username, 'purchasedBadges', badgeId);\n    await setDoc(badgeRef, {\n      purchasedAt: new Date().toISOString(),\n    });\n    return { success: true };\n  } catch (e) {\n    console.error('[BadgeStats] Error purchasing badge:', e);\n    return { success: false, error: e.message };\n  }\n}\n\n/**\n * Track map panning distance (for Socks & Sandals badge)\n */\nexport async function trackPanDistance(username, distanceKm) {\n  if (!username || !distanceKm) {return;}\n\n  try {\n    const statsRef = doc(db, 'users', username, 'badgeStats', 'current');\n    await updateDoc(statsRef, {\n      totalPanKm: increment(distanceKm),\n    });\n  } catch (e) {\n    console.error('[BadgeStats] Error tracking pan distance:', e);\n  }\n}\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/utils/configService.ts",
    "messages": [
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 5.",
        "line": 27,
        "column": 19,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 27,
        "endColumn": 20
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 60.",
        "line": 27,
        "column": 23,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 27,
        "endColumn": 25
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1000.",
        "line": 27,
        "column": 28,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 27,
        "endColumn": 32
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 87,
        "column": 15,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 87,
        "endColumn": 18,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [2802, 2805], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [2802, 2805], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      }
    ],
    "suppressedMessages": [
      {
        "ruleId": "no-console",
        "severity": 2,
        "message": "Unexpected console statement. Only these console methods are allowed: warn, error.",
        "line": 84,
        "column": 5,
        "nodeType": "MemberExpression",
        "messageId": "limited",
        "endLine": 84,
        "endColumn": 16,
        "suggestions": [
          {
            "fix": { "range": [2697, 2756], "text": "" },
            "messageId": "removeConsole",
            "data": { "propertyName": "log" },
            "desc": "Remove the console.log()."
          }
        ],
        "suppressions": [{ "kind": "directive", "justification": "" }]
      }
    ],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 4,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "/**\n * Configuration Service\n * Fetches and caches app configuration from Firestore.\n * Allows dynamic configuration of payouts without code changes.\n */\nimport { db } from '../firebase';\nimport { doc, getDoc, setDoc } from 'firebase/firestore';\n\nconst CONFIG_DOC = 'settings';\nconst CONFIG_COLLECTION = 'config';\n\n// Default payout values (fallback if Firestore config doesn't exist)\nconst DEFAULT_PAYOUTS = {\n  STARTING_GIUROS: 100, // Increased for better onboarding\n  DAILY_LOGIN_BONUS: 50, // Increased significantly\n  DAILY_CHALLENGE_BONUS: 100, // Main source of income\n  STREAK_WEEK_BONUS: 250, // Big reward for consistency\n  PERFECT_SCORE_BONUS: 50, // Skill reward\n  REFERRAL_BONUS: 500, // Growth incentive\n} as const;\n\nexport type PayoutConfig = typeof DEFAULT_PAYOUTS;\n\n// In-memory cache\nlet cachedPayouts: PayoutConfig | null = null;\nlet cacheTimestamp = 0;\nconst CACHE_TTL = 5 * 60 * 1000; // 5 minutes\n\n/**\n * Get payout configuration from Firestore with caching\n * @returns {Promise<PayoutConfig>}\n */\nexport const getPayoutConfig = async (): Promise<PayoutConfig> => {\n  const now = Date.now();\n\n  // Return cached if still valid\n  if (cachedPayouts && now - cacheTimestamp < CACHE_TTL) {\n    return cachedPayouts;\n  }\n\n  try {\n    const configRef = doc(db, CONFIG_COLLECTION, CONFIG_DOC);\n    const configDoc = await getDoc(configRef);\n\n    if (configDoc.exists() && configDoc.data().payouts) {\n      // Cast the result to PayoutConfig (safe assumption for now, ideally validate)\n      cachedPayouts = { ...DEFAULT_PAYOUTS, ...configDoc.data().payouts } as PayoutConfig;\n    } else {\n      // Initialize with defaults if doesn't exist\n      cachedPayouts = DEFAULT_PAYOUTS;\n    }\n\n    cacheTimestamp = now;\n    return cachedPayouts;\n  } catch (e) {\n    console.error('Error fetching payout config:', e);\n    return DEFAULT_PAYOUTS;\n  }\n};\n\n/**\n * Update payout configuration in Firestore (admin only)\n * @param {Partial<PayoutConfig>} updates\n * @returns {Promise<{success: boolean, error?: string}>}\n */\nexport const updatePayoutConfig = async (updates: Partial<PayoutConfig>): Promise<{ success: boolean, error?: string }> => {\n  try {\n    const configRef = doc(db, CONFIG_COLLECTION, CONFIG_DOC);\n    const configDoc = await getDoc(configRef);\n\n    const currentPayouts = configDoc.exists()\n      ? { ...DEFAULT_PAYOUTS, ...configDoc.data().payouts }\n      : DEFAULT_PAYOUTS;\n\n    const newPayouts = { ...currentPayouts, ...updates };\n\n    await setDoc(configRef, { payouts: newPayouts }, { merge: true });\n\n    // Clear cache to force refresh\n    cachedPayouts = newPayouts as PayoutConfig;\n    cacheTimestamp = Date.now();\n\n    // eslint-disable-next-line no-console\n    console.log('[Config] Payout config updated:', newPayouts);\n\n    return { success: true };\n  } catch (e: any) {\n    console.error('Error updating payout config:', e);\n    return { success: false, error: e.message };\n  }\n};\n\n/**\n * Get default payouts (for display/comparison)\n * @returns {PayoutConfig}\n */\nexport const getDefaultPayouts = (): PayoutConfig => DEFAULT_PAYOUTS;\n\n/**\n * Clear the cache (useful for testing or admin refresh)\n */\nexport const clearPayoutCache = (): void => {\n  cachedPayouts = null;\n  cacheTimestamp = 0;\n};\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/utils/dailyChallenge.js",
    "messages": [
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 10000.",
        "line": 10,
        "column": 32,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 10,
        "endColumn": 37
      },
      {
        "ruleId": "radix",
        "severity": 2,
        "message": "Missing radix parameter.",
        "line": 23,
        "column": 10,
        "nodeType": "CallExpression",
        "messageId": "missingRadix",
        "endLine": 23,
        "endColumn": 43,
        "suggestions": [
          {
            "messageId": "addRadixParameter10",
            "fix": { "range": [671, 671], "text": ", 10" },
            "desc": "Add radix parameter `10` for parsing decimal numbers."
          }
        ]
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 4.",
        "line": 75,
        "column": 46,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 75,
        "endColumn": 47
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 4.",
        "line": 76,
        "column": 44,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 76,
        "endColumn": 45
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 6.",
        "line": 76,
        "column": 47,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 76,
        "endColumn": 48
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 6.",
        "line": 77,
        "column": 42,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 77,
        "endColumn": 43
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 8.",
        "line": 77,
        "column": 45,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 77,
        "endColumn": 46
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 3.",
        "line": 84,
        "column": 64,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 84,
        "endColumn": 65
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 3.",
        "line": 85,
        "column": 64,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 85,
        "endColumn": 65
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 3.",
        "line": 86,
        "column": 52,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 86,
        "endColumn": 53
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 4.",
        "line": 87,
        "column": 52,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 87,
        "endColumn": 53
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 10.",
        "line": 89,
        "column": 22,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 89,
        "endColumn": 24
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 10.",
        "line": 89,
        "column": 51,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 89,
        "endColumn": 53
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 7.",
        "line": 93,
        "column": 24,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 93,
        "endColumn": 25
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 10.",
        "line": 111,
        "column": 43,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 111,
        "endColumn": 45
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1000.",
        "line": 117,
        "column": 41,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 117,
        "endColumn": 45
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1000.",
        "line": 149,
        "column": 36,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 149,
        "endColumn": 40
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 60.",
        "line": 149,
        "column": 43,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 149,
        "endColumn": 45
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 60.",
        "line": 149,
        "column": 48,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 149,
        "endColumn": 50
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1000.",
        "line": 150,
        "column": 39,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 150,
        "endColumn": 43
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 60.",
        "line": 150,
        "column": 46,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 150,
        "endColumn": 48
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 60.",
        "line": 150,
        "column": 51,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 150,
        "endColumn": 53
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1000.",
        "line": 150,
        "column": 59,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 150,
        "endColumn": 63
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 60.",
        "line": 150,
        "column": 66,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 150,
        "endColumn": 68
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 3.",
        "line": 174,
        "column": 21,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 174,
        "endColumn": 22
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 3.",
        "line": 180,
        "column": 32,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 180,
        "endColumn": 33
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 0,
    "warningCount": 25,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "// Daily Challenge Utility\n// Generates consistent street selection based on date\n\n/**\n * Seeded random number generator\n * @param {number} seed - The seed value\n * @returns {number} - Random number between 0 and 1\n */\nexport function seededRandom(seed) {\n  const x = Math.sin(seed++) * 10000;\n  return x - Math.floor(x);\n}\n\n/**\n * Get today's date as a seed (YYYYMMDD format)\n * @returns {number} - Date seed\n */\nexport function getTodaySeed() {\n  const today = new Date();\n  const year = today.getFullYear();\n  const month = String(today.getMonth() + 1).padStart(2, '0');\n  const day = String(today.getDate()).padStart(2, '0');\n  return parseInt(`${year}${month}${day}`);\n}\n\n/**\n * Shuffle array using seeded random\n * @param {Array} array - Array to shuffle\n * @param {number} seed - Seed for random\n * @returns {Array} - Shuffled array\n */\nfunction seededShuffle(array, seed) {\n  const shuffled = [...array];\n  let currentSeed = seed;\n\n  for (let i = shuffled.length - 1; i > 0; i--) {\n    const j = Math.floor(seededRandom(currentSeed) * (i + 1));\n    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];\n    currentSeed++;\n  }\n\n  return shuffled;\n}\n\n/**\n * Select daily streets based on date seed\n * @param {Array} validStreets - All valid streets\n * @param {number} seed - Date seed\n * @returns {Array} - Selected 10 streets for the day\n */\n/**\n * Get seed for a specific date object\n * @param {Date} date - Date object\n * @returns {number} - Seed\n */\nfunction getSeedForDate(date) {\n  const year = date.getFullYear();\n  const month = String(date.getMonth() + 1).padStart(2, '0');\n  const day = String(date.getDate()).padStart(2, '0');\n  return parseInt(`${year}${month}${day}`, 10);\n}\n\n/**\n * Select daily streets based on date seed\n * @param {Array} validStreets - All valid streets\n * @param {number} seed - Date seed\n * @returns {Array} - Selected 10 streets for the day\n */\nexport function selectDailyStreets(validStreets, seed) {\n  // 1. Identify excluded streets (from last 7 days)\n  const excludedIds = new Set();\n\n  // Parse seed back to date to iterate backwards\n  const seedStr = String(seed);\n  const year = parseInt(seedStr.substring(0, 4), 10);\n  const month = parseInt(seedStr.substring(4, 6), 10) - 1;\n  const day = parseInt(seedStr.substring(6, 8), 10);\n  const currentDate = new Date(year, month, day);\n\n  // We need a pure function to select streets for a given seed WITHOUT exclusion recursion\n  // to avoid infinite loops. We'll use a local helper for the raw selection.\n  const getRawSelection = (pool, s) => {\n    const shuffled = seededShuffle(pool, s);\n    const t1 = shuffled.filter(str => str.tier === 1).slice(0, 3);\n    const t2 = shuffled.filter(str => str.tier === 2).slice(0, 3);\n    const t3 = shuffled.filter(str => str.tier === 3).slice(0, 2);\n    const t4 = shuffled.filter(str => str.tier === 4).slice(0, 2);\n    let sel = [...t1, ...t2, ...t3, ...t4];\n    if (sel.length < 10) {sel = shuffled.slice(0, 10);}\n    return sel;\n  };\n\n  for (let i = 1; i <= 7; i++) {\n    const d = new Date(currentDate);\n    d.setDate(d.getDate() - i);\n    const pastSeed = getSeedForDate(d);\n\n    // For past days, we assume they were selected from the FULL pool (approximation)\n    // This is \"good enough\" for exclusion. Exact simulation would require\n    // re-simulating the entire history of the world, which is impossible.\n    // By using the full pool for past days, we might flag a street as used\n    // even if it was theoretically excluded that day, but that's a safe fail-over.\n    const pastStreets = getRawSelection(validStreets, pastSeed);\n    pastStreets.forEach(s => excludedIds.add(s.id));\n  }\n\n  // 2. Filter available streets\n  const availableStreets = validStreets.filter(s => !excludedIds.has(s.id));\n\n  // Fallback: If pool is too small (unlikely), use full pool\n  const pool = availableStreets.length >= 10 ? availableStreets : validStreets;\n\n  // 3. Select today's streets from available pool\n  const selected = getRawSelection(pool, seed);\n\n  // Shuffle again with different seed offset for presentation order\n  return seededShuffle(selected, seed + 1000);\n}\n\n/**\n * Check if user has played today\n * @returns {boolean}\n */\nexport function hasPlayedToday() {\n  const today = getTodaySeed();\n  const lastPlayed = localStorage.getItem('lastPlayedDate');\n  return lastPlayed === String(today);\n}\n\n/**\n * Mark today as played\n */\nexport function markTodayAsPlayed() {\n  const today = getTodaySeed();\n  localStorage.setItem('lastPlayedDate', String(today));\n}\n\n/**\n * Get time until next challenge (midnight)\n * @returns {string} - Formatted time string\n */\nexport function getTimeUntilNext() {\n  const now = new Date();\n  const tomorrow = new Date(now);\n  tomorrow.setDate(tomorrow.getDate() + 1);\n  tomorrow.setHours(0, 0, 0, 0);\n\n  const diff = tomorrow - now;\n  const hours = Math.floor(diff / (1000 * 60 * 60));\n  const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));\n\n  return `${hours}h ${minutes}m`;\n}\n\n/**\n * Deterministically select 3 distractors for a target street\n * @param {Array} validStreets - All valid streets\n * @param {Object} target - The correct street\n * @param {number} seed - Question-specific seed\n * @returns {Array} - 3 distractor streets\n */\nexport function selectDistractors(validStreets, target, seed) {\n  const getPrefix = name => {\n    if (!name) {return '';}\n    const match = name.match(\n      /^(Carrer|Avinguda|PlaÃ§a|Passeig|Passatge|Ronda|Via|CamÃ­|Jardins|Parc|Rambla|Travessera)(\\s+d(e|els|es|el|ala)|(?=\\s))?/i\n    );\n    return match ? match[0].trim() : '';\n  };\n\n  const targetPrefix = getPrefix(target.name);\n  let pool = validStreets.filter(s => s.id !== target.id && getPrefix(s.name) === targetPrefix);\n\n  if (pool.length < 3) {\n    pool = validStreets.filter(s => s.id !== target.id);\n  }\n\n  // Shuffle pool with seed\n  const shuffledPool = seededShuffle(pool, seed);\n  return shuffledPool.slice(0, 3);\n}\n\n/**\n * Deterministically shuffle options (target + distractors)\n * @param {Array} options - Array of 4 options\n * @param {number} seed - Seed\n * @returns {Array} - Shuffled options\n */\nexport function shuffleOptions(options, seed) {\n  return seededShuffle(options, seed);\n}\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/utils/friends.js",
    "messages": [
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 5.",
        "line": 45,
        "column": 13,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 45,
        "endColumn": 14
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 5.",
        "line": 54,
        "column": 13,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 54,
        "endColumn": 14
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 100.",
        "line": 297,
        "column": 92,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 297,
        "endColumn": 95
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 10.",
        "line": 326,
        "column": 48,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 326,
        "endColumn": 50
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 10.",
        "line": 327,
        "column": 42,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 327,
        "endColumn": 44
      },
      {
        "ruleId": "max-depth",
        "severity": 1,
        "message": "Blocks are nested too deeply (5). Maximum allowed is 4.",
        "line": 337,
        "column": 11,
        "nodeType": "IfStatement",
        "messageId": "tooDeeply",
        "endLine": 345,
        "endColumn": 12
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1000.",
        "line": 368,
        "column": 58,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 368,
        "endColumn": 62
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 50.",
        "line": 386,
        "column": 36,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 386,
        "endColumn": 38
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 8,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import {\n    collection,\n    deleteDoc,\n    doc,\n    endAt,\n    getDoc,\n    getDocs,\n    limit,\n    orderBy,\n    query,\n    setDoc,\n    startAt,\n    Timestamp,\n    where,\n} from 'firebase/firestore';\nimport { db } from '../firebase';\n\nconst USERS_COLLECTION = 'users'; // Store user profiles/friends here\nconst HIGHSCORES_COLLECTION = 'highscores'; // For searching users\nconst SCORES_COLLECTION = 'scores'; // For feed\nconst BLOCKS_COLLECTION = 'blocks';\n\n// Helper to match leaderboard sanitization and ensure consistent IDs (lowercase)\nconst sanitize = name => name.toLowerCase().replace(/\\//g, '_');\n\n/**\n * Search for users by username prefix (using highscores as user index)\n */\nexport const searchUsers = async searchText => {\n  if (!searchText || searchText.length < 2) {return [];}\n\n  // Remove @ prefix if user typed it\n  // Remove @ prefix and normalize to lowercase\n  const searchLower = searchText.toLowerCase();\n  const cleanSearch = searchLower.startsWith('@') ? searchLower.slice(1) : searchLower;\n  const legacySearch = `@${  cleanSearch}`;\n\n  try {\n    // Query 1: Clean usernames (New/Migrated format)\n    const q1 = query(\n      collection(db, HIGHSCORES_COLLECTION),\n      orderBy('username'),\n      startAt(cleanSearch),\n      endAt(`${cleanSearch  }\\uf8ff`),\n      limit(5)\n    );\n\n    // Query 2: Legacy usernames (With @ prefix)\n    const q2 = query(\n      collection(db, HIGHSCORES_COLLECTION),\n      orderBy('username'),\n      startAt(legacySearch),\n      endAt(`${legacySearch  }\\uf8ff`),\n      limit(5)\n    );\n\n    // Run parallel queries\n    const [snap1, snap2] = await Promise.all([getDocs(q1), getDocs(q2)]);\n\n    // Merge and deduplicate results\n    const results = new Map();\n\n    const processDoc = doc => {\n      const data = doc.data();\n      const rawUser = data.username;\n      // Normalize to key for deduplication\n      const key = rawUser.replace(/^@/, '').toLowerCase();\n\n      if (!results.has(key)) {\n        // For display: New handles (with #) don't need @. Legacy ones might.\n        // If rawUser has #, leave it. If it starts with @, leave it. Else add @.\n        const isHandle = rawUser.includes('#');\n        const displayUser = isHandle || rawUser.startsWith('@') ? rawUser : `@${  rawUser}`;\n\n        results.set(key, {\n          username: displayUser,\n          bestScore: data.score,\n        });\n      }\n    };\n\n    snap1.forEach(processDoc);\n    snap2.forEach(processDoc);\n\n    return Array.from(results.values());\n  } catch (e) {\n    console.error('Error searching users:', e);\n    return [];\n  }\n};\n\n/**\n * Send a friend request\n */\nexport const sendFriendRequest = async (fromUsername, toUsername) => {\n  if (!fromUsername || !toUsername) {return { error: 'Invalid usernames' };}\n\n  // SANITIZE BOTH INPUTS STRICTLY\n  const fromClean = sanitize(fromUsername);\n  let toClean = sanitize(toUsername);\n\n  // STRICT SELF CHECK (after sanitization)\n  if (fromClean === toClean) {return { error: 'Cannot add yourself' };}\n\n  try {\n    // 0. Check if target user has migrated\n    const targetRef = doc(db, USERS_COLLECTION, toClean);\n    const targetDoc = await getDoc(targetRef);\n    if (targetDoc.exists()) {\n      const data = targetDoc.data();\n      if (data.migratedTo) {\n        // Redirect request to the new handle\n        toClean = sanitize(data.migratedTo);\n        // Re-check self after migration redirect\n        if (fromClean === toClean) {return { error: 'Cannot add yourself' };}\n      }\n    }\n    // Check if already friends\n    const friendshipRef = doc(db, USERS_COLLECTION, fromClean, 'friends', toClean);\n    const friendshipSnap = await getDoc(friendshipRef);\n    if (friendshipSnap.exists()) {return { error: 'Already friends' };}\n\n    // Check if request already sent\n    const requestRef = doc(db, USERS_COLLECTION, toClean, 'requests', fromClean);\n    const requestSnap = await getDoc(requestRef);\n    if (requestSnap.exists()) {return { error: 'Request already sent' };}\n\n    // Create request\n    await setDoc(requestRef, {\n      from: fromUsername,\n      timestamp: Timestamp.now(),\n      status: 'pending',\n    });\n\n    return { success: true };\n  } catch (e) {\n    console.error('Error sending request:', e);\n    return { error: e.message };\n  }\n};\n\n/**\n * Get incoming friend requests\n */\nexport const getIncomingRequests = async username => {\n  if (!username) {return [];}\n  const clean = sanitize(username);\n\n  try {\n    const q = query(collection(db, USERS_COLLECTION, clean, 'requests'));\n    const snapshot = await getDocs(q);\n    return snapshot.docs.map(doc => ({\n      id: doc.id,\n      ...doc.data(),\n    }));\n  } catch (e) {\n    console.error('Error getting requests:', e);\n    return [];\n  }\n};\n\n/**\n * Accept a friend request\n */\nexport const acceptFriendRequest = async (username, fromUsername) => {\n  const cleanUser = sanitize(username);\n  const cleanFrom = sanitize(fromUsername);\n\n  try {\n    // 1. Add to my friends\n    await setDoc(doc(db, USERS_COLLECTION, cleanUser, 'friends', cleanFrom), {\n      username: fromUsername,\n      since: Timestamp.now(),\n    });\n\n    // 2. Add me to their friends (Mutual)\n    await setDoc(doc(db, USERS_COLLECTION, cleanFrom, 'friends', cleanUser), {\n      username: username,\n      since: Timestamp.now(),\n    });\n\n    // 3. Delete request\n    await deleteDoc(doc(db, USERS_COLLECTION, cleanUser, 'requests', cleanFrom));\n\n    return { success: true };\n  } catch (e) {\n    console.error('Error accepting request:', e);\n    return { error: e.message };\n  }\n};\n\n/**\n * Decline/Delete friend request\n */\nexport const declineFriendRequest = async (username, fromUsername) => {\n  const cleanUser = sanitize(username);\n  const cleanFrom = sanitize(fromUsername);\n  try {\n    await deleteDoc(doc(db, USERS_COLLECTION, cleanUser, 'requests', cleanFrom));\n    return { success: true };\n  } catch (e) {\n    return { error: e.message };\n  }\n};\n\n/**\n * Get my friends list\n */\nexport const getFriends = async username => {\n  if (!username) {return [];}\n  const clean = sanitize(username);\n\n  try {\n    const snapshot = await getDocs(collection(db, USERS_COLLECTION, clean, 'friends'));\n    const friends = [];\n\n    // Get today's date seed\n    const today = new Date();\n    const todaySeed = parseInt(\n      `${today.getFullYear()}${String(today.getMonth() + 1).padStart(2, '0')}${String(today.getDate()).padStart(2, '0')}`,\n      10\n    );\n\n    // For each friend, fetch their profile data\n    for (const friendDoc of snapshot.docs) {\n      const friendData = friendDoc.data();\n      const friendUsername = friendData.username;\n      const cleanFriendUsername = friendUsername.startsWith('@')\n        ? friendUsername.slice(1)\n        : friendUsername;\n\n      try {\n        // Fetch user profile for badges\n        const userRef = doc(db, USERS_COLLECTION, sanitize(cleanFriendUsername));\n        const userSnap = await getDoc(userRef);\n\n        let badges = [];\n        let todayGames = 0;\n\n        if (userSnap.exists()) {\n          const profileData = userSnap.data();\n          badges = profileData.equippedBadges || [];\n        }\n\n        // Get today's game count\n        const scoresQuery = query(\n          collection(db, SCORES_COLLECTION),\n          where('username', '==', cleanFriendUsername),\n          where('date', '==', todaySeed)\n        );\n\n        const scoresSnap = await getDocs(scoresQuery);\n        todayGames = scoresSnap.size;\n\n        friends.push({\n          ...friendData,\n          badges,\n          todayGames,\n        });\n      } catch (profileError) {\n        console.warn(`Could not fetch profile for ${friendUsername}:`, profileError);\n        friends.push(friendData);\n      }\n    }\n\n    return friends;\n  } catch (e) {\n    console.error('Error getting friends:', e);\n    return [];\n  }\n};\n\n/**\n * Get Friend Activity Feed\n * Returns an array of activity events with types:\n * - daily_score: First daily score from a friend\n * - badge_earned: Friend earned a new badge (future: requires activity tracking)\n * - username_changed: Friend changed their username\n */\nexport const getFriendFeed = async friendsList => {\n  if (!friendsList || friendsList.length === 0) {return [];}\n\n  // Ensure all friend usernames are without @ prefix for scores query\n  // (usernames are stored WITHOUT @ in Firebase)\n  const friendNames = friendsList.map(f => {\n    const username = f.username;\n    return username.startsWith('@') ? username.slice(1) : username;\n  });\n  const allActivities = [];\n\n  // 1. Fetch GLOBAL recent scores (Last 100) and filter client-side\n  // This avoids massive index requirements and handles case-sensitivity robustly\n  // (We check if score.username.toLowerCase() is in our friend list)\n  const friendSet = new Set(friendNames.map(n => n.toLowerCase()));\n\n  try {\n    const q = query(collection(db, SCORES_COLLECTION), orderBy('timestamp', 'desc'), limit(100));\n\n    const snap = await getDocs(q);\n    snap.forEach(docSnap => {\n      const data = docSnap.data();\n      const rawUser = data.username || '';\n      const lowerUser = rawUser.toLowerCase();\n\n      // Check for match (handling potential @ prefix in data if any, though usually stripped)\n      const cleanLower = lowerUser.startsWith('@') ? lowerUser.slice(1) : lowerUser;\n\n      if (friendSet.has(cleanLower)) {\n        allActivities.push({\n          id: docSnap.id,\n          type: 'daily_score',\n          username: data.username, // Keep original display casing\n          score: data.score,\n          time: data.time,\n          timestamp: data.timestamp,\n        });\n      }\n    });\n  } catch (e) {\n    console.error('Feed query failed:', e);\n  }\n\n  // 2. Check for username changes (migratedFrom field in user profiles)\n  // Re-create chunks for this batch operation\n  const chunks = [];\n  for (let i = 0; i < friendNames.length; i += 10) {\n    chunks.push(friendNames.slice(i, i + 10));\n  }\n\n  for (const chunk of chunks) {\n    try {\n      for (const username of chunk) {\n        const userRef = doc(db, USERS_COLLECTION, username);\n        const userDoc = await getDoc(userRef);\n        if (userDoc.exists()) {\n          const data = userDoc.data();\n          if (data.migratedFrom && data.updatedAt) {\n            allActivities.push({\n              id: `namechange_${username}`,\n              type: 'username_changed',\n              username: username,\n              oldUsername: data.migratedFrom,\n              timestamp: data.updatedAt,\n            });\n          }\n        }\n      }\n    } catch (e) {\n      console.warn('Error checking username changes:', e);\n    }\n  }\n\n  // Sort all activities by timestamp\n  allActivities.sort((a, b) => {\n    const timeA = a.timestamp?.seconds || 0;\n    const timeB = b.timestamp?.seconds || 0;\n    return timeB - timeA;\n  });\n\n  // Filter: Only keep the FIRST score per user per day for score activities\n  const uniqueActivities = [];\n  const seenUserDays = new Set();\n  const seenNameChanges = new Set();\n\n  for (const activity of allActivities) {\n    if (activity.type === 'daily_score') {\n      if (!activity.timestamp) {continue;}\n      const date = new Date(activity.timestamp.seconds * 1000).toDateString();\n      const key = `${activity.username}_${date}`;\n      if (!seenUserDays.has(key)) {\n        seenUserDays.add(key);\n        uniqueActivities.push(activity);\n      }\n    } else if (activity.type === 'username_changed') {\n      // Only show each name change once\n      if (!seenNameChanges.has(activity.username)) {\n        seenNameChanges.add(activity.username);\n        uniqueActivities.push(activity);\n      }\n    } else {\n      // Other activity types (badge_earned, etc.) - add directly\n      uniqueActivities.push(activity);\n    }\n  }\n\n  return uniqueActivities.slice(0, 50);\n};\n\n/**\n * Remove a friend\n */\nexport const removeFriend = async (user1, user2) => {\n  if (!user1 || !user2) {return { error: 'Invalid users' };}\n  const clean1 = sanitize(user1);\n  const clean2 = sanitize(user2);\n\n  try {\n    await deleteDoc(doc(db, USERS_COLLECTION, clean1, 'friends', clean2));\n    await deleteDoc(doc(db, USERS_COLLECTION, clean2, 'friends', clean1));\n    return { success: true };\n  } catch (e) {\n    console.error('Error removing friend:', e);\n    return { error: e.message };\n  }\n};\n\n/**\n * Get friendship status between two users (using subcollections)\n */\nexport const getFriendshipStatus = async (user1, user2) => {\n  if (!user1 || !user2) {return 'none';}\n  const clean1 = sanitize(user1);\n  const clean2 = sanitize(user2);\n\n  try {\n    // Check if friends\n    const friendRef = doc(db, USERS_COLLECTION, clean1, 'friends', clean2);\n    const friendSnap = await getDoc(friendRef);\n    if (friendSnap.exists()) {return 'friends';}\n\n    // Check if I sent request\n    const sentRef = doc(db, USERS_COLLECTION, clean2, 'requests', clean1);\n    const sentSnap = await getDoc(sentRef);\n    if (sentSnap.exists()) {return 'pending';}\n\n    // Check if they sent request\n    const receivedRef = doc(db, USERS_COLLECTION, clean1, 'requests', clean2);\n    const receivedSnap = await getDoc(receivedRef);\n    if (receivedSnap.exists()) {return 'pending';}\n\n    return 'none';\n  } catch (e) {\n    console.error('Error checking friendship:', e);\n    return 'none';\n  }\n};\n\n/**\n * Block a user\n */\nexport const blockUser = async (blocker, blocked) => {\n  if (!blocker || !blocked || blocker === blocked) {return;}\n\n  const blockId = `${sanitize(blocker)}_${sanitize(blocked)}`;\n  await setDoc(doc(db, BLOCKS_COLLECTION, blockId), {\n    blocker,\n    blocked,\n    createdAt: Timestamp.now(),\n  });\n};\n\n/**\n * Unblock a user\n */\nexport const unblockUser = async (blocker, blocked) => {\n  if (!blocker || !blocked) {return;}\n\n  const blockId = `${sanitize(blocker)}_${sanitize(blocked)}`;\n  const blockRef = doc(db, BLOCKS_COLLECTION, blockId);\n  await deleteDoc(blockRef);\n};\n\n/**\n * Check if user1 has blocked user2\n */\nexport const getBlockStatus = async (user1, user2) => {\n  try {\n    const blockId = `${sanitize(user1)}_${sanitize(user2)}`;\n    const blockRef = doc(db, BLOCKS_COLLECTION, blockId);\n    const blockDoc = await getDoc(blockRef);\n    return blockDoc.exists();\n  } catch (e) {\n    console.error('Error checking block status:', e);\n    return false;\n  }\n};\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/utils/giuros.ts",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 148,
        "column": 15,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 148,
        "endColumn": 18,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [4868, 4871], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [4868, 4871], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 264,
        "column": 94,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 264,
        "endColumn": 97,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [8700, 8703], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [8700, 8703], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      }
    ],
    "suppressedMessages": [
      {
        "ruleId": "no-console",
        "severity": 2,
        "message": "Unexpected console statement. Only these console methods are allowed: warn, error.",
        "line": 65,
        "column": 5,
        "nodeType": "MemberExpression",
        "messageId": "limited",
        "endLine": 65,
        "endColumn": 16,
        "suggestions": [
          {
            "fix": { "range": [2005, 2096], "text": "" },
            "messageId": "removeConsole",
            "data": { "propertyName": "log" },
            "desc": "Remove the console.log()."
          }
        ],
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-console",
        "severity": 2,
        "message": "Unexpected console statement. Only these console methods are allowed: warn, error.",
        "line": 131,
        "column": 5,
        "nodeType": "MemberExpression",
        "messageId": "limited",
        "endLine": 131,
        "endColumn": 16,
        "suggestions": [
          {
            "fix": { "range": [4151, 4262], "text": "" },
            "messageId": "removeConsole",
            "data": { "propertyName": "log" },
            "desc": "Remove the console.log()."
          }
        ],
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-console",
        "severity": 2,
        "message": "Unexpected console statement. Only these console methods are allowed: warn, error.",
        "line": 198,
        "column": 5,
        "nodeType": "MemberExpression",
        "messageId": "limited",
        "endLine": 198,
        "endColumn": 16,
        "suggestions": [
          {
            "fix": { "range": [6406, 6479], "text": "" },
            "messageId": "removeConsole",
            "data": { "propertyName": "log" },
            "desc": "Remove the console.log()."
          }
        ],
        "suppressions": [{ "kind": "directive", "justification": "" }]
      }
    ],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 2,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { db } from '../firebase';\nimport { doc, getDoc, updateDoc } from 'firebase/firestore';\nimport { getPayoutConfig } from './configService';\nimport { calculateStreakBonus } from '../config/gameConfig';\n\nconst USERS_COLLECTION = 'users';\n\n// Default Constants (used as fallback, actual values come from config)\nexport const STARTING_GIUROS = 10;\nexport const DAILY_LOGIN_BONUS = 2;\nexport const DAILY_CHALLENGE_BONUS = 5;\nexport const STREAK_WEEK_BONUS = 10;\nexport const PERFECT_SCORE_BONUS = 20;\nexport const REFERRAL_BONUS = 15;\n\n/**\n * Get user's current giuros balance\n * @param {string} username\n * @returns {Promise<number>}\n */\n/**\n * Get user's current giuros balance\n * @param {string} username\n * @returns {Promise<number>}\n */\nexport const getGiuros = async (username: string | null): Promise<number> => {\n  if (!username) {return 0;}\n  try {\n    const userRef = doc(db, USERS_COLLECTION, username);\n    const userDoc = await getDoc(userRef);\n    if (userDoc.exists()) {\n      return userDoc.data()?.giuros ?? STARTING_GIUROS;\n    }\n    return STARTING_GIUROS;\n  } catch (e) {\n    console.error('Error getting giuros:', e);\n    return 0;\n  }\n};\n\n/**\n * Add giuros to user's balance\n * @param {string} username\n * @param {number} amount\n * @param {string} reason - For logging/audit\n * @returns {Promise<{success: boolean, newBalance: number}>}\n */\nexport const addGiuros = async (username: string | null, amount: number, reason: string = ''): Promise<{ success: boolean, newBalance: number }> => {\n  if (!username || amount <= 0) {return { success: false, newBalance: 0 };}\n\n  try {\n    const userRef = doc(db, USERS_COLLECTION, username);\n    const userDoc = await getDoc(userRef);\n\n    if (!userDoc.exists()) {\n      return { success: false, newBalance: 0 };\n    }\n\n    const currentBalance = userDoc.data()?.giuros ?? STARTING_GIUROS;\n    const newBalance = currentBalance + amount;\n\n    await updateDoc(userRef, { giuros: newBalance });\n\n    // eslint-disable-next-line no-console\n    console.log(`[Giuros] +${amount} for ${username} (${reason}). New balance: ${newBalance}`);\n\n    return { success: true, newBalance };\n  } catch (e) {\n    console.error('Error adding giuros:', e);\n    return { success: false, newBalance: 0 };\n  }\n};\n\n/**\n * Award giuros (wrapper for feedback/other general rewards)\n * @param {string} username\n * @param {number} amount\n * @returns {Promise<{success: boolean, newBalance: number}>}\n */\n/**\n * Award giuros (wrapper for feedback/other general rewards)\n * @param {string} username\n * @param {number} amount\n * @returns {Promise<{success: boolean, newBalance: number}>}\n */\nexport const awardGiuros = (username: string | null, amount: number) => addGiuros(username, amount, 'reward');\n\n/**\n * Spend giuros on a cosmetic item\n * @param {string} username\n * @param {number} cost\n * @param {string} itemId\n * @returns {Promise<{success: boolean, error?: string, newBalance?: number}>}\n */\nexport const spendGiuros = async (username: string | null, cost: number, itemId: string): Promise<{ success: boolean, error?: string, newBalance?: number }> => {\n  if (!username || cost <= 0 || !itemId) {\n    return { success: false, error: 'Invalid parameters' };\n  }\n\n  try {\n    const userRef = doc(db, USERS_COLLECTION, username);\n    const userDoc = await getDoc(userRef);\n\n    if (!userDoc.exists()) {\n      return { success: false, error: 'User not found' };\n    }\n\n    const data = userDoc.data();\n    const currentBalance = data?.giuros ?? STARTING_GIUROS;\n\n    if (currentBalance < cost) {\n      return { success: false, error: 'Insufficient giuros' };\n    }\n\n    const purchasedCosmetics: string[] = data?.purchasedCosmetics || [];\n\n    // Check if already purchased (for non-consumable items)\n    if (purchasedCosmetics.includes(itemId) && !itemId.startsWith('handle_change')) {\n      return { success: false, error: 'Already owned' };\n    }\n\n    const newBalance = currentBalance - cost;\n    const newPurchases = [...purchasedCosmetics, itemId];\n\n    await updateDoc(userRef, {\n      giuros: newBalance,\n      purchasedCosmetics: newPurchases,\n    });\n\n    // eslint-disable-next-line no-console\n    console.log(\n      `[Giuros] -${cost} for ${username} (purchased ${itemId}). New balance: ${newBalance}`\n    );\n\n    // Publish activity for friend feed (async, don't await)\n    // @ts-ignore - Dynamic import of JS file? Need to check strictness\n    import('./publishActivity').then(({ publishCosmeticPurchase }) => {\n      // Determine item type from ID prefix\n      let itemType = 'item';\n      if (itemId.startsWith('badge_')) {itemType = 'badge';}\n      else if (itemId.startsWith('frame_')) {itemType = 'frame';}\n      else if (itemId.startsWith('title_')) {itemType = 'title';}\n\n      publishCosmeticPurchase(username, itemId, itemId, itemType);\n    });\n\n    return { success: true, newBalance };\n  } catch (e: any) {\n    console.error('Error spending giuros:', e);\n    return { success: false, error: e.message };\n  }\n};\n\n/**\n * Claim daily login bonus (once per day)\n * @param {string} username\n * @returns {Promise<{claimed: boolean, bonus: number, newBalance: number}>}\n */\n/**\n * Claim daily login bonus (once per day)\n * @param {string} username\n * @returns {Promise<{claimed: boolean, bonus: number, newBalance: number}>}\n */\nexport const claimDailyLoginBonus = async (username: string | null): Promise<{ claimed: boolean, bonus: number, newBalance: number }> => {\n  if (!username) {return { claimed: false, bonus: 0, newBalance: 0 };}\n\n  try {\n    // Fetch dynamic config\n    const config = await getPayoutConfig();\n    const dailyBonus = config.DAILY_LOGIN_BONUS;\n    const startingGiuros = config.STARTING_GIUROS;\n\n    const userRef = doc(db, USERS_COLLECTION, username);\n    const userDoc = await getDoc(userRef);\n\n    if (!userDoc.exists()) {\n      return { claimed: false, bonus: 0, newBalance: 0 };\n    }\n\n    const data = userDoc.data();\n    const today = new Date().toDateString();\n    const lastLogin = data?.lastLoginDate;\n\n    // Already claimed today\n    if (lastLogin === today) {\n      return { claimed: false, bonus: 0, newBalance: data?.giuros ?? startingGiuros };\n    }\n\n    const currentBalance = data?.giuros ?? startingGiuros;\n    const newBalance = currentBalance + dailyBonus;\n\n    await updateDoc(userRef, {\n      giuros: newBalance,\n      lastLoginDate: today,\n    });\n\n    // eslint-disable-next-line no-console\n    console.log(`[Giuros] Daily login bonus +${dailyBonus} for ${username}`);\n\n    return { claimed: true, bonus: dailyBonus, newBalance };\n  } catch (e) {\n    console.error('Error claiming daily login:', e);\n    return { claimed: false, bonus: 0, newBalance: 0 };\n  }\n};\n\n/**\n * Award bonus for completing daily challenge\n * @param {string} username\n * @param {number} streak - Current streak for bonus calculation\n * @returns {Promise<{bonus: number, newBalance: number}>}\n */\nexport const awardChallengeBonus = async (username: string | null, streak: number = 0): Promise<{ bonus: number, newBalance: number }> => {\n  if (!username) {return { bonus: 0, newBalance: 0 };}\n\n  // Use centralized game config for calculation\n  const bonus = calculateStreakBonus(streak);\n\n  const result = await addGiuros(username, bonus, `daily challenge (streak: ${streak})`);\n  return { bonus, newBalance: result.newBalance };\n};\n\n/**\n * Award referral bonus when referred user completes first game\n * @param {string} referrerUsername\n * @returns {Promise<{success: boolean, newBalance: number}>}\n */\nexport const awardReferralBonus = async (referrerUsername: string | null): Promise<{ success: boolean, newBalance: number }> => {\n  if (!referrerUsername) {return { success: false, newBalance: 0 };}\n\n  // Fetch dynamic config\n  const config = await getPayoutConfig();\n  const result = await addGiuros(referrerUsername, config.REFERRAL_BONUS, 'referral completed');\n  return { success: result.success, newBalance: result.newBalance };\n};\n\n/**\n * Get user's purchased cosmetics list\n * @param {string} username\n * @returns {Promise<string[]>}\n */\nexport const getPurchasedCosmetics = async (username: string | null): Promise<string[]> => {\n  if (!username) {return [];}\n\n  try {\n    const userRef = doc(db, USERS_COLLECTION, username);\n    const userDoc = await getDoc(userRef);\n\n    if (userDoc.exists()) {\n      return userDoc.data()?.purchasedCosmetics || [];\n    }\n    return [];\n  } catch (e) {\n    console.error('Error getting purchased cosmetics:', e);\n    return [];\n  }\n};\n\n/**\n * Set active cosmetics (equipped items)\n * @param {string} username\n * @param {object} equipped - { frameId, badgeIds, titleId }\n */\nexport const setEquippedCosmetics = async (username: string | null, equipped: Record<string, any>): Promise<void> => {\n  if (!username) {return;}\n\n  try {\n    const userRef = doc(db, USERS_COLLECTION, username);\n    await updateDoc(userRef, { equippedCosmetics: equipped });\n  } catch (e) {\n    console.error('Error setting equipped cosmetics:', e);\n  }\n};\n\n/**\n * Get equipped cosmetics\n * @param {string} username\n * @returns {Promise<{frameId?: string, badgeIds?: string[], titleId?: string}>}\n */\nexport const getEquippedCosmetics = async (username: string | null): Promise<{ frameId?: string, badgeIds?: string[], titleId?: string } | {}> => {\n  if (!username) {return {};}\n\n  try {\n    const userRef = doc(db, USERS_COLLECTION, username);\n    const userDoc = await getDoc(userRef);\n\n    if (userDoc.exists()) {\n      return userDoc.data()?.equippedCosmetics || {};\n    }\n    return {};\n  } catch (e) {\n    console.error('Error getting equipped cosmetics:', e);\n    return {};\n  }\n};\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/utils/leaderboard.js",
    "messages": [
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 2000.",
        "line": 124,
        "column": 68,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 124,
        "endColumn": 72
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 6.",
        "line": 182,
        "column": 30,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 182,
        "endColumn": 31
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1000.",
        "line": 204,
        "column": 50,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 204,
        "endColumn": 54
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 50.",
        "line": 276,
        "column": 33,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 276,
        "endColumn": 35
      }
    ],
    "suppressedMessages": [
      {
        "ruleId": "no-console",
        "severity": 2,
        "message": "Unexpected console statement. Only these console methods are allowed: warn, error.",
        "line": 43,
        "column": 3,
        "nodeType": "MemberExpression",
        "messageId": "limited",
        "endLine": 43,
        "endColumn": 14,
        "suggestions": [
          {
            "fix": { "range": [1400, 1521], "text": "" },
            "messageId": "removeConsole",
            "data": { "propertyName": "log" },
            "desc": "Remove the console.log()."
          }
        ],
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-console",
        "severity": 2,
        "message": "Unexpected console statement. Only these console methods are allowed: warn, error.",
        "line": 128,
        "column": 7,
        "nodeType": "MemberExpression",
        "messageId": "limited",
        "endLine": 128,
        "endColumn": 18,
        "suggestions": [
          {
            "fix": { "range": [4629, 4696], "text": "" },
            "messageId": "removeConsole",
            "data": { "propertyName": "log" },
            "desc": "Remove the console.log()."
          }
        ],
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-console",
        "severity": 2,
        "message": "Unexpected console statement. Only these console methods are allowed: warn, error.",
        "line": 170,
        "column": 7,
        "nodeType": "MemberExpression",
        "messageId": "limited",
        "endLine": 170,
        "endColumn": 18,
        "suggestions": [
          {
            "fix": { "range": [6633, 6758], "text": "" },
            "messageId": "removeConsole",
            "data": { "propertyName": "log" },
            "desc": "Remove the console.log()."
          }
        ],
        "suppressions": [{ "kind": "directive", "justification": "" }]
      }
    ],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 4,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { db } from '../firebase';\nimport {\n  collection,\n  doc,\n  setDoc,\n  addDoc,\n  getDoc,\n  query,\n  orderBy,\n  limit,\n  getDocs,\n  Timestamp,\n  where,\n} from 'firebase/firestore';\nimport { getTodaySeed } from './dailyChallenge';\n\nconst HIGHSCORES_COLLECTION = 'highscores'; // Personal Bests (All Time)\nconst SCORES_COLLECTION = 'scores'; // Full History\n\n/**\n * Save user's score to Firestore in two collections:\n * 1. 'scores' collection - Full history for daily/weekly/monthly rankings\n * 2. 'highscores' collection - Personal best (all-time), updated only if improved\n *\n * @param {string} username - User's display name\n * @param {number} score - Total points earned (0-2000 for 20 questions)\n * @param {number|string} time - Average time per question in seconds\n * @param {Object} options - Additional options\n * @param {boolean} options.isBonus - If true, this score is a \"Retry\" allowed by referral\n * @param {number} options.correctAnswers - Number of correct answers\n * @param {number} options.questionCount - Total questions attempted\n * @param {number} options.streakAtPlay - User's streak value at time of play\n * @returns {Promise<void>}\n */\nexport const saveScore = async (username, score, time, options = {}) => {\n  const {\n    isBonus = false,\n    correctAnswers = null,\n    questionCount = 10,\n    streakAtPlay = null,\n  } = options;\n  // eslint-disable-next-line no-console\n  console.log(\n    `[Leaderboard] saveScore called for ${username}. Score: ${score}, Time: ${time}, Bonus: ${isBonus}`\n  );\n  if (!username) {\n    console.warn('[Leaderboard] saveScore called without username, skipping.');\n    return;\n  }\n\n  try {\n    const now = Timestamp.now();\n    // Strip @ prefix from username before saving (usernames stored WITHOUT @ in Firebase)\n    const cleanUsername = username.startsWith('@') ? username.slice(1) : username;\n    const scoreData = {\n      username: cleanUsername,\n      score,\n      time: parseFloat(time),\n      date: getTodaySeed(),\n      timestamp: now,\n      platform: 'web',\n      isBonus, // Store bonus flag\n      correctAnswers, // Number of correct responses\n      questionCount, // Total questions (for partial games)\n      streakAtPlay, // Streak value at time of game\n      email: options.email || null, // Store email for integrity/contact\n    };\n\n    await addDoc(collection(db, SCORES_COLLECTION), scoreData);\n\n    // 2. Check & Update Personal Best (All Time)\n    const sanitizedUsername = cleanUsername.replace(/\\//g, '_');\n    const userDocRef = doc(db, HIGHSCORES_COLLECTION, sanitizedUsername);\n    const userDoc = await getDoc(userDocRef);\n    let shouldUpdate = false;\n\n    if (userDoc.exists()) {\n      const data = userDoc.data();\n      if (score > data.score) {\n        shouldUpdate = true;\n      } else if (score === data.score && parseFloat(time) < parseFloat(data.time)) {\n        shouldUpdate = true;\n      }\n    } else {\n      shouldUpdate = true;\n    }\n\n    if (shouldUpdate) {\n      await setDoc(userDocRef, scoreData);\n    }\n  } catch (e) {\n    console.error('Error saving score: ', e);\n    console.error('[Leaderboard] Full error details:', e.code, e.message);\n  }\n};\n\n/**\n * Fetch leaderboard scores with automatic deduplication (one entry per user).\n * For 'all' period, queries pre-calculated highscores for efficiency.\n * For time-based periods, fetches recent history and filters in-memory.\n *\n * @param {('all'|'daily'|'weekly'|'monthly')} period - Time period for leaderboard\n * @returns {Promise<Array<{id: string, username: string, score: number, time: number, date: number, timestamp: Timestamp}>>}\n *          Top 50 scores, sorted by score (desc) then time (asc)\n *\n * @example\n * const topScores = await getLeaderboard('daily');\n * // Returns today's top 50 scores, one per user\n *\n * @example\n * const allTimeScores = await getLeaderboard('all');\n * // Returns all-time personal bests, top 50\n */\nexport const getLeaderboard = async (period = 'all') => {\n  try {\n    // For all periods (including 'all'), we now need cumulative history from 'scores'.\n    // 'all' = Cumulative score of 1st game of every day.\n    // 'highscores' collection is now only for \"Best Single Game\" which might be used elsewhere,\n    // but for this specific leaderboard requirement, we query 'scores'.\n\n    const scoresRef = collection(db, SCORES_COLLECTION);\n    // Increase limit to capture more history for 'all' time aggregation\n    // Long term: Move this aggregation to backend (Cloud Functions)\n    const q = query(scoresRef, orderBy('timestamp', 'desc'), limit(2000));\n\n    if (import.meta.env.DEV) {\n      // eslint-disable-next-line no-console\n      console.log(`[Leaderboard] Fetching scores for period: ${period}`);\n    }\n\n    // Parallel fetch: Scores AND Migration Data\n    // We need to know which users have migrated to merge their scores\n    // Note: 'orderBy' implicitly filters for existence of field.\n    // Or we just fetch all users if dataset is small, but let's try to be specific.\n    // Actually, simple way: fetch all users (assuming < 1000 active for now) or just ignore perfectly.\n    // Better: Query specifically for migrated fields.\n    // For now, let's just fetch scores first. Real-time migration merging might be heavy if many users.\n\n    // Let's use a smarter approach: Just fetch scores.\n    const snapshot = await getDocs(q);\n\n    // FETCH MIGRATIONS:\n    // To properly deduplicate, we need to know who maps to whom.\n    // We'll fetch users acting as tombstones (having migratedTo).\n    // This requires an index usually: where('migratedTo', '!=', null).\n    // As a fallback without index, we might miss some, but this is critical for the request.\n    // Let's try to just fetch the unique usernames found in scores and check their profiles? expensive.\n    // Let's assume we can fetch 'users' where migratedTo > '' (non-empty string).\n\n    const migrationMap = {};\n    try {\n      const usersRef = collection(db, 'users');\n      const migrationSnap = await getDocs(query(usersRef, where('migratedTo', '!=', null)));\n      migrationSnap.forEach(doc => {\n        const d = doc.data();\n        if (d.migratedTo) {\n          migrationMap[doc.id.toLowerCase()] = d.migratedTo.toLowerCase();\n          // Also handle case where username in score might be without @\n          // but our map keys should be consistent.\n        }\n      });\n    } catch (e) {\n      console.warn('[Leaderboard] Could not fetch migrations (requires index?):', e);\n    }\n\n    // Also hardcode the known one from the user request if needed, but the DB should have it.\n\n    if (import.meta.env.DEV) {\n      // eslint-disable-next-line no-console\n      console.log(\n        `[Leaderboard] Fetched ${snapshot.size} scores, ${Object.keys(migrationMap).length} migrations`\n      );\n    }\n\n    const rawScores = [];\n    // Reset to start of today for comparisons\n    const todayStart = new Date();\n    todayStart.setHours(0, 0, 0, 0);\n\n    // Start of Week (Monday)\n    const day = todayStart.getDay();\n    const diff = day === 0 ? 6 : day - 1;\n    const startOfWeek = new Date(todayStart);\n    startOfWeek.setDate(todayStart.getDate() - diff);\n    startOfWeek.setHours(0, 0, 0, 0);\n\n    // Start of Month\n    const startOfMonth = new Date(todayStart.getFullYear(), todayStart.getMonth(), 1);\n\n    const todaySeed = getTodaySeed();\n\n    const seenEntries = new Set(); // Prevent duplicate processing of exact same doc\n\n    snapshot.forEach(doc => {\n      if (seenEntries.has(doc.id)) {return;}\n      seenEntries.add(doc.id);\n\n      const data = doc.data();\n      // Handle different timestamp formats\n      let date;\n      if (data.timestamp && typeof data.timestamp.toDate === 'function') {\n        date = data.timestamp.toDate();\n      } else if (data.timestamp && data.timestamp.seconds) {\n        date = new Date(data.timestamp.seconds * 1000);\n      } else if (data.timestamp) {\n        date = new Date(data.timestamp);\n      } else {\n        date = new Date(0);\n      }\n\n      let include = false;\n      // Better username handling - use the username from data, or doc ID as fallback\n      let rawUsername = data.username?.toLowerCase() || doc.id.toLowerCase() || 'unknown user';\n\n      // NORMALIZE USERNAME: Check migration map\n      // If this username is a legacy one, map it to the new one\n      if (migrationMap[rawUsername]) {\n        rawUsername = migrationMap[rawUsername];\n      }\n      // Also check keys with/without @ if mismatch\n      const withoutAt = rawUsername.replace('@', '');\n      if (migrationMap[withoutAt]) {\n        rawUsername = migrationMap[withoutAt];\n      }\n\n      // Ensure display format has @ prefix (stored without @ in Firebase usually)\n      const loweredUsername = rawUsername.startsWith('@') ? rawUsername : `@${  rawUsername}`;\n\n      if (period === 'daily') {\n        // Daily: Only today's games\n        if (data.date === todaySeed) {\n          include = true;\n        } else {\n          const d = new Date(date);\n          d.setHours(0, 0, 0, 0);\n          if (d.getTime() === todayStart.getTime()) {include = true;}\n        }\n      } else if (period === 'weekly') {\n        if (date >= startOfWeek) {include = true;}\n      } else if (period === 'monthly') {\n        if (date >= startOfMonth) {include = true;}\n      } else if (period === 'all') {\n        include = true;\n      }\n\n      if (include) {\n        rawScores.push({ id: doc.id, ...data, username: loweredUsername, sortDate: date });\n      }\n    });\n\n    let finalScores = [];\n\n    if (period === 'daily') {\n      // Daily: Keep BEST result (Max Score, Min Time)\n      finalScores = deduplicateBestScore(rawScores);\n    } else {\n      // Weekly/Monthly/All: Cumulative sum of 1st result of each day\n      finalScores = aggregateCumulativeScores(rawScores);\n    }\n\n    // Sort Final Result (Score DESC, Time ASC)\n    finalScores.sort((a, b) => {\n      if (b.score !== a.score) {return b.score - a.score;}\n      return a.time - b.time;\n    });\n\n    // Safety check: ensure unique users in final list (double check)\n    const seen = new Set();\n    finalScores = finalScores.filter(s => {\n      const u = s.username.toLowerCase();\n      if (seen.has(u)) {return false;}\n      seen.add(u);\n      return true;\n    });\n\n    return finalScores.slice(0, 50); // Top 50\n  } catch (e) {\n    console.error('Error getting leaderboard: ', e);\n    return [];\n  }\n};\n\n/**\n * Daily Mode: Keep FIRST score per user (First Attempt).\n * EXCEPTION: If 'isBonus' is true (Referral Retry), allow REPLACEMENT if score is better.\n */\nconst deduplicateBestScore = scores => {\n  const userEntry = {};\n\n  // Sort by time ASC to process chronological order\n  const sorted = [...scores].sort((a, b) => a.sortDate - b.sortDate);\n\n  sorted.forEach(s => {\n    if (!userEntry[s.username]) {\n      // First attempt of the day -> Keep it\n      userEntry[s.username] = s;\n    } else {\n      const current = userEntry[s.username];\n\n      // If this subsequent attempt is a BONUS and is BETTER, replace\n      if (s.isBonus && s.score > current.score) {\n        userEntry[s.username] = s;\n      }\n      // Otherwise ignore (Strict First Attempt Rule)\n    }\n  });\n  return Object.values(userEntry);\n};\n\n/**\n * Cumulative Mode: Sum of 'First Game of the Day' for each user.\n */\nconst aggregateCumulativeScores = scores => {\n  const userDailyGames = {}; // { username: { dateString: firstGameObj } }\n\n  scores.forEach(s => {\n    const dateKey = s.sortDate.toISOString().split('T')[0];\n    const username = s.username;\n\n    if (!userDailyGames[username]) {\n      userDailyGames[username] = {};\n    }\n\n    if (!userDailyGames[username][dateKey]) {\n      userDailyGames[username][dateKey] = s;\n    } else {\n      // Keep the EARLIEST game of the day\n      const currentFirst = userDailyGames[username][dateKey];\n      if (s.sortDate < currentFirst.sortDate) {\n        userDailyGames[username][dateKey] = s;\n      }\n    }\n  });\n\n  // Sum up valid daily games\n  const aggregated = [];\n  Object.keys(userDailyGames).forEach(username => {\n    const dailyGames = Object.values(userDailyGames[username]);\n    let totalScore = 0;\n    let totalTime = 0;\n\n    dailyGames.forEach(g => {\n      totalScore += g.score;\n      totalTime += g.time;\n    });\n\n    aggregated.push({\n      id: username,\n      username: username,\n      score: totalScore,\n      time: dailyGames.length ? totalTime / dailyGames.length : 0, // Average time per game\n      gamesCount: dailyGames.length,\n    });\n  });\n\n  return aggregated;\n};\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/utils/logger.ts",
    "messages": [],
    "suppressedMessages": [
      {
        "ruleId": "no-console",
        "severity": 2,
        "message": "Unexpected console statement. Only these console methods are allowed: warn, error.",
        "line": 18,
        "column": 7,
        "nodeType": "MemberExpression",
        "messageId": "limited",
        "endLine": 18,
        "endColumn": 18,
        "suggestions": [
          {
            "fix": { "range": [366, 398], "text": "" },
            "messageId": "removeConsole",
            "data": { "propertyName": "log" },
            "desc": "Remove the console.log()."
          }
        ],
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-console",
        "severity": 2,
        "message": "Unexpected console statement. Only these console methods are allowed: warn, error.",
        "line": 25,
        "column": 7,
        "nodeType": "MemberExpression",
        "messageId": "limited",
        "endLine": 25,
        "endColumn": 19,
        "suggestions": [
          {
            "fix": { "range": [537, 569], "text": "" },
            "messageId": "removeConsole",
            "data": { "propertyName": "info" },
            "desc": "Remove the console.info()."
          }
        ],
        "suppressions": [{ "kind": "directive", "justification": "" }]
      }
    ],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/utils/news.js",
    "messages": [
      {
        "ruleId": "no-nested-ternary",
        "severity": 1,
        "message": "Do not nest ternary expressions.",
        "line": 162,
        "column": 19,
        "nodeType": "ConditionalExpression",
        "messageId": "noNestedTernary",
        "endLine": 166,
        "endColumn": 15
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 1,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "/**\n * News/Announcements Utility Functions\n * Handles creating, fetching, and tracking read status of announcements\n */\nimport { db } from '../firebase';\nimport {\n  collection,\n  doc,\n  getDocs,\n  addDoc,\n  updateDoc,\n  deleteDoc,\n  query,\n  where,\n  orderBy,\n  Timestamp,\n  getDoc,\n  setDoc,\n} from 'firebase/firestore';\n\nconst ANNOUNCEMENTS_COLLECTION = 'announcements';\nconst USER_READ_COLLECTION = 'userReadAnnouncements';\n\n/**\n * Get all announcements (for admin panel)\n * @returns {Promise<Array>}\n */\nexport const getAllAnnouncements = async () => {\n  try {\n    const announcementsRef = collection(db, ANNOUNCEMENTS_COLLECTION);\n    const q = query(announcementsRef, orderBy('publishDate', 'desc'));\n    const snapshot = await getDocs(q);\n\n    return snapshot.docs.map(d => ({\n      id: d.id,\n      ...d.data(),\n    }));\n  } catch (e) {\n    console.error('[News] Error fetching announcements:', e);\n    return [];\n  }\n};\n\n/**\n * Get active announcements (published and not expired)\n * @returns {Promise<Array>}\n */\nexport const getActiveAnnouncements = async () => {\n  try {\n    const now = new Date();\n    const announcementsRef = collection(db, ANNOUNCEMENTS_COLLECTION);\n    const q = query(\n      announcementsRef,\n      where('publishDate', '<=', Timestamp.fromDate(now)),\n      orderBy('publishDate', 'desc')\n    );\n    const snapshot = await getDocs(q);\n\n    return snapshot.docs\n      .map(d => ({\n        id: d.id,\n        ...d.data(),\n      }))\n      .filter(a => {\n        // Filter out expired announcements\n        if (a.expiryDate) {\n          const expiry = a.expiryDate.toDate ? a.expiryDate.toDate() : new Date(a.expiryDate);\n          return expiry > now;\n        }\n        return true;\n      });\n  } catch (e) {\n    console.error('[News] Error fetching active announcements:', e);\n    return [];\n  }\n};\n\n/**\n * Get unread announcements for a user\n * @param {string} username\n * @returns {Promise<Array>}\n */\nexport const getUnreadAnnouncements = async username => {\n  if (!username) {return [];}\n\n  try {\n    const active = await getActiveAnnouncements();\n    if (active.length === 0) {return [];}\n\n    // Get user's read announcements\n    const userReadRef = doc(db, USER_READ_COLLECTION, username);\n    const userReadDoc = await getDoc(userReadRef);\n    const readIds = userReadDoc.exists() ? userReadDoc.data().readIds || [] : [];\n\n    return active.filter(a => !readIds.includes(a.id));\n  } catch (e) {\n    console.error('[News] Error getting unread announcements:', e);\n    return [];\n  }\n};\n\n/**\n * Mark announcement as read for user\n * @param {string} username\n * @param {string} announcementId\n */\nexport const markAnnouncementAsRead = async (username, announcementId) => {\n  if (!username || !announcementId) {return;}\n\n  try {\n    const userReadRef = doc(db, USER_READ_COLLECTION, username);\n    const userReadDoc = await getDoc(userReadRef);\n\n    if (userReadDoc.exists()) {\n      const readIds = userReadDoc.data().readIds || [];\n      if (!readIds.includes(announcementId)) {\n        await updateDoc(userReadRef, {\n          readIds: [...readIds, announcementId],\n          lastRead: Timestamp.now(),\n        });\n      }\n    } else {\n      await setDoc(userReadRef, {\n        readIds: [announcementId],\n        lastRead: Timestamp.now(),\n      });\n    }\n  } catch (e) {\n    console.error('[News] Error marking as read:', e);\n  }\n};\n\n/**\n * Create a new announcement (admin only)\n * @param {Object} announcement - { title, body, publishDate, expiryDate?, isActive?, priority?, targetAudience? }\n * @returns {Promise<{success: boolean, id?: string, error?: string}>}\n */\nexport const createAnnouncement = async announcement => {\n  try {\n    const {\n      title,\n      body,\n      publishDate,\n      expiryDate,\n      isActive = true,\n      priority = 'normal',\n      targetAudience = 'all',\n    } = announcement;\n\n    if (!title || !body || !publishDate) {\n      return { success: false, error: 'Missing required fields' };\n    }\n\n    const announcementsRef = collection(db, ANNOUNCEMENTS_COLLECTION);\n    const docRef = await addDoc(announcementsRef, {\n      title,\n      body,\n      publishDate:\n        publishDate instanceof Date\n          ? Timestamp.fromDate(publishDate)\n          : Timestamp.fromDate(new Date(publishDate)),\n      expiryDate: expiryDate\n        ? expiryDate instanceof Date\n          ? Timestamp.fromDate(expiryDate)\n          : Timestamp.fromDate(new Date(expiryDate))\n        : null,\n      isActive, // Manual toggle for visibility\n      priority, // 'low' | 'normal' | 'high' | 'urgent'\n      targetAudience, // 'all' | 'new_users' | 'returning'\n      createdAt: Timestamp.now(),\n    });\n\n    return { success: true, id: docRef.id };\n  } catch (e) {\n    console.error('[News] Error creating announcement:', e);\n    return { success: false, error: e.message };\n  }\n};\n\n/**\n * Update an announcement (admin only)\n * @param {string} id\n * @param {Object} updates\n */\nexport const updateAnnouncement = async (id, updates) => {\n  try {\n    const announcementRef = doc(db, ANNOUNCEMENTS_COLLECTION, id);\n\n    // Convert dates if needed\n    const updatedData = { ...updates };\n    if (updates.publishDate) {\n      updatedData.publishDate =\n        updates.publishDate instanceof Date\n          ? Timestamp.fromDate(updates.publishDate)\n          : Timestamp.fromDate(new Date(updates.publishDate));\n    }\n    if (updates.expiryDate) {\n      updatedData.expiryDate =\n        updates.expiryDate instanceof Date\n          ? Timestamp.fromDate(updates.expiryDate)\n          : Timestamp.fromDate(new Date(updates.expiryDate));\n    }\n\n    await updateDoc(announcementRef, updatedData);\n    return { success: true };\n  } catch (e) {\n    console.error('[News] Error updating announcement:', e);\n    return { success: false, error: e.message };\n  }\n};\n\n/**\n * Delete an announcement (admin only)\n * @param {string} id\n */\nexport const deleteAnnouncement = async id => {\n  try {\n    const announcementRef = doc(db, ANNOUNCEMENTS_COLLECTION, id);\n    await deleteDoc(announcementRef);\n    return { success: true };\n  } catch (e) {\n    console.error('[News] Error deleting announcement:', e);\n    return { success: false, error: e.message };\n  }\n};\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/utils/publishActivity.js",
    "messages": [],
    "suppressedMessages": [
      {
        "ruleId": "no-console",
        "severity": 2,
        "message": "Unexpected console statement. Only these console methods are allowed: warn, error.",
        "line": 27,
        "column": 5,
        "nodeType": "MemberExpression",
        "messageId": "limited",
        "endLine": 27,
        "endColumn": 16,
        "suggestions": [
          {
            "fix": { "range": [777, 837], "text": "" },
            "messageId": "removeConsole",
            "data": { "propertyName": "log" },
            "desc": "Remove the console.log()."
          }
        ],
        "suppressions": [{ "kind": "directive", "justification": "" }]
      }
    ],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/utils/scoring.ts",
    "messages": [
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 90.",
        "line": 29,
        "column": 17,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 29,
        "endColumn": 19
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 75.",
        "line": 30,
        "column": 17,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 30,
        "endColumn": 19
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 50.",
        "line": 31,
        "column": 17,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 31,
        "endColumn": 19
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 30.",
        "line": 32,
        "column": 17,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 32,
        "endColumn": 19
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 90.",
        "line": 43,
        "column": 17,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 43,
        "endColumn": 19
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 75.",
        "line": 44,
        "column": 17,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 44,
        "endColumn": 19
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 50.",
        "line": 45,
        "column": 17,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 45,
        "endColumn": 19
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 30.",
        "line": 46,
        "column": 17,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 46,
        "endColumn": 19
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 8,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { calculateScore } from '../config/gameConfig';\n\n/**\n * Calculate score based on time taken and hints used\n * @deprecated Use calculateScore from config/gameConfig instead\n * @param {number} timeInSeconds - Time taken to answer\n * @param {boolean} isCorrect - Whether answer was correct\n * @param {number} hintsCount - Number of hints revealed (0-3)\n * @returns {number} - Points earned (0-100)\n */\n/**\n * Calculate score based on time taken and hints used\n * @deprecated Use calculateScore from config/gameConfig instead\n * @param {number} timeInSeconds - Time taken to answer\n * @param {boolean} isCorrect - Whether answer was correct\n * @param {number} hintsCount - Number of hints revealed (0-3)\n * @returns {number} - Points earned (0-100)\n */\nexport function calculateTimeScore(timeInSeconds: number, isCorrect: boolean, hintsCount: number = 0): number {\n  return calculateScore(timeInSeconds, isCorrect, hintsCount);\n}\n\n/**\n * Get score tier label\n * @param {number} points - Points earned\n * @returns {string} - Tier label\n */\nexport function getScoreTier(points: number): string {\n  if (points >= 90) {return 'Perfect!';}\n  if (points >= 75) {return 'Excellent';}\n  if (points >= 50) {return 'Good';}\n  if (points >= 30) {return 'Fair';}\n  if (points > 0) {return 'Slow';}\n  return 'Wrong';\n}\n\n/**\n * Get score tier color\n * @param {number} points - Points earned\n * @returns {string} - Tailwind color class\n */\nexport function getScoreTierColor(points: number): string {\n  if (points >= 90) {return 'text-emerald-500';}\n  if (points >= 75) {return 'text-green-500';}\n  if (points >= 50) {return 'text-yellow-500';}\n  if (points >= 30) {return 'text-orange-500';}\n  if (points > 0) {return 'text-red-500';}\n  return 'text-rose-500';\n}\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/utils/security.ts",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/utils/shop.js",
    "messages": [
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 5.",
        "line": 8,
        "column": 24,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 8,
        "endColumn": 25
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 60.",
        "line": 8,
        "column": 28,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 8,
        "endColumn": 30
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1000.",
        "line": 8,
        "column": 33,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 8,
        "endColumn": 37
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 3,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import cosmetics from '../data/cosmetics.json';\nimport { db } from '../firebase';\nimport { collection, getDocs, doc, setDoc, deleteDoc, addDoc } from 'firebase/firestore';\n\n// Simple in-memory cache\nlet shopItemsCache = null;\nlet cacheTimestamp = 0;\nconst CACHE_DURATION = 5 * 60 * 1000; // 5 minutes\n\n/**\n * Fetch all shop items from Firestore, merged with local cosmetics.json\n * @param {boolean} forceRefresh - If true, ignore cache\n * @returns {Promise<Object>} - Grouped by type: { avatarFrames: [], titles: [], special: [], avatars: [] }\n */\nexport const getShopItems = async (forceRefresh = false) => {\n  const now = Date.now();\n  if (!forceRefresh && shopItemsCache && now - cacheTimestamp < CACHE_DURATION) {\n    return shopItemsCache;\n  }\n\n  // Start with local cosmetics.json as the base source of truth\n  const localItems = [\n    ...(cosmetics.avatarFrames || []).map(i => ({ ...i, type: 'frame' })),\n    ...(cosmetics.titles || []).map(i => ({ ...i, type: 'title' })),\n    ...(cosmetics.special || []).map(i => ({ ...i, type: 'special' })),\n    ...(cosmetics.avatars || []).map(i => ({ ...i, type: 'avatar' })),\n  ];\n\n  const firestoreItems = [];\n  try {\n    const querySnapshot = await getDocs(collection(db, 'shop_items'));\n    querySnapshot.forEach(doc => {\n      firestoreItems.push({ id: doc.id, ...doc.data() });\n    });\n    console.warn('Shop Fetch Success:', firestoreItems.length, 'Firestore items');\n  } catch (error) {\n    console.error('Error fetching shop items from Firestore:', error);\n    // Continue with just local items\n  }\n\n  // Merge: Firestore items override local items with same ID\n  const itemMap = new Map();\n  localItems.forEach(item => itemMap.set(item.id, item));\n  firestoreItems.forEach(item => itemMap.set(item.id, item));\n\n  const allItems = Array.from(itemMap.values());\n\n  // Group items\n  const grouped = {\n    avatarFrames: allItems.filter(i => i.type === 'frame'),\n    titles: allItems.filter(i => i.type === 'title'),\n    special: allItems.filter(i => i.type === 'special'),\n    avatars: allItems.filter(\n      i => i.type === 'avatar' || i.type === 'avatars' || (i.id && i.id.startsWith('avatar_'))\n    ),\n    all: allItems,\n  };\n\n  shopItemsCache = grouped;\n  cacheTimestamp = now;\n  return grouped;\n};\n\n/**\n * Update a shop item\n * @param {string} id\n * @param {Object} updates\n */\nexport const updateShopItem = async (id, updates) => {\n  try {\n    await setDoc(doc(db, 'shop_items', id), updates, { merge: true });\n    shopItemsCache = null; // Invalidate cache\n    return { success: true };\n  } catch (error) {\n    console.error('Error updating shop item:', error);\n    return { success: false, error: error.message };\n  }\n};\n\n/**\n * Create a new shop item\n * @param {Object} itemData\n */\nexport const createShopItem = async itemData => {\n  try {\n    // If ID is provided, use it, else auto-generate (though typically we want clean IDs like 'frame_gold')\n    const id = itemData.id;\n    if (id) {\n      await setDoc(doc(db, 'shop_items', id), itemData);\n    } else {\n      await addDoc(collection(db, 'shop_items'), itemData);\n    }\n    shopItemsCache = null;\n    return { success: true };\n  } catch (error) {\n    console.error('Error creating shop item:', error);\n    return { success: false, error: error.message };\n  }\n};\n\n/**\n * Delete a shop item\n * @param {string} id\n */\nexport const deleteShopItem = async id => {\n  try {\n    await deleteDoc(doc(db, 'shop_items', id));\n    shopItemsCache = null;\n    return { success: true };\n  } catch (error) {\n    console.error('Error deleting shop item:', error);\n    return { success: false, error: error.message };\n  }\n};\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/utils/social.js",
    "messages": [
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 20.",
        "line": 66,
        "column": 71,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 66,
        "endColumn": 73
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 100.",
        "line": 225,
        "column": 64,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 225,
        "endColumn": 67
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1000.",
        "line": 460,
        "column": 76,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 460,
        "endColumn": 80
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1000.",
        "line": 473,
        "column": 39,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 473,
        "endColumn": 43
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 20.",
        "line": 858,
        "column": 68,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 858,
        "endColumn": 70
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 10.",
        "line": 862,
        "column": 37,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 862,
        "endColumn": 39
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 50.",
        "line": 908,
        "column": 15,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 908,
        "endColumn": 17
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 100.",
        "line": 1106,
        "column": 56,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 1106,
        "endColumn": 59
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 100.",
        "line": 1112,
        "column": 90,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 1112,
        "endColumn": 93
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 1000.",
        "line": 1132,
        "column": 51,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 1132,
        "endColumn": 55
      },
      {
        "ruleId": "no-magic-numbers",
        "severity": 1,
        "message": "No magic number: 10.",
        "line": 1132,
        "column": 80,
        "nodeType": "Literal",
        "messageId": "noMagic",
        "endLine": 1132,
        "endColumn": 82
      }
    ],
    "suppressedMessages": [
      {
        "ruleId": "no-console",
        "severity": 2,
        "message": "Unexpected console statement. Only these console methods are allowed: warn, error.",
        "line": 51,
        "column": 7,
        "nodeType": "MemberExpression",
        "messageId": "limited",
        "endLine": 51,
        "endColumn": 18,
        "suggestions": [
          {
            "fix": { "range": [1985, 2102], "text": "" },
            "messageId": "removeConsole",
            "data": { "propertyName": "log" },
            "desc": "Remove the console.log()."
          }
        ],
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-console",
        "severity": 2,
        "message": "Unexpected console statement. Only these console methods are allowed: warn, error.",
        "line": 508,
        "column": 9,
        "nodeType": "MemberExpression",
        "messageId": "limited",
        "endLine": 508,
        "endColumn": 20,
        "suggestions": [
          {
            "fix": { "range": [16753, 16947], "text": "" },
            "messageId": "removeConsole",
            "data": { "propertyName": "log" },
            "desc": "Remove the console.log()."
          }
        ],
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-console",
        "severity": 2,
        "message": "Unexpected console statement. Only these console methods are allowed: warn, error.",
        "line": 923,
        "column": 9,
        "nodeType": "MemberExpression",
        "messageId": "limited",
        "endLine": 923,
        "endColumn": 20,
        "suggestions": [
          {
            "fix": { "range": [29439, 29504], "text": "" },
            "messageId": "removeConsole",
            "data": { "propertyName": "log" },
            "desc": "Remove the console.log()."
          }
        ],
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-console",
        "severity": 2,
        "message": "Unexpected console statement. Only these console methods are allowed: warn, error.",
        "line": 946,
        "column": 12,
        "nodeType": "MemberExpression",
        "messageId": "limited",
        "endLine": 946,
        "endColumn": 23,
        "suggestions": [
          {
            "fix": { "range": [30297, 30371], "text": "" },
            "messageId": "removeConsole",
            "data": { "propertyName": "log" },
            "desc": "Remove the console.log()."
          }
        ],
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-console",
        "severity": 2,
        "message": "Unexpected console statement. Only these console methods are allowed: warn, error.",
        "line": 953,
        "column": 5,
        "nodeType": "MemberExpression",
        "messageId": "limited",
        "endLine": 953,
        "endColumn": 16,
        "suggestions": [
          {
            "fix": { "range": [30535, 30615], "text": "" },
            "messageId": "removeConsole",
            "data": { "propertyName": "log" },
            "desc": "Remove the console.log()."
          }
        ],
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-console",
        "severity": 2,
        "message": "Unexpected console statement. Only these console methods are allowed: warn, error.",
        "line": 986,
        "column": 11,
        "nodeType": "MemberExpression",
        "messageId": "limited",
        "endLine": 986,
        "endColumn": 22,
        "suggestions": [
          {
            "fix": { "range": [31704, 31763], "text": "" },
            "messageId": "removeConsole",
            "data": { "propertyName": "log" },
            "desc": "Remove the console.log()."
          }
        ],
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-console",
        "severity": 2,
        "message": "Unexpected console statement. Only these console methods are allowed: warn, error.",
        "line": 1001,
        "column": 9,
        "nodeType": "MemberExpression",
        "messageId": "limited",
        "endLine": 1001,
        "endColumn": 20,
        "suggestions": [
          {
            "fix": { "range": [32333, 32394], "text": "" },
            "messageId": "removeConsole",
            "data": { "propertyName": "log" },
            "desc": "Remove the console.log()."
          }
        ],
        "suppressions": [{ "kind": "directive", "justification": "" }]
      },
      {
        "ruleId": "no-console",
        "severity": 2,
        "message": "Unexpected console statement. Only these console methods are allowed: warn, error.",
        "line": 1118,
        "column": 9,
        "nodeType": "MemberExpression",
        "messageId": "limited",
        "endLine": 1118,
        "endColumn": 20,
        "suggestions": [
          {
            "fix": { "range": [35724, 35815], "text": "" },
            "messageId": "removeConsole",
            "data": { "propertyName": "log" },
            "desc": "Remove the console.log()."
          }
        ],
        "suppressions": [{ "kind": "directive", "justification": "" }]
      }
    ],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 11,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import {\n    Timestamp,\n    addDoc,\n    collection,\n    deleteDoc,\n    doc,\n    getDoc,\n    getDocs,\n    limit,\n    query,\n    setDoc,\n    updateDoc,\n    where,\n} from 'firebase/firestore';\nimport { db } from '../firebase';\n\nconst USERS_COLLECTION = 'users';\nconst FRIENDSHIPS_COLLECTION = 'friendships';\nconst REFERRALS_COLLECTION = 'referrals';\n\n/**\n * Get or create user profile document in Firestore.\n * If user doesn't exist, creates a new profile with default values.\n *\n * @param {string} username - User's display name (used as document ID)\n * @param {string} uid - Firebase Auth UID\n * @param {object} additionalData - Additional profile data (realName, avatarId, email)\n * @returns {Promise<{username: string, joinedAt: Timestamp, friendCount: number, gamesPlayed: number, bestScore: number, referralCode: string}|null>}\n *          User profile object or null if username is invalid\n *\n * @example\n * const profile = await ensureUserProfile('JohnDoe', 'uid123', { email: 'john@example.com' });\n * // Returns existing profile or creates new one with defaults\n */\nexport const ensureUserProfile = async (usernameInput, uid = null, additionalData = {}) => {\n  if (!usernameInput) {return null;}\n  const username = usernameInput.toLowerCase();\n\n  const userRef = doc(db, USERS_COLLECTION, username);\n  const userDoc = await getDoc(userRef);\n\n  // CHECK EXISTING BY EMAIL FIRST (if new username provided but email exists)\n  // This prevents creating a duplicate user if they sign in with same email but different provider/name\n  if (additionalData.email && !userDoc.exists()) {\n    const existingUser = await getUserByEmail(additionalData.email);\n    if (existingUser) {\n      // User exists with this email but different username.\n      // We should probably return the EXISTING user profile instead of creating a new one.\n      // Or we could trigger a merge, but for now let's return the existing one to prevent duplication.\n      // eslint-disable-next-line no-console\n      console.log(\n        `[Auth] Found existing user by email ${additionalData.email}: ${existingUser.username}`\n      );\n      return existingUser;\n    }\n  }\n\n  if (!userDoc.exists()) {\n    // Create new user profile\n    const now = Timestamp.now();\n    const profileData = {\n      username,\n      uid: uid, // Store Firebase Auth UID for permissions\n      email: additionalData.email ? additionalData.email.toLowerCase().trim() : null, // Normalize email\n      realName: additionalData.realName || '',\n      avatarId: additionalData.avatarId || Math.floor(Math.random() * 20) + 1,\n      joinedAt: now,\n      createdAt: now,\n      updatedAt: now,\n      friendCount: 0,\n      gamesPlayed: 0,\n      bestScore: 0,\n      totalScore: 0, // Cumulative score (sum of first daily games)\n      referralCode: username.toLowerCase().replace(/[^a-z0-9]/g, ''),\n      // Streak tracking\n      streak: 0,\n      maxStreak: 0,\n      lastPlayDate: null, // YYYYMMDD format\n      // Giuros currency system\n      giuros: 10,\n      purchasedCosmetics: [],\n      equippedCosmetics: {},\n      lastLoginDate: null,\n      // User preferences\n      language: additionalData.language || 'en',\n      theme: 'auto', // 'dark' | 'light' | 'auto'\n      notificationSettings: {\n        dailyReminder: true,\n        friendActivity: true,\n        newsUpdates: true,\n      },\n    };\n    await setDoc(userRef, profileData);\n    return profileData;\n  }\n\n  const data = userDoc.data();\n  /*\n   * SELF-HEAL: Update existing users with new schema fields\n   * Checks for missing UID, email, streak, language, etc.\n   */\n  const updates = {};\n  const now = Timestamp.now();\n\n  // 1. Critical Identifiers\n  if (uid && data.uid !== uid) {updates.uid = uid;}\n  if (additionalData.email && !data.email)\n    {updates.email = additionalData.email.toLowerCase().trim();}\n\n  // 2. Dates\n  if (!data.createdAt && data.joinedAt) {updates.createdAt = data.joinedAt;}\n  if (!data.updatedAt) {updates.updatedAt = now;}\n\n  // 3. New Streak & Score Fields\n  if (data.streak === undefined) {updates.streak = 0;}\n  if (data.maxStreak === undefined) {updates.maxStreak = 0;}\n  if (data.lastPlayDate === undefined) {updates.lastPlayDate = null;}\n  if (data.totalScore === undefined) {updates.totalScore = 0;}\n\n  // 4. Preferences\n  if (data.language === undefined) {updates.language = additionalData.language || 'en';}\n  if (data.theme === undefined) {updates.theme = 'auto';}\n  if (data.notificationSettings === undefined) {\n    updates.notificationSettings = {\n      dailyReminder: true,\n      friendActivity: true,\n      newsUpdates: true,\n    };\n  }\n\n  // 5. Init Games Played if missing\n  if (data.gamesPlayed === undefined) {updates.gamesPlayed = 0;}\n  if (data.bestScore === undefined) {updates.bestScore = 0;}\n\n  // Apply updates if needed\n  if (Object.keys(updates).length > 0) {\n    await updateDoc(userRef, updates);\n    Object.assign(data, updates);\n  }\n\n  return { id: userDoc.id, ...data };\n};\n\n/**\n * Look up a user profile by email address, case-insensitive.\n *\n * @param {string} email\n * @returns {Promise<{username: string, ...}|null>}\n */\nexport const getUserByEmail = async email => {\n  if (!email) {return null;}\n  const cleanEmail = email.toLowerCase().trim();\n  try {\n    const q = query(collection(db, USERS_COLLECTION), where('email', '==', cleanEmail), limit(1));\n    const snapshot = await getDocs(q);\n    if (!snapshot.empty) {\n      const doc = snapshot.docs[0];\n      return { id: doc.id, ...doc.data() };\n    }\n    return null;\n  } catch (e) {\n    console.error('Error fetching user by email:', e);\n    return null;\n  }\n};\n\n/**\n * Update user stats after a game (Streak, Total Score, etc.)\n * @param {string} username\n * @param {object} stats - { streak, totalScore, lastPlayDate }\n */\nexport const updateUserGameStats = async (username, { streak, totalScore, lastPlayDate }) => {\n  if (!username) {return;}\n  const lowername = username.toLowerCase();\n  const userRef = doc(db, USERS_COLLECTION, lowername);\n\n  try {\n    const userDoc = await getDoc(userRef);\n    if (!userDoc.exists()) {return;}\n\n    const currentData = userDoc.data();\n    const updates = {\n      gamesPlayed: (currentData.gamesPlayed || 0) + 1,\n      totalScore: totalScore,\n      // Streak cannot be higher than total games played (logic fix)\n      streak: Math.min(streak, (currentData.gamesPlayed || 0) + 1),\n      lastPlayDate: lastPlayDate,\n      updatedAt: Timestamp.now(),\n    };\n\n    // Update Max Streak if current is higher\n    if (streak > (currentData.maxStreak || 0)) {\n      updates.maxStreak = streak;\n    }\n\n    await updateDoc(userRef, updates);\n  } catch (e) {\n    console.error('Error updating game stats:', e);\n  }\n};\n\n// --- ADMIN & FEEDBACK FUNCTIONS ---\n\nconst FEEDBACK_COLLECTION = 'feedback';\n\n/**\n * Submit user feedback\n */\nexport const submitFeedback = async (username, text) => {\n  if (!username || !text) {return;}\n  await addDoc(collection(db, FEEDBACK_COLLECTION), {\n    username,\n    text,\n    status: 'pending', // pending, approved, rejected\n    reward: null, // Set when approved\n    createdAt: Timestamp.now(),\n  });\n};\n\n/**\n * Get all feedback (Admin only)\n */\nexport const getFeedbackList = async () => {\n  try {\n    const q = query(collection(db, FEEDBACK_COLLECTION), limit(100)); // Simple limit for now\n    const snapshot = await getDocs(q);\n    return snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n  } catch (e) {\n    console.error('Error fetching feedback:', e);\n    return [];\n  }\n};\n\n/**\n * Approve feedback and award Giuros (Admin only)\n */\nexport const approveFeedback = async (feedbackId, giurosAmount = 50) => {\n  try {\n    const feedbackRef = doc(db, FEEDBACK_COLLECTION, feedbackId);\n    const feedbackDoc = await getDoc(feedbackRef);\n\n    if (!feedbackDoc.exists()) {\n      throw new Error('Feedback not found');\n    }\n\n    const feedbackData = feedbackDoc.data();\n    const username = feedbackData.username;\n\n    // Award Giuros using the giuros utility\n    const { awardGiuros } = await import('./giuros');\n    await awardGiuros(username, giurosAmount);\n\n    // Update feedback status\n    await updateDoc(feedbackRef, {\n      status: 'approved',\n      reward: giurosAmount,\n      approvedAt: Timestamp.now(),\n    });\n\n    return { success: true, username, reward: giurosAmount };\n  } catch (e) {\n    console.error('Error approving feedback:', e);\n    return { success: false, error: e.message };\n  }\n};\n\n/**\n * Reject feedback (Admin only)\n */\nexport const rejectFeedback = async feedbackId => {\n  try {\n    const feedbackRef = doc(db, FEEDBACK_COLLECTION, feedbackId);\n    await updateDoc(feedbackRef, {\n      status: 'rejected',\n      rejectedAt: Timestamp.now(),\n    });\n    return { success: true };\n  } catch (e) {\n    console.error('Error rejecting feedback:', e);\n    return { success: false, error: e.message };\n  }\n};\n\n/**\n * Delete feedback (Admin only)\n */\nexport const deleteFeedback = async feedbackId => {\n  try {\n    const feedbackRef = doc(db, FEEDBACK_COLLECTION, feedbackId);\n    const { deleteDoc } = await import('firebase/firestore');\n    await deleteDoc(feedbackRef);\n    return { success: true };\n  } catch (e) {\n    console.error('Error deleting feedback:', e);\n    return { success: false, error: e.message };\n  }\n};\n\n/**\n * Check for unseen feedback rewards for a user\n */\nexport const checkUnseenFeedbackRewards = async username => {\n  if (!username) {return [];}\n  try {\n    const q = query(\n      collection(db, FEEDBACK_COLLECTION),\n      where('username', '==', username),\n      where('status', '==', 'approved'),\n      where('notified', '!=', true)\n    );\n    const snapshot = await getDocs(q);\n    return snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n  } catch (e) {\n    console.error('Error checking feedback rewards:', e);\n    return [];\n  }\n};\n\n/**\n * Mark feedback reward as seen\n */\nexport const markFeedbackRewardSeen = async feedbackId => {\n  try {\n    const feedbackRef = doc(db, FEEDBACK_COLLECTION, feedbackId);\n    await updateDoc(feedbackRef, { notified: true });\n  } catch (e) {\n    console.error('Error marking feedback reward seen:', e);\n  }\n};\n\n/**\n * Get all users for admin table (Paginated or Limited)\n */\nexport const getAllUsers = async (limitCount = 50) => {\n  try {\n    const q = query(collection(db, USERS_COLLECTION), limit(limitCount));\n    const snapshot = await getDocs(q);\n    return snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n  } catch (e) {\n    console.error('Error fetching all users:', e);\n    return [];\n  }\n};\n\n/**\n * Update user data as Admin (bypass usual checks, trust rules)\n */\nexport const updateUserAsAdmin = async (targetUsername, data) => {\n  if (!targetUsername || !data) {return;}\n  const userRef = doc(db, USERS_COLLECTION, targetUsername);\n  await updateDoc(userRef, data);\n};\n\n// --- END ADMIN FUNCTIONS ---\n\n/**\n * Delete a user and all their associated data (Highscores, History, Subcollections).\n * @param {string} username - The username to delete.\n */\nexport const deleteUserAndData = async username => {\n  if (!username) {return { success: false, error: 'No username provided' };}\n\n  try {\n    const { deleteDoc, writeBatch } = await import('firebase/firestore');\n\n    // Internal helper to strip @ for scores\n    const cleanUsername = username.startsWith('@') ? username.slice(1) : username;\n\n    // 1. Delete User Profile\n    await deleteDoc(doc(db, USERS_COLLECTION, username));\n\n    // 2. Delete Highscore (Leaderboard Entry)\n    // Highscores typically use the sanitized username as ID (e.g. replacing / with _)\n    const sanitizedHighscoreId = cleanUsername.replace(/\\//g, '_');\n    await deleteDoc(doc(db, 'highscores', sanitizedHighscoreId));\n\n    // 3. Delete Score History (Batch Delete)\n    // Query scores where username matches. This might be large, so we batch it.\n    const scoresRef = collection(db, 'scores');\n    const q = query(scoresRef, where('username', '==', cleanUsername));\n    const snapshot = await getDocs(q);\n\n    const batch = writeBatch(db);\n    let operationCount = 0;\n\n    snapshot.docs.forEach(scoreDoc => {\n      batch.delete(scoreDoc.ref);\n      operationCount++;\n    });\n\n    if (operationCount > 0) {\n      await batch.commit();\n    }\n\n    // 4. (Optional) We could delete subcollections like 'friends' but that requires recursive fetch.\n    // For now, this covers the critical \"leaderboard/score\" requirement.\n\n    return { success: true, count: operationCount };\n  } catch (e) {\n    console.error('Error deleting user:', e);\n    return { success: false, error: e.message };\n  }\n};\n\n/**\n * Fetch user profile from Firestore by username.\n * Falls back to highscores collection if user profile doesn't exist.\n *\n * @param {string} username - User's display name\n * @returns {Promise<{username: string, gamesPlayed: number, bestScore: number, friendCount: number}|null>}\n *          User profile object or null if not found\n *\n * @example\n * const profile = await getUserProfile('JohnDoe');\n * // Returns: { username: 'JohnDoe', gamesPlayed: 15, bestScore: 1850, ... }\n */\nexport const getUserProfile = async username => {\n  if (!username) {return null;}\n\n  const userRef = doc(db, USERS_COLLECTION, username);\n  const userDoc = await getDoc(userRef);\n  const profileData = userDoc.exists() ? { id: userDoc.id, ...userDoc.data() } : null;\n\n  // FAST PATH: If we have a healthy profile, return it\n  if (profileData && profileData.gamesPlayed > 0) {\n    return profileData;\n  }\n\n  // SLOW PATH / HEALING: Missing profile or zero stats. Check legacy collections.\n  try {\n    // 1. Check Highscore (Best Score)\n    const highscoreRef = doc(db, 'highscores', username);\n    const highscoreDoc = await getDoc(highscoreRef);\n    let bestScore = 0;\n    if (highscoreDoc.exists()) {\n      bestScore = highscoreDoc.data().score || 0;\n    }\n\n    // 2. Count Total Games from 'scores' collection\n    // Note: 'countFromServer' is efficient but requires backend support.\n    // If not available in this client SDK version, we standard query.\n    // Optimizing by selecting only one field.\n    const q = query(collection(db, 'scores'), where('username', '==', username));\n    const snapshot = await getDocs(q); // Iterate to count. Expensive but necessary for healing.\n    const gamesPlayed = snapshot.size;\n\n    // 3. Count Friends from subcollection (matches friends.js storage)\n    const friendsSnapshot = await getDocs(collection(db, USERS_COLLECTION, username, 'friends'));\n    const friendCount = friendsSnapshot.size;\n\n    // 4. Determine \"Player Since\" (First Game Date)\n    // If we have scores, find the earliest one\n    let joinedAt = profileData?.joinedAt || Timestamp.now();\n    if (!snapshot.empty) {\n      let earliestGame = null;\n      snapshot.forEach(doc => {\n        const d = doc.data();\n        let t = null;\n        if (d.timestamp?.toDate) {t = d.timestamp.toDate();}\n        else if (d.timestamp?.seconds) {t = new Date(d.timestamp.seconds * 1000);}\n        else if (d.timestamp) {t = new Date(d.timestamp);} // Number or string\n\n        if (t) {\n          if (!earliestGame || t < earliestGame) {\n            earliestGame = t;\n          }\n        }\n      });\n\n      // If earliest game is older than current joinedAt (or joinedAt is essentially \"now\" from defaults), update it\n      const currentJoinedDate = joinedAt.toDate\n        ? joinedAt.toDate()\n        : new Date(joinedAt.seconds * 1000);\n\n      // Heuristic: If earliest game is essentially older, or we have a default \"now\" joinedAt\n      if (earliestGame && earliestGame < currentJoinedDate) {\n        joinedAt = Timestamp.fromDate(earliestGame);\n      }\n    }\n\n    // 5. Construct Corrected Data\n    const correctedData = {\n      username,\n      gamesPlayed: Math.max(profileData?.gamesPlayed || 0, gamesPlayed),\n      bestScore: Math.max(profileData?.bestScore || 0, bestScore),\n      friendCount: Math.max(profileData?.friendCount || 0, friendCount),\n      joinedAt: joinedAt,\n      migratedTo: profileData?.migratedTo || null,\n    };\n\n    // 6. SELF-HEAL: Update Firestore if we found data\n    const needsUpdate =\n      correctedData.gamesPlayed !== (profileData?.gamesPlayed || 0) ||\n      correctedData.bestScore !== (profileData?.bestScore || 0) ||\n      correctedData.friendCount !== (profileData?.friendCount || 0) ||\n      // Simple timestamp comparison (seconds)\n      correctedData.joinedAt.seconds !== (profileData?.joinedAt?.seconds || 0);\n\n    if (needsUpdate || correctedData.gamesPlayed > 0) {\n      if (userDoc.exists()) {\n        await updateDoc(userRef, {\n          gamesPlayed: correctedData.gamesPlayed,\n          bestScore: correctedData.bestScore,\n          friendCount: correctedData.friendCount,\n          joinedAt: correctedData.joinedAt,\n        });\n        // eslint-disable-next-line no-console\n        console.log(\n          `[UserProfile] Healed stats for ${username}: Games=${correctedData.gamesPlayed}, Friends=${correctedData.friendCount}, Since=${correctedData.joinedAt.toDate()}`\n        );\n      } else {\n        // If profile didn't exist at all, create it\n        await setDoc(userRef, {\n          ...correctedData,\n          createdAt: Timestamp.now(),\n        });\n      }\n    }\n\n    return correctedData;\n  } catch (e) {\n    console.error('Error healing user profile:', e);\n    // Return what we have as fallback\n    return profileData || { username, gamesPlayed: 0, bestScore: 0, friendCount: 0 };\n  }\n};\n\n/**\n * Update user statistics after completing a game.\n * Increments games played count and updates best score if improved.\n *\n * @param {string} username - User's display name\n * @param {number} score - Score achieved in the game\n * @returns {Promise<void>}\n *\n * @example\n * await updateUserStats('JohnDoe', 1900);\n * // Updates gamesPlayed and bestScore if 1900 > previous best\n */\nexport const updateUserStats = async (username, score) => {\n  if (!username) {return;}\n\n  const userRef = doc(db, USERS_COLLECTION, username);\n  const userDoc = await getDoc(userRef);\n\n  if (userDoc.exists()) {\n    const data = userDoc.data();\n    const newGamesPlayed = (data.gamesPlayed || 0) + 1;\n    const currentBest = Number(data.bestScore) || 0;\n    const currentScore = Number(score) || 0;\n    const newBestScore = Math.max(currentBest, currentScore);\n\n    await updateDoc(userRef, {\n      gamesPlayed: newGamesPlayed,\n      bestScore: newBestScore,\n    });\n  } else {\n    await ensureUserProfile(username);\n    await updateDoc(userRef, {\n      gamesPlayed: 1,\n      bestScore: score,\n    });\n  }\n};\n\n/**\n * Send a friend request from one user to another.\n * Checks if friendship already exists before creating request.\n *\n * @param {string} fromUser - Username of requester\n * @param {string} toUser - Username of recipient\n * @returns {Promise<void>}\n *\n * @example\n * await sendFriendRequest('JohnDoe', 'JaneSmith');\n * // Creates pending friendship document in Firestore\n */\nexport const sendFriendRequest = async (fromUser, toUser) => {\n  if (!fromUser || !toUser || fromUser === toUser) {return;}\n\n  // Use composite key to prevent duplicates: [user1, user2].sort().join('_')\n  // This physically ensures only ONE document can exist for this pair.\n  const users = [fromUser, toUser].sort();\n  const friendshipId = `${users[0]}_${users[1]}`;\n  const friendshipRef = doc(db, FRIENDSHIPS_COLLECTION, friendshipId);\n\n  // Check if it exists first (to avoid overwriting status if already exists)\n  const docSnap = await getDoc(friendshipRef);\n\n  if (docSnap.exists()) {\n    const data = docSnap.data();\n    // If already friends or pending, do nothing\n    if (data.status === 'accepted' || data.status === 'pending') {\n      return;\n    }\n  }\n\n  // Fetch emails for identity integrity\n  let user1Email = null;\n  let user2Email = null;\n  try {\n    const [u1Doc, u2Doc] = await Promise.all([\n      getDoc(doc(db, USERS_COLLECTION, fromUser)),\n      getDoc(doc(db, USERS_COLLECTION, toUser)),\n    ]);\n    if (u1Doc.exists()) {user1Email = u1Doc.data().email || null;}\n    if (u2Doc.exists()) {user2Email = u2Doc.data().email || null;}\n  } catch (e) {\n    console.error('Error fetching emails for friend request:', e);\n  }\n\n  await setDoc(friendshipRef, {\n    user1: fromUser, // Keep original requester distinction if needed\n    user2: toUser,\n    user1Email,\n    user2Email,\n    participants: users, // Helpful for querying\n    status: 'pending',\n    createdAt: Timestamp.now(),\n    updatedAt: Timestamp.now(),\n  });\n};\n\n/**\n * Accept friend request\n */\nexport const acceptFriendRequest = async requestId => {\n  const requestRef = doc(db, FRIENDSHIPS_COLLECTION, requestId);\n  await updateDoc(requestRef, { status: 'accepted' });\n\n  // Update friend counts\n  const requestDoc = await getDoc(requestRef);\n  if (requestDoc.exists()) {\n    const data = requestDoc.data();\n    await incrementFriendCount(data.user1);\n    await incrementFriendCount(data.user2);\n  }\n};\n\n/**\n * Increment friend count\n */\nconst incrementFriendCount = async username => {\n  const userRef = doc(db, USERS_COLLECTION, username);\n  const userDoc = await getDoc(userRef);\n  if (userDoc.exists()) {\n    const data = userDoc.data();\n    await updateDoc(userRef, { friendCount: (data.friendCount || 0) + 1 });\n  }\n};\n\n/**\n * Get friendship status between two users\n */\nexport const getFriendshipStatus = async (user1, user2) => {\n  try {\n    // Check both directions\n    const q1 = query(\n      collection(db, FRIENDSHIPS_COLLECTION),\n      where('user1', '==', user1),\n      where('user2', '==', user2)\n    );\n    const q2 = query(\n      collection(db, FRIENDSHIPS_COLLECTION),\n      where('user1', '==', user2),\n      where('user2', '==', user1)\n    );\n\n    const [snap1, snap2] = await Promise.all([getDocs(q1), getDocs(q2)]);\n\n    let status = 'none';\n    snap1.forEach(doc => {\n      const data = doc.data();\n      if (data.status === 'accepted') {status = 'friends';}\n      else if (data.status === 'pending') {status = 'pending';}\n    });\n    snap2.forEach(doc => {\n      const data = doc.data();\n      if (data.status === 'accepted') {status = 'friends';}\n      else if (data.status === 'pending') {status = 'pending';}\n    });\n\n    return status;\n  } catch (e) {\n    console.error('Error checking friendship:', e);\n    return 'none';\n  }\n};\n\n/**\n * Get friend count for a user\n */\nexport const getFriendCount = async username => {\n  if (!username) {return 0;}\n\n  try {\n    // Count friends from subcollection (matches friends.js storage)\n    const friendsSnapshot = await getDocs(collection(db, USERS_COLLECTION, username, 'friends'));\n    return friendsSnapshot.size;\n  } catch (e) {\n    console.error('Error getting friend count:', e);\n    return 0;\n  }\n};\n\n/**\n * Record a referral when a new user signs up via referral link.\n * Creates a document in the referrals collection.\n *\n * @param {string} referrer - Username of the user who referred\n * @param {string} referred - Username of the new user\n * @returns {Promise<void>}\n *\n * @example\n * await recordReferral('JohnDoe', 'NewUser123');\n * // Saves referral record with timestamp\n */\nexport const recordReferral = async (referrer, referred) => {\n  if (!referrer || !referred || referrer === referred) {return;}\n\n  // Fetch emails\n  let referrerEmail = null;\n  let referredEmail = null;\n  try {\n    const [r1Doc, r2Doc] = await Promise.all([\n      getDoc(doc(db, USERS_COLLECTION, referrer)),\n      getDoc(doc(db, USERS_COLLECTION, referred)),\n    ]);\n    if (r1Doc.exists()) {referrerEmail = r1Doc.data().email || null;}\n    if (r2Doc.exists()) {referredEmail = r2Doc.data().email || null;}\n  } catch (e) {\n    console.error('Error fetching emails for referral:', e);\n  }\n\n  const { increment } = await import('firebase/firestore');\n\n  const batch = (await import('firebase/firestore')).writeBatch(db);\n  const referralRef = doc(collection(db, REFERRALS_COLLECTION));\n  batch.set(referralRef, {\n    referrer,\n    referred,\n    referrerEmail,\n    referredEmail,\n    createdAt: Timestamp.now(),\n  });\n\n  // Increment invite count for referrer in their badgeStats\n  const referrerStatsRef = doc(db, USERS_COLLECTION, referrer, 'badgeStats', 'current');\n  // We use set with merge to ensure it exists if it doesn't\n  batch.set(referrerStatsRef, { inviteCount: increment(1) }, { merge: true });\n\n  // Mark the new user as referred (so we can award bonus later if needed)\n  const referredUserRef = doc(db, USERS_COLLECTION, referred);\n  batch.update(referredUserRef, { referredBy: referrer });\n\n  await batch.commit();\n};\n\n/**\n * Get pending friend requests for a user\n */\nexport const getPendingFriendRequests = async username => {\n  if (!username) {return [];}\n\n  const q = query(\n    collection(db, FRIENDSHIPS_COLLECTION),\n    where('user2', '==', username),\n    where('status', '==', 'pending')\n  );\n\n  const snapshot = await getDocs(q);\n  const requests = [];\n  snapshot.forEach(doc => requests.push({ id: doc.id, ...doc.data() }));\n  return requests;\n};\n\nconst BLOCKS_COLLECTION = 'blocks';\n\n/**\n * Block a user\n */\nexport const blockUser = async (blocker, blocked) => {\n  if (!blocker || !blocked || blocker === blocked) {return;}\n\n  const blockId = `${blocker}_${blocked}`;\n  await setDoc(doc(db, BLOCKS_COLLECTION, blockId), {\n    blocker,\n    blocked,\n    createdAt: Timestamp.now(),\n  });\n};\n\n/**\n * Unblock a user\n */\nexport const unblockUser = async (blocker, blocked) => {\n  if (!blocker || !blocked) {return;}\n\n  const blockId = `${blocker}_${blocked}`;\n  const blockRef = doc(db, BLOCKS_COLLECTION, blockId);\n  const { deleteDoc } = await import('firebase/firestore');\n  await deleteDoc(blockRef);\n};\n\n/**\n * Check if user1 has blocked user2\n */\nexport const getBlockStatus = async (user1, user2) => {\n  try {\n    const blockId = `${user1}_${user2}`;\n    const blockRef = doc(db, BLOCKS_COLLECTION, blockId);\n    const blockDoc = await getDoc(blockRef);\n    return blockDoc.exists();\n  } catch (e) {\n    console.error('Error checking block status:', e);\n    return false;\n  }\n};\n\n/**\n * Update user profile data\n */\nexport const updateUserProfile = async (username, data) => {\n  if (!username || !data) {return;}\n\n  const userRef = doc(db, USERS_COLLECTION, username);\n  await updateDoc(userRef, data);\n};\n\n/**\n * Migrate a user from an old username/real name to a new handle.\n * Copies all profile data (gamesPlayed, bestScore, etc.) to the new document.\n *\n * @param {string} oldUsername - The old username (e.g. \"Roberto\")\n * @param {string} newHandle - The new handle (e.g. \"Roberto#1234\")\n * @returns {Promise<void>}\n */\nexport const migrateUser = async (oldUsername, newHandle) => {\n  if (!oldUsername || !newHandle || oldUsername === newHandle) {return;}\n\n  try {\n    const oldRef = doc(db, USERS_COLLECTION, oldUsername);\n    const oldDoc = await getDoc(oldRef);\n    let profileData = {};\n\n    if (oldDoc.exists()) {\n      profileData = oldDoc.data();\n      // Mark old profile as migrated\n      await updateDoc(oldRef, { migratedTo: newHandle });\n    }\n\n    // 1. Migrate User Profile\n    const newRef = doc(db, USERS_COLLECTION, newHandle);\n    const newData = {\n      ...profileData,\n      username: newHandle,\n      realName: profileData.realName || oldUsername,\n      avatarId: profileData.avatarId || Math.floor(Math.random() * 20) + 1,\n      // Critical: Ensure cosmetics and currency are migrated even if undefined in source (fallback to defaults if needed)\n      purchasedCosmetics: profileData.purchasedCosmetics || [],\n      equippedCosmetics: profileData.equippedCosmetics || {},\n      giuros: profileData.giuros ?? 10,\n\n      // Stats & Preferences\n      streak: profileData.streak || 0,\n      maxStreak: profileData.maxStreak || 0,\n      totalScore: profileData.totalScore || 0,\n      lastPlayDate: profileData.lastPlayDate || null,\n      notificationSettings: profileData.notificationSettings || {\n        dailyReminder: true,\n        friendActivity: true,\n        newsUpdates: true,\n      },\n      theme: profileData.theme || 'auto',\n      language: profileData.language || 'en',\n\n      // Preserve confirmed data\n      joinedAt: profileData.joinedAt || Timestamp.now(),\n      migratedFrom: oldUsername,\n      updatedAt: Timestamp.now(),\n      id: newHandle,\n    };\n    await setDoc(newRef, newData);\n\n    // 2. Migrate Highscore (Search Index)\n    // This ensures 'searchUsers' finds the NEW handle and NOT the old name\n    const oldHighscoreRef = doc(db, 'highscores', oldUsername);\n    const oldHighscoreDoc = await getDoc(oldHighscoreRef);\n\n    if (oldHighscoreDoc.exists()) {\n      const hsData = oldHighscoreDoc.data();\n      const newHighscoreRef = doc(db, 'highscores', newHandle);\n      await setDoc(newHighscoreRef, {\n        ...hsData,\n        username: newHandle,\n        migratedFrom: oldUsername,\n      });\n      // Delete old highscore to remove from search results\n      const { deleteDoc } = await import('firebase/firestore');\n      await deleteDoc(oldHighscoreRef);\n    }\n\n    // 3. Migrate Recent Scores (Best Effort)\n    try {\n      const scoresQ = query(\n        collection(db, 'scores'),\n        where('username', '==', oldUsername),\n        limit(50)\n      );\n      const scoresSnap = await getDocs(scoresQ);\n      const { writeBatch } = await import('firebase/firestore');\n      const batch = writeBatch(db);\n\n      let batchCount = 0;\n      scoresSnap.forEach(scoreDoc => {\n        batch.update(scoreDoc.ref, { username: newHandle });\n        batchCount++;\n      });\n\n      if (batchCount > 0) {\n        await batch.commit();\n        // eslint-disable-next-line no-console\n        console.log(`[Migration] Migrated ${batchCount} recent scores.`);\n      }\n    } catch (e) {\n      console.warn('[Migration] Failed to migrate scores (non-critical):', e);\n    }\n\n    // 4. Migrate Subcollections (Requests, Friends, Games)\n    const subcollections = ['requests', 'friends', 'games'];\n    for (const sub of subcollections) {\n      try {\n        const subQ = query(collection(db, USERS_COLLECTION, oldUsername, sub));\n        const subSnap = await getDocs(subQ);\n\n        subSnap.forEach(async docMsg => {\n          const data = docMsg.data();\n          // Copy to new handle profile\n          await setDoc(doc(db, USERS_COLLECTION, newHandle, sub, docMsg.id), data);\n          // Delete from old profile\n          await deleteDoc(docMsg.ref);\n        });\n\n        if (!subSnap.empty)\n          // eslint-disable-next-line no-console\n          {console.log(`[Migration] Migrated ${subSnap.size} documents in '${sub}'`);}\n      } catch (e) {\n        console.warn(`[Migration] Failed to migrate subcollection ${sub}:`, e);\n      }\n    }\n\n    // eslint-disable-next-line no-console\n    console.log(`[Migration] Successfully migrated ${oldUsername} to ${newHandle}`);\n  } catch (error) {\n    console.error('[Migration] Error migrating user:', error);\n    throw error;\n  }\n};\n\n/**\n * Self-healing/Repair function.\n * Ensures that if a user claims to be migratedFrom 'OldName',\n * that 'OldName' actually points to them, and 'OldName' is removed from highscores.\n */\nexport const healMigration = async handle => {\n  if (!handle) {return;}\n  try {\n    const userRef = doc(db, USERS_COLLECTION, handle);\n    const userDoc = await getDoc(userRef);\n    if (!userDoc.exists()) {return;}\n\n    const data = userDoc.data();\n    const oldName = data.migratedFrom;\n\n    if (oldName && oldName !== handle) {\n      // 1. Ensure Backward Link (Old -> New)\n      const oldUserRef = doc(db, USERS_COLLECTION, oldName);\n      const oldUserDoc = await getDoc(oldUserRef);\n\n      // If old doc exists but doesn't point to us, fix it\n      if (oldUserDoc.exists()) {\n        const oldData = oldUserDoc.data();\n        if (oldData.migratedTo !== handle) {\n          await updateDoc(oldUserRef, { migratedTo: handle });\n          // eslint-disable-next-line no-console\n          console.log(`[Heal] Fixed migratedTo link for ${oldName}`);\n        }\n      } else {\n        // If old doc is gone, we might want to recreate a tombstone?\n        // For now, assume if it's gone, people naturally won't find it effectively\n        // unless highscore exists.\n      }\n\n      // 2. Cleanup Old Highscore (Ghost Search Result)\n      const oldHsRef = doc(db, 'highscores', oldName);\n      const oldHsDoc = await getDoc(oldHsRef);\n      if (oldHsDoc.exists()) {\n        const { deleteDoc } = await import('firebase/firestore');\n        await deleteDoc(oldHsRef);\n        // eslint-disable-next-line no-console\n        console.log(`[Heal] Removed ghost highscore for ${oldName}`);\n      }\n    }\n  } catch (e) {\n    console.warn('[Heal] Migration repair failed:', e);\n  }\n};\n\n/**\n * Check if the user has a successful referral TODAY.\n * Used to grant a \"Retry\" bonus for the daily challenge.\n */\nexport const hasDailyReferral = async username => {\n  if (!username) {return false;}\n\n  try {\n    // Helper functionality usually relies on timestamp query\n    // Let's use Timestamp.now() filtering\n\n    // We need to import getTodaySeed or replicate logic.\n    // Easier to just query by timestamp > start of day.\n    const startOfDay = new Date();\n    startOfDay.setHours(0, 0, 0, 0);\n\n    const q = query(\n      collection(db, REFERRALS_COLLECTION),\n      where('referrer', '==', username),\n      where('createdAt', '>=', Timestamp.fromDate(startOfDay))\n    );\n\n    const snap = await getDocs(q);\n    return !snap.empty;\n  } catch (e) {\n    console.error('Error checking daily referral:', e);\n    return false;\n  }\n};\n\n/**\n * Get the referrer of a user (who sent them the referral link)\n * Returns null if user was not referred or bonus already awarded\n * @param {string} username - The referred user's username\n * @returns {Promise<string|null>} - The referrer's username or null\n */\nexport const getReferrer = async username => {\n  if (!username) {return null;}\n\n  try {\n    const q = query(\n      collection(db, REFERRALS_COLLECTION),\n      where('referred', '==', username),\n      limit(1)\n    );\n\n    const snap = await getDocs(q);\n    if (snap.empty) {return null;}\n\n    const referralDoc = snap.docs[0];\n    const data = referralDoc.data();\n\n    // Check if bonus was already awarded\n    if (data.bonusAwarded) {return null;}\n\n    // Mark bonus as awarded\n    await updateDoc(referralDoc.ref, { bonusAwarded: true });\n\n    return data.referrer;\n  } catch (e) {\n    console.error('Error getting referrer:', e);\n    return null;\n  }\n};\n// --- User Game History ---\nconst GAMES_SUBCOLLECTION = 'games';\n\n/**\n * Save game result to user's personal history subcollection\n * @param {string} username\n * @param {object} gameData\n */\nexport const saveUserGameResult = async (username, gameData) => {\n  if (!username) {return;}\n  try {\n    const gamesRef = collection(db, USERS_COLLECTION, username.toLowerCase(), GAMES_SUBCOLLECTION);\n    await addDoc(gamesRef, {\n      ...gameData,\n      savedAt: Timestamp.now(),\n    });\n  } catch (e) {\n    console.error('Error saving user game result:', e);\n  }\n};\n\n/**\n * Get user's game history\n * @param {string} username\n * @returns {Promise<Array>}\n */\nexport const getUserGameHistory = async username => {\n  if (!username) {return [];}\n  try {\n    const cleanUsername = username.toLowerCase().replace(/^@/, '');\n\n    // Try subcollection first\n    const gamesRef = collection(db, USERS_COLLECTION, cleanUsername, GAMES_SUBCOLLECTION);\n    let snapshot = await getDocs(query(gamesRef, limit(100)));\n\n    // Fallback to scores collection if subcollection is empty\n    if (snapshot.empty) {\n      // Simple query without orderBy to avoid composite index requirement\n      const scoresRef = collection(db, 'scores');\n      const scoresQuery = query(scoresRef, where('username', '==', cleanUsername), limit(100));\n      snapshot = await getDocs(scoresQuery);\n\n      // Log for debugging\n      if (import.meta.env.DEV) {\n        // eslint-disable-next-line no-console\n        console.log(`[Profile] Fallback query found ${snapshot.size} scores for ${cleanUsername}`);\n      }\n    }\n\n    // Map and normalize data structure\n    const results = snapshot.docs.map(d => {\n      const data = d.data();\n      return {\n        ...data,\n        // Ensure date field exists (scores use 'date', some legacy use 'timestamp')\n        date:\n          data.date ||\n          (data.timestamp?.seconds\n            ? parseInt(\n                new Date(data.timestamp.seconds * 1000).toISOString().slice(0, 10).replace(/-/g, ''),\n                10\n              )\n            : null),\n        score: data.score || 0,\n      };\n    });\n\n    // Sort by date descending (client-side since we removed orderBy)\n    results.sort((a, b) => (b.date || 0) - (a.date || 0));\n\n    return results;\n  } catch (e) {\n    console.error('Error fetching user game history:', e);\n    return [];\n  }\n};\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/utils/stats.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/utils/storage.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/src/utils/wiki.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/tailwind.config.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/verify_streets.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/vite.config.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "/Users/robertosanchezgallego/Desktop/Girify/vitest.config.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  }
]
